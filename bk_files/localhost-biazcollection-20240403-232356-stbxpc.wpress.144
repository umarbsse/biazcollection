e this behavior. Default false.
	 * - short_description: bool|string A brief, non-html description that will appear in CLI results. Default 'Test passed!'.
	 * - long_description: bool|string An html description that will appear in the site health page. Default false.
	 * - severity: bool|string 'critical', 'recommended', or 'good'. Default: false.
	 * - action: bool|string A URL for the recommended action. Default: false
	 * - action_label: bool|string The label for the recommended action. Default: false
	 * - show_in_site_health: bool True if the test should be shown on the Site Health page. Default: true
	 *
	 * @param array $args Arguments to override defaults.
	 *
	 * @return array Test results.
	 */
	public static function passing_test( $args ) {
		$defaults                      = self::test_result_defaults();
		$defaults['short_description'] = __( 'Test passed!', 'jetpack' );

		$args = wp_parse_args( $args, $defaults );

		$args['pass'] = true;

		return $args;
	}

	/**
	 * Helper function to return consistent responses for a skipped test.
	 * Possible Args:
	 * - name: string The raw method name that runs the test. Default unnamed_test.
	 * - label: bool|string If false, tests will be labeled with their `name`. You can pass a string to override this behavior. Default false.
	 * - short_description: bool|string A brief, non-html description that will appear in CLI results, and as headings in admin UIs. Default false.
	 * - long_description: bool|string An html description that will appear in the site health page. Default false.
	 * - severity: bool|string 'critical', 'recommended', or 'good'. Default: false.
	 * - action: bool|string A URL for the recommended action. Default: false
	 * - action_label: bool|string The label for the recommended action. Default: false
	 * - show_in_site_health: bool True if the test should be shown on the Site Health page. Default: true
	 *
	 * @param array $args Arguments to override defaults.
	 *
	 * @return array Test results.
	 */
	public static function skipped_test( $args = array() ) {
		$args = wp_parse_args(
			$args,
			self::test_result_defaults()
		);

		$args['pass'] = 'skipped';

		return $args;
	}

	/**
	 * Helper function to return consistent responses for an informational test.
	 * Possible Args:
	 * - name: string The raw method name that runs the test. Default unnamed_test.
	 * - label: bool|string If false, tests will be labeled with their `name`. You can pass a string to override this behavior. Default false.
	 * - short_description: bool|string A brief, non-html description that will appear in CLI results, and as headings in admin UIs. Default false.
	 * - long_description: bool|string An html description that will appear in the site health page. Default false.
	 * - severity: bool|string 'critical', 'recommended', or 'good'. Default: false.
	 * - action: bool|string A URL for the recommended action. Default: false
	 * - action_label: bool|string The label for the recommended action. Default: false
	 * - show_in_site_health: bool True if the test should be shown on the Site Health page. Default: true
	 *
	 * @param array $args Arguments to override defaults.
	 *
	 * @return array Test results.
	 */
	public static function informational_test( $args = array() ) {
		$args = wp_parse_args(
			$args,
			self::test_result_defaults()
		);

		$args['pass'] = 'informational';

		return $args;
	}

	/**
	 * Helper function to return consistent responses for a failing test.
	 * Possible Args:
	 * - name: string The raw method name that runs the test. Default unnamed_test.
	 * - label: bool|string If false, tests will be labeled with their `name`. You can pass a string to override this behavior. Default false.
	 * - short_description: bool|string A brief, non-html description that will appear in CLI results, and as headings in admin UIs. Default 'Test failed!'.
	 * - long_description: bool|string An html description that will appear in the site health page. Default false.
	 * - severity: bool|string 'critical', 'recommended', or 'good'. Default: 'critical'.
	 * - action: bool|string A URL for the recommended action. Default: false.
	 * - action_label: bool|string The label for the recommended action. Default: false.
	 * - show_in_site_health: bool True if the test should be shown on the Site Health page. Default: true
	 *
	 * @since 7.1.0
	 *
	 * @param array $args Arguments to override defaults.
	 *
	 * @return array Test results.
	 */
	public static function failing_test( $args ) {
		$defaults                      = self::test_result_defaults();
		$defaults['short_description'] = __( 'Test failed!', 'jetpack' );
		$defaults['severity']          = 'critical';

		$args = wp_parse_args( $args, $defaults );

		$args['pass'] = false;

		return $args;
	}

	/**
	 * Provides defaults for test arguments.
	 *
	 * @since 8.5.0
	 *
	 * @return array Result defaults.
	 */
	private static function test_result_defaults() {
		return array(
			'name'                => 'unnamed_test',
			'label'               => false,
			'short_description'   => false,
			'long_description'    => false,
			'severity'            => false,
			'action'              => false,
			'action_label'        => false,
			'show_in_site_health' => true,
		);
	}

	/**
	 * Provide WP_CLI friendly testing results.
	 *
	 * @since 7.1.0
	 * @since 7.3.0 Add 'type'
	 *
	 * @param string $type  Test type, direct or async.
	 * @param string $group Testing group whose results we are outputting. Default all tests.
	 */
	public function output_results_for_cli( $type = 'all', $group = 'all' ) {
		if ( defined( 'WP_CLI' ) && WP_CLI ) {
			if ( ( new Status() )->is_offline_mode() ) {
				WP_CLI::line( __( 'Jetpack is in Offline Mode:', 'jetpack' ) );
				WP_CLI::line( Jetpack::development_mode_trigger_text() );
			}
			WP_CLI::line( __( 'TEST RESULTS:', 'jetpack' ) );
			foreach ( $this->raw_results( $group ) as $test ) {
				if ( true === $test['pass'] ) {
					WP_CLI::log( WP_CLI::colorize( '%gPassed:%n  ' . $test['name'] ) );
				} elseif ( 'skipped' === $test['pass'] ) {
					WP_CLI::log( WP_CLI::colorize( '%ySkipped:%n ' . $test['name'] ) );
					if ( $test['short_description'] ) {
						WP_CLI::log( '         ' . $test['short_description'] ); // Number of spaces to "tab indent" the reason.
					}
				} elseif ( 'informational' === $test['pass'] ) {
					WP_CLI::log( WP_CLI::colorize( '%yInfo:%n    ' . $test['name'] ) );
					if ( $test['short_description'] ) {
						WP_CLI::log( '         ' . $test['short_description'] ); // Number of spaces to "tab indent" the reason.
					}
				} else { // Failed.
					WP_CLI::log( WP_CLI::colorize( '%rFailed:%n  ' . $test['name'] ) );
					WP_CLI::log( '         ' . $test['short_description'] ); // Number of spaces to "tab indent" the reason.
				}
			}
		}
	}

	/**
	 * Output results of failures in format expected by Core's Site Health tool for async tests.
	 *
	 * Specifically not asking for a testing group since we're opinionated that Site Heath should see all.
	 *
	 * @since 7.3.0
	 *
	 * @return array Array of test results
	 */
	public function output_results_for_core_async_site_health() {
		$result = array(
			'label'       => __( 'Jetpack passed all async tests.', 'jetpack' ),
			'status'      => 'good',
			'badge'       => array(
				'label' => __( 'Jetpack', 'jetpack' ),
				'color' => 'green',
			),
			'description' => sprintf(
				'<p>%s</p>',
				__( "Jetpack's async local testing suite passed all tests!", 'jetpack' )
			),
			'actions'     => '',
			'test'        => 'jetpack_debugger_local_testing_suite_core',
		);

		if ( $this->pass() ) {
			return $result;
		}

		$fails = $this->list_fails( 'async' );
		$error = false;
		foreach ( $fails as $fail ) {
			if ( ! $error ) {
				$error                 = true;
				$result['label']       = $fail['message'];
				$result['status']      = $fail['severity'];
				$result['description'] = sprintf(
					'<p>%s</p>',
					$fail['resolution']
				);
				if ( ! empty( $fail['action'] ) ) {
					$result['actions'] = sprintf(
						'<a class="button button-primary" href="%1$s" target="_blank" rel="noopener noreferrer">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>',
						esc_url( $fail['action'] ),
						__( 'Resolve', 'jetpack' ),
						/* translators: accessibility text */
						__( '(opens in a new tab)', 'jetpack' )
					);
				}
			} else {
				$result['description'] .= sprintf(
					'<p>%s</p>',
					__( 'There was another problem:', 'jetpack' )
				) . ' ' . $fail['message'] . ': ' . $fail['resolution'];
				if ( 'critical' === $fail['severity'] ) { // In case the initial failure is only "recommended".
					$result['status'] = 'critical';
				}
			}
		}

		return $result;
	}

	/**
	 * Provide single WP Error instance of all failures.
	 *
	 * @since 7.1.0
	 * @since 7.3.0 Add 'type'
	 *
	 * @param string $type  Test type, direct or async.
	 * @param string $group Testing group whose failures we want converted. Default all tests.
	 *
	 * @return WP_Error|false WP_Error with all failed tests or false if there were no failures.
	 */
	public function output_fails_as_wp_error( $type = 'all', $group = 'all' ) {
		if ( $this->pass( $group ) ) {
			return false;
		}
		$fails = $this->list_fails( $type, $group );
		$error = false;

		foreach ( $fails as $result ) {
			$code    = 'failed_' . $result['name'];
			$message = $result['short_description'];
			$data    = array(
				'resolution' => $result['action'] ?
					$result['action_label'] . ' :' . $result['action'] :
					'',
			);
			if ( ! $error ) {
				$error = new WP_Error( $code, $message, $data );
			} else {
				$error->add( $code, $message, $data );
			}
		}

		return $error;
	}

	/**
	 * Encrypt data for sending to WordPress.com.
	 *
	 * @todo When PHP minimum is 5.3+, add cipher detection to use an agreed better cipher than RC4. RC4 should be the last resort.
	 *
	 * @param string $data Data to encrypt with the WP.com Public Key.
	 *
	 * @return false|array False if functionality not available. Array of encrypted data, encryption key.
	 */
	public function encrypt_string_for_wpcom( $data ) {
		$return = false;
		if ( ! function_exists( 'openssl_get_publickey' ) || ! function_exists( 'openssl_seal' ) ) {
			return $return;
		}

		$public_key = openssl_get_publickey( JETPACK__DEBUGGER_PUBLIC_KEY );

		if ( $public_key && openssl_seal( $data, $encrypted_data, $env_key, array( $public_key ), 'RC4' ) ) {
			// We are returning base64-encoded values to ensure they're characters we can use in JSON responses without issue.
			$return = array(
				'data'   => base64_encode( $encrypted_data ), // phpcs:ignore WordPress.PHP.DiscouragedPHPFunctions.obfuscation_base64_encode
				'key'    => base64_encode( $env_key[0] ), // phpcs:ignore WordPress.PHP.DiscouragedPHPFunctions.obfuscation_base64_encode
				'cipher' => 'RC4', // When Jetpack's minimum WP version is at PHP 5.3+, we will add in detecting and using a stronger one.
			);
		}

		// openssl_free_key was deprecated as no longer needed in PHP 8.0+. Can remove when PHP 8.0 is our minimum. (lol).
		if ( PHP_VERSION_ID < 80000 ) {
			openssl_free_key( $public_key ); // phpcs:ignore PHPCompatibility.FunctionUse.RemovedFunctions.openssl_free_keyDeprecated, Generic.PHP.DeprecatedFunctions.Deprecated
		}

		return $return;
	}
}
class-jetpack-cxn-tests.php                                                                                                                                                                                                                                    26779         1711191376  plugins/jetpack/_inc/lib/debugger                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <?php
/**
 * Collection of tests to run on the Jetpack connection locally.
 *
 * @package automattic/jetpack
 */

use Automattic\Jetpack\Connection\Client;
use Automattic\Jetpack\Connection\Manager as Connection_Manager;
use Automattic\Jetpack\Connection\Tokens;
use Automattic\Jetpack\Redirect;
use Automattic\Jetpack\Status;
use Automattic\Jetpack\Sync\Health as Sync_Health;
use Automattic\Jetpack\Sync\Settings as Sync_Settings;

/**
 * Class Jetpack_Cxn_Tests contains all of the actual tests.
 */
class Jetpack_Cxn_Tests extends Jetpack_Cxn_Test_Base {

	/**
	 * Jetpack_Cxn_Tests constructor.
	 */
	public function __construct() {
		parent::__construct();

		$methods = get_class_methods( 'Jetpack_Cxn_Tests' );

		foreach ( $methods as $method ) {
			if ( ! str_contains( $method, 'test__' ) ) {
				continue;
			}
			$this->add_test( array( $this, $method ), $method, 'direct' );
		}

		/**
		 * Fires after loading default Jetpack Connection tests.
		 *
		 * @since 7.1.0
		 * @since 8.3.0 Passes the Jetpack_Cxn_Tests instance.
		 */
		do_action( 'jetpack_connection_tests_loaded', $this );

		/**
		 * Determines if the WP.com testing suite should be included.
		 *
		 * @since 7.1.0
		 * @since 8.1.0 Default false.
		 *
		 * @param bool $run_test To run the WP.com testing suite. Default false.
		 */
		if ( apply_filters( 'jetpack_debugger_run_self_test', false ) ) {
			/**
			 * Intentionally added last as it checks for an existing failure state before attempting.
			 * Generally, any failed location condition would result in the WP.com check to fail too, so
			 * we will skip it to avoid confusing error messages.
			 *
			 * Note: This really should be an 'async' test.
			 */
			$this->add_test( array( $this, 'last__wpcom_self_test' ), 'test__wpcom_self_test', 'direct' );
		}
	}

	/**
	 * Helper function to look up the expected master user and return the local WP_User.
	 *
	 * @return WP_User Jetpack's expected master user.
	 */
	protected function helper_retrieve_local_master_user() {
		$master_user = Jetpack_Options::get_option( 'master_user' );
		return new WP_User( $master_user );
	}

	/**
	 * Is Jetpack even connected and supposed to be talking to WP.com?
	 */
	protected function helper_is_jetpack_connected() {
		return Jetpack::is_connection_ready() && ! ( new Status() )->is_offline_mode();
	}

	/**
	 * Retrieve the `blog_token` if it exists.
	 *
	 * @return object|false
	 */
	protected function helper_get_blog_token() {
		return ( new Tokens() )->get_access_token();
	}

	/**
	 * Returns a support url based on using a development version.
	 */
	protected function helper_get_support_url() {
		return Jetpack::is_development_version()
			? Redirect::get_url( 'jetpack-contact-support-beta-group' )
			: Redirect::get_url( 'jetpack-contact-support' );
	}

	/**
	 * Returns the url to reconnect Jetpack.
	 *
	 * @return string The reconnect url.
	 */
	protected static function helper_get_reconnect_url() {
		return admin_url( 'admin.php?page=jetpack#/reconnect' );
	}

	/**
	 * Gets translated support text.
	 */
	protected function helper_get_support_text() {
		return __( 'Please contact Jetpack support.', 'jetpack' );
	}

	/**
	 * Returns the translated text to reconnect Jetpack.
	 *
	 * @return string The translated reconnect text.
	 */
	protected static function helper_get_reconnect_text() {
		return __( 'Reconnect Jetpack now', 'jetpack' );
	}

	/**
	 * Returns the translated text for failing tests due to timeouts.
	 *
	 * @return string The translated timeout text.
	 */
	protected static function helper_get_timeout_text() {
		return __( 'The test timed out which may sometimes indicate a failure or may be a false failure. Please relaunch tests.', 'jetpack' );
	}

	/**
	 * Gets translated reconnect long description.
	 *
	 * @param string $connection_error The connection specific error.
	 * @param string $recommendation The recommendation for resolving the connection error.
	 *
	 * @return string The translated long description for reconnection recommendations.
	 */
	protected static function helper_get_reconnect_long_description( $connection_error, $recommendation ) {

		return sprintf(
			'<p>%1$s</p>' .
			'<p><span class="dashicons fail"><span class="screen-reader-text">%2$s</span></span> %3$s</p><p><strong>%4$s</strong></p>',
			__( 'A healthy connection ensures Jetpack essential services are provided to your WordPress site, such as Stats and Site Security.', 'jetpack' ),
			/* translators: screen reader text indicating a test failed */
			__( 'Error', 'jetpack' ),
			$connection_error,
			$recommendation
		);
	}

	/**
	 * Helper function to return consistent responses for a connection failing test.
	 *
	 * @param string $name The raw method name that runs the test. Default unnamed_test.
	 * @param string $connection_error The connection specific error. Default 'Your site is not connected to Jetpack.'.
	 * @param string $recommendation The recommendation for resolving the connection error. Default 'We recommend reconnecting Jetpack.'.
	 *
	 * @return array Test results.
	 */
	public static function connection_failing_test( $name, $connection_error = '', $recommendation = '' ) {
		$connection_error = empty( $connection_error ) ? __( 'Your site is not connected to Jetpack.', 'jetpack' ) : $connection_error;
		$recommendation   = empty( $recommendation ) ? __( 'We recommend reconnecting Jetpack.', 'jetpack' ) : $recommendation;

		$args = array(
			'name'              => $name,
			'short_description' => $connection_error,
			'action'            => self::helper_get_reconnect_url(),
			'action_label'      => self::helper_get_reconnect_text(),
			'long_description'  => self::helper_get_reconnect_long_description( $connection_error, $recommendation ),
		);

		return self::failing_test( $args );
	}

	/**
	 * Gets translated text to enable outbound requests.
	 *
	 * @param string $protocol Either 'HTTP' or 'HTTPS'.
	 *
	 * @return string The translated text.
	 */
	protected function helper_enable_outbound_requests( $protocol ) {
		return sprintf(
			/* translators: %1$s - request protocol, either http or https */
			__(
				'Your server did not successfully connect to the Jetpack server using %1$s
				Please ask your hosting provider to confirm your server can make outbound requests to jetpack.com.',
				'jetpack'
			),
			$protocol
		);
	}

	/**
	 * Returns 30 for use with a filter.
	 *
	 * To allow time for WP.com to run upstream testing, this function exists to increase the http_request_timeout value
	 * to 30.
	 *
	 * @return int 30
	 */
	public static function increase_timeout() {
		return 30; // seconds.
	}

	/**
	 * The test verifies the blog token exists.
	 *
	 * @return array
	 */
	protected function test__blog_token_if_exists() {
		$name = __FUNCTION__;

		if ( ! $this->helper_is_jetpack_connected() ) {
			return self::skipped_test(
				array(
					'name'              => $name,
					'short_description' => __( 'Jetpack is not connected. No blog token to check.', 'jetpack' ),
				)
			);
		}
		$blog_token = $this->helper_get_blog_token();

		if ( $blog_token ) {
			$result = self::passing_test( array( 'name' => $name ) );
		} else {
			$connection_error = __( 'Blog token is missing.', 'jetpack' );

			$result = self::connection_failing_test( $name, $connection_error );
		}

		return $result;
	}

	/**
	 * Test if Jetpack is connected.
	 */
	protected function test__check_if_connected() {
		$name = __FUNCTION__;

		if ( ! $this->helper_get_blog_token() ) {
			return self::skipped_test(
				array(
					'name'              => $name,
					'short_description' => __( 'Blog token is missing.', 'jetpack' ),
				)
			);
		}

		if ( $this->helper_is_jetpack_connected() ) {
			$result = self::passing_test(
				array(
					'name'             => $name,
					'label'            => __( 'Your site is connected to Jetpack', 'jetpack' ),
					'long_description' => sprintf(
						'<p>%1$s</p>' .
						'<p><span class="dashicons pass"><span class="screen-reader-text">%2$s</span></span> %3$s</p>',
						__( 'A healthy connection ensures Jetpack essential services are provided to your WordPress site, such as Stats and Site Security.', 'jetpack' ),
						/* translators: Screen reader text indicating a test has passed */
						__( 'Passed', 'jetpack' ),
						__( 'Your site is connected to Jetpack.', 'jetpack' )
					),
				)
			);
		} elseif ( ( new Status() )->is_offline_mode() ) {
			$result = self::skipped_test(
				array(
					'name'              => $name,
					'short_description' => __( 'Jetpack is in Offline Mode:', 'jetpack' ) . ' ' . Jetpack::development_mode_trigger_text(),
				)
			);
		} else {
			$connection_error = __( 'Your site is not connected to Jetpack', 'jetpack' );

			$result = self::connection_failing_test( $name, $connection_error );
		}

		return $result;
	}

	/**
	 * Test that the master user still exists on this site.
	 *
	 * @return array Test results.
	 */
	protected function test__master_user_exists_on_site() {
		$name = __FUNCTION__;
		if ( ! $this->helper_is_jetpack_connected() ) {
			return self::skipped_test(
				array(
					'name'              => $name,
					'short_description' => __( 'Jetpack is not connected. No master user to check.', 'jetpack' ),
				)
			);
		}
		if ( ! ( new Connection_Manager() )->get_connection_owner_id() ) {
			return self::skipped_test(
				array(
					'name'              => $name,
					'short_description' => __( 'Jetpack is running without a connected user. No master user to check.', 'jetpack' ),
				)
			);
		}
		$local_user = $this->helper_retrieve_local_master_user();

		if ( $local_user->exists() ) {
			$result = self::passing_test( array( 'name' => $name ) );
		} else {
			$connection_error = __( 'The user who setup the Jetpack connection no longer exists on this site.', 'jetpack' );

			$result = self::connection_failing_test( $name, $connection_error );
		}

		return $result;
	}

	/**
	 * Test that the master user has the manage options capability (e.g. is an admin).
	 *
	 * Generic calls from WP.com execute on Jetpack as the master user. If it isn't an admin, random things will fail.
	 *
	 * @return array Test results.
	 */
	protected function test__master_user_can_manage_options() {
		$name = __FUNCTION__;
		if ( ! $this->helper_is_jetpack_connected() ) {
			return self::skipped_test(
				array(
					'name'              => $name,
					'short_description' => __( 'Jetpack is not connected.', 'jetpack' ),
				)
			);
		}
		if ( ! ( new Connection_Manager() )->get_connection_owner_id() ) {
			return self::skipped_test(
				array(
					'name'              => $name,
					'short_description' => __( 'Jetpack is running without a connected user. No master user to check.', 'jetpack' ),
				)
			);
		}
		$master_user = $this->helper_retrieve_local_master_user();

		if ( user_can( $master_user, 'manage_options' ) ) {
			$result = self::passing_test( array( 'name' => $name ) );
		} else {
			/* translators: a WordPress username */
			$connection_error = sprintf( __( 'The user (%s) who setup the Jetpack connection is not an administrator.', 'jetpack' ), $master_user->user_login );
			/* translators: a WordPress username */
			$recommendation = sprintf( __( 'We recommend either upgrading the user (%s) or reconnecting Jetpack.', 'jetpack' ), $master_user->user_login );

			$result = self::connection_failing_test( $name, $connection_error, $recommendation );
		}

		return $result;
	}

	/**
	 * Test that the PHP's XML library is installed.
	 *
	 * While it should be installed by default, increasingly in PHP 7, some OSes require an additional php-xml package.
	 *
	 * @return array Test results.
	 */
	protected function test__xml_parser_available() {
		$name = __FUNCTION__;
		if ( function_exists( 'xml_parser_create' ) ) {
			$result = self::passing_test( array( 'name' => $name ) );
		} else {
			$result = self::failing_test(
				array(
					'name'              => $name,
					'label'             => __( 'PHP XML manipulation libraries are not available.', 'jetpack' ),
					'short_description' => __( 'Please ask your hosting provider to refer to our server requirements and enable PHP\'s XML module.', 'jetpack' ),
					'action_label'      => __( 'View our server requirements', 'jetpack' ),
					'action'            => Redirect::get_url( 'jetpack-support-server-requirements' ),
				)
			);
		}
		return $result;
	}

	/**
	 * Test that the server is able to send an outbound http communication.
	 *
	 * @return array Test results.
	 */
	protected function test__outbound_http() {
		$name    = __FUNCTION__;
		$request = wp_remote_get( preg_replace( '/^https:/', 'http:', JETPACK__API_BASE ) . 'test/1/' );
		$code    = wp_remote_retrieve_response_code( $request );

		if ( 200 === (int) $code ) {
			$result = self::passing_test( array( 'name' => $name ) );
		} else {
			$result = self::failing_test(
				array(
					'name'              => $name,
					'short_description' => $this->helper_enable_outbound_requests( 'HTTP' ),
				)
			);
		}

		return $result;
	}

	/**
	 * Test that the server is able to send an outbound https communication.
	 *
	 * @return array Test results.
	 */
	protected function test__outbound_https() {
		$name    = __FUNCTION__;
		$request = wp_remote_get( preg_replace( '/^http:/', 'https:', JETPACK__API_BASE ) . 'test/1/' );
		$code    = wp_remote_retrieve_response_code( $request );

		if ( 200 === (int) $code ) {
			$result = self::passing_test( array( 'name' => $name ) );
		} else {
			$result = self::failing_test(
				array(
					'name'              => $name,
					'short_description' => $this->helper_enable_outbound_requests( 'HTTPS' ),
				)
			);
		}

		return $result;
	}

	/**
	 * Check for an IDC.
	 *
	 * @return array Test results.
	 */
	protected function test__identity_crisis() {
		$name = __FUNCTION__;
		if ( ! $this->helper_is_jetpack_connected() ) {
			return self::skipped_test(
				array(
					'name'              => $name,
					'short_description' => __( 'Jetpack is not connected.', 'jetpack' ),
				)
			);
		}
		$identity_crisis = Jetpack::check_identity_crisis();

		if ( ! $identity_crisis ) {
			$result = self::passing_test( array( 'name' => $name ) );
		} else {
			$result = self::failing_test(
				array(
					'name'              => $name,
					'short_description' => sprintf(
						/* translators: Two URLs. The first is the locally-recorded value, the second is the value as recorded on WP.com. */
						__( 'Your url is set as `%1$s`, but your WordPress.com connection lists it as `%2$s`!', 'jetpack' ),
						$identity_crisis['home'],
						$identity_crisis['wpcom_home']
					),
					'action_label'      => $this->helper_get_support_text(),
					'action'            => $this->helper_get_support_url(),
				)
			);
		}
		return $result;
	}

	/**
	 * Tests the health of the Connection tokens.
	 *
	 * This will always check the blog token health. It will also check the user token health if
	 * a user is logged in and connected, or if there's a connected owner.
	 *
	 * @since 9.0.0
	 * @since 9.6.0 Checks only blog token if current user not connected or site does not have a connected owner.
	 *
	 * @return array Test results.
	 */
	protected function test__connection_token_health() {
		$name    = __FUNCTION__;
		$m       = new Connection_Manager();
		$user_id = get_current_user_id();

		// Check if there's a connected logged in user.
		if ( $user_id && ! $m->is_user_connected( $user_id ) ) {
				$user_id = false;
		}

		// If no logged in user to check, let's see if there's a master_user set.
		if ( ! $user_id ) {
				$user_id = Jetpack_Options::get_option( 'master_user' );
			if ( $user_id && ! $m->is_user_connected( $user_id ) ) {
				return self::connection_failing_test( $name, __( 'Missing token for the connection owner.', 'jetpack' ) );
			}
		}

		if ( $user_id ) {
			return $this->check_tokens_health( $user_id );
		} else {
			return $this->check_blog_token_health();
		}
	}

	/**
	 * Tests blog and user's token against wp.com's check-token-health endpoint.
	 *
	 * @since 9.6.0
	 *
	 * @return array Test results.
	 */
	protected function check_blog_token_health() {
		$name  = 'test__connection_token_health';
		$valid = ( new Tokens() )->validate_blog_token();

		if ( ! $valid ) {
			return self::connection_failing_test( $name, __( 'Blog token validation failed.', 'jetpack' ) );
		} else {
			return self::passing_test( array( 'name' => $name ) );
		}
	}

	/**
	 * Tests blog token against wp.com's check-token-health endpoint.
	 *
	 * @since 9.6.0
	 *
	 * @param int $user_id The user ID to check the tokens for.
	 *
	 * @return array Test results.
	 */
	protected function check_tokens_health( $user_id ) {
		$name             = 'test__connection_token_health';
		$validated_tokens = ( new Tokens() )->validate( $user_id );

		if ( ! is_array( $validated_tokens ) || count( array_diff_key( array_flip( array( 'blog_token', 'user_token' ) ), $validated_tokens ) ) ) {
			return self::skipped_test(
				array(
					'name'              => $name,
					'short_description' => __( 'Token health check failed to validate tokens.', 'jetpack' ),
				)
			);
		}

		$invalid_tokens_exist = false;
		foreach ( $validated_tokens as $validated_token ) {
			if ( ! $validated_token['is_healthy'] ) {
				$invalid_tokens_exist = true;
				break;
			}
		}

		if ( false === $invalid_tokens_exist ) {
			return self::passing_test( array( 'name' => $name ) );
		}

		$connection_error = __( 'Invalid Jetpack connection tokens.', 'jetpack' );

		return self::connection_failing_test( $name, $connection_error );
	}

	/**
	 * Tests connection status against wp.com's test-connection endpoint.
	 *
	 * @todo: Compare with the wpcom_self_test. We only need one of these.
	 *
	 * @return array Test results.
	 */
	protected function test__wpcom_connection_test() {
		$name = __FUNCTION__;

		$status = new Status();
		if ( ! Jetpack::is_connection_ready() || $status->is_offline_mode() || $status->is_staging_site() || ! $this->pass ) {
			return self::skipped_test( array( 'name' => $name ) );
		}

		add_filter( 'http_request_timeout', array( 'Jetpack_Cxn_Tests', 'increase_timeout' ) );
		$response = Client::wpcom_json_api_request_as_blog(
			sprintf( '/jetpack-blogs/%d/test-connection', Jetpack_Options::get_option( 'id' ) ),
			Client::WPCOM_JSON_API_VERSION
		);
		remove_filter( 'http_request_timeout', array( 'Jetpack_Cxn_Tests', 'increase_timeout' ) );

		if ( is_wp_error( $response ) ) {
			if ( str_contains( $response->get_error_message(), 'cURL error 28' ) ) { // Timeout.
				$result = self::skipped_test(
					array(
						'name'              => $name,
						'short_description' => self::helper_get_timeout_text(),
					)
				);
			} else {
				/* translators: %1$s is the error code, %2$s is the error message */
				$message = sprintf( __( 'Connection test failed (#%1$s: %2$s)', 'jetpack' ), $response->get_error_code(), $response->get_error_message() );

				$result = self::connection_failing_test( $name, $message );
			}

			return $result;
		}

		$body = wp_remote_retrieve_body( $response );
		if ( ! $body ) {
			return self::failing_test(
				array(
					'name'              => $name,
					'short_description' => __( 'Connection test failed (empty response body)', 'jetpack' ) . wp_remote_retrieve_response_code( $response ),
					'action_label'      => $this->helper_get_support_text(),
					'action'            => $this->helper_get_support_url(),
				)
			);
		}

		if ( 404 === wp_remote_retrieve_response_code( $response ) ) {
			return self::skipped_test(
				array(
					'name'              => $name,
					'short_description' => __( 'The WordPress.com API returned a 404 error.', 'jetpack' ),
				)
			);
		}

		$result       = json_decode( $body );
		$is_connected = ! empty( $result->connected );
		$message      = $result->message . ': ' . wp_remote_retrieve_response_code( $response );

		if ( $is_connected ) {
			$res = self::passing_test( array( 'name' => $name ) );
		} else {
			$res = self::connection_failing_test( $name, $message );
		}

		return $res;
	}

	/**
	 * Tests the port number to ensure it is an expected value.
	 *
	 * We expect that sites on be on one of:
	 * port 80,
	 * port 443 (https sites only),
	 * the value of JETPACK_SIGNATURE__HTTP_PORT,
	 * unless the site is intentionally on a different port (e.g. example.com:8080 is the site's URL).
	 *
	 * If the value isn't one of those and the site's URL doesn't include a port, then the signature verification will fail.
	 *
	 * This happens most commonly on sites with reverse proxies, so the edge (e.g. Varnish) is running on 80/443, but nginx
	 * or Apache is responding internally on a different port (e.g. 81).
	 *
	 * @return array Test results
	 */
	protected function test__server_port_value() {
		$name = __FUNCTION__;
		if ( ! isset( $_SERVER['HTTP_X_FORWARDED_PORT'] ) && ! isset( $_SERVER['SERVER_PORT'] ) ) {
			return self::skipped_test(
				array(
					'name'              => $name,
					'short_description' => __( 'The server port values are not defined. This is most common when running PHP via a CLI.', 'jetpack' ),
				)
			);
		}
		$site_port   = wp_parse_url( home_url(), PHP_URL_PORT );
		$server_port = isset( $_SERVER['HTTP_X_FORWARDED_PORT'] ) ? (int) $_SERVER['HTTP_X_FORWARDED_PORT'] : (int) $_SERVER['SERVER_PORT'];
		$http_ports  = array( 80 );
		$https_ports = array( 80, 443 );

		if ( defined( 'JETPACK_SIGNATURE__HTTP_PORT' ) ) {
			$http_ports[] = JETPACK_SIGNATURE__HTTP_PORT;
		}

		if ( defined( 'JETPACK_SIGNATURE__HTTPS_PORT' ) ) {
			$https_ports[] = JETPACK_SIGNATURE__HTTPS_PORT;
		}

		if ( $site_port ) {
			return self::skipped_test( array( 'name' => $name ) ); // Not currently testing for this situation.
		}

		if ( is_ssl() && in_array( $server_port, $https_ports, true ) ) {
			return self::passing_test( array( 'name' => $name ) );
		} elseif ( in_array( $server_port, $http_ports, true ) ) {
			return self::passing_test( array( 'name' => $name ) );
		} else {
			if ( is_ssl() ) {
				$needed_constant = 'JETPACK_SIGNATURE__HTTPS_PORT';
			} else {
				$needed_constant = 'JETPACK_SIGNATURE__HTTP_PORT';
			}
			return self::failing_test(
				array(
					'name'              => $name,
					'short_description' => sprintf(
						/* translators: %1$s - a PHP code snippet */
						__(
							'The server port value is unexpected.
						Try adding the following to your wp-config.php file: %1$s',
							'jetpack'
						),
						"define( '$needed_constant', $server_port )"
					),
				)
			);
		}
	}

	/**
	 * Sync Health Tests.
	 *
	 * Disabled: Results in a failing test (recommended)
	 * Delayed: Results in failing test (recommended)
	 * Error: Results in failing test (critical)
	 */
	protected function test__sync_health() {

		$name = __FUNCTION__;

		if ( ! $this->helper_is_jetpack_connected() ) {
			// If the site is not connected, there is no point in testing Sync health.
			return self::skipped_test(
				array(
					'name'                => $name,
					'show_in_site_health' => false,
				)
			);
		}

		// Sync is disabled.
		if ( ! Sync_Settings::is_sync_enabled() ) {
			return self::failing_test(
				array(
					'name'              => $name,
					'label'             => __( 'Jetpack Sync has been disabled on your site.', 'jetpack' ),
					'severity'          => 'recommended',
					'action'            => 'https://github.com/Automattic/jetpack/blob/trunk/projects/packages/sync/src/class-settings.php',
					'action_label'      => __( 'See Github for more on Sync Settings', 'jetpack' ),
					'short_description' => __( 'Jetpack Sync has been disabled on your site. This could be impacting some of your site’s Jetpack-powered features. Developers may enable / disable syncing using the Sync Settings API.', 'jetpack' ),
				)
			);
		}
		// Sync has experienced Data Loss.
		if ( Sync_Health::get_status() === Sync_Health::STATUS_OUT_OF_SYNC ) {
			return self::failing_test(
				array(
					'name'              => $name,
					'label'             => __( 'Jetpack has detected a problem with the communication between your site and WordPress.com', 'jetpack' ),
					'severity'          => 'critical',
					'action'            => Redirect::get_url( 'jetpack-contact-support' ),
					'action_label'      => __( 'Contact Jetpack Support', 'jetpack' ),
					'short_description' => __( 'There is a problem with the communication between your site and WordPress.com. This could be impacting some of your site’s Jetpack-powered features. If you continue to see this error, please contact support for assistance.', 'jetpack' ),
				)
			);

		}

		return self::passing_test( array( 'name' => $name ) );
	}

	/**
	 * Calls to WP.com to run the connection diagnostic testing suite.
	 *
	 * Intentionally added last as it will be skipped if any local failed conditions exist.
	 *
	 * @since 7.1.0
	 * @since 7.9.0 Timeout waiting for a WP.com response no longer fails the test. Test is marked skipped instead.
	 *
	 * @return array Test results.
	 */
	protected function last__wpcom_self_test() {
		$name = 'test__wpcom_self_test';

		$status = new Status();
		if ( ! Jetpack::is_connection_ready() || $status->is_offline_mode() || $status->is_staging_site() || ! $this->pass ) {
			return self::skipped_test( array( 'name' => $name ) );
		}

		$self_xml_rpc_url = site_url( 'xmlrpc.php' );

		$testsite_url = JETPACK__API_BASE . 'testsite/1/?url=';

		// Using PHP_INT_MAX - 1 so that there is still a way to override this if needed and since it only impacts this one call.
		add_filter( 'http_request_timeout', array( 'Jetpack_Cxn_Tests', 'increase_timeout' ), PHP_INT_MAX - 1 );

		$response = wp_remote_get( $testsite_url . $self_xml_rpc_url );

		remove_filter( 'http_request_timeout', array( 'Jetpack_Cxn_Tests', 'increase_timeout' ), PHP_INT_MAX - 1 );

		if ( 200 === wp_remote_retrieve_response_code( $response ) ) {
			$result = self::passing_test( array( 'name' => $name ) );
		} elseif ( is_wp_error( $response ) && str_contains( $response->get_error_message(), 'cURL error 28' ) ) { // Timeout.
			$result = self::skipped_test(
				array(
					'name'              => $name,
					'short_description' => self::helper_get_timeout_text(),
				)
			);
		} else {
			$result = self::failing_test(
				array(
					'name'              => $name,
					'short_description' => sprintf(
						/* translators: %1$s - A debugging url */
						__( 'Jetpack.com detected an error on the WP.com Self Test. Visit the Jetpack Debug page for more info: %1$s, or contact support.', 'jetpack' ),
						Redirect::get_url( 'jetpack-support-debug', array( 'query' => 'url=' . rawurlencode( site_url() ) ) )
					),
					'action_label'      => $this->helper_get_support_text(),
					'action'            => $this->helper_get_support_url(),
				)
			);
		}

		return $result;
	}
}
class-jetpack-debug-data.php                                                                                                                                                                                                                                   13365         1711191376  plugins/jetpack/_inc/lib/debugger                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <?php
/**
 * Jetpack Debug Data for the Site Health sections.
 *
 * @package automattic/jetpack
 */

use Automattic\Jetpack\Connection\Tokens;
use Automattic\Jetpack\Connection\Urls;
use Automattic\Jetpack\Constants;
use Automattic\Jetpack\Current_Plan as Jetpack_Plan;
use Automattic\Jetpack\Identity_Crisis;
use Automattic\Jetpack\Redirect;
use Automattic\Jetpack\Status;
use Automattic\Jetpack\Sync\Modules;
use Automattic\Jetpack\Sync\Sender;

/**
 * Class Jetpack_Debug_Data
 *
 * Collect and return debug data for Jetpack.
 *
 * @since 7.3.0
 */
class Jetpack_Debug_Data {
	/**
	 * Determine the active plan and normalize it for the debugger results.
	 *
	 * @since 7.3.0
	 *
	 * @return string The plan slug.
	 */
	public static function what_jetpack_plan() {
		$plan = Jetpack_Plan::get();
		return ! empty( $plan['class'] ) ? $plan['class'] : 'undefined';
	}

	/**
	 * Convert seconds to human readable time.
	 *
	 * A dedication function instead of using Core functionality to allow for output in seconds.
	 *
	 * @since 7.3.0
	 *
	 * @param int $seconds Number of seconds to convert to human time.
	 *
	 * @return string Human readable time.
	 */
	public static function seconds_to_time( $seconds ) {
		$seconds = (int) $seconds;
		$units   = array(
			'week'   => WEEK_IN_SECONDS,
			'day'    => DAY_IN_SECONDS,
			'hour'   => HOUR_IN_SECONDS,
			'minute' => MINUTE_IN_SECONDS,
			'second' => 1,
		);
		// specifically handle zero.
		if ( 0 === $seconds ) {
			return '0 seconds';
		}
		$human_readable = '';
		foreach ( $units as $name => $divisor ) {
			$quot = (int) ( $seconds / $divisor );
			if ( $quot ) {
				$human_readable .= "$quot $name";
				$human_readable .= ( abs( $quot ) > 1 ? 's' : '' ) . ', ';
				$seconds        -= $quot * $divisor;
			}
		}
		return substr( $human_readable, 0, -2 );
	}

	/**
	 * Return debug data in the format expected by Core's Site Health Info tab.
	 *
	 * @since 7.3.0
	 *
	 * @param array $debug {
	 *     The debug information already compiled by Core.
	 *
	 *     @type string  $label        The title for this section of the debug output.
	 *     @type string  $description  Optional. A description for your information section which may contain basic HTML
	 *                                 markup: `em`, `strong` and `a` for linking to documentation or putting emphasis.
	 *     @type boolean $show_count   Optional. If set to `true` the amount of fields will be included in the title for
	 *                                 this section.
	 *     @type boolean $private      Optional. If set to `true` the section and all associated fields will be excluded
	 *                                 from the copy-paste text area.
	 *     @type array   $fields {
	 *         An associative array containing the data to be displayed.
	 *
	 *         @type string  $label    The label for this piece of information.
	 *         @type string  $value    The output that is of interest for this field.
	 *         @type boolean $private  Optional. If set to `true` the field will not be included in the copy-paste text area
	 *                                 on top of the page, allowing you to show, for example, API keys here.
	 *     }
	 * }
	 *
	 * @return array $args Debug information in the same format as the initial argument.
	 */
	public static function core_debug_data( $debug ) {
		$support_url = Jetpack::is_development_version()
			? Redirect::get_url( 'jetpack-contact-support-beta-group' )
			: Redirect::get_url( 'jetpack-contact-support' );

		$jetpack = array(
			'jetpack' => array(
				'label'       => __( 'Jetpack', 'jetpack' ),
				'description' => sprintf(
					/* translators: %1$s is URL to jetpack.com's contact support page. %2$s accessibility text */
					__(
						'Diagnostic information helpful to <a href="%1$s" target="_blank" rel="noopener noreferrer">your Jetpack Happiness team<span class="screen-reader-text">%2$s</span></a>',
						'jetpack'
					),
					esc_url( $support_url ),
					__( '(opens in a new tab)', 'jetpack' )
				),
				'fields'      => self::debug_data(),
			),
		);
		$debug   = array_merge( $debug, $jetpack );
		return $debug;
	}

	/**
	 * Compile and return array of debug information.
	 *
	 * @since 7.3.0
	 *
	 * @return array $args {
	 *          Associated array of arrays with the following.
	 *         @type string  $label    The label for this piece of information.
	 *         @type string  $value    The output that is of interest for this field.
	 *         @type boolean $private  Optional. Set to true if data is sensitive (API keys, etc).
	 * }
	 */
	public static function debug_data() {
		$debug_info = array();

		/* Add various important Jetpack options */
		$debug_info['site_id']                  = array(
			'label'   => 'Jetpack Site ID',
			'value'   => Jetpack_Options::get_option( 'id' ),
			'private' => false,
		);
		$debug_info['ssl_cert']                 = array(
			'label'   => 'Jetpack SSL Verfication Bypass',
			'value'   => ( Jetpack_Options::get_option( 'fallback_no_verify_ssl_certs' ) ) ? 'Yes' : 'No',
			'private' => false,
		);
		$debug_info['time_diff']                = array(
			'label'   => "Offset between Jetpack server's time and this server's time.",
			'value'   => Jetpack_Options::get_option( 'time_diff' ),
			'private' => false,
		);
		$debug_info['version_option']           = array(
			'label'   => 'Current Jetpack Version Option',
			'value'   => Jetpack_Options::get_option( 'version' ),
			'private' => false,
		);
		$debug_info['old_version']              = array(
			'label'   => 'Previous Jetpack Version',
			'value'   => Jetpack_Options::get_option( 'old_version' ),
			'private' => false,
		);
		$debug_info['public']                   = array(
			'label'   => 'Jetpack Site Public',
			'value'   => ( Jetpack_Options::get_option( 'public' ) ) ? 'Public' : 'Private',
			'private' => false,
		);
		$debug_info['master_user']              = array(
			'label'   => 'Jetpack Master User',
			'value'   => self::human_readable_master_user(), // Only ID number and user name.
			'private' => false,
		);
		$debug_info['is_offline_mode']          = array(
			'label'   => 'Jetpack Offline Mode',
			'value'   => ( new Status() )->is_offline_mode() ? 'on' : 'off',
			'private' => false,
		);
		$debug_info['is_offline_mode_constant'] = array(
			'label'   => 'JETPACK_DEV_DEBUG Constant',
			'value'   => ( defined( 'JETPACK_DEV_DEBUG' ) && JETPACK_DEV_DEBUG ) ? 'on' : 'off',
			'private' => false,
		);

		/**
		 * Token information is private, but awareness if there one is set is helpful.
		 *
		 * To balance out information vs privacy, we only display and include the "key",
		 * which is a segment of the token prior to a period within the token and is
		 * technically not private.
		 *
		 * If a token does not contain a period, then it is malformed and we report it as such.
		 */
		$user_id    = get_current_user_id();
		$blog_token = ( new Tokens() )->get_access_token();
		$user_token = ( new Tokens() )->get_access_token( $user_id );

		$tokenset = '';
		if ( $blog_token ) {
			$tokenset = 'Blog ';
			$blog_key = substr( $blog_token->secret, 0, strpos( $blog_token->secret, '.' ) );
			// Intentionally not translated since this is helpful when sent to Happiness.
			$blog_key = ( $blog_key ) ? $blog_key : 'Potentially Malformed Token.';
		}
		if ( $user_token ) {
			$tokenset .= 'User';
			$user_key  = substr( $user_token->secret, 0, strpos( $user_token->secret, '.' ) );
			// Intentionally not translated since this is helpful when sent to Happiness.
			$user_key = ( $user_key ) ? $user_key : 'Potentially Malformed Token.';
		}
		if ( ! $tokenset ) {
			$tokenset = 'None';
		}

		$debug_info['current_user'] = array(
			'label'   => 'Current User',
			'value'   => self::human_readable_user( $user_id ),
			'private' => false,
		);
		$debug_info['tokens_set']   = array(
			'label'   => 'Tokens defined',
			'value'   => $tokenset,
			'private' => false,
		);
		$debug_info['blog_token']   = array(
			'label'   => 'Blog Public Key',
			'value'   => ( $blog_token ) ? $blog_key : 'Not set.',
			'private' => false,
		);
		$debug_info['user_token']   = array(
			'label'   => 'User Public Key',
			'value'   => ( $user_token ) ? $user_key : 'Not set.',
			'private' => false,
		);

		/** Jetpack Environmental Information */
		$debug_info['version']       = array(
			'label'   => 'Jetpack Version',
			'value'   => JETPACK__VERSION,
			'private' => false,
		);
		$debug_info['jp_plugin_dir'] = array(
			'label'   => 'Jetpack Directory',
			'value'   => JETPACK__PLUGIN_DIR,
			'private' => false,
		);
		$debug_info['plan']          = array(
			'label'   => 'Plan Type',
			'value'   => self::what_jetpack_plan(),
			'private' => false,
		);

		foreach ( array(
			'HTTP_HOST',
			'SERVER_PORT',
			'HTTPS',
			'GD_PHP_HANDLER',
			'HTTP_AKAMAI_ORIGIN_HOP',
			'HTTP_CF_CONNECTING_IP',
			'HTTP_CLIENT_IP',
			'HTTP_FASTLY_CLIENT_IP',
			'HTTP_FORWARDED',
			'HTTP_FORWARDED_FOR',
			'HTTP_INCAP_CLIENT_IP',
			'HTTP_TRUE_CLIENT_IP',
			'HTTP_X_CLIENTIP',
			'HTTP_X_CLUSTER_CLIENT_IP',
			'HTTP_X_FORWARDED',
			'HTTP_X_FORWARDED_FOR',
			'HTTP_X_IP_TRAIL',
			'HTTP_X_REAL_IP',
			'HTTP_X_VARNISH',
			'REMOTE_ADDR',
		) as $header ) {
			if ( isset( $_SERVER[ $header ] ) ) {
				$debug_info[ $header ] = array(
					'label'   => 'Server Variable ' . $header,
					'value'   => empty( $_SERVER[ $header ] ) ? 'false' : filter_var( wp_unslash( $_SERVER[ $header ] ) ),
					'private' => true, // This isn't really 'private' information, but we don't want folks to easily paste these into public forums.
				);
			}
		}

		$debug_info['protect_header'] = array(
			'label'   => 'Trusted IP',
			'value'   => wp_json_encode( get_site_option( 'trusted_ip_header' ) ),
			'private' => false,
		);

		/** Sync Debug Information */
		$sync_module = Modules::get_module( 'full-sync' );
		if ( $sync_module ) {
			$sync_statuses              = $sync_module->get_status();
			$human_readable_sync_status = array();
			foreach ( $sync_statuses as $sync_status => $sync_status_value ) {
				$human_readable_sync_status[ $sync_status ] =
					in_array( $sync_status, array( 'started', 'queue_finished', 'send_started', 'finished' ), true )
						? gmdate( 'r', $sync_status_value ) : $sync_status_value;
			}
			$debug_info['full_sync'] = array(
				'label'   => 'Full Sync Status',
				'value'   => wp_json_encode( $human_readable_sync_status ),
				'private' => false,
			);
		}

		$queue = Sender::get_instance()->get_sync_queue();

		$debug_info['sync_size'] = array(
			'label'   => 'Sync Queue Size',
			'value'   => $queue->size(),
			'private' => false,
		);
		$debug_info['sync_lag']  = array(
			'label'   => 'Sync Queue Lag',
			'value'   => self::seconds_to_time( $queue->lag() ),
			'private' => false,
		);

		$full_sync_queue = Sender::get_instance()->get_full_sync_queue();

		$debug_info['full_sync_size'] = array(
			'label'   => 'Full Sync Queue Size',
			'value'   => $full_sync_queue->size(),
			'private' => false,
		);
		$debug_info['full_sync_lag']  = array(
			'label'   => 'Full Sync Queue Lag',
			'value'   => self::seconds_to_time( $full_sync_queue->lag() ),
			'private' => false,
		);

		/**
		 * IDC Information
		 *
		 * Must follow sync debug since it depends on sync functionality.
		 */
		$idc_urls = array(
			'home'       => Urls::home_url(),
			'siteurl'    => Urls::site_url(),
			'WP_HOME'    => Constants::is_defined( 'WP_HOME' ) ? Constants::get_constant( 'WP_HOME' ) : '',
			'WP_SITEURL' => Constants::is_defined( 'WP_SITEURL' ) ? Constants::get_constant( 'WP_SITEURL' ) : '',
		);

		$debug_info['idc_urls']         = array(
			'label'   => 'IDC URLs',
			'value'   => wp_json_encode( $idc_urls ),
			'private' => false,
		);
		$debug_info['idc_error_option'] = array(
			'label'   => 'IDC Error Option',
			'value'   => wp_json_encode( Jetpack_Options::get_option( 'sync_error_idc' ) ),
			'private' => false,
		);
		$debug_info['idc_optin']        = array(
			'label'   => 'IDC Opt-in',
			'value'   => Identity_Crisis::should_handle_idc(),
			'private' => false,
		);

		// @todo -- Add testing results?
		$cxn_tests               = new Jetpack_Cxn_Tests();
		$debug_info['cxn_tests'] = array(
			'label'   => 'Connection Tests',
			'value'   => '',
			'private' => false,
		);
		if ( $cxn_tests->pass() ) {
			$debug_info['cxn_tests']['value'] = 'All Pass.';
		} else {
			$debug_info['cxn_tests']['value'] = wp_json_encode( $cxn_tests->list_fails() );
		}

		return $debug_info;
	}

	/**
	 * Returns a human readable string for which user is the master user.
	 *
	 * @return string
	 */
	private static function human_readable_master_user() {
		$master_user = Jetpack_Options::get_option( 'master_user' );

		if ( ! $master_user ) {
			return __( 'No master user set.', 'jetpack' );
		}

		$user = new WP_User( $master_user );

		if ( ! $user ) {
			return __( 'Master user no longer exists. Please disconnect and reconnect Jetpack.', 'jetpack' );
		}

		return self::human_readable_user( $user );
	}

	/**
	 * Return human readable string for a given user object.
	 *
	 * @param WP_User|int $user Object or ID.
	 *
	 * @return string
	 */
	private static function human_readable_user( $user ) {
		$user = new WP_User( $user );

		return sprintf( '#%1$d %2$s', $user->ID, $user->user_login ); // Format: "#1 username".
	}
}
class-jetpack-debugger.php                                                                                                                                                                                                                                     12293         1711191376  plugins/jetpack/_inc/lib/debugger                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <?php
/**
 * Jetpack Debugger functionality allowing for self-service diagnostic information via the legacy jetpack debugger.
 *
 * @package automattic/jetpack
 */

use Automattic\Jetpack\Redirect;
use Automattic\Jetpack\Status;

/**
 * Class Jetpack_Debugger
 *
 * A namespacing class for functionality related to the legacy in-plugin diagnostic tooling.
 */
class Jetpack_Debugger {
	/**
	 * Disconnect Jetpack and redirect user to connection flow.
	 *
	 * Used in class.jetpack-admin.php.
	 */
	public static function disconnect_and_redirect() {
		if ( ! ( isset( $_GET['nonce'] ) && wp_verify_nonce( $_GET['nonce'], 'jp_disconnect' ) ) ) { // phpcs:ignore WordPress.Security.ValidatedSanitizedInput.InputNotSanitized, WordPress.Security.ValidatedSanitizedInput.MissingUnslash
			return;
		}

		if ( ! empty( $_GET['disconnect'] ) ) {
			if ( Jetpack::is_connection_ready() ) {
				Jetpack::disconnect();
				wp_safe_redirect( Jetpack::admin_url() );
				exit;
			}
		}
	}

	/**
	 * Handles output to the browser for the in-plugin debugger.
	 */
	public static function jetpack_debug_display_handler() {
		if ( ! current_user_can( 'manage_options' ) ) {
			wp_die( esc_html__( 'You do not have sufficient permissions to access this page.', 'jetpack' ) );
		}

		$support_url = Jetpack::is_development_version()
			? Redirect::get_url( 'jetpack-contact-support-beta-group' )
			: Redirect::get_url( 'jetpack-contact-support' );

		$cxntests = new Jetpack_Cxn_Tests();
		?>
		<div class="wrap">
			<div class="jp-static-block">
				<h2><?php esc_html_e( 'Debugging Center', 'jetpack' ); ?></h2>

				<div class="jp-static-block-body">
					<h3><?php esc_html_e( "Testing your site's compatibility with Jetpack...", 'jetpack' ); ?></h3>
					<div class="jetpack-debug-test-container">
						<?php
						if ( $cxntests->pass() ) {
							echo '<div class="jetpack-tests-succeed">' . esc_html__( 'Your Jetpack setup looks a-okay!', 'jetpack' ) . '</div>';
						} else {
							$failures = $cxntests->list_fails();
							foreach ( $failures as $fail ) {
								?>
								<div class="notice notice-error inline">
									<div class="notice-icon-wrapper">
										<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2 -2 24 24" width="24" height="24" class="y_IPyP1wIAOhyNaqvXJq" aria-hidden="true" focusable="false"><path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm1.13 9.38l.35-6.46H8.52l.35 6.46h2.26zm-.09 3.36c.24-.23.37-.55.37-.96 0-.42-.12-.74-.36-.97s-.59-.35-1.06-.35-.82.12-1.07.35-.37.55-.37.97c0 .41.13.73.38.96.26.23.61.34 1.06.34s.8-.11 1.05-.34z"></path></svg>
									</div>

									<div class="notice-main-content">
										<div class="notice-title"><?php echo esc_html( $fail['short_description'] ); ?></div>

										<div class="notice-action-bar">
											<div>
												<a href="<?php echo esc_attr( $fail['action'] ); ?>" aria-disabled="false" class="components-button is-primary"><span><?php echo esc_html( $fail['action_label'] ); ?></span></a>
											</div>
										</div>
									</div>
								</div>
								<?php
							}
						}
						?>
					</div>

					<div class="entry-content">
						<h4><?php esc_html_e( 'Trouble with Jetpack?', 'jetpack' ); ?></h4>
						<p><?php esc_html_e( 'It may be caused by one of these issues, which you can diagnose yourself:', 'jetpack' ); ?></p>
						<ol>
							<li><?php esc_html_e( 'A known issue.', 'jetpack' ); ?>
								<?php
								printf(
									wp_kses(
										/* translators: URLs to Jetpack support pages. */
										__( 'Some themes and plugins have <a href="%1$s" target="_blank" rel="noopener noreferrer">known conflicts</a> with Jetpack – check the list. (You can also browse the <a href="%2$s" target="_blank" rel="noopener noreferrer">Jetpack support pages</a> or <a href="%3$s" target="_blank" rel="noopener noreferrer">Jetpack support forum</a> to see if others have experienced and solved the problem.)', 'jetpack' ),
										array(
											'a' => array(
												'href'   => array(),
												'target' => array(),
												'rel'    => array(),
											),
										)
									),
									esc_url( Redirect::get_url( 'jetpack-contact-support-known-issues' ) ),
									esc_url( Redirect::get_url( 'jetpack-support' ) ),
									esc_url( Redirect::get_url( 'wporg-support-plugin-jetpack' ) )
								);
								?>
							</li>
							<li>
								<?php esc_html_e( 'An incompatible plugin.', 'jetpack' ); ?>
								<?php esc_html_e( "Find out by disabling all plugins except Jetpack. If the problem persists, it's not a plugin issue. If the problem is solved, turn your plugins on one by one until the problem pops up again – there's the culprit! Let us know, and we'll try to help.", 'jetpack' ); ?>
							</li>
							<li>
								<?php esc_html_e( 'A theme conflict.', 'jetpack' ); ?>
								<?php
								$default_theme = wp_get_theme( WP_DEFAULT_THEME );

								if ( $default_theme->exists() ) {
									/* translators: %s is the name of a theme */
									echo esc_html( sprintf( __( "If your problem isn't known or caused by a plugin, try activating %s (the default WordPress theme).", 'jetpack' ), $default_theme->get( 'Name' ) ) );
								} else {
									esc_html_e( "If your problem isn't known or caused by a plugin, try activating the default WordPress theme.", 'jetpack' );
								}
								?>
								<?php esc_html_e( "If this solves the problem, something in your theme is probably broken – let the theme's author know.", 'jetpack' ); ?>
							</li>
							<li>
								<?php esc_html_e( 'A problem with your XML-RPC file.', 'jetpack' ); ?>
								<?php
								printf(
									wp_kses(
										/* translators: The URL to the site's xmlrpc.php file. */
										__( 'Load your <a href="%s">XML-RPC file</a>. It should say “XML-RPC server accepts POST requests only.” on a line by itself.', 'jetpack' ),
										array( 'a' => array( 'href' => array() ) )
									),
									esc_attr( site_url( 'xmlrpc.php' ) )
								);
								?>
								<ul>
									<li><?php esc_html_e( "If it's not by itself, a theme or plugin is displaying extra characters. Try steps 2 and 3.", 'jetpack' ); ?></li>
									<li><?php esc_html_e( 'If you get a 404 message, contact your web host. Their security may block the XML-RPC file.', 'jetpack' ); ?></li>
								</ul>
							</li>

							<?php if ( current_user_can( 'jetpack_disconnect' ) && Jetpack::is_connection_ready() ) : ?>
								<li>
									<?php esc_html_e( 'A connection problem with WordPress.com.', 'jetpack' ); ?>
									<?php
									printf(
										wp_kses(
											/* translators: URL to disconnect and reconnect Jetpack. */
											__( 'Jetpack works by connecting to WordPress.com for a lot of features. Sometimes, when the connection gets messed up, you need to disconnect and reconnect to get things working properly. <a href="%s">Disconnect from WordPress.com</a>', 'jetpack' ),
											array(
												'a' => array(
													'href' => array(),
													'class' => array(),
												),
											)
										),
										esc_attr(
											wp_nonce_url(
												Jetpack::admin_url(
													array(
														'page' => 'jetpack-debugger',
														'disconnect' => true,
													)
												),
												'jp_disconnect',
												'nonce'
											)
										)
									);
									?>
								</li>
							<?php endif; ?>
						</ol>

						<h4><?php esc_html_e( 'Still having trouble?', 'jetpack' ); ?></h4>
						<p>
							<?php esc_html_e( 'Ask us for help!', 'jetpack' ); ?>

							<?php
							/**
							 * Offload to new WordPress debug data.
							 */
							printf(
								wp_kses(
									/* translators: URL for Jetpack support. URL for WordPress's Site Health */
									__( '<a href="%1$s">Contact our Happiness team</a>. When you do, please include the <a href="%2$s">full debug information from your site</a>.', 'jetpack' ),
									array( 'a' => array( 'href' => array() ) )
								),
								esc_url( $support_url ),
								esc_url( admin_url() . 'site-health.php?tab=debug' )
							);
							?>
						</p>
					</div>
				</div>
			</div>

			<div class="jp-static-block">
				<h2><?php esc_html_e( 'More details about your Jetpack settings', 'jetpack' ); ?></h2>

				<div class="jp-static-block-body">
					<?php if ( Jetpack::is_connection_ready() ) : ?>
						<div id="connected-user-details">
							<p>
								<?php
								printf(
									wp_kses(
										/* translators: %s is an e-mail address */
										__( 'The primary connection is owned by <strong>%s</strong>\'s WordPress.com account.', 'jetpack' ),
										array( 'strong' => array() )
									),
									esc_html( Jetpack::get_master_user_email() )
								);
								?>
							</p>
						</div>
					<?php else : ?>
						<div id="dev-mode-details">
							<p>
								<?php
								printf(
									wp_kses(
										/* translators: Link to a Jetpack support page. */
										__( 'Would you like to use Jetpack on your local development site? You can do so thanks to <a href="%s">Jetpack\'s offline mode</a>.', 'jetpack' ),
										array( 'a' => array( 'href' => array() ) )
									),
									esc_url( Redirect::get_url( 'jetpack-support-development-mode' ) )
								);
								?>
							</p>
						</div>
					<?php endif; ?>

					<?php
					if (
						current_user_can( 'jetpack_manage_modules' )
						&& ( ( new Status() )->is_offline_mode() || Jetpack::is_connection_ready() )
					) {
						printf(
							wp_kses(
								'<p><a href="%1$s">%2$s</a></p>',
								array(
									'a' => array( 'href' => array() ),
									'p' => array(),
								)
							),
							esc_attr( Jetpack::admin_url( 'page=jetpack_modules' ) ),
							esc_html__( 'Access the full list of Jetpack modules available on your site.', 'jetpack' )
						);
					}
					?>
				</div>
			</div>
		</div>
		<?php
	}

	/**
	 * Outputs html needed within the <head> for the in-plugin debugger page.
	 */
	public static function jetpack_debug_admin_head() {

		Jetpack_Admin_Page::load_wrapper_styles();
		?>
		<style type="text/css">

			.jetpack-debug-test-container {
				margin: 8px 0;
			}

			#connected-user-details p strong {
				word-break: break-all;
			}

			.jetpack-tests-succeed {
				font-size: large;
				color: #069E08;
			}

			.jetpack-test-details {
				margin: 4px 6px;
				padding: 10px;
				overflow: auto;
				display: none;
			}

			.formbox {
				margin: 0 0 25px 0;
			}

			.formbox input[type="text"], .formbox input[type="email"], .formbox input[type="url"], .formbox textarea, #debug_info_div {
				border: 1px solid #dcdcde;
				border-radius: 11px;
				box-shadow: inset 0 1px 1px rgba(0,0,0,0.1);
				color: #646970;
				font-size: 14px;
				padding: 10px;
				width: 97%;
			}
			#debug_info_div {
				border-radius: 0;
				margin-top: 16px;
				background: #FFF;
				padding: 16px;
			}
			.formbox .contact-support input[type="submit"] {
				float: right;
				margin: 0 !important;
				border-radius: 20px !important;
				cursor: pointer;
				font-size: 13pt !important;
				height: auto !important;
				margin: 0 0 2em 10px !important;
				padding: 8px 16px !important;
				background-color: #dcdcde;
				border: 1px solid rgba(0,0,0,0.05);
				border-top-color: rgba(255,255,255,0.1);
				border-bottom-color: rgba(0,0,0,0.15);
				color: #333;
				font-weight: 400;
				display: inline-block;
				text-align: center;
				text-decoration: none;
			}

			.formbox span.errormsg {
				margin: 0 0 10px 10px;
				color: #d00;
				display: none;
			}

			.formbox.error span.errormsg {
				display: block;
			}

			#debug_info_div, #toggle_debug_info, #debug_info_div p {
				font-size: 12px;
			}

			#category_div ul li {
				list-style-type: none;
			}

		</style>
		<script type="text/javascript">
		jQuery( document ).ready( function($) {

			$( '#debug_info' ).prepend( 'jQuery version: ' + jQuery.fn.jquery + "\r\n" );
			$( '#debug_form_info' ).prepend( 'jQuery version: ' + jQuery.fn.jquery + "\r\n" );

			$( '.jetpack-test-error .jetpack-test-heading' ).on( 'click', function() {
				$( this ).parents( '.jetpack-test-error' ).find( '.jetpack-test-details' ).slideToggle();
				return false;
			} );

		} );
		</script>
		<?php
	}
}
debug-functions.php                                                                                                                                                                                                                                            3495          1711191376  plugins/jetpack/_inc/lib/debugger                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <?php
/**
 * WP Site Health debugging functions.
 *
 * @package automattic/jetpack
 */

/**
 * Test runner for Core's Site Health module.
 *
 * @since 7.3.0
 */
function jetpack_debugger_ajax_local_testing_suite() {
	check_ajax_referer( 'health-check-site-status' );
	if ( ! current_user_can( 'jetpack_manage_modules' ) ) {
		wp_send_json_error();
	}
	$tests = new Jetpack_Cxn_Tests();
	wp_send_json_success( $tests->output_results_for_core_async_site_health() );
}
/**
 * Adds the Jetpack Local Testing Suite to the Core Site Health system.
 *
 * @since 7.3.0
 *
 * @param array $core_tests Array of tests from Core's Site Health.
 *
 * @return array $core_tests Array of tests for Core's Site Health.
 */
function jetpack_debugger_site_status_tests( $core_tests ) {
	$cxn_tests = new Jetpack_Cxn_Tests();
	$tests     = $cxn_tests->list_tests( 'direct' );
	foreach ( $tests as $test ) {

		$core_tests['direct'][ $test['name'] ] = array(
			'label' => __( 'Jetpack: ', 'jetpack' ) . $test['name'],
			/**
			 * Callable for Core's Site Health system to execute.
			 *
			 * @param array $test A Jetpack Testing Suite test array.
			 * @param Jetpack_Cxn_Tests $cxn_tests An instance of the Jetpack Test Suite.
			 *
			 * @return array {
			 *      A results array to match the format expected by WordPress Core.
			 *
			 *      @type string $label Name for the test.
			 *      @type string $status 'critical', 'recommended', or 'good'.
			 *      @type array $badge Array for Site Health status. Keys label and color.
			 *      @type string $description Description of the test result.
			 *      @type string $action HTML to a link to resolve issue.
			 *      @type string $test Unique test identifier.
			 *  }
			 */
			'test'  => function () use ( $test, $cxn_tests ) {
				$results = $cxn_tests->run_test( $test['name'] );
				if ( is_wp_error( $results ) ) {
					return;
				}

				$label = $results['label'] ?
					$results['label'] :
					ucwords(
						str_replace(
							'_',
							' ',
							str_replace( 'test__', '', $test['name'] )
						)
					);
				if ( $results['long_description'] ) {
					$description = $results['long_description'];
				} elseif ( $results['short_description'] ) {
					$description = sprintf(
						'<p>%s</p>',
						$results['short_description']
					);
				} else {
					$description = sprintf(
						'<p>%s</p>',
						__( 'This test successfully passed!', 'jetpack' )
					);
				}

				$return = array(
					'label'       => $label,
					'status'      => 'good',
					'badge'       => array(
						'label' => __( 'Jetpack', 'jetpack' ),
						'color' => 'green',
					),
					'description' => $description,
					'actions'     => '',
					'test'        => 'jetpack_' . $test['name'],
				);

				if ( false === $results['pass'] ) {
					$return['status'] = $results['severity'];
					if ( ! empty( $results['action'] ) ) {
						$return['actions'] = sprintf(
							'<a href="%1$s" target="_blank" rel="noopener noreferrer">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>',
							esc_url( $results['action'] ),
							$results['action_label'],
							/* translators: accessibility text */
							__( '(opens in a new tab)', 'jetpack' )
						);
					}
				}

				return $return;
			},
		);
	}
	$core_tests['async']['jetpack_test_suite'] = array(
		'label' => __( 'Jetpack Tests', 'jetpack' ),
		'test'  => 'jetpack_local_testing_suite',
	);

	return $core_tests;
}
debugger.php                                                                                                                                                                                                                                                   872           1711191376  plugins/jetpack/_inc/lib                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <?php
/**
 * Loading the various functions used for Jetpack Debugging.
 *
 * @package automattic/jetpack
 */

/* Jetpack Connection Testing Framework */
require_once __DIR__ . '/debugger/class-jetpack-cxn-test-base.php';
/* Jetpack Connection Tests */
require_once __DIR__ . '/debugger/class-jetpack-cxn-tests.php';
/* Jetpack Debug Data */
require_once __DIR__ . '/debugger/class-jetpack-debug-data.php';
/* The "In-Plugin Debugger" admin page. */
require_once __DIR__ . '/debugger/class-jetpack-debugger.php';
/* General Debugging Functions */
require_once __DIR__ . '/debugger/debug-functions.php';

add_filter( 'debug_information', array( 'Jetpack_Debug_Data', 'core_debug_data' ) );
add_filter( 'site_status_tests', 'jetpack_debugger_site_status_tests' );
add_action( 'wp_ajax_health-check-jetpack-local_testing_suite', 'jetpack_debugger_ajax_local_testing_suite' );
functions.wp-notify.php                                                                                                                                                                                                                                        19350         1711191376  plugins/jetpack/_inc/lib                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <?php
/** phpcs:disable Squiz.Commenting.FileComment.MissingPackageTag,Generic.Commenting.DocComment.MissingShort
 *
 * Declare two functions to handle notification emails to authors and moderators.
 *
 * These functions are hooked into filters to short circuit the regular flow and send the emails.
 * Code was copied from the original pluggable functions and slightly modified (modifications are commented).
 *
 * In the past, we used to overwrite the whole pluggable function, but we started using filters to avoid having
 * to check for Jetpack::is_active() too early in the load flow.
 */

use Automattic\Jetpack\Connection\Manager as Connection_Manager;
use Automattic\Jetpack\Redirect;

// phpcs:disable WordPress.WP.I18n.MissingArgDomain --reason: Code copied from Core, so using Core strings.
// phpcs:disable WordPress.Utils.I18nTextDomainFixer.MissingArgDomain --reason: Code copied from Core, so using Core strings.

/**
 * Short circuits the {@see `wp_notify_postauthor`} function via the `comment_notification_recipients` filter.
 *
 * Notify an author (and/or others) of a comment/trackback/pingback on a post.
 *
 * @since 5.8.0
 * @since 9.3.0 Switched from pluggable function to filter callback
 *
 * @param array          $emails List of recipients.
 * @param int|WP_Comment $comment_id Comment ID or WP_Comment object.
 * @return array Empty array to shortcircuit wp_notify_postauthor execution. $emails if we want to disable the filter.
 */
function jetpack_notify_postauthor( $emails, $comment_id ) {
	// Don't do anything if Jetpack isn't connected.
	if ( ! Jetpack::is_connection_ready() || empty( $emails ) ) {
		return $emails;
	}

	// Original function modified: Code before the comment_notification_recipients filter removed.

	$comment = get_comment( $comment_id );
	if ( ! $comment ) {
		return $emails;
	}

	$post   = get_post( $comment->comment_post_ID );
	$author = get_userdata( $post->post_author );

	// Facilitate unsetting below without knowing the keys.
	$emails = array_flip( $emails );

	/** This filter is documented in core/src/wp-includes/pluggable.php */
	$notify_author = apply_filters( 'comment_notification_notify_author', false, $comment->comment_ID );

	// The comment was left by the author.
	if ( $author && ! $notify_author && $comment->user_id === $post->post_author ) {
		unset( $emails[ $author->user_email ] );
	}

	// The author moderated a comment on their own post.
	if ( $author && ! $notify_author && get_current_user_id() === $post->post_author ) {
		unset( $emails[ $author->user_email ] );
	}

	// The post author is no longer a member of the blog.
	if ( $author && ! $notify_author && ! user_can( $post->post_author, 'read_post', $post->ID ) ) {
		unset( $emails[ $author->user_email ] );
	}

	// If there's no email to send the comment to, bail, otherwise flip array back around for use below.
	if ( array() === $emails ) {
		return array(); // Original function modified. Return empty array instead of false.
	} else {
		$emails = array_flip( $emails );
	}

	$switched_locale = switch_to_locale( get_locale() );

	$comment_author_domain = '';
	if ( WP_Http::is_ip_address( $comment->comment_author_IP ) ) {
		$comment_author_domain = gethostbyaddr( $comment->comment_author_IP );
	}

	// The blogname option is escaped with esc_html on the way into the database in sanitize_option
	// we want to reverse this for the plain text arena of emails.
	$blogname        = wp_specialchars_decode( get_option( 'blogname' ), ENT_QUOTES );
	$comment_content = wp_specialchars_decode( $comment->comment_content );

	// Original function modified.
	$moderate_on_wpcom = ! in_array( // phpcs:ignore WordPress.PHP.StrictInArray.MissingTrueStrict
		false,
		array_map( 'jetpack_notify_is_user_connected_by_email', $emails )
	);

	switch ( $comment->comment_type ) {
		case 'trackback':
			/* translators: 1: Post title */
			$notify_message = sprintf( __( 'New trackback on your post "%s"' ), $post->post_title ) . "\r\n";
			/* translators: 1: Trackback/pingback website name, 2: website IP address, 3: website hostname */
			$notify_message .= sprintf( __( 'Website: %1$s (IP address: %2$s, %3$s)' ), $comment->comment_author, $comment->comment_author_IP, $comment_author_domain ) . "\r\n";
			/* translators: %s: Site URL */
			$notify_message .= sprintf( __( 'URL: %s' ), $comment->comment_author_url ) . "\r\n";
			/* translators: %s: Comment Content */
			$notify_message     .= sprintf( __( 'Comment: %s' ), "\r\n" . $comment_content ) . "\r\n\r\n";
				$notify_message .= __( 'You can see all trackbacks on this post here:' ) . "\r\n";
				/* translators: 1: blog name, 2: post title */
				$subject = sprintf( __( '[%1$s] Trackback: "%2$s"' ), $blogname, $post->post_title );
			break;
		case 'pingback':
			/* translators: 1: Post title */
			$notify_message = sprintf( __( 'New pingback on your post "%s"' ), $post->post_title ) . "\r\n";
			/* translators: 1: Trackback/pingback website name, 2: website IP address, 3: website hostname */
			$notify_message .= sprintf( __( 'Website: %1$s (IP address: %2$s, %3$s)' ), $comment->comment_author, $comment->comment_author_IP, $comment_author_domain ) . "\r\n";
			/* translators: %s: Site URL */
			$notify_message .= sprintf( __( 'URL: %s' ), $comment->comment_author_url ) . "\r\n";
			/* translators: %s: Comment Content */
			$notify_message .= sprintf( __( 'Comment: %s' ), "\r\n" . $comment_content ) . "\r\n\r\n";
			$notify_message .= __( 'You can see all pingbacks on this post here:' ) . "\r\n";
			/* translators: 1: blog name, 2: post title */
			$subject = sprintf( __( '[%1$s] Pingback: "%2$s"' ), $blogname, $post->post_title );
			break;
		default: // Comments.
			/* translators: 1: Post title */
			$notify_message = sprintf( __( 'New comment on your post "%s"' ), $post->post_title ) . "\r\n";
			/* translators: 1: comment author, 2: comment author's IP address, 3: comment author's hostname */
			$notify_message .= sprintf( __( 'Author: %1$s (IP address: %2$s, %3$s)' ), $comment->comment_author, $comment->comment_author_IP, $comment_author_domain ) . "\r\n";
			/* translators: %s: Email address */
			$notify_message .= sprintf( __( 'Email: %s' ), $comment->comment_author_email ) . "\r\n";
			/* translators: %s: Site URL */
			$notify_message .= sprintf( __( 'URL: %s' ), $comment->comment_author_url ) . "\r\n";
			/* translators: %s: Comment Content */
			$notify_message .= sprintf( __( 'Comment: %s' ), "\r\n" . $comment_content ) . "\r\n\r\n";
			$notify_message .= __( 'You can see all comments on this post here:' ) . "\r\n";
			/* translators: 1: blog name, 2: post title */
			$subject = sprintf( __( '[%1$s] Comment: "%2$s"' ), $blogname, $post->post_title );
			break;
	}

	// Original function modified: Consider $moderate_on_wpcom when building $notify_message.
	$notify_message .= $moderate_on_wpcom
		? Redirect::get_url(
			'calypso-comments-all',
			array(
				'path' => $comment->comment_post_ID,
			)
		) . "/\r\n\r\n"
		: get_permalink( $comment->comment_post_ID ) . "#comments\r\n\r\n";

	/* translators: %s: URL */
	$notify_message .= sprintf( __( 'Permalink: %s' ), get_comment_link( $comment ) ) . "\r\n";

	$base_wpcom_edit_comment_url = Redirect::get_url(
		'calypso-edit-comment',
		array(
			'path'  => $comment_id,
			'query' => 'action=__action__', // __action__ will be replaced by the actual action.
		)
	);

	// Original function modified: Consider $moderate_on_wpcom when building $notify_message.
	if ( user_can( $post->post_author, 'edit_comment', $comment->comment_ID ) ) {
		if ( EMPTY_TRASH_DAYS ) {
			$notify_message .= sprintf(
				/* translators: Placeholder is the edit URL */
				__( 'Trash it: %s' ),
				$moderate_on_wpcom
				? str_replace( '__action__', 'trash', $base_wpcom_edit_comment_url )
				: admin_url( "comment.php?action=trash&c={$comment->comment_ID}#wpbody-content" )
			) . "\r\n";
		} else {
			$notify_message .= sprintf(
				/* translators: Placeholder is the edit URL */
				__( 'Delete it: %s' ),
				$moderate_on_wpcom
				? str_replace( '__action__', 'delete', $base_wpcom_edit_comment_url )
				: admin_url( "comment.php?action=delete&c={$comment->comment_ID}#wpbody-content" )
			) . "\r\n";
		}
		$notify_message .= sprintf(
			/* translators: Placeholder is the edit URL */
			__( 'Spam it: %s' ),
			$moderate_on_wpcom
			? str_replace( '__action__', 'spam', $base_wpcom_edit_comment_url )
			: admin_url( "comment.php?action=spam&c={$comment->comment_ID}#wpbody-content" )
		) . "\r\n";
	}

	$wp_email = 'wordpress@' . preg_replace( '#^www\.#', '', strtolower( isset( $_SERVER['SERVER_NAME'] ) ? filter_var( wp_unslash( $_SERVER['SERVER_NAME'] ) ) : '' ) );

	if ( '' === $comment->comment_author ) {
		$from = "From: \"$blogname\" <$wp_email>";
		if ( '' !== $comment->comment_author_email ) {
			$reply_to = "Reply-To: $comment->comment_author_email";
		}
	} else {
		$from = "From: \"$comment->comment_author\" <$wp_email>";
		if ( '' !== $comment->comment_author_email ) {
			$reply_to = "Reply-To: \"$comment->comment_author_email\" <$comment->comment_author_email>";
		}
	}

	$message_headers = "$from\n"
		. 'Content-Type: text/plain; charset="' . get_option( 'blog_charset' ) . "\"\n";

	if ( isset( $reply_to ) ) {
		$message_headers .= $reply_to . "\n";
	}

	/** This filter is documented in core/src/wp-includes/pluggable.php */
	$notify_message = apply_filters( 'comment_notification_text', $notify_message, $comment->comment_ID );

	/** This filter is documented in core/src/wp-includes/pluggable.php */
	$subject = apply_filters( 'comment_notification_subject', $subject, $comment->comment_ID );

	/** This filter is documented in core/src/wp-includes/pluggable.php */
	$message_headers = apply_filters( 'comment_notification_headers', $message_headers, $comment->comment_ID );

	foreach ( $emails as $email ) {
		wp_mail( $email, wp_specialchars_decode( $subject ), $notify_message, $message_headers );
	}

	if ( $switched_locale ) {
		restore_previous_locale();
	}

	return array();
}

/**
 * Short circuits the {@see `wp_notify_moderator`} function via the `notify_moderator` filter.
 *
 * Notifies the moderator of the site about a new comment that is awaiting approval.
 *
 * @since 5.8.0
 * @since 9.2.0 Switched from pluggable function to filter callback
 * @since 9.5.0 Updated the passing condition to call get_option( 'moderation_notify' ); directly.
 *
 * @global wpdb $wpdb WordPress database abstraction object.
 *
 * @param string $notify_moderator The value of the moderation_notify option OR if the comment is awaiting moderation.
 * @param int    $comment_id Comment ID.
 * @return boolean Returns false to shortcircuit the execution of wp_notify_moderator
 */
function jetpack_notify_moderator( $notify_moderator, $comment_id ) {
	/*
	 * $notify_moderator is a tricky one. This filter is called in two places in Core. One is just to pass if a comment
	 * is being held for moderation. See https://core.trac.wordpress.org/browser/tags/5.6/src/wp-includes/comment.php#L2296
	 *
	 * So we can't just assume that a true value here is what we need. The second time the filter is called, it checks
	 * the option -- which is what we expected here. See https://core.trac.wordpress.org/browser/tags/5.6/src/wp-includes/pluggable.php#L1737
	 *
	 * It's possible another plugin would be filtering this value to true despite the option setting; however, since we're running at priority 1,
	 * they can still do that. They'll just get the Core flow instead of this one.
	 */

	// If Jetpack is not active, or if Notify moderators options is not set, let the default flow go on.
	if ( ! $notify_moderator || ! get_option( 'moderation_notify' ) || ! Jetpack::is_connection_ready() ) {
		return $notify_moderator;
	}

	// Original function modified: Removed code before the notify_moderator filter.

	global $wpdb;

	$comment = get_comment( $comment_id );
	if ( ! $comment ) {
		return $notify_moderator;
	}

	$post = get_post( $comment->comment_post_ID );
	$user = get_userdata( $post->post_author );
	// Send to the administration and to the post author if the author can modify the comment.
	$emails = array( get_option( 'admin_email' ) );
	if ( $user && user_can( $user->ID, 'edit_comment', $comment_id ) && ! empty( $user->user_email ) ) {
		if ( 0 !== strcasecmp( $user->user_email, get_option( 'admin_email' ) ) ) {
			$emails[] = $user->user_email;
		}
	}

	$switched_locale = switch_to_locale( get_locale() );

	$comment_author_domain = '';
	if ( WP_Http::is_ip_address( $comment->comment_author_IP ) ) {
		$comment_author_domain = gethostbyaddr( $comment->comment_author_IP );
	}
	$comments_waiting = $wpdb->get_var( "SELECT count(comment_ID) FROM $wpdb->comments WHERE comment_approved = '0'" );

	// The blogname option is escaped with esc_html on the way into the database in sanitize_option
	// we want to reverse this for the plain text arena of emails.
	$blogname        = wp_specialchars_decode( get_option( 'blogname' ), ENT_QUOTES );
	$comment_content = wp_specialchars_decode( $comment->comment_content );

	switch ( $comment->comment_type ) {
		case 'trackback':
			/* translators: 1: Post title */
			$notify_message  = sprintf( __( 'A new trackback on the post "%s" is waiting for your approval' ), $post->post_title ) . "\r\n";
			$notify_message .= get_permalink( $comment->comment_post_ID ) . "\r\n\r\n";
			/* translators: 1: Trackback/pingback website name, 2: website IP address, 3: website hostname */
			$notify_message .= sprintf( __( 'Website: %1$s (IP address: %2$s, %3$s)' ), $comment->comment_author, $comment->comment_author_IP, $comment_author_domain ) . "\r\n";
			/* translators: 1: Trackback/pingback/comment author URL */
			$notify_message .= sprintf( __( 'URL: %s' ), $comment->comment_author_url ) . "\r\n";
			$notify_message .= __( 'Trackback excerpt: ' ) . "\r\n" . $comment_content . "\r\n\r\n";
			break;
		case 'pingback':
			/* translators: 1: Post title */
			$notify_message  = sprintf( __( 'A new pingback on the post "%s" is waiting for your approval' ), $post->post_title ) . "\r\n";
			$notify_message .= get_permalink( $comment->comment_post_ID ) . "\r\n\r\n";
			/* translators: 1: Trackback/pingback website name, 2: website IP address, 3: website hostname */
			$notify_message .= sprintf( __( 'Website: %1$s (IP address: %2$s, %3$s)' ), $comment->comment_author, $comment->comment_author_IP, $comment_author_domain ) . "\r\n";
			/* translators: 1: Trackback/pingback/comment author URL */
			$notify_message .= sprintf( __( 'URL: %s' ), $comment->comment_author_url ) . "\r\n";
			$notify_message .= __( 'Pingback excerpt: ' ) . "\r\n" . $comment_content . "\r\n\r\n";
			break;
		default: // Comments.
			/* translators: 1: Post title */
			$notify_message  = sprintf( __( 'A new comment on the post "%s" is waiting for your approval' ), $post->post_title ) . "\r\n";
			$notify_message .= get_permalink( $comment->comment_post_ID ) . "\r\n\r\n";
			/* translators: 1: Comment author name, 2: comment author's IP address, 3: comment author's hostname */
			$notify_message .= sprintf( __( 'Author: %1$s (IP address: %2$s, %3$s)' ), $comment->comment_author, $comment->comment_author_IP, $comment_author_domain ) . "\r\n";
			/* translators: 1: Comment author URL */
			$notify_message .= sprintf( __( 'Email: %s' ), $comment->comment_author_email ) . "\r\n";
			/* translators: 1: Trackback/pingback/comment author URL */
			$notify_message .= sprintf( __( 'URL: %s' ), $comment->comment_author_url ) . "\r\n";
			/* translators: 1: Comment text */
			$notify_message .= sprintf( __( 'Comment: %s' ), "\r\n" . $comment_content ) . "\r\n\r\n";
			break;
	}

	/** This filter is documented in core/src/wp-includes/pluggable.php */
	$emails = apply_filters( 'comment_moderation_recipients', $emails, $comment_id );

	// Original function modified.
	$moderate_on_wpcom = ! in_array( // phpcs:ignore WordPress.PHP.StrictInArray.MissingTrueStrict
		false,
		array_map( 'jetpack_notify_is_user_connected_by_email', $emails )
	);

	$base_wpcom_edit_comment_url = Redirect::get_url(
		'calypso-edit-comment',
		array(
			'path'  => $comment_id,
			'query' => 'action=__action__', // __action__ will be replaced by the actual action.
		)
	);

	// Original function modified: Consider $moderate_on_wpcom when building $notify_message.
	$notify_message .= sprintf(
		/* translators: Comment moderation. 1: Comment action URL */
		__( 'Approve it: %s' ),
		$moderate_on_wpcom
		? str_replace( '__action__', 'approve', $base_wpcom_edit_comment_url )
		: admin_url( "comment.php?action=approve&c={$comment_id}#wpbody-content" )
	) . "\r\n";

	if ( EMPTY_TRASH_DAYS ) {
		$notify_message .= sprintf(
			/* translators: Comment moderation. 1: Comment action URL */
			__( 'Trash it: %s' ),
			$moderate_on_wpcom
			? str_replace( '__action__', 'trash', $base_wpcom_edit_comment_url )
			: admin_url( "comment.php?action=trash&c={$comment_id}#wpbody-content" )
		) . "\r\n";
	} else {
		$notify_message .= sprintf(
			/* translators: Comment moderation. 1: Comment action URL */
			__( 'Delete it: %s' ),
			$moderate_on_wpcom
			? str_replace( '__action__', 'delete', $base_wpcom_edit_comment_url )
			: admin_url( "comment.php?action=delete&c={$comment_id}#wpbody-content" )
		) . "\r\n";
	}

	$notify_message .= sprintf(
		/* translators: Comment moderation. 1: Comment action URL */
		__( 'Spam it: %s' ),
		$moderate_on_wpcom
		? str_replace( '__action__', 'spam', $base_wpcom_edit_comment_url )
		: admin_url( "comment.php?action=spam&c={$comment_id}#wpbody-content" )
	) . "\r\n";

	$notify_message .= sprintf(
		/* translators: Comment moderation. 1: Number of comments awaiting approval */
		_n(
			'Currently %s comment is waiting for approval. Please visit the moderation panel:',
			'Currently %s comments are waiting for approval. Please visit the moderation panel:',
			$comments_waiting
		),
		number_format_i18n( $comments_waiting )
	) . "\r\n";

	$notify_message .= $moderate_on_wpcom
		? Redirect::get_url( 'calypso-comments-pending' )
		: admin_url( 'edit-comments.php?comment_status=moderated#wpbody-content' ) . "\r\n";

	/* translators: Comment moderation notification email subject. 1: Site name, 2: Post title */
	$subject         = sprintf( __( '[%1$s] Please moderate: "%2$s"' ), $blogname, $post->post_title );
	$message_headers = '';

	/** This filter is documented in core/src/wp-includes/pluggable.php */
	$notify_message = apply_filters( 'comment_moderation_text', $notify_message, $comment_id );

	/** This filter is documented in core/src/wp-includes/pluggable.php */
	$subject = apply_filters( 'comment_moderation_subject', $subject, $comment_id );

	/** This filter is documented in core/src/wp-includes/pluggable.php */
	$message_headers = apply_filters( 'comment_moderation_headers', $message_headers, $comment_id );

	foreach ( $emails as $email ) {
		wp_mail( $email, wp_specialchars_decode( $subject ), $notify_message, $message_headers );
	}

	if ( $switched_locale ) {
		restore_previous_locale();
	}

	return false;
}

/**
 * Gets an user by email and verify if it's connected
 *
 * @param string $email The user email.
 * @return boolean
 */
function jetpack_notify_is_user_connected_by_email( $email ) {
	$user = get_user_by( 'email', $email );
	return ( new Connection_Manager( 'jetpack' ) )->is_user_connected( $user->ID );
}
icalendar-reader.php                                                                                                                                                                                                                                           33731         1711191376  plugins/jetpack/_inc/lib                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <?php // phpcs:ignore WordPress.Files.FileName.InvalidClassFileName
/**
 * Get and render iCal feeds.
 * Used by the Upcoming Events widget and the [upcomingevents] shortcode.
 *
 * @package automattic/jetpack
 */

// phpcs:disable Universal.Files.SeparateFunctionsFromOO.Mixed -- TODO: Move classes to appropriately-named class files.

/**
 * Calendar utilities class.
 *
 * phpcs:disable PEAR.NamingConventions.ValidClassName.StartWithCapital
 */
class iCalendarReader {
	// phpcs:enable PEAR.NamingConventions.ValidClassName.StartWithCapital
	// phpcs:disable WordPress.DateTime.RestrictedFunctions.date_date -- we manually handle timezones all over the file.
	// @todo Verify that we're manually handling timezones *correctly*. We probably need more `DateTime` with `$this->timezone` and maybe `wp_date()` and less `strtotime()` and `date()` and `date_i18n()`.
	/**
	 * Count To Do events in calendar.
	 *
	 * @var int
	 */
	public $todo_count = 0;

	/**
	 * How many events can be found in calendar.
	 *
	 * @var int
	 */
	public $event_count = 0;

	/**
	 * Details about our calendar.
	 *
	 * @var array
	 */
	public $cal = array();

	/**
	 * Timezone parsed from the iCalendar feed, if any.
	 *
	 * @var null|DateTimeZone
	 */
	public $timezone = null;

	/**
	 * Class constructor
	 *
	 * @return void
	 */
	public function __construct() {}

	/**
	 * Return an array of events
	 *
	 * @param string $url   (default: '') URL of the iCal feed.
	 * @param int    $count Count the number of events.
	 *
	 * @return array | false on failure
	 */
	public function get_events( $url = '', $count = 5 ) {
		$count        = (int) $count;
		$transient_id = 'icalendar_vcal_' . md5( $url ) . '_' . $count;

		$vcal = get_transient( $transient_id );
		$vcal = false;
		if ( ! empty( $vcal ) ) {
			if ( isset( $vcal['TIMEZONE'] ) ) {
				$this->timezone = $this->timezone_from_string( $vcal['TIMEZONE'] );
			}

			if ( isset( $vcal['VEVENT'] ) ) {
				$vevent = $vcal['VEVENT'];

				if ( $count > 0 ) {
					$vevent = array_slice( $vevent, 0, $count );
				}

				$this->cal['VEVENT'] = $vevent;

				return $this->cal['VEVENT'];
			}
		}

		if ( ! $this->parse( $url ) ) {
			return false;
		}

		$vcal = array();

		if ( $this->timezone ) {
			$vcal['TIMEZONE'] = $this->timezone->getName();
		} else {
			$this->timezone = $this->timezone_from_string( '' );
		}

		if ( ! empty( $this->cal['VEVENT'] ) ) {
			$vevent = $this->cal['VEVENT'];

			// check for recurring events.
			// $vevent = $this->add_recurring_events( $vevent );.

			// remove before caching - no sense in hanging onto the past.
			$vevent = $this->filter_past_and_recurring_events( $vevent );

			// order by soonest start date.
			$vevent = $this->sort_by_recent( $vevent );

			$vcal['VEVENT'] = $vevent;
		}

		set_transient( $transient_id, $vcal, HOUR_IN_SECONDS );

		if ( ! isset( $vcal['VEVENT'] ) ) {
			return false;
		}

		if ( $count > 0 ) {
			return array_slice( $vcal['VEVENT'], 0, $count );
		}

		return $vcal['VEVENT'];
	}

	/**
	 * Adjust event's time based on site's timezone.
	 *
	 * @param array $events Array of events.
	 *
	 * @return array
	 */
	public function apply_timezone_offset( $events ) {
		if ( ! $events ) {
			return $events;
		}

		// get timezone offset from the timezone name.
		$timezone = wp_timezone();

		$offsetted_events = array();

		foreach ( $events as $event ) {
			// Don't handle all-day events.
			if ( 8 < strlen( $event['DTSTART'] ) ) {
				$start_time = preg_replace( '/Z$/', '', $event['DTSTART'] );
				$start_time = new DateTime( $start_time, $this->timezone );
				$start_time->setTimeZone( $timezone );

				$end_time = preg_replace( '/Z$/', '', $event['DTEND'] );
				$end_time = new DateTime( $end_time, $this->timezone );
				$end_time->setTimeZone( $timezone );

				$event['DTSTART'] = $start_time->format( 'YmdHis\Z' );
				$event['DTEND']   = $end_time->format( 'YmdHis\Z' );
			}

			$offsetted_events[] = $event;
		}

		return $offsetted_events;
	}

	/**
	 * Reorganize events into an array of events with standardized data.
	 *
	 * @param array $events Array of events.
	 *
	 * @return array
	 */
	protected function filter_past_and_recurring_events( $events ) {
		$upcoming             = array();
		$set_recurring_events = array();
		/**
		 * This filter allows any time to be passed in for testing or changing timezones, etc...
		 *
		 * @module widgets
		 *
		 * @since 3.4.0
		 *
		 * @param object time() A time object.
		 */
		$current = apply_filters( 'ical_get_current_time', time() );

		foreach ( $events as $event ) {

			$date_from_ics = strtotime( $event['DTSTART'] );
			if ( isset( $event['DTEND'] ) ) {
				$duration = strtotime( $event['DTEND'] ) - strtotime( $event['DTSTART'] );
			} else {
				$duration = 0;
			}

			if ( isset( $event['RRULE'] ) && $this->timezone->getName() && 8 !== strlen( $event['DTSTART'] ) ) {
				try {
					$adjusted_time = new DateTime( $event['DTSTART'], new DateTimeZone( 'UTC' ) );
					$adjusted_time->setTimeZone( new DateTimeZone( $this->timezone->getName() ) );
					$event['DTSTART'] = $adjusted_time->format( 'Ymd\THis' );
					$date_from_ics    = strtotime( $event['DTSTART'] );

					$event['DTEND'] = date( 'Ymd\THis', strtotime( $event['DTSTART'] ) + $duration );
				} catch ( Exception $e ) { // phpcs:ignore Generic.CodeAnalysis.EmptyStatement.DetectedCatch
					// Invalid argument to DateTime.
				}

				if ( isset( $event['EXDATE'] ) ) {
					$exdates = array();
					foreach ( (array) $event['EXDATE'] as $exdate ) {
						try {
							$adjusted_time = new DateTime( $exdate, new DateTimeZone( 'UTC' ) );
							$adjusted_time->setTimeZone( new DateTimeZone( $this->timezone->getName() ) );
							if ( 8 === strlen( $event['DTSTART'] ) ) {
								$exdates[] = $adjusted_time->format( 'Ymd' );
							} else {
								$exdates[] = $adjusted_time->format( 'Ymd\THis' );
							}
						} catch ( Exception $e ) { // phpcs:ignore Generic.CodeAnalysis.EmptyStatement.DetectedCatch
							// Invalid argument to DateTime.
						}
					}
					$event['EXDATE'] = $exdates;
				} else {
					$event['EXDATE'] = array();
				}
			}

			if ( ! isset( $event['DTSTART'] ) ) {
				continue;
			}

			// Process events with RRULE before other events.
			$rrule = isset( $event['RRULE'] ) ? $event['RRULE'] : false;
			$uid   = $event['UID'];

			if ( $rrule && ! in_array( $uid, $set_recurring_events, true ) ) {

				// Break down the RRULE into digestible chunks.
				$rrule_array = array();

				foreach ( explode( ';', $event['RRULE'] ) as $rline ) {
					list( $rkey, $rvalue ) = explode( '=', $rline, 2 );
					$rrule_array[ $rkey ]  = $rvalue;
				}

				$interval    = ( isset( $rrule_array['INTERVAL'] ) ) ? $rrule_array['INTERVAL'] : 1;
				$rrule_count = ( isset( $rrule_array['COUNT'] ) ) ? $rrule_array['COUNT'] : 0;
				$until       = ( isset( $rrule_array['UNTIL'] ) ) ? strtotime( $rrule_array['UNTIL'] ) : strtotime( '+1 year', $current );

				// Used to bound event checks.
				$echo_limit = 10;
				$noop       = false;

				// Set bydays for the event.
				$weekdays = array( 'SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA' );
				$bydays   = $weekdays;

				// Calculate a recent start date for incrementing depending on the frequency and interval.
				switch ( $rrule_array['FREQ'] ) {

					case 'DAILY':
						$frequency  = 'day';
						$echo_limit = 10;

						if ( $date_from_ics >= $current ) {
							$recurring_event_date_start = date( 'Ymd\THis', strtotime( $event['DTSTART'] ) );
						} else {
							// Interval and count.
							$catchup = floor( ( $current - strtotime( $event['DTSTART'] ) ) / ( $interval * DAY_IN_SECONDS ) );
							if ( $rrule_count && $catchup > 0 ) {
								if ( $catchup < $rrule_count ) {
									$rrule_count                = $rrule_count - $catchup;
									$recurring_event_date_start = date(
										'Ymd',
										strtotime(
											'+ ' . ( $interval * $catchup ) . ' days',
											strtotime( $event['DTSTART'] )
										)
									) . date(
										'\THis',
										strtotime( $event['DTSTART'] )
									);
								} else {
									$noop = true;
								}
							} else {
								$recurring_event_date_start = date(
									'Ymd',
									strtotime(
										'+ ' . ( $interval * $catchup ) . ' days',
										strtotime( $event['DTSTART'] )
									)
								) . date(
									'\THis',
									strtotime( $event['DTSTART'] )
								);
							}
						}
						break;

					case 'WEEKLY':
						$frequency  = 'week';
						$echo_limit = 4;

						// BYDAY exception to current date.
						$day = false;
						if ( ! isset( $rrule_array['BYDAY'] ) ) {
							$rrule_array['BYDAY'] = strtoupper( substr( date( 'D', strtotime( $event['DTSTART'] ) ), 0, 2 ) );
							$day                  = $rrule_array['BYDAY'];
						}
						$bydays = explode( ',', $rrule_array['BYDAY'] );

						if ( $date_from_ics >= $current ) {
							$recurring_event_date_start = date( 'Ymd\THis', strtotime( $event['DTSTART'] ) );
						} else {
							// Interval and count.
							$catchup = floor( ( $current - strtotime( $event['DTSTART'] ) ) / ( $interval * WEEK_IN_SECONDS ) );
							if ( $rrule_count && $catchup > 0 ) {
								if ( ( $catchup * count( $bydays ) ) < $rrule_count ) {
									$rrule_count                = $rrule_count - ( $catchup * count( $bydays ) ); // Estimate current event count.
									$recurring_event_date_start = date( 'Ymd', strtotime( '+ ' . ( $interval * $catchup ) . ' weeks', strtotime( $event['DTSTART'] ) ) ) . date( '\THis', strtotime( $event['DTSTART'] ) );
								} else {
									$noop = true;
								}
							} else {
								$recurring_event_date_start = date( 'Ymd', strtotime( '+ ' . ( $interval * $catchup ) . ' weeks', strtotime( $event['DTSTART'] ) ) ) . date( '\THis', strtotime( $event['DTSTART'] ) );
							}
						}

						// Set to Sunday start.
						if ( ! $noop && 'SU' !== strtoupper( substr( date( 'D', strtotime( $recurring_event_date_start ) ), 0, 2 ) ) ) {
							$recurring_event_date_start = date( 'Ymd', strtotime( 'last Sunday', strtotime( $recurring_event_date_start ) ) ) . date( '\THis', strtotime( $event['DTSTART'] ) );
						}
						break;

					case 'MONTHLY':
						$frequency  = 'month';
						$echo_limit = 1;

						if ( $date_from_ics >= $current ) {
							$recurring_event_date_start = date( 'Ymd\THis', strtotime( $event['DTSTART'] ) );
						} else {
							// Describe the date in the month.
							if ( isset( $rrule_array['BYDAY'] )
								&& preg_match( '/^(-?\d)([A-Z]{2})/', $rrule_array['BYDAY'], $matches )
							) {
								$day_number = $matches[1];
								$week_day   = $matches[2];

								$day_cardinals = array(
									-3 => 'third to last',
									-2 => 'second to last',
									-1 => 'last',
									1  => 'first',
									2  => 'second',
									3  => 'third',
									4  => 'fourth',
									5  => 'fifth',
								);
								$weekdays      = array(
									'SU' => 'Sunday',
									'MO' => 'Monday',
									'TU' => 'Tuesday',
									'WE' => 'Wednesday',
									'TH' => 'Thursday',
									'FR' => 'Friday',
									'SA' => 'Saturday',
								);

								$day_cardinal    = $day_cardinals[ $day_number ] ?? '';
								$weekday         = $weekdays[ $week_day ] ?? '';
								$event_date_desc = "$day_cardinal $weekday of ";
							} else {
								$event_date_desc = date( 'd ', strtotime( $event['DTSTART'] ) );
							}

							// Interval only.
							if ( $interval > 1 ) {
								$catchup = 0;
								$maybe   = strtotime( $event['DTSTART'] );
								while ( $maybe < $current ) {
									$maybe = strtotime( '+ ' . ( $interval * $catchup ) . ' months', strtotime( $event['DTSTART'] ) );
									++$catchup;
								}
								$recurring_event_date_start = date( 'Ymd', strtotime( $event_date_desc . date( 'F Y', strtotime( '+ ' . ( $interval * ( $catchup - 1 ) ) . ' months', strtotime( $event['DTSTART'] ) ) ) ) ) . date( '\THis', strtotime( $event['DTSTART'] ) );
							} else {
								$recurring_event_date_start = date( 'Ymd', strtotime( $event_date_desc . date( 'F Y', $current ) ) ) . date( '\THis', strtotime( $event['DTSTART'] ) );
							}

							// Add one interval if necessary.
							if ( strtotime( $recurring_event_date_start ) < $current ) {
								if ( $interval > 1 ) {
									$recurring_event_date_start = date( 'Ymd', strtotime( $event_date_desc . date( 'F Y', strtotime( '+ ' . ( $interval * $catchup ) . ' months', strtotime( $event['DTSTART'] ) ) ) ) ) . date( '\THis', strtotime( $event['DTSTART'] ) );
								} else {
									try {
										$adjustment = new DateTime( date( 'Y-m-d', $current ) );
										$adjustment->modify( 'first day of next month' );
										$recurring_event_date_start = date( 'Ymd', strtotime( $event_date_desc . $adjustment->format( 'F Y' ) ) ) . date( '\THis', strtotime( $event['DTSTART'] ) );
									} catch ( Exception $e ) { // phpcs:ignore Generic.CodeAnalysis.EmptyStatement.DetectedCatch
										// Invalid argument to DateTime.
									}
								}
							}
						}
						break;

					case 'YEARLY':
						$frequency  = 'year';
						$echo_limit = 1;

						if ( $date_from_ics >= $current ) {
							$recurring_event_date_start = date( 'Ymd\THis', strtotime( $event['DTSTART'] ) );
						} else {
							$recurring_event_date_start = date( 'Y', $current ) . date( 'md\THis', strtotime( $event['DTSTART'] ) );
							if ( strtotime( $recurring_event_date_start ) < $current ) {
								try {
									$next = new DateTime( date( 'Y-m-d', $current ) );
									$next->modify( 'first day of next year' );
									$recurring_event_date_start = $next->format( 'Y' ) . date( 'md\THis', strtotime( $event['DTSTART'] ) );
								} catch ( Exception $e ) { // phpcs:ignore Generic.CodeAnalysis.EmptyStatement.DetectedCatch
									// Invalid argument to DateTime.
								}
							}
						}
						break;

					default:
						$frequency = false;
				}

				if ( false !== $frequency && ! $noop ) {
					$count_counter = 1;

					// If no COUNT limit, go to 10.
					if ( empty( $rrule_count ) ) {
						$rrule_count = 10;
					}

					// Set up EXDATE handling for the event.
					$exdates = ( isset( $event['EXDATE'] ) ) ? $event['EXDATE'] : array();

					for ( $i = 1; $i <= $echo_limit; $i++ ) {

						// Weeks need a daily loop and must check for inclusion in BYDAYS.
						if ( 'week' === $frequency ) {
							$byday_event_date_start = strtotime( $recurring_event_date_start );

							foreach ( $weekdays as $day ) {

								$event_start_timestamp = $byday_event_date_start;
								$start_time            = date( 'His', $event_start_timestamp );
								$event_end_timestamp   = $event_start_timestamp + $duration;
								$end_time              = date( 'His', $event_end_timestamp );
								if ( 8 === strlen( $event['DTSTART'] ) ) {
									$exdate_compare = date( 'Ymd', $event_start_timestamp );
								} else {
									$exdate_compare = date( 'Ymd\THis', $event_start_timestamp );
								}

								if (
									in_array( $day, $bydays, true )
									&& $event_end_timestamp > $current
									&& $event_start_timestamp < $until
									&& $count_counter <= $rrule_count
									&& $event_start_timestamp >= $date_from_ics
									&& ! in_array( $exdate_compare, $exdates, true )
								) {
									if ( 8 === strlen( $event['DTSTART'] ) ) {
										$event['DTSTART'] = date( 'Ymd', $event_start_timestamp );
										$event['DTEND']   = date( 'Ymd', $event_end_timestamp );
									} else {
										$event['DTSTART'] = date( 'Ymd\THis', $event_start_timestamp );
										$event['DTEND']   = date( 'Ymd\THis', $event_end_timestamp );
									}
									if ( $this->timezone->getName() && 8 !== strlen( $event['DTSTART'] ) ) {
										try {
											$adjusted_time = new DateTime( $event['DTSTART'], new DateTimeZone( $this->timezone->getName() ) );
											$adjusted_time->setTimeZone( new DateTimeZone( 'UTC' ) );
											$event['DTSTART'] = $adjusted_time->format( 'Ymd\THis' );

											$event['DTEND'] = date( 'Ymd\THis', strtotime( $event['DTSTART'] ) + $duration );
										} catch ( Exception $e ) { // phpcs:ignore Generic.CodeAnalysis.EmptyStatement.DetectedCatch
											// Invalid argument to DateTime.
										}
									}
									$upcoming[] = $event;
									++$count_counter;
								}

								// Move forward one day.
								$byday_event_date_start = strtotime( date( 'Ymd\T', strtotime( '+ 1 day', $event_start_timestamp ) ) . $start_time );
							}

							// Restore first event timestamp.
							$event_start_timestamp = strtotime( $recurring_event_date_start );

						} else {

							$event_start_timestamp = strtotime( $recurring_event_date_start );
							$start_time            = date( 'His', $event_start_timestamp );
							$event_end_timestamp   = $event_start_timestamp + $duration;
							$end_time              = date( 'His', $event_end_timestamp );
							if ( 8 === strlen( $event['DTSTART'] ) ) {
								$exdate_compare = date( 'Ymd', $event_start_timestamp );
							} else {
								$exdate_compare = date( 'Ymd\THis', $event_start_timestamp );
							}

							if (
								$event_end_timestamp > $current
								&& $event_start_timestamp < $until
								&& $count_counter <= $rrule_count
								&& $event_start_timestamp >= $date_from_ics
								&& ! in_array( $exdate_compare, $exdates, true )
							) {
								if ( 8 === strlen( $event['DTSTART'] ) ) {
									$event['DTSTART'] = date( 'Ymd', $event_start_timestamp );
									$event['DTEND']   = date( 'Ymd', $event_end_timestamp );
								} else {
									$event['DTSTART'] = date( 'Ymd\T', $event_start_timestamp ) . $start_time;
									$event['DTEND']   = date( 'Ymd\T', $event_end_timestamp ) . $end_time;
								}
								if ( $this->timezone->getName() && 8 !== strlen( $event['DTSTART'] ) ) {
									try {
										$adjusted_time = new DateTime( $event['DTSTART'], new DateTimeZone( $this->timezone->getName() ) );
										$adjusted_time->setTimeZone( new DateTimeZone( 'UTC' ) );
										$event['DTSTART'] = $adjusted_time->format( 'Ymd\THis' );

										$event['DTEND'] = date( 'Ymd\THis', strtotime( $event['DTSTART'] ) + $duration );
									} catch ( Exception $e ) { // phpcs:ignore Generic.CodeAnalysis.EmptyStatement.DetectedCatch
										// Invalid argument to DateTime.
									}
								}
								$upcoming[] = $event;
								++$count_counter;
							}
						}

						// Set up next interval and reset $event['DTSTART'] and $event['DTEND'], keeping timestamps intact.
						$next_start_timestamp = strtotime( "+ {$interval} {$frequency}s", $event_start_timestamp );
						if ( 8 === strlen( $event['DTSTART'] ) ) {
							$event['DTSTART'] = date( 'Ymd', $next_start_timestamp );
							$event['DTEND']   = date( 'Ymd', strtotime( $event['DTSTART'] ) + $duration );
						} else {
							$event['DTSTART'] = date( 'Ymd\THis', $next_start_timestamp );
							$event['DTEND']   = date( 'Ymd\THis', strtotime( $event['DTSTART'] ) + $duration );
						}

						// Move recurring event date forward.
						$recurring_event_date_start = $event['DTSTART'];
					}
					$set_recurring_events[] = $uid;

				}
			} elseif ( strtotime( isset( $event['DTEND'] ) ? $event['DTEND'] : $event['DTSTART'] ) >= $current ) { // Process normal events.
				$upcoming[] = $event;
			}
		}
		return $upcoming;
	}

	/**
	 * Parse events from an iCalendar feed
	 *
	 * @param string $url (default: '').
	 * @return array | false on failure
	 */
	public function parse( $url = '' ) {
		$cache_group     = 'icalendar_reader_parse';
		$disable_get_key = 'disable:' . md5( $url );

		// Check to see if previous attempts have failed.
		if ( false !== wp_cache_get( $disable_get_key, $cache_group ) ) {
			return false;
		}

		// rewrite webcal: URI scheme to HTTP.
		$url = preg_replace( '/^webcal/', 'http', $url );
		// try to fetch.
		$r = wp_safe_remote_get(
			$url,
			array(
				'timeout'   => 3,
				'sslverify' => false,
			)
		);
		if ( 200 !== wp_remote_retrieve_response_code( $r ) ) {
			// We were unable to fetch any content, so don't try again for another 60 seconds.
			wp_cache_set( $disable_get_key, 1, $cache_group, 60 );
			return false;
		}

		$body = wp_remote_retrieve_body( $r );
		if ( empty( $body ) ) {
			return false;
		}

		$body  = str_replace( "\r\n", "\n", $body );
		$lines = preg_split( "/\n(?=[A-Z])/", $body );

		if ( empty( $lines ) ) {
			return false;
		}

		if ( false === stristr( $lines[0], 'BEGIN:VCALENDAR' ) ) {
			return false;
		}

		$type = '';
		foreach ( $lines as $line ) {
			$add = $this->key_value_from_string( $line );
			if ( ! $add ) {
				$this->add_component( $type, false, $line );
				continue;
			}
			list( $keyword, $value ) = $add;

			switch ( $keyword ) {
				case 'BEGIN':
				case 'END':
					switch ( $line ) {
						case 'BEGIN:VTODO':
							++$this->todo_count;
							$type = 'VTODO';
							break;
						case 'BEGIN:VEVENT':
							++$this->event_count;
							$type = 'VEVENT';
							break;
						case 'BEGIN:VCALENDAR':
						case 'BEGIN:DAYLIGHT':
						case 'BEGIN:VTIMEZONE':
						case 'BEGIN:STANDARD':
							$type = $value;
							break;
						case 'END:VTODO':
						case 'END:VEVENT':
						case 'END:VCALENDAR':
						case 'END:DAYLIGHT':
						case 'END:VTIMEZONE':
						case 'END:STANDARD':
							$type = 'VCALENDAR';
							break;
					}
					break;
				case 'TZID':
					if (
						'VTIMEZONE' === $type
						&& ! $this->timezone
					) {
						$this->timezone = $this->timezone_from_string( $value );
					}
					break;
				case 'X-WR-TIMEZONE':
					if ( ! $this->timezone ) {
						$this->timezone = $this->timezone_from_string( $value );
					}
					break;
				default:
					$this->add_component( $type, $keyword, $value );
					break;
			}
		}

		// Filter for RECURRENCE-IDs.
		$recurrences = array();
		if ( array_key_exists( 'VEVENT', $this->cal ) ) {
			foreach ( $this->cal['VEVENT'] as $event ) {
				if ( isset( $event['RECURRENCE-ID'] ) ) {
					$recurrences[] = $event;
				}
			}
			foreach ( $recurrences as $recurrence ) {
				$count_vevent = count( $this->cal['VEVENT'] );
				for ( $i = 0; $i < $count_vevent; $i++ ) {
					if (
						$this->cal['VEVENT'][ $i ]['UID'] === $recurrence['UID']
						&& ! isset( $this->cal['VEVENT'][ $i ]['RECURRENCE-ID'] )
					) {
						$this->cal['VEVENT'][ $i ]['EXDATE'][] = $recurrence['RECURRENCE-ID'];
						break;
					}
				}
			}
		}

		return $this->cal;
	}

	/**
	 * Parse key:value from a string
	 *
	 * @param string $text (default: '').
	 * @return array
	 */
	public function key_value_from_string( $text = '' ) {
		preg_match( '/([^:]+)(;[^:]+)?[:]([\w\W]*)/', $text, $matches );

		if ( 0 === count( $matches ) ) {
			return false;
		}

		return array( $matches[1], $matches[3] );
	}

	/**
	 * Convert a timezone name into a timezone object.
	 *
	 * @param string $text Timezone name. Example: America/Chicago.
	 * @return object|null A DateTimeZone object if the conversion was successful.
	 */
	private function timezone_from_string( $text ) {
		try {
			$timezone = new DateTimeZone( $text );
		} catch ( Exception $e ) {
			$blog_timezone = get_option( 'timezone_string' );
			if ( ! $blog_timezone ) {
				$blog_timezone = 'Etc/UTC';
			}

			$timezone = new DateTimeZone( $blog_timezone );
		}

		return $timezone;
	}

	/**
	 * Add a component to the calendar array
	 *
	 * @param string      $component (default: '').
	 * @param bool|string $keyword (default: '').
	 * @param string      $value (default: '').
	 * @return void
	 */
	public function add_component( $component = '', $keyword = '', $value = '' ) {
		if ( ! $keyword ) {
			$keyword = $this->last_keyword;
			switch ( $component ) {
				case 'VEVENT':
					$value = $this->cal[ $component ][ $this->event_count - 1 ][ $keyword ] . $value;
					break;
				case 'VTODO':
					$value = $this->cal[ $component ][ $this->todo_count - 1 ][ $keyword ] . $value;
					break;
			}
		}

		/*
		 * Some events have a specific timezone set in their start/end date,
		 * and it may or may not be different than the calendar timzeone.
		 * Valid formats include:
		 * DTSTART;TZID=Pacific Standard Time:20141219T180000
		 * DTEND;TZID=Pacific Standard Time:20141219T200000
		 * EXDATE:19960402T010000Z,19960403T010000Z,19960404T010000Z
		 * EXDATE;VALUE=DATE:2015050
		 * EXDATE;TZID=America/New_York:20150424T170000
		 * EXDATE;TZID=Pacific Standard Time:20120615T140000,20120629T140000,20120706T140000
		 */

		// Always store EXDATE as an array.
		if ( stristr( $keyword, 'EXDATE' ) ) {
			$value = explode( ',', $value );
		}

		// Adjust DTSTART, DTEND, and EXDATE according to their TZID if set.
		if ( strpos( $keyword, ';' ) && ( stristr( $keyword, 'DTSTART' ) || stristr( $keyword, 'DTEND' ) || stristr( $keyword, 'EXDATE' ) || stristr( $keyword, 'RECURRENCE-ID' ) ) ) {
			$keyword = explode( ';', $keyword );

			$tzid = false;
			if ( 2 === count( $keyword ) ) {
				$tparam = $keyword[1];

				if ( str_contains( $tparam, 'TZID' ) ) {
					$tzid = $this->timezone_from_string( str_replace( 'TZID=', '', $tparam ) );
				}
			}

			// Normalize all times to default UTC.
			if ( $tzid ) {
				$adjusted_times = array();
				foreach ( (array) $value as $v ) {
					try {
						$adjusted_time = new DateTime( $v, $tzid );
						$adjusted_time->setTimeZone( new DateTimeZone( 'UTC' ) );
						$adjusted_times[] = $adjusted_time->format( 'Ymd\THis' );
					} catch ( Exception $e ) {
						// Invalid argument to DateTime.
						return;
					}
				}
				$value = $adjusted_times;
			}

			// Format for adding to event.
			$keyword = $keyword[0];
			if ( 'EXDATE' !== $keyword ) {
				$value = implode( (array) $value );
			}
		}

		foreach ( (array) $value as $v ) {
			switch ( $component ) {
				case 'VTODO':
					if ( 'EXDATE' === $keyword ) {
						$this->cal[ $component ][ $this->todo_count - 1 ][ $keyword ][] = $v;
					} else {
						$this->cal[ $component ][ $this->todo_count - 1 ][ $keyword ] = $v;
					}
					break;
				case 'VEVENT':
					if ( 'EXDATE' === $keyword ) {
						$this->cal[ $component ][ $this->event_count - 1 ][ $keyword ][] = $v;
					} else {
						$this->cal[ $component ][ $this->event_count - 1 ][ $keyword ] = $v;
					}
					break;
				default:
					$this->cal[ $component ][ $keyword ] = $v;
					break;
			}
		}
		$this->last_keyword = $keyword;
	}

	/**
	 * Escape strings with wp_kses, allow links
	 *
	 * @param string $string (default: '') The string to escape.
	 * @return string
	 */
	public function escape( $string = '' ) {
		// Unfold content lines per RFC 5545.
		$string = str_replace( "\n\t", '', $string );
		$string = str_replace( "\n ", '', $string );

		$allowed_html = array(
			'a' => array(
				'href'  => array(),
				'title' => array(),
			),
		);

		$allowed_tags = '';
		foreach ( array_keys( $allowed_html ) as $tag ) {
			$allowed_tags .= "<{$tag}>";
		}

		// Running strip_tags() first with allowed tags to get rid of remaining gallery markup, etc
		// because wp_kses() would only htmlentity'fy that. Then still running wp_kses(), for extra
		// safety and good measure.
		return wp_kses( strip_tags( $string, $allowed_tags ), $allowed_html );
	}

	/**
	 * Render the events
	 *
	 * @param string $url  (default: '') URL of the iCal feed.
	 * @param array  $args Event options.
	 *
	 * @return mixed bool|string false on failure, rendered HTML string on success.
	 */
	public function render( $url = '', $args = array() ) {

		$args = wp_parse_args(
			$args,
			array(
				'context' => 'widget',
				'number'  => 5,
			)
		);

		$events = $this->get_events( $url, $args['number'] );
		$events = $this->apply_timezone_offset( $events );

		if ( empty( $events ) ) {
			return false;
		}

		ob_start();

		if ( 'widget' === $args['context'] ) : ?>
		<ul class="upcoming-events">
			<?php foreach ( $events as $event ) : ?>
			<li>
				<strong class="event-summary">
					<?php
					echo $this->escape( stripslashes( $event['SUMMARY'] ) ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped -- this method is built to escape.
					?>
				</strong>
				<span class="event-when"><?php echo esc_html( $this->formatted_date( $event ) ); ?></span>
				<?php if ( ! empty( $event['LOCATION'] ) ) : ?>
					<span class="event-location">
						<?php
						echo $this->escape( stripslashes( $event['LOCATION'] ) ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped -- this method is built to escape.
						?>
					</span>
				<?php endif; ?>
				<?php if ( ! empty( $event['DESCRIPTION'] ) ) : ?>
					<span class="event-description">
						<?php
						echo wp_trim_words( $this->escape( stripcslashes( $event['DESCRIPTION'] ) ) ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped -- this method is built to escape.
						?>
						</span>
				<?php endif; ?>
			</li>
			<?php endforeach; ?>
		</ul>
			<?php
		endif;

		if ( 'shortcode' === $args['context'] ) :
			?>
		<table class="upcoming-events">
			<thead>
				<tr>
					<th><?php esc_html_e( 'Location', 'jetpack' ); ?></th>
					<th><?php esc_html_e( 'When', 'jetpack' ); ?></th>
					<th><?php esc_html_e( 'Summary', 'jetpack' ); ?></th>
					<th><?php esc_html_e( 'Description', 'jetpack' ); ?></th>
				</tr>
			</thead>
			<tbody>
			<?php foreach ( $events as $event ) : ?>
				<tr>
					<td>
					<?php
					echo empty( $event['LOCATION'] )
						? '&nbsp;'
						: $this->escape( stripslashes( $event['LOCATION'] ) ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped -- this method is built to escape.
					?>
					</td>
					<td><?php echo esc_html( $this->formatted_date( $event ) ); ?></td>
					<td>
					<?php
					echo empty( $event['SUMMARY'] )
						? '&nbsp;'
						: $this->escape( stripslashes( $event['SUMMARY'] ) ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped -- this method is built to escape.
					?>
					</td>
					<td>
					<?php
					echo empty( $event['DESCRIPTION'] )
						? '&nbsp;'
						: wp_trim_words( $this->escape( stripcslashes( $event['DESCRIPTION'] ) ) ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped -- this method is built to escape.
					?>
					</td>
				</tr>
			<?php endforeach; ?>
			</tbody>
		</table>
			<?php
		endif;

		$rendered = ob_get_clean();

		if ( empty( $rendered ) ) {
			return false;
		}

		return $rendered;
	}

	/**
	 * Return a localized string with information about the event's date and time,
	 * or starting date and end date.
	 *
	 * @param array $event Info about the event.
	 *
	 * @return string
	 */
	public function formatted_date( $event ) {
		$date_format = get_option( 'date_format' );
		$time_format = get_option( 'time_format' );
		$start       = strtotime( $event['DTSTART'] );
		$end         = isset( $event['DTEND'] ) ? strtotime( $event['DTEND'] ) : false;

		$all_day = ( 8 === strlen( $event['DTSTART'] ) );

		if ( ! $all_day && $this->timezone ) {
			try {
				$timezone_offset = $this->timezone->getOffset( new DateTime( $event['DTSTART'] ) );
				$start          += $timezone_offset;

				if ( $end ) {
					$end += $timezone_offset;
				}
			} catch ( Exception $e ) {
				// Invalid argument to DateTime.
				return '';
			}
		}
		$single_day = $end ? ( $end - $start ) <= DAY_IN_SECONDS : true;

		/* translators: Date and time */
		$date_with_time = __( '%1$s at %2$s', 'jetpack' );
		/* translators: Two dates with a separator */
		$two_dates = __( '%1$s &ndash; %2$s', 'jetpack' );

		// we'll always have the start date. Maybe with time.
		if ( $all_day ) {
			$date = date_i18n( $date_format, $start );
		} else {
			$date = sprintf(
				$date_with_time,
				date_i18n( $date_format, $start ),
				date_i18n( $time_format, $start )
			);
		}

		// single day, timed.
		if ( $single_day && ! $all_day && false !== $end ) {
			$date = sprintf( $two_dates, $date, date_i18n( $time_format, $end ) );
		}

		// multi-day.
		if ( ! $single_day ) {

			if ( $all_day ) {
				// DTEND for multi-day events represents "until", not "including", so subtract one minute.
				$end_date = date_i18n( $date_format, $end - 60 );
			} else {
				$end_date = sprintf( $date_with_time, date_i18n( $date_format, $end ), date_i18n( $time_format, $end ) );
			}

			$date = sprintf( $two_dates, $date, $end_date );

		}

		return $date;
	}

	/**
	 * Sort list of events by event date.
	 *
	 * @param array $list List of events.
	 *
	 * @return array
	 */
	protected function sort_by_recent( $list ) {
		$dates       = array();
		$sorted_list = array();

		foreach ( $list as $key => $row ) {
			$date = $row['DTSTART'];
			// pad some time onto an all day date.
			if ( 8 === strlen( $date ) ) {
				$date .= 'T000000Z';
			}
			$dates[ $key ] = $date;
		}
		asort( $dates );
		foreach ( $dates as $key => $value ) {
			$sorted_list[ $key ] = $list[ $key ];
		}
		unset( $list );
		return $sorted_list;
	}

	// phpcs:enable WordPress.DateTime.RestrictedFunctions.date_date
}

/**
 * Wrapper function for iCalendarReader->get_events()
 *
 * @param string $url   (default: '').
 * @param int    $count Number of events to fetch.
 * @return array
 */
function icalendar_get_events( $url = '', $count = 5 ) {
	/*
	 * Find your calendar's address
	 * https://support.google.com/calendar/bin/answer.py?hl=en&answer=37103
	 */
	return ( new iCalendarReader() )->get_events( $url, $count );
}

/**
 * Wrapper function for iCalendarReader->render()
 *
 * @param string $url (default: '').
 * @param array  $args Options when rendering events.
 *
 * @return mixed bool|string false on failure, rendered HTML string on success.
 */
function icalendar_render_events( $url = '', $args = array() ) {
	return ( new iCalendarReader() )->render( $url, $args );
}
extra.php                                                                                                                                                                                                                                                      90313         1711191376  plugins/jetpack/_inc/lib/markdown                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <?php
#
# Markdown Extra  -  A text-to-HTML conversion tool for web writers
#
# PHP Markdown & Extra
# Copyright (c) 2004-2013 Michel Fortin
# <http://michelf.ca/projects/php-markdown/>
#
# Original Markdown
# Copyright (c) 2004-2006 John Gruber
# <http://daringfireball.net/projects/markdown/>
#
# Tweaked to remove WordPress interface


define( 'MARKDOWN_VERSION',  "1.0.2" ); # 29 Nov 2013
define( 'MARKDOWNEXTRA_VERSION',  "1.2.8" ); # 29 Nov 2013


#
# Global default settings:
#

// phpcs:disable WordPress.PHP.NoSilencedErrors.Discouraged

# Change to ">" for HTML output
@define( 'MARKDOWN_EMPTY_ELEMENT_SUFFIX',  " />");

# Define the width of a tab for code blocks.
@define( 'MARKDOWN_TAB_WIDTH',     4 );

// Optional title attribute for footnote links and backlinks.
@define( 'MARKDOWN_FN_LINK_TITLE', esc_attr__( 'Read footnote.', 'jetpack' ) );
@define( 'MARKDOWN_FN_BACKLINK_TITLE', esc_attr__( 'Return to main content.', 'jetpack' ) );

# Optional class attribute for footnote links and backlinks.
@define( 'MARKDOWN_FN_LINK_CLASS',         "jetpack-footnote" );
@define( 'MARKDOWN_FN_BACKLINK_CLASS',     "" );

# Optional class prefix for fenced code block.
@define( 'MARKDOWN_CODE_CLASS_PREFIX',     "language-" );

# Class attribute for code blocks goes on the `code` tag;
# setting this to true will put attributes on the `pre` tag instead.
@define( 'MARKDOWN_CODE_ATTR_ON_PRE',   false );



### Standard Function Interface ###

@define( 'MARKDOWN_PARSER_CLASS',  'MarkdownExtra_Parser' );

// phpcs:enable WordPress.PHP.NoSilencedErrors.Discouraged

function Markdown($text) {
#
# Initialize the parser and return the result of its transform method.
#
	# Setup static parser variable.
	static $parser;
	if (!isset($parser)) {
		$parser_class = MARKDOWN_PARSER_CLASS;
		$parser = new $parser_class;
	}

	# Transform text using parser.
	return $parser->transform($text);
}

/**
 * Returns the length of $text loosely counting the number of UTF-8 characters with regular expression.
 * Used by the Markdown_Parser class when mb_strlen is not available.
 *
 * @since 5.9
 *
 * @return string Length of the multibyte string
 *
 */
function jetpack_utf8_strlen( $text ) {
	return preg_match_all( "/[\\x00-\\xBF]|[\\xC0-\\xFF][\\x80-\\xBF]*/", $text, $m );
}

#
# Markdown Parser Class
#

class Markdown_Parser {

	### Configuration Variables ###

	# Change to ">" for HTML output.
	public $empty_element_suffix = MARKDOWN_EMPTY_ELEMENT_SUFFIX;
	public $tab_width = MARKDOWN_TAB_WIDTH;

	# Change to `true` to disallow markup or entities.
	public $no_markup = false;
	public $no_entities = false;

	# Predefined urls and titles for reference links and images.
	public $predef_urls = array();
	public $predef_titles = array();


	### Parser Implementation ###

	# Regex to match balanced [brackets].
	# Needed to insert a maximum bracked depth while converting to PHP.
	public $nested_brackets_depth = 6;
	public $nested_brackets_re;

	public $nested_url_parenthesis_depth = 4;
	public $nested_url_parenthesis_re;

	# Table of hash values for escaped characters:
	public $escape_chars = '\`*_{}[]()>#+-.!';
	public $escape_chars_re;


	function __construct() {
	#
	# Constructor function. Initialize appropriate member variables.
	#
		$this->_initDetab();
		$this->prepareItalicsAndBold();

		$this->nested_brackets_re =
			str_repeat('(?>[^\[\]]+|\[', $this->nested_brackets_depth).
			str_repeat('\])*', $this->nested_brackets_depth);

		$this->nested_url_parenthesis_re =
			str_repeat('(?>[^()\s]+|\(', $this->nested_url_parenthesis_depth).
			str_repeat('(?>\)))*', $this->nested_url_parenthesis_depth);

		$this->escape_chars_re = '['.preg_quote($this->escape_chars).']';

		# Sort document, block, and span gamut in ascendent priority order.
		asort($this->document_gamut);
		asort($this->block_gamut);
		asort($this->span_gamut);
	}


	# Internal hashes used during transformation.
	public $urls = array();
	public $titles = array();
	public $html_hashes = array();

	# Status flag to avoid invalid nesting.
	public $in_anchor = false;


	function setup() {
	#
	# Called before the transformation process starts to setup parser
	# states.
	#
		# Clear global hashes.
		$this->urls = $this->predef_urls;
		$this->titles = $this->predef_titles;
		$this->html_hashes = array();

		$this->in_anchor = false;
	}

	function teardown() {
	#
	# Called after the transformation process to clear any variable
	# which may be taking up memory unnecessarly.
	#
		$this->urls = array();
		$this->titles = array();
		$this->html_hashes = array();
	}


	function transform($text) {
	#
	# Main function. Performs some preprocessing on the input text
	# and pass it through the document gamut.
	#
		$this->setup();

		# Remove UTF-8 BOM and marker character in input, if present.
		$text = preg_replace('{^\xEF\xBB\xBF|\x1A}', '', $text);

		# Standardize line endings:
		#   DOS to Unix and Mac to Unix
		$text = preg_replace('{\r\n?}', "\n", $text);

		# Make sure $text ends with a couple of newlines:
		$text .= "\n\n";

		# Convert all tabs to spaces.
		$text = $this->detab($text);

		# Turn block-level HTML blocks into hash entries
		$text = $this->hashHTMLBlocks($text);

		# Strip any lines consisting only of spaces and tabs.
		# This makes subsequent regexen easier to write, because we can
		# match consecutive blank lines with /\n+/ instead of something
		# contorted like /[ ]*\n+/ .
		$text = preg_replace('/^[ ]+$/m', '', $text);

		# Run document gamut methods.
		foreach ($this->document_gamut as $method => $priority) {
			$text = $this->$method($text);
		}

		$this->teardown();

		return $text . "\n";
	}

	public $document_gamut = array(
		# Strip link definitions, store in hashes.
		"stripLinkDefinitions" => 20,

		"runBasicBlockGamut"   => 30,
		);


	function stripLinkDefinitions($text) {
	#
	# Strips link definitions from text, stores the URLs and titles in
	# hash references.
	#
		$less_than_tab = $this->tab_width - 1;

		# Link defs are in the form: ^[id]: url "optional title"
		$text = preg_replace_callback('{
							^[ ]{0,'.$less_than_tab.'}\[(.+)\][ ]?:	# id = $1
							  [ ]*
							  \n?				# maybe *one* newline
							  [ ]*
							(?:
							  <(.+?)>			# url = $2
							|
							  (\S+?)			# url = $3
							)
							  [ ]*
							  \n?				# maybe one newline
							  [ ]*
							(?:
								(?<=\s)			# lookbehind for whitespace
								["(]
								(.*?)			# title = $4
								[")]
								[ ]*
							)?	# title is optional
							(?:\n+|\Z)
			}xm',
			array(&$this, '_stripLinkDefinitions_callback'),
			$text);
		return $text;
	}
	function _stripLinkDefinitions_callback($matches) {
		$link_id = strtolower($matches[1]);
		$url = $matches[2] == '' ? $matches[3] : $matches[2];
		$this->urls[$link_id] = $url;
		$this->titles[$link_id] =& $matches[4];
		return ''; # String that will replace the block
	}


	function hashHTMLBlocks($text) {
		if ($this->no_markup)  return $text;

		$less_than_tab = $this->tab_width - 1;

		# Hashify HTML blocks:
		# We only want to do this for block-level HTML tags, such as headers,
		# lists, and tables. That's because we still want to wrap <p>s around
		# "paragraphs" that are wrapped in non-block-level tags, such as anchors,
		# phrase emphasis, and spans. The list of tags we're looking for is
		# hard-coded:
		#
		# *  List "a" is made of tags which can be both inline or block-level.
		#    These will be treated block-level when the start tag is alone on
		#    its line, otherwise they're not matched here and will be taken as
		#    inline later.
		# *  List "b" is made of tags which are always block-level;
		#
		$block_tags_a_re = 'ins|del';
		$block_tags_b_re = 'p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|address|'.
						   'script|noscript|form|fieldset|iframe|math|svg|'.
						   'article|section|nav|aside|hgroup|header|footer|'.
						   'figure';

		# Regular expression for the content of a block tag.
		$nested_tags_level = 4;
		$attr = '
			(?>				# optional tag attributes
			  \s			# starts with whitespace
			  (?>
				[^>"/]+		# text outside quotes
			  |
				/+(?!>)		# slash not followed by ">"
			  |
				"[^"]*"		# text inside double quotes (tolerate ">")
			  |
				\'[^\']*\'	# text inside single quotes (tolerate ">")
			  )*
			)?
			';
		$content =
			str_repeat('
				(?>
				  [^<]+			# content without tag
				|
				  <\2			# nested opening tag
					'.$attr.'	# attributes
					(?>
					  />
					|
					  >', $nested_tags_level).	# end of opening tag
					  '.*?'.					# last level nested tag content
			str_repeat('
					  </\2\s*>	# closing nested tag
					)
				  |
					<(?!/\2\s*>	# other tags with a different name
				  )
				)*',
				$nested_tags_level);
		$content2 = str_replace('\2', '\3', $content);

		# First, look for nested blocks, e.g.:
		# 	<div>
		# 		<div>
		# 		tags for inner block must be indented.
		# 		</div>
		# 	</div>
		#
		# The outermost tags must start at the left margin for this to match, and
		# the inner nested divs must be indented.
		# We need to do this before the next, more liberal match, because the next
		# match will start at the first `<div>` and stop at the first `</div>`.
		$text = preg_replace_callback('{(?>
			(?>
				(?<=\n\n)		# Starting after a blank line
				|				# or
				\A\n?			# the beginning of the doc
			)
			(						# save in $1

			  # Match from `\n<tag>` to `</tag>\n`, handling nested tags
			  # in between.

						[ ]{0,'.$less_than_tab.'}
						<('.$block_tags_b_re.')# start tag = $2
						'.$attr.'>			# attributes followed by > and \n
						'.$content.'		# content, support nesting
						</\2>				# the matching end tag
						[ ]*				# trailing spaces/tabs
						(?=\n+|\Z)	# followed by a newline or end of document

			| # Special version for tags of group a.

						[ ]{0,'.$less_than_tab.'}
						<('.$block_tags_a_re.')# start tag = $3
						'.$attr.'>[ ]*\n	# attributes followed by >
						'.$content2.'		# content, support nesting
						</\3>				# the matching end tag
						[ ]*				# trailing spaces/tabs
						(?=\n+|\Z)	# followed by a newline or end of document

			| # Special case just for <hr />. It was easier to make a special
			  # case than to make the other regex more complicated.

						[ ]{0,'.$less_than_tab.'}
						<(hr)				# start tag = $2
						'.$attr.'			# attributes
						/?>					# the matching end tag
						[ ]*
						(?=\n{2,}|\Z)		# followed by a blank line or end of document

			| # Special case for standalone HTML comments:

					[ ]{0,'.$less_than_tab.'}
					(?s:
						<!-- .*? -->
					)
					[ ]*
					(?=\n{2,}|\Z)		# followed by a blank line or end of document

			| # PHP and ASP-style processor instructions (<? and <%)

					[ ]{0,'.$less_than_tab.'}
					(?s:
						<([?%])			# $2
						.*?
						\2>
					)
					[ ]*
					(?=\n{2,}|\Z)		# followed by a blank line or end of document

			)
			)}Sxmi',
			array(&$this, '_hashHTMLBlocks_callback'),
			$text);

		return $text;
	}
	function _hashHTMLBlocks_callback($matches) {
		$text = $matches[1];
		$key  = $this->hashBlock($text);
		return "\n\n$key\n\n";
	}


	function hashPart($text, $boundary = 'X') {
	#
	# Called whenever a tag must be hashed when a function insert an atomic
	# element in the text stream. Passing $text to through this function gives
	# a unique text-token which will be reverted back when calling unhash.
	#
	# The $boundary argument specify what character should be used to surround
	# the token. By convension, "B" is used for block elements that needs not
	# to be wrapped into paragraph tags at the end, ":" is used for elements
	# that are word separators and "X" is used in the general case.
	#
		# Swap back any tag hash found in $text so we do not have to `unhash`
		# multiple times at the end.
		$text = $this->unhash($text);

		# Then hash the block.
		static $i = 0;
		$key = "$boundary\x1A" . ++$i . $boundary;
		$this->html_hashes[$key] = $text;
		return $key; # String that will replace the tag.
	}


	function hashBlock($text) {
	#
	# Shortcut function for hashPart with block-level boundaries.
	#
		return $this->hashPart($text, 'B');
	}


	public $block_gamut = array(
	#
	# These are all the transformations that form block-level
	# tags like paragraphs, headers, and list items.
	#
		"doHeaders"         => 10,
		"doHorizontalRules" => 20,

		"doLists"           => 40,
		"doCodeBlocks"      => 50,
		"doBlockQuotes"     => 60,
		);

	function runBlockGamut($text) {
	#
	# Run block gamut tranformations.
	#
		# We need to escape raw HTML in Markdown source before doing anything
		# else. This need to be done for each block, and not only at the
		# beginning in the Markdown function since hashed blocks can be part of
		# list items and could have been indented. Indented blocks would have
		# been seen as a code block in a previous pass of hashHTMLBlocks.
		$text = $this->hashHTMLBlocks($text);

		return $this->runBasicBlockGamut($text);
	}

	function runBasicBlockGamut($text) {
	#
	# Run block gamut tranformations, without hashing HTML blocks. This is
	# useful when HTML blocks are known to be already hashed, like in the first
	# whole-document pass.
	#
		foreach ($this->block_gamut as $method => $priority) {
			$text = $this->$method($text);
		}

		# Finally form paragraph and restore hashed blocks.
		$text = $this->formParagraphs($text);

		return $text;
	}


	function doHorizontalRules($text) {
		# Do Horizontal Rules:
		return preg_replace(
			'{
				^[ ]{0,3}	# Leading space
				([-*_])		# $1: First marker
				(?>			# Repeated marker group
					[ ]{0,2}	# Zero, one, or two spaces.
					\1			# Marker character
				){2,}		# Group repeated at least twice
				[ ]*		# Tailing spaces
				$			# End of line.
			}mx',
			"\n".$this->hashBlock("<hr$this->empty_element_suffix")."\n",
			$text);
	}


	public $span_gamut = array(
	#
	# These are all the transformations that occur *within* block-level
	# tags like paragraphs, headers, and list items.
	#
		# Process character escapes, code spans, and inline HTML
		# in one shot.
		"parseSpan"           => -30,

		# Process anchor and image tags. Images must come first,
		# because ![foo][f] looks like an anchor.
		"doImages"            =>  10,
		"doAnchors"           =>  20,

		# Make links out of things like `<http://example.com/>`
		# Must come after doAnchors, because you can use < and >
		# delimiters in inline links like [this](<url>).
		"doAutoLinks"         =>  30,
		"encodeAmpsAndAngles" =>  40,

		"doItalicsAndBold"    =>  50,
		"doHardBreaks"        =>  60,
		);

	function runSpanGamut($text) {
	#
	# Run span gamut tranformations.
	#
		foreach ($this->span_gamut as $method => $priority) {
			$text = $this->$method($text);
		}

		return $text;
	}


	function doHardBreaks($text) {
		# Do hard breaks:
		return preg_replace_callback('/ {2,}\n/',
			array(&$this, '_doHardBreaks_callback'), $text);
	}
	function _doHardBreaks_callback($matches) {
		return $this->hashPart("<br$this->empty_element_suffix\n");
	}


	function doAnchors($text) {
	#
	# Turn Markdown link shortcuts into XHTML <a> tags.
	#
		if ($this->in_anchor) return $text;
		$this->in_anchor = true;

		#
		# First, handle reference-style links: [link text] [id]
		#
		$text = preg_replace_callback('{
			(					# wrap whole match in $1
			  \[
				('.$this->nested_brackets_re.')	# link text = $2
			  \]

			  [ ]?				# one optional space
			  (?:\n[ ]*)?		# one optional newline followed by spaces

			  \[
				(.*?)		# id = $3
			  \]
			)
			}xs',
			array(&$this, '_doAnchors_reference_callback'), $text);

		#
		# Next, inline-style links: [link text](url "optional title")
		#
		$text = preg_replace_callback('{
			(				# wrap whole match in $1
			  \[
				('.$this->nested_brackets_re.')	# link text = $2
			  \]
			  \(			# literal paren
				[ \n]*
				(?:
					<(.+?)>	# href = $3
				|
					('.$this->nested_url_parenthesis_re.')	# href = $4
				)
				[ \n]*
				(			# $5
				  ([\'"])	# quote char = $6
				  (.*?)		# Title = $7
				  \6		# matching quote
				  [ \n]*	# ignore any spaces/tabs between closing quote and )
				)?			# title is optional
			  \)
			)
			}xs',
			array(&$this, '_doAnchors_inline_callback'), $text);

		#
		# Last, handle reference-style shortcuts: [link text]
		# These must come last in case you've also got [link text][1]
		# or [link text](/foo)
		#
		$text = preg_replace_callback('{
			(					# wrap whole match in $1
			  \[
				([^\[\]]+)		# link text = $2; can\'t contain [ or ]
			  \]
			)
			}xs',
			array(&$this, '_doAnchors_reference_callback'), $text);

		$this->in_anchor = false;
		return $text;
	}
	function _doAnchors_reference_callback($matches) {
		$whole_match =  $matches[1];
		$link_text   =  $matches[2];
		$link_id     =& $matches[3];

		if ($link_id == "") {
			# for shortcut links like [this][] or [this].
			$link_id = $link_text;
		}

		# lower-case and turn embedded newlines into spaces
		$link_id = strtolower($link_id);
		$link_id = preg_replace('{[ ]?\n}', ' ', $link_id);

		if (isset($this->urls[$link_id])) {
			$url = $this->urls[$link_id];
			$url = $this->encodeAttribute($url);

			$result = "<a href=\"$url\"";
			if ( isset( $this->titles[$link_id] ) ) {
				$title = $this->titles[$link_id];
				$title = $this->encodeAttribute($title);
				$result .=  " title=\"$title\"";
			}

			$link_text = $this->runSpanGamut($link_text);
			$result .= ">$link_text</a>";
			$result = $this->hashPart($result);
		}
		else {
			$result = $whole_match;
		}
		return $result;
	}
	function _doAnchors_inline_callback($matches) {
		$whole_match	=  $matches[1];
		$link_text		=  $this->runSpanGamut($matches[2]);
		$url			=  $matches[3] == '' ? $matches[4] : $matches[3];
		$title			=& $matches[7];

		$url = $this->encodeAttribute($url);

		$result = "<a href=\"$url\"";
		if (isset($title)) {
			$title = $this->encodeAttribute($title);
			$result .=  " title=\"$title\"";
		}

		$link_text = $this->runSpanGamut($link_text);
		$result .= ">$link_text</a>";

		return $this->hashPart($result);
	}


	function doImages($text) {
	#
	# Turn Markdown image shortcuts into <img> tags.
	#
		#
		# First, handle reference-style labeled images: ![alt text][id]
		#
		$text = preg_replace_callback('{
			(				# wrap whole match in $1
			  !\[
				('.$this->nested_brackets_re.')		# alt text = $2
			  \]

			  [ ]?				# one optional space
			  (?:\n[ ]*)?		# one optional newline followed by spaces

			  \[
				(.*?)		# id = $3
			  \]

			)
			}xs',
			array(&$this, '_doImages_reference_callback'), $text);

		#
		# Next, handle inline images:  ![alt text](url "optional title")
		# Don't forget: encode * and _
		#
		$text = preg_replace_callback('{
			(				# wrap whole match in $1
			  !\[
				('.$this->nested_brackets_re.')		# alt text = $2
			  \]
			  \s?			# One optional whitespace character
			  \(			# literal paren
				[ \n]*
				(?:
					<(\S*)>	# src url = $3
				|
					('.$this->nested_url_parenthesis_re.')	# src url = $4
				)
				[ \n]*
				(			# $5
				  ([\'"])	# quote char = $6
				  (.*?)		# title = $7
				  \6		# matching quote
				  [ \n]*
				)?			# title is optional
			  \)
			)
			}xs',
			array(&$this, '_doImages_inline_callback'), $text);

		return $text;
	}
	function _doImages_reference_callback($matches) {
		$whole_match = $matches[1];
		$alt_text    = $matches[2];
		$link_id     = strtolower($matches[3]);

		if ($link_id == "") {
			$link_id = strtolower($alt_text); # for shortcut links like ![this][].
		}

		$alt_text = $this->encodeAttribute($alt_text);
		if (isset($this->urls[$link_id])) {
			$url = $this->encodeAttribute($this->urls[$link_id]);
			$result = "<img src=\"$url\" alt=\"$alt_text\"";
			if (isset($this->titles[$link_id])) {
				$title = $this->titles[$link_id];
				$title = $this->encodeAttribute($title);
				$result .=  " title=\"$title\"";
			}
			$result .= $this->empty_element_suffix;
			$result = $this->hashPart($result);
		}
		else {
			# If there's no such link ID, leave intact:
			$result = $whole_match;
		}

		return $result;
	}
	function _doImages_inline_callback($matches) {
		$whole_match	= $matches[1];
		$alt_text		= $matches[2];
		$url			= $matches[3] == '' ? $matches[4] : $matches[3];
		$title			=& $matches[7];

		$alt_text = $this->encodeAttribute($alt_text);
		$url = $this->encodeAttribute($url);
		$result = "<img src=\"$url\" alt=\"$alt_text\"";
		if (isset($title)) {
			$title = $this->encodeAttribute($title);
			$result .=  " title=\"$title\""; # $title already quoted
		}
		$result .= $this->empty_element_suffix;

		return $this->hashPart($result);
	}


	function doHeaders($text) {
		# Setext-style headers:
		#	  Header 1
		#	  ========
		#
		#	  Header 2
		#	  --------
		#
		$text = preg_replace_callback('{ ^(.+?)[ ]*\n(=+|-+)[ ]*\n+ }mx',
			array(&$this, '_doHeaders_callback_setext'), $text);

		# atx-style headers:
		#	# Header 1
		#	## Header 2
		#	## Header 2 with closing hashes ##
		#	...
		#	###### Header 6
		#
		$text = preg_replace_callback('{
				^(\#{1,6})	# $1 = string of #\'s
				[ ]*
				(.+?)		# $2 = Header text
				[ ]*
				\#*			# optional closing #\'s (not counted)
				\n+
			}xm',
			array(&$this, '_doHeaders_callback_atx'), $text);

		return $text;
	}
	function _doHeaders_callback_setext($matches) {
		# Terrible hack to check we haven't found an empty list item.
		if ($matches[2] == '-' && preg_match('{^-(?: |$)}', $matches[1]))
			return $matches[0];

		$level = $matches[2][0] == '=' ? 1 : 2;
		$block = "<h$level>".$this->runSpanGamut($matches[1])."</h$level>";
		return "\n" . $this->hashBlock($block) . "\n\n";
	}
	function _doHeaders_callback_atx($matches) {
		$level = strlen($matches[1]);
		$block = "<h$level>".$this->runSpanGamut($matches[2])."</h$level>";
		return "\n" . $this->hashBlock($block) . "\n\n";
	}


	function doLists($text) {
	#
	# Form HTML ordered (numbered) and unordered (bulleted) lists.
	#
		$less_than_tab = $this->tab_width - 1;

		# Re-usable patterns to match list item bullets and number markers:
		$marker_ul_re  = '[*+-]';
		$marker_ol_re  = '\d+[\.]';
		$marker_any_re = "(?:$marker_ul_re|$marker_ol_re)";

		$markers_relist = array(
			$marker_ul_re => $marker_ol_re,
			$marker_ol_re => $marker_ul_re,
			);

		foreach ($markers_relist as $marker_re => $other_marker_re) {
			# Re-usable pattern to match any entirel ul or ol list:
			$whole_list_re = '
				(								# $1 = whole list
				  (								# $2
					([ ]{0,'.$less_than_tab.'})	# $3 = number of spaces
					('.$marker_re.')			# $4 = first list item marker
					[ ]+
				  )
				  (?s:.+?)
				  (								# $5
					  \z
					|
					  \n{2,}
					  (?=\S)
					  (?!						# Negative lookahead for another list item marker
						[ ]*
						'.$marker_re.'[ ]+
					  )
					|
					  (?=						# Lookahead for another kind of list
					    \n
						\3						# Must have the same indentation
						'.$other_marker_re.'[ ]+
					  )
				  )
				)
			'; // mx

			# We use a different prefix before nested lists than top-level lists.
			# See extended comment in _ProcessListItems().

			if ($this->list_level) {
				$text = preg_replace_callback('{
						^
						'.$whole_list_re.'
					}mx',
					array(&$this, '_doLists_callback'), $text);
			}
			else {
				$text = preg_replace_callback('{
						(?:(?<=\n)\n|\A\n?) # Must eat the newline
						'.$whole_list_re.'
					}mx',
					array(&$this, '_doLists_callback'), $text);
			}
		}

		return $text;
	}
	function _doLists_callback($matches) {
		# Re-usable patterns to match list item bullets and number markers:
		$marker_ul_re  = '[*+-]';
		$marker_ol_re  = '\d+[\.]';
		$marker_any_re = "(?:$marker_ul_re|$marker_ol_re)";

		$list = $matches[1];
		$list_type = preg_match("/$marker_ul_re/", $matches[4]) ? "ul" : "ol";

		$marker_any_re = ( $list_type == "ul" ? $marker_ul_re : $marker_ol_re );

		$list .= "\n";
		$result = $this->processListItems($list, $marker_any_re);

		$result = $this->hashBlock("<$list_type>\n" . $result . "</$list_type>");
		return "\n". $result ."\n\n";
	}

	public $list_level = 0;

	function processListItems($list_str, $marker_any_re) {
	#
	#	Process the contents of a single ordered or unordered list, splitting it
	#	into individual list items.
	#
		# The $this->list_level global keeps track of when we're inside a list.
		# Each time we enter a list, we increment it; when we leave a list,
		# we decrement. If it's zero, we're not in a list anymore.
		#
		# We do this because when we're not inside a list, we want to treat
		# something like this:
		#
		#		I recommend upgrading to version
		#		8. Oops, now this line is treated
		#		as a sub-list.
		#
		# As a single paragraph, despite the fact that the second line starts
		# with a digit-period-space sequence.
		#
		# Whereas when we're inside a list (or sub-list), that line will be
		# treated as the start of a sub-list. What a kludge, huh? This is
		# an aspect of Markdown's syntax that's hard to parse perfectly
		# without resorting to mind-reading. Perhaps the solution is to
		# change the syntax rules such that sub-lists must start with a
		# starting cardinal number; e.g. "1." or "a.".

		$this->list_level++;

		# trim trailing blank lines:
		$list_str = preg_replace("/\n{2,}\\z/", "\n", $list_str);

		$list_str = preg_replace_callback('{
			(\n)?							# leading line = $1
			(^[ ]*)							# leading whitespace = $2
			('.$marker_any_re.'				# list marker and space = $3
				(?:[ ]+|(?=\n))	# space only required if item is not empty
			)
			((?s:.*?))						# list item text   = $4
			(?:(\n+(?=\n))|\n)				# tailing blank line = $5
			(?= \n* (\z | \2 ('.$marker_any_re.') (?:[ ]+|(?=\n))))
			}xm',
			array(&$this, '_processListItems_callback'), $list_str);

		$this->list_level--;
		return $list_str;
	}
	function _processListItems_callback($matches) {
		$item = $matches[4];
		$leading_line =& $matches[1];
		$leading_space =& $matches[2];
		$marker_space = $matches[3];
		$tailing_blank_line =& $matches[5];

		if ($leading_line || $tailing_blank_line ||
			preg_match('/\n{2,}/', $item))
		{
			# Replace marker with the appropriate whitespace indentation
			$item = $leading_space . str_repeat(' ', strlen($marker_space)) . $item;
			$item = $this->runBlockGamut($this->outdent($item)."\n");
		}
		else {
			# Recursion for sub-lists:
			$item = $this->doLists($this->outdent($item));
			$item = preg_replace('/\n+$/', '', $item);
			$item = $this->runSpanGamut($item);
		}

		return "<li>" . $item . "</li>\n";
	}


	function doCodeBlocks($text) {
	#
	#	Process Markdown `<pre><code>` blocks.
	#
		$text = preg_replace_callback('{
				(?:\n\n|\A\n?)
				(	            # $1 = the code block -- one or more lines, starting with a space/tab
				  (?>
					[ ]{'.$this->tab_width.'}  # Lines must start with a tab or a tab-width of spaces
					.*\n+
				  )+
				)
				((?=^[ ]{0,'.$this->tab_width.'}\S)|\Z)	# Lookahead for non-space at line-start, or end of doc
			}xm',
			array(&$this, '_doCodeBlocks_callback'), $text);

		return $text;
	}
	function _doCodeBlocks_callback($matches) {
		$codeblock = $matches[1];

		$codeblock = $this->outdent($codeblock);
		$codeblock = htmlspecialchars($codeblock, ENT_NOQUOTES);

		# trim leading newlines and trailing newlines
		$codeblock = preg_replace('/\A\n+|\n+\z/', '', $codeblock);

		$codeblock = "<pre><code>$codeblock\n</code></pre>";
		return "\n\n".$this->hashBlock($codeblock)."\n\n";
	}


	function makeCodeSpan($code) {
	#
	# Create a code span markup for $code. Called from handleSpanToken.
	#
		$code = htmlspecialchars(trim($code), ENT_NOQUOTES);
		return $this->hashPart("<code>$code</code>");
	}


	public $em_relist = array(
		''  => '(?:(?<!\*)\*(?!\*)|(?<!_)_(?!_))(?=\S|$)(?![\.,:;]\s)',
		'*' => '(?<=\S|^)(?<!\*)\*(?!\*)',
		'_' => '(?<=\S|^)(?<!_)_(?!_)',
		);
	public $strong_relist = array(
		''   => '(?:(?<!\*)\*\*(?!\*)|(?<!_)__(?!_))(?=\S|$)(?![\.,:;]\s)',
		'**' => '(?<=\S|^)(?<!\*)\*\*(?!\*)',
		'__' => '(?<=\S|^)(?<!_)__(?!_)',
		);
	public $em_strong_relist = array(
		''    => '(?:(?<!\*)\*\*\*(?!\*)|(?<!_)___(?!_))(?=\S|$)(?![\.,:;]\s)',
		'***' => '(?<=\S|^)(?<!\*)\*\*\*(?!\*)',
		'___' => '(?<=\S|^)(?<!_)___(?!_)',
		);
	public $em_strong_prepared_relist;

	function prepareItalicsAndBold() {
	#
	# Prepare regular expressions for searching emphasis tokens in any
	# context.
	#
		foreach ($this->em_relist as $em => $em_re) {
			foreach ($this->strong_relist as $strong => $strong_re) {
				# Construct list of allowed token expressions.
				$token_relist = array();
				if (isset($this->em_strong_relist["$em$strong"])) {
					$token_relist[] = $this->em_strong_relist["$em$strong"];
				}
				$token_relist[] = $em_re;
				$token_relist[] = $strong_re;

				# Construct master expression from list.
				$token_re = '{('. implode('|', $token_relist) .')}';
				$this->em_strong_prepared_relist["$em$strong"] = $token_re;
			}
		}
	}

	function doItalicsAndBold($text) {
		$token_stack = array('');
		$text_stack = array('');
		$em = '';
		$strong = '';
		$tree_char_em = false;

		while (1) {
			#
			# Get prepared regular expression for seraching emphasis tokens
			# in current context.
			#
			$token_re = $this->em_strong_prepared_relist["$em$strong"];

			#
			# Each loop iteration search for the next emphasis token.
			# Each token is then passed to handleSpanToken.
			#
			$parts = preg_split($token_re, $text, 2, PREG_SPLIT_DELIM_CAPTURE);
			$text_stack[0] .= $parts[0];
			$token =& $parts[1];
			$text =& $parts[2];

			if (empty($token)) {
				# Reached end of text span: empty stack without emitting.
				# any more emphasis.
				while ($token_stack[0]) {
					$text_stack[1] .= array_shift($token_stack);
					$text_stack[0] .= array_shift($text_stack);
				}
				break;
			}

			$token_len = strlen($token);
			if ($tree_char_em) {
				# Reached closing marker while inside a three-char emphasis.
				if ($token_len == 3) {
					# Three-char closing marker, close em and strong.
					array_shift($token_stack);
					$span = array_shift($text_stack);
					$span = $this->runSpanGamut($span);
					$span = "<strong><em>$span</em></strong>";
					$text_stack[0] .= $this->hashPart($span);
					$em = '';
					$strong = '';
				} else {
					# Other closing marker: close one em or strong and
					# change current token state to match the other
					$token_stack[0] = str_repeat($token[0], 3-$token_len);
					$tag = $token_len == 2 ? "strong" : "em";
					$span = $text_stack[0];
					$span = $this->runSpanGamut($span);
					$span = "<$tag>$span</$tag>";
					$text_stack[0] = $this->hashPart($span);
					$$tag = ''; # $$tag stands for $em or $strong
				}
				$tree_char_em = false;
			} else if ($token_len == 3) {
				if ($em) {
					# Reached closing marker for both em and strong.
					# Closing strong marker:
					for ($i = 0; $i < 2; ++$i) {
						$shifted_token = array_shift($token_stack);
						$tag = strlen($shifted_token) == 2 ? "strong" : "em";
						$span = array_shift($text_stack);
						$span = $this->runSpanGamut($span);
						$span = "<$tag>$span</$tag>";
						$text_stack[0] .= $this->hashPart($span);
						$$tag = ''; # $$tag stands for $em or $strong
					}
				} else {
					# Reached opening three-char emphasis marker. Push on token
					# stack; will be handled by the special condition above.
					$em = $token[0];
					$strong = "$em$em";
					array_unshift($token_stack, $token);
					array_unshift($text_stack, '');
					$tree_char_em = true;
				}
			} else if ($token_len == 2) {
				if ($strong) {
					# Unwind any dangling emphasis marker:
					if (strlen($token_stack[0]) == 1) {
						$text_stack[1] .= array_shift($token_stack);
						$text_stack[0] .= array_shift($text_stack);
					}
					# Closing strong marker:
					array_shift($token_stack);
					$span = array_shift($text_stack);
					$span = $this->runSpanGamut($span);
					$span = "<strong>$span</strong>";
					$text_stack[0] .= $this->hashPart($span);
					$strong = '';
				} else {
					array_unshift($token_stack, $token);
					array_unshift($text_stack, '');
					$strong = $token;
				}
			} else {
				# Here $token_len == 1
				if ($em) {
					if (strlen($token_stack[0]) == 1) {
						# Closing emphasis marker:
						array_shift($token_stack);
						$span = array_shift($text_stack);
						$span = $this->runSpanGamut($span);
						$span = "<em>$span</em>";
						$text_stack[0] .= $this->hashPart($span);
						$em = '';
					} else {
						$text_stack[0] .= $token;
					}
				} else {
					array_unshift($token_stack, $token);
					array_unshift($text_stack, '');
					$em = $token;
				}
			}
		}
		return $text_stack[0];
	}


	function doBlockQuotes($text) {
		$text = preg_replace_callback('/
			  (								# Wrap whole match in $1
				(?>
				  ^[ ]*>[ ]?			# ">" at the start of a line
					.+\n					# rest of the first line
				  (.+\n)*					# subsequent consecutive lines
				  \n*						# blanks
				)+
			  )
			/xm',
			array(&$this, '_doBlockQuotes_callback'), $text);

		return $text;
	}
	function _doBlockQuotes_callback($matches) {
		$bq = $matches[1];
		# trim one level of quoting - trim whitespace-only lines
		$bq = preg_replace('/^[ ]*>[ ]?|^[ ]+$/m', '', $bq);
		$bq = $this->runBlockGamut($bq);		# recurse

		$bq = preg_replace('/^/m', "  ", $bq);
		# These leading spaces cause problem with <pre> content,
		# so we need to fix that:
		$bq = preg_replace_callback('{(\s*<pre>.+?</pre>)}sx',
			array(&$this, '_doBlockQuotes_callback2'), $bq);

		return "\n". $this->hashBlock("<blockquote>\n$bq\n</blockquote>")."\n\n";
	}
	function _doBlockQuotes_callback2($matches) {
		$pre = $matches[1];
		$pre = preg_replace('/^  /m', '', $pre);
		return $pre;
	}


	function formParagraphs($text) {
	#
	#	Params:
	#		$text - string to process with html <p> tags
	#
		# Strip leading and trailing lines:
		$text = preg_replace('/\A\n+|\n+\z/', '', $text);

		$grafs = preg_split('/\n{2,}/', $text, -1, PREG_SPLIT_NO_EMPTY);

		#
		# Wrap <p> tags and unhashify HTML blocks
		#
		foreach ($grafs as $key => $value) {
			if (!preg_match('/^B\x1A[0-9]+B$/', $value)) {
				# Is a paragraph.
				$value = $this->runSpanGamut($value);
				$value = preg_replace('/^([ ]*)/', "<p>", $value);
				$value .= "</p>";
				$grafs[$key] = $this->unhash($value);
			}
			else {
				# Is a block.
				# Modify elements of @grafs in-place...
				$graf = $value;
				$block = $this->html_hashes[$graf];
				$graf = $block;
//				if (preg_match('{
//					\A
//					(							# $1 = <div> tag
//					  <div  \s+
//					  [^>]*
//					  \b
//					  markdown\s*=\s*  ([\'"])	#	$2 = attr quote char
//					  1
//					  \2
//					  [^>]*
//					  >
//					)
//					(							# $3 = contents
//					.*
//					)
//					(</div>)					# $4 = closing tag
//					\z
//					}xs', $block, $matches))
//				{
//					list(, $div_open, , $div_content, $div_close) = $matches;
//
//					# We can't call Markdown(), because that resets the hash;
//					# that initialization code should be pulled into its own sub, though.
//					$div_content = $this->hashHTMLBlocks($div_content);
//
//					# Run document gamut methods on the content.
//					foreach ($this->document_gamut as $method => $priority) {
//						$div_content = $this->$method($div_content);
//					}
//
//					$div_open = preg_replace(
//						'{\smarkdown\s*=\s*([\'"]).+?\1}', '', $div_open);
//
//					$graf = $div_open . "\n" . $div_content . "\n" . $div_close;
//				}
				$grafs[$key] = $graf;
			}
		}

		return implode("\n\n", $grafs);
	}


	function encodeAttribute($text) {
	#
	# Encode text for a double-quoted HTML attribute. This function
	# is *not* suitable for attributes enclosed in single quotes.
	#
		$text = $this->encodeAmpsAndAngles($text);
		$text = str_replace('"', '&quot;', $text);
		return $text;
	}


	function encodeAmpsAndAngles($text) {
	#
	# Smart processing for ampersands and angle brackets that need to
	# be encoded. Valid character entities are left alone unless the
	# no-entities mode is set.
	#
		if ($this->no_entities) {
			$text = str_replace('&', '&amp;', $text);
		} else {
			# Ampersand-encoding based entirely on Nat Irons's Amputator
			# MT plugin: <http://bumppo.net/projects/amputator/>
			$text = preg_replace('/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/',
								'&amp;', $text);;
		}
		# Encode remaining <'s
		$text = str_replace('<', '&lt;', $text);

		return $text;
	}


	function doAutoLinks($text) {
		$text = preg_replace_callback('{<((https?|ftp|dict):[^\'">\s]+)>}i',
			array(&$this, '_doAutoLinks_url_callback'), $text);

		# Email addresses: <address@domain.foo>
		$text = preg_replace_callback('{
			<
			(?:mailto:)?
			(
				(?:
					[-!#$%&\'*+/=?^_`.{|}~\w\x80-\xFF]+
				|
					".*?"
				)
				\@
				(?:
					[-a-z0-9\x80-\xFF]+(\.[-a-z0-9\x80-\xFF]+)*\.[a-z]+
				|
					\[[\d.a-fA-F:]+\]	# IPv4 & IPv6
				)
			)
			>
			}xi',
			array(&$this, '_doAutoLinks_email_callback'), $text);
		$text = preg_replace_callback('{<(tel:([^\'">\s]+))>}i',array(&$this, '_doAutoLinks_tel_callback'), $text);

		return $text;
	}
	function _doAutoLinks_tel_callback($matches) {
		$url = $this->encodeAttribute($matches[1]);
		$tel = $this->encodeAttribute($matches[2]);
		$link = "<a href=\"$url\">$tel</a>";
		return $this->hashPart($link);
	}
	function _doAutoLinks_url_callback($matches) {
		$url = $this->encodeAttribute($matches[1]);
		$link = "<a href=\"$url\">$url</a>";
		return $this->hashPart($link);
	}
	function _doAutoLinks_email_callback($matches) {
		$address = $matches[1];
		$link = $this->encodeEmailAddress($address);
		return $this->hashPart($link);
	}


	function encodeEmailAddress($addr) {
	#
	#	Input: an email address, e.g. "foo@example.com"
	#
	#	Output: the email address as a mailto link, with each character
	#		of the address encoded as either a decimal or hex entity, in
	#		the hopes of foiling most address harvesting spam bots. E.g.:
	#
	#	  <p><a href="&#109;&#x61;&#105;&#x6c;&#116;&#x6f;&#58;&#x66;o&#111;
	#        &#x40;&#101;&#x78;&#97;&#x6d;&#112;&#x6c;&#101;&#46;&#x63;&#111;
	#        &#x6d;">&#x66;o&#111;&#x40;&#101;&#x78;&#97;&#x6d;&#112;&#x6c;
	#        &#101;&#46;&#x63;&#111;&#x6d;</a></p>
	#
	#	Based by a filter by Matthew Wickline, posted to BBEdit-Talk.
	#   With some optimizations by Milian Wolff.
	#
		$addr = "mailto:" . $addr;
		$chars = preg_split('/(?<!^)(?!$)/', $addr);
		$seed = (int)abs(crc32($addr) / strlen($addr)); # Deterministic seed.

		foreach ($chars as $key => $char) {
			$ord = ord($char);
			# Ignore non-ascii chars.
			if ($ord < 128) {
				$r = ($seed * (1 + $key)) % 100; # Pseudo-random function.
				# roughly 10% raw, 45% hex, 45% dec
				# '@' *must* be encoded. I insist.
				if ($r > 90 && $char != '@') /* do nothing */;
				else if ($r < 45) $chars[$key] = '&#x'.dechex($ord).';';
				else              $chars[$key] = '&#'.$ord.';';
			}
		}

		$addr = implode('', $chars);
		$text = implode('', array_slice($chars, 7)); # text without `mailto:`
		$addr = "<a href=\"$addr\">$text</a>";

		return $addr;
	}


	function parseSpan($str) {
	#
	# Take the string $str and parse it into tokens, hashing embedded HTML,
	# escaped characters and handling code spans.
	#
		$output = '';

		$span_re = '{
				(
					\\\\'.$this->escape_chars_re.'
				|
					(?<![`\\\\])
					`+						# code span marker
			'.( $this->no_markup ? '' : '
				|
					<!--    .*?     -->		# comment
				|
					<\?.*?\?> | <%.*?%>		# processing instruction
				|
					<[!$]?[-a-zA-Z0-9:_]+	# regular tags
					(?>
						\s
						(?>[^"\'>]+|"[^"]*"|\'[^\']*\')*
					)?
					>
				|
					<[-a-zA-Z0-9:_]+\s*/> # xml-style empty tag
				|
					</[-a-zA-Z0-9:_]+\s*> # closing tag
			').'
				)
				}xs';

		while (1) {
			#
			# Each loop iteration search for either the next tag, the next
			# openning code span marker, or the next escaped character.
			# Each token is then passed to handleSpanToken.
			#
			$parts = preg_split($span_re, $str, 2, PREG_SPLIT_DELIM_CAPTURE);

			# Create token from text preceding tag.
			if ($parts[0] != "") {
				$output .= $parts[0];
			}

			# Check if we reach the end.
			if (isset($parts[1])) {
				$output .= $this->handleSpanToken($parts[1], $parts[2]);
				$str = $parts[2];
			}
			else {
				break;
			}
		}

		return $output;
	}


	function handleSpanToken($token, &$str) {
	#
	# Handle $token provided by parseSpan by determining its nature and
	# returning the corresponding value that should replace it.
	#
		switch ($token[0]) {
			case "\\":
				return $this->hashPart("&#". ord($token[1]). ";");
			case "`":
				# Search for end marker in remaining text.
				if (preg_match('/^(.*?[^`])'.preg_quote($token).'(?!`)(.*)$/sm',
					$str, $matches))
				{
					$str = $matches[2];
					$codespan = $this->makeCodeSpan($matches[1]);
					return $this->hashPart($codespan);
				}
				return $token; // return as text since no ending marker found.
			default:
				return $this->hashPart($token);
		}
	}


	function outdent($text) {
	#
	# Remove one level of line-leading tabs or spaces
	#
		return preg_replace('/^(\t|[ ]{1,'.$this->tab_width.'})/m', '', $text);
	}


	# String length function for detab. `_initDetab` will create a function to
	# hanlde UTF-8 if the default function does not exist.
	public $utf8_strlen = 'mb_strlen';

	function detab($text) {
	#
	# Replace tabs with the appropriate amount of space.
	#
		# For each line we separate the line in blocks delemited by
		# tab characters. Then we reconstruct every line by adding the
		# appropriate number of space between each blocks.

		$text = preg_replace_callback('/^.*\t.*$/m',
			array(&$this, '_detab_callback'), $text);

		return $text;
	}
	function _detab_callback($matches) {
		$line = $matches[0];
		$strlen = $this->utf8_strlen; # strlen function for UTF-8.

		# Split in blocks.
		$blocks = explode("\t", $line);
		# Add each blocks to the line.
		$line = $blocks[0];
		unset($blocks[0]); # Do not add first block twice.
		foreach ($blocks as $block) {
			# Calculate amount of space, insert spaces, insert block.
			$amount = $this->tab_width -
				$strlen($line, 'UTF-8') % $this->tab_width;
			$line .= str_repeat(" ", $amount) . $block;
		}
		return $line;
	}

	/**
	 * Check for the availability of the function in the `utf8_strlen` property
	 * (initially `mb_strlen`). If the function is not available, use jetpack_utf8_strlen
	 * that will loosely count the number of UTF-8 characters with a regular expression.
	 */
	function _initDetab() {
		if ( function_exists( $this->utf8_strlen ) )  {
			return;
		}
		$this->utf8_strlen = 'jetpack_utf8_strlen';
	}


	function unhash($text) {
	#
	# Swap back in all the tags hashed by _HashHTMLBlocks.
	#
		return preg_replace_callback('/(.)\x1A[0-9]+\1/',
			array(&$this, '_unhash_callback'), $text);
	}
	function _unhash_callback($matches) {
		return $this->html_hashes[$matches[0]];
	}

}


#
# Markdown Extra Parser Class
#

class MarkdownExtra_Parser extends Markdown_Parser {

	### Configuration Variables ###

	# Prefix for footnote ids.
	public $fn_id_prefix = "";

	# Optional title attribute for footnote links and backlinks.
	public $fn_link_title = MARKDOWN_FN_LINK_TITLE;
	public $fn_backlink_title = MARKDOWN_FN_BACKLINK_TITLE;

	# Optional class attribute for footnote links and backlinks.
	public $fn_link_class = MARKDOWN_FN_LINK_CLASS;
	public $fn_backlink_class = MARKDOWN_FN_BACKLINK_CLASS;

	# Optional class prefix for fenced code block.
	public $code_class_prefix = MARKDOWN_CODE_CLASS_PREFIX;
	# Class attribute for code blocks goes on the `code` tag;
	# setting this to true will put attributes on the `pre` tag instead.
	public $code_attr_on_pre = MARKDOWN_CODE_ATTR_ON_PRE;

	# Predefined abbreviations.
	public $predef_abbr = array();


	### Parser Implementation ###

	function __construct() {
	#
	# Constructor function. Initialize the parser object.
	#
		# Add extra escapable characters before parent constructor
		# initialize the table.
		$this->escape_chars .= ':|';

		# Insert extra document, block, and span transformations.
		# Parent constructor will do the sorting.
		$this->document_gamut += array(
			"doFencedCodeBlocks" => 5,
			"stripFootnotes"     => 15,
			"stripAbbreviations" => 25,
			"appendFootnotes"    => 50,
			);
		$this->block_gamut += array(
			"doFencedCodeBlocks" => 5,
			"doTables"           => 15,
			"doDefLists"         => 45,
			);
		$this->span_gamut += array(
			"doFootnotes"        => 5,
			"doAbbreviations"    => 70,
			);

		parent::__construct();
	}


	# Extra variables used during extra transformations.
	public $footnotes = array();
	public $footnotes_ordered = array();
	public $footnotes_ref_count = array();
	public $footnotes_numbers = array();
	public $abbr_desciptions = array();
	public $abbr_word_re = '';

	# Give the current footnote number.
	public $footnote_counter = 1;


	function setup() {
	#
	# Setting up Extra-specific variables.
	#
		parent::setup();

		$this->footnotes = array();
		$this->footnotes_ordered = array();
		$this->footnotes_ref_count = array();
		$this->footnotes_numbers = array();
		$this->abbr_desciptions = array();
		$this->abbr_word_re = '';
		$this->footnote_counter = 1;

		foreach ($this->predef_abbr as $abbr_word => $abbr_desc) {
			if ($this->abbr_word_re)
				$this->abbr_word_re .= '|';
			$this->abbr_word_re .= preg_quote($abbr_word);
			$this->abbr_desciptions[$abbr_word] = trim($abbr_desc);
		}
	}

	function teardown() {
	#
	# Clearing Extra-specific variables.
	#
		$this->footnotes = array();
		$this->footnotes_ordered = array();
		$this->footnotes_ref_count = array();
		$this->footnotes_numbers = array();
		$this->abbr_desciptions = array();
		$this->abbr_word_re = '';

		parent::teardown();
	}


	### Extra Attribute Parser ###

	# Expression to use to catch attributes (includes the braces)
	public $id_class_attr_catch_re = '\{((?:[ ]*[#.][-_:a-zA-Z0-9]+){1,})[ ]*\}';
	# Expression to use when parsing in a context when no capture is desired
	public $id_class_attr_nocatch_re = '\{(?:[ ]*[#.][-_:a-zA-Z0-9]+){1,}[ ]*\}';

	function doExtraAttributes($tag_name, $attr) {
	#
	# Parse attributes caught by the $this->id_class_attr_catch_re expression
	# and return the HTML-formatted list of attributes.
	#
	# Currently supported attributes are .class and #id.
	#
		if (empty($attr)) return "";

		# Split on components
		preg_match_all('/[#.][-_:a-zA-Z0-9]+/', $attr, $matches);
		$elements = $matches[0];

		# handle classes and ids (only first id taken into account)
		$classes = array();
		$id = false;
		foreach ($elements as $element) {
			if ($element[0] == '.') {
				$classes[] = substr($element, 1);
			} else if ($element[0] == '#') {
				if ($id === false) $id = substr($element, 1);
			}
		}

		# compose attributes as string
		$attr_str = "";
		if (!empty($id)) {
			$attr_str .= ' id="'.$id.'"';
		}
		if (!empty($classes)) {
			$attr_str .= ' class="'.implode(" ", $classes).'"';
		}
		return $attr_str;
	}


	function stripLinkDefinitions($text) {
	#
	# Strips link definitions from text, stores the URLs and titles in
	# hash references.
	#
		$less_than_tab = $this->tab_width - 1;

		# Link defs are in the form: ^[id]: url "optional title"
		$text = preg_replace_callback('{
							^[ ]{0,'.$less_than_tab.'}\[(.+)\][ ]?:	# id = $1
							  [ ]*
							  \n?				# maybe *one* newline
							  [ ]*
							(?:
							  <(.+?)>			# url = $2
							|
							  (\S+?)			# url = $3
							)
							  [ ]*
							  \n?				# maybe one newline
							  [ ]*
							(?:
								(?<=\s)			# lookbehind for whitespace
								["(]
								(.*?)			# title = $4
								[")]
								[ ]*
							)?	# title is optional
					(?:[ ]* '.$this->id_class_attr_catch_re.' )?  # $5 = extra id & class attr
							(?:\n+|\Z)
			}xm',
			array(&$this, '_stripLinkDefinitions_callback'),
			$text);
		return $text;
	}
	function _stripLinkDefinitions_callback($matches) {
		$link_id = strtolower($matches[1]);
		$url = $matches[2] == '' ? $matches[3] : $matches[2];
		$this->urls[$link_id] = $url;
		$this->titles[$link_id] =& $matches[4];
		$this->ref_attr[$link_id] = $this->doExtraAttributes("", $dummy =& $matches[5]);
		return ''; # String that will replace the block
	}


	### HTML Block Parser ###

	# Tags that are always treated as block tags:
	public $block_tags_re = 'p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|address|form|fieldset|iframe|hr|legend|article|section|nav|aside|hgroup|header|footer|figcaption';

	# Tags treated as block tags only if the opening tag is alone on its line:
	public $context_block_tags_re = 'script|noscript|ins|del|iframe|object|source|track|param|math|svg|canvas|audio|video';

	# Tags where markdown="1" default to span mode:
	public $contain_span_tags_re = 'p|h[1-6]|li|dd|dt|td|th|legend|address';

	# Tags which must not have their contents modified, no matter where
	# they appear:
	public $clean_tags_re = 'script|math|svg';

	# Tags that do not need to be closed.
	public $auto_close_tags_re = 'hr|img|param|source|track';


	function hashHTMLBlocks($text) {
	#
	# Hashify HTML Blocks and "clean tags".
	#
	# We only want to do this for block-level HTML tags, such as headers,
	# lists, and tables. That's because we still want to wrap <p>s around
	# "paragraphs" that are wrapped in non-block-level tags, such as anchors,
	# phrase emphasis, and spans. The list of tags we're looking for is
	# hard-coded.
	#
	# This works by calling _HashHTMLBlocks_InMarkdown, which then calls
	# _HashHTMLBlocks_InHTML when it encounter block tags. When the markdown="1"
	# attribute is found within a tag, _HashHTMLBlocks_InHTML calls back
	#  _HashHTMLBlocks_InMarkdown to handle the Markdown syntax within the tag.
	# These two functions are calling each other. It's recursive!
	#
		if ($this->no_markup)  return $text;

		#
		# Call the HTML-in-Markdown hasher.
		#
		list($text, ) = $this->_hashHTMLBlocks_inMarkdown($text);

		return $text;
	}
	function _hashHTMLBlocks_inMarkdown($text, $indent = 0,
										$enclosing_tag_re = '', $span = false)
	{
	#
	# Parse markdown text, calling _HashHTMLBlocks_InHTML for block tags.
	#
	# *   $indent is the number of space to be ignored when checking for code
	#     blocks. This is important because if we don't take the indent into
	#     account, something like this (which looks right) won't work as expected:
	#
	#     <div>
	#         <div markdown="1">
	#         Hello World.  <-- Is this a Markdown code block or text?
	#         </div>  <-- Is this a Markdown code block or a real tag?
	#     <div>
	#
	#     If you don't like this, just don't indent the tag on which
	#     you apply the markdown="1" attribute.
	#
	# *   If $enclosing_tag_re is not empty, stops at the first unmatched closing
	#     tag with that name. Nested tags supported.
	#
	# *   If $span is true, text inside must treated as span. So any double
	#     newline will be replaced by a single newline so that it does not create
	#     paragraphs.
	#
	# Returns an array of that form: ( processed text , remaining text )
	#
		if ($text === '') return array('', '');

		# Regex to check for the presence of newlines around a block tag.
		$newline_before_re = '/(?:^\n?|\n\n)*$/';
		$newline_after_re =
			'{
				^						# Start of text following the tag.
				(?>[ ]*<!--.*?-->)?		# Optional comment.
				[ ]*\n					# Must be followed by newline.
			}xs';

		# Regex to match any tag.
		$block_tag_re =
			'{
				(					# $2: Capture whole tag.
					</?					# Any opening or closing tag.
						(?>				# Tag name.
							'.$this->block_tags_re.'			|
							'.$this->context_block_tags_re.'	|
							'.$this->clean_tags_re.'        	|
							(?!\s)'.$enclosing_tag_re.'
						)
						(?:
							(?=[\s"\'/a-zA-Z0-9])	# Allowed characters after tag name.
							(?>
								".*?"		|	# Double quotes (can contain `>`)
								\'.*?\'   	|	# Single quotes (can contain `>`)
								.+?				# Anything but quotes and `>`.
							)*?
						)?
					>					# End of tag.
				|
					<!--    .*?     -->	# HTML Comment
				|
					<\?.*?\?> | <%.*?%>	# Processing instruction
				|
					<!\[CDATA\[.*?\]\]>	# CData Block
				'. ( !$span ? ' # If not in span.
				|
					# Indented code block
					(?: ^[ ]*\n | ^ | \n[ ]*\n )
					[ ]{'.($indent+4).'}[^\n]* \n
					(?>
						(?: [ ]{'.($indent+4).'}[^\n]* | [ ]* ) \n
					)*
				|
					# Fenced code block marker
					(?<= ^ | \n )
					[ ]{0,'.($indent+3).'}(?:~{3,}|`{3,})
									[ ]*
					(?:
					\.?[-_:a-zA-Z0-9]+ # standalone class name
					|
						'.$this->id_class_attr_nocatch_re.' # extra attributes
					)?
					[ ]*
					(?= \n )
				' : '' ). ' # End (if not is span).
				|
					# Code span marker
					# Note, this regex needs to go after backtick fenced
					# code blocks but it should also be kept outside of the
					# "if not in span" condition adding backticks to the parser
					`+
				)
			}xs';


		$depth = 0;		# Current depth inside the tag tree.
		$parsed = "";	# Parsed text that will be returned.

		#
		# Loop through every tag until we find the closing tag of the parent
		# or loop until reaching the end of text if no parent tag specified.
		#
		do {
			#
			# Split the text using the first $tag_match pattern found.
			# Text before  pattern will be first in the array, text after
			# pattern will be at the end, and between will be any catches made
			# by the pattern.
			#
			$parts = preg_split($block_tag_re, $text, 2,
								PREG_SPLIT_DELIM_CAPTURE);

			# If in Markdown span mode, add a empty-string span-level hash
			# after each newline to prevent triggering any block element.
			if ($span) {
				$void = $this->hashPart("", ':');
				$newline = "$void\n";
				$parts[0] = $void . str_replace("\n", $newline, $parts[0]) . $void;
			}

			$parsed .= $parts[0]; # Text before current tag.

			# If end of $text has been reached. Stop loop.
			if (count($parts) < 3) {
				$text = "";
				break;
			}

			$tag  = $parts[1]; # Tag to handle.
			$text = $parts[2]; # Remaining text after current tag.
			$tag_re = preg_quote($tag); # For use in a regular expression.

			#
			# Check for: Fenced code block marker.
			# Note: need to recheck the whole tag to disambiguate backtick
			# fences from code spans
			#
			if (preg_match('{^\n?([ ]{0,'.($indent+3).'})(~{3,}|`{3,})[ ]*(?:\.?[-_:a-zA-Z0-9]+|'.$this->id_class_attr_nocatch_re.')?[ ]*\n?$}', $tag, $capture)) {
				# Fenced code block marker: find matching end marker.
				$fence_indent = strlen($capture[1]); # use captured indent in re
				$fence_re = $capture[2]; # use captured fence in re
				if (preg_match('{^(?>.*\n)*?[ ]{'.($fence_indent).'}'.$fence_re.'[ ]*(?:\n|$)}', $text,
					$matches))
				{
					# End marker found: pass text unchanged until marker.
					$parsed .= $tag . $matches[0];
					$text = substr($text, strlen($matches[0]));
				}
				else {
					# No end marker: just skip it.
					$parsed .= $tag;
				}
			}
			#
			# Check for: Indented code block.
			#
			else if ($tag[0] == "\n" || $tag[0] == " ") {
				# Indented code block: pass it unchanged, will be handled
				# later.
				$parsed .= $tag;
			}
			#
			# Check for: Code span marker
			# Note: need to check this after backtick fenced code blocks
			#
			else if ($tag[0] == "`") {
				# Find corresponding end marker.
				$tag_re = preg_quote($tag);
				if (preg_match('{^(?>.+?|\n(?!\n))*?(?<!`)'.$tag_re.'(?!`)}',
					$text, $matches))
				{
					# End marker found: pass text unchanged until marker.
					$parsed .= $tag . $matches[0];
					$text = substr($text, strlen($matches[0]));
				}
				else {
					# Unmatched marker: just skip it.
					$parsed .= $tag;
				}
			}
			#
			# Check for: Opening Block level tag or
			#            Opening Context Block tag (like ins and del)
			#               used as a block tag (tag is alone on it's line).
			#
			else if (preg_match('{^<(?:'.$this->block_tags_re.')\b}', $tag) ||
				(	preg_match('{^<(?:'.$this->context_block_tags_re.')\b}', $tag) &&
					preg_match($newline_before_re, $parsed) &&
					preg_match($newline_after_re, $text)	)
				)
			{
				# Need to parse tag and following text using the HTML parser.
				list($block_text, $text) =
					$this->_hashHTMLBlocks_inHTML($tag . $text, "hashBlock", true);

				# Make sure it stays outside of any paragraph by adding newlines.
				$parsed .= "\n\n$block_text\n\n";
			}
			#
			# Check for: Clean tag (like script, math)
			#            HTML Comments, processing instructions.
			#
			else if (preg_match('{^<(?:'.$this->clean_tags_re.')\b}', $tag) ||
				$tag[1] == '!' || $tag[1] == '?')
			{
				# Need to parse tag and following text using the HTML parser.
				# (don't check for markdown attribute)
				list($block_text, $text) =
					$this->_hashHTMLBlocks_inHTML($tag . $text, "hashClean", false);

				$parsed .= $block_text;
			}
			#
			# Check for: Tag with same name as enclosing tag.
			#
			else if ($enclosing_tag_re !== '' &&
				# Same name as enclosing tag.
				preg_match('{^</?(?:'.$enclosing_tag_re.')\b}', $tag))
			{
				#
				# Increase/decrease nested tag count.
				#
				if ($tag[1] == '/')						$depth--;
				else if ($tag[strlen($tag)-2] != '/')	$depth++;

				if ($depth < 0) {
					#
					# Going out of parent element. Clean up and break so we
					# return to the calling function.
					#
					$text = $tag . $text;
					break;
				}

				$parsed .= $tag;
			}
			else {
				$parsed .= $tag;
			}
		} while ($depth >= 0);

		return array($parsed, $text);
	}
	function _hashHTMLBlocks_inHTML($text, $hash_method, $md_attr) {
	#
	# Parse HTML, calling _HashHTMLBlocks_InMarkdown for block tags.
	#
	# *   Calls $hash_method to convert any blocks.
	# *   Stops when the first opening tag closes.
	# *   $md_attr indicate if the use of the `markdown="1"` attribute is allowed.
	#     (it is not inside clean tags)
	#
	# Returns an array of that form: ( processed text , remaining text )
	#
		if ($text === '') return array('', '');

		# Regex to match `markdown` attribute inside of a tag.
		$markdown_attr_re = '
			{
				\s*			# Eat whitespace before the `markdown` attribute
				markdown
				\s*=\s*
				(?>
					(["\'])		# $1: quote delimiter
					(.*?)		# $2: attribute value
					\1			# matching delimiter
				|
					([^\s>]*)	# $3: unquoted attribute value
				)
				()				# $4: make $3 always defined (avoid warnings)
			}xs';

		# Regex to match any tag.
		$tag_re = '{
				(					# $2: Capture whole tag.
					</?					# Any opening or closing tag.
						[\w:$]+			# Tag name.
						(?:
							(?=[\s"\'/a-zA-Z0-9])	# Allowed characters after tag name.
							(?>
								".*?"		|	# Double quotes (can contain `>`)
								\'.*?\'   	|	# Single quotes (can contain `>`)
								.+?				# Anything but quotes and `>`.
							)*?
						)?
					>					# End of tag.
				|
					<!--    .*?     -->	# HTML Comment
				|
					<\?.*?\?> | <%.*?%>	# Processing instruction
				|
					<!\[CDATA\[.*?\]\]>	# CData Block
				)
			}xs';

		$original_text = $text;		# Save original text in case of faliure.

		$depth		= 0;	# Current depth inside the tag tree.
		$block_text	= "";	# Temporary text holder for current text.
		$parsed		= "";	# Parsed text that will be returned.

		#
		# Get the name of the starting tag.
		# (This pattern makes $base_tag_name_re safe without quoting.)
		#
		if (preg_match('/^<([\w:$]*)\b/', $text, $matches))
			$base_tag_name_re = $matches[1];

		#
		# Loop through every tag until we find the corresponding closing tag.
		#
		do {
			#
			# Split the text using the first $tag_match pattern found.
			# Text before  pattern will be first in the array, text after
			# pattern will be at the end, and between will be any catches made
			# by the pattern.
			#
			$parts = preg_split($tag_re, $text, 2, PREG_SPLIT_DELIM_CAPTURE);

			if (count($parts) < 3) {
				#
				# End of $text reached with unbalenced tag(s).
				# In that case, we return original text unchanged and pass the
				# first character as filtered to prevent an infinite loop in the
				# parent function.
				#
				return array($original_text[0], substr($original_text, 1));
			}

			$block_text .= $parts[0]; # Text before current tag.
			$tag         = $parts[1]; # Tag to handle.
			$text        = $parts[2]; # Remaining text after current tag.

			#
			# Check for: Auto-close tag (like <hr/>)
			#			 Comments and Processing Instructions.
			#
			if (preg_match('{^</?(?:'.$this->auto_close_tags_re.')\b}', $tag) ||
				$tag[1] == '!' || $tag[1] == '?')
			{
				# Just add the tag to the block as if it was text.
				$block_text .= $tag;
			}
			else {
				#
				# Increase/decrease nested tag count. Only do so if
				# the tag's name match base tag's.
				#
				if (preg_match('{^</?'.$base_tag_name_re.'\b}', $tag)) {
					if ($tag[1] == '/')						$depth--;
					else if ($tag[strlen($tag)-2] != '/')	$depth++;
				}

				#
				# Check for `markdown="1"` attribute and handle it.
				#
				if ($md_attr &&
					preg_match($markdown_attr_re, $tag, $attr_m) &&
					preg_match('/^1|block|span$/', $attr_m[2] . $attr_m[3]))
				{
					# Remove `markdown` attribute from opening tag.
					$tag = preg_replace($markdown_attr_re, '', $tag);

					# Check if text inside this tag must be parsed in span mode.
					$this->mode = $attr_m[2] . $attr_m[3];
					$span_mode = $this->mode == 'span' || $this->mode != 'block' &&
						preg_match('{^<(?:'.$this->contain_span_tags_re.')\b}', $tag);

					# Calculate indent before tag.
					if (preg_match('/(?:^|\n)( *?)(?! ).*?$/', $block_text, $matches)) {
						$strlen = $this->utf8_strlen;
						$indent = $strlen($matches[1], 'UTF-8');
					} else {
						$indent = 0;
					}

					# End preceding block with this tag.
					$block_text .= $tag;
					$parsed .= $this->$hash_method($block_text);

					# Get enclosing tag name for the ParseMarkdown function.
					# (This pattern makes $tag_name_re safe without quoting.)
					preg_match('/^<([\w:$]*)\b/', $tag, $matches);
					$tag_name_re = $matches[1];

					# Parse the content using the HTML-in-Markdown parser.
					list ($block_text, $text)
						= $this->_hashHTMLBlocks_inMarkdown($text, $indent,
							$tag_name_re, $span_mode);

					# Outdent markdown text.
					if ($indent > 0) {
						$block_text = preg_replace("/^[ ]{1,$indent}/m", "",
													$block_text);
					}

					# Append tag content to parsed text.
					if (!$span_mode)	$parsed .= "\n\n$block_text\n\n";
					else				$parsed .= "$block_text";

					# Start over with a new block.
					$block_text = "";
				}
				else $block_text .= $tag;
			}

		} while ($depth > 0);

		#
		# Hash last block text that wasn't processed inside the loop.
		#
		$parsed .= $this->$hash_method($block_text);

		return array($parsed, $text);
	}


	function hashClean($text) {
	#
	# Called whenever a tag must be hashed when a function inserts a "clean" tag
	# in $text, it passes through this function and is automaticaly escaped,
	# blocking invalid nested overlap.
	#
		return $this->hashPart($text, 'C');
	}


	function doAnchors($text) {
	#
	# Turn Markdown link shortcuts into XHTML <a> tags.
	#
		if ($this->in_anchor) return $text;
		$this->in_anchor = true;

		#
		# First, handle reference-style links: [link text] [id]
		#
		$text = preg_replace_callback('{
			(					# wrap whole match in $1
			  \[
				('.$this->nested_brackets_re.')	# link text = $2
			  \]

			  [ ]?				# one optional space
			  (?:\n[ ]*)?		# one optional newline followed by spaces

			  \[
				(.*?)		# id = $3
			  \]
			)
			}xs',
			array(&$this, '_doAnchors_reference_callback'), $text);

		#
		# Next, inline-style links: [link text](url "optional title")
		#
		$text = preg_replace_callback('{
			(				# wrap whole match in $1
			  \[
				('.$this->nested_brackets_re.')	# link text = $2
			  \]
			  \(			# literal paren
				[ \n]*
				(?:
					<(.+?)>	# href = $3
				|
					('.$this->nested_url_parenthesis_re.')	# href = $4
				)
				[ \n]*
				(			# $5
				  ([\'"])	# quote char = $6
				  (.*?)		# Title = $7
				  \6		# matching quote
				  [ \n]*	# ignore any spaces/tabs between closing quote and )
				)?			# title is optional
			  \)
			  (?:[ ]? '.$this->id_class_attr_catch_re.' )?	 # $8 = id/class attributes
			)
			}xs',
			array(&$this, '_doAnchors_inline_callback'), $text);

		#
		# Last, handle reference-style shortcuts: [link text]
		# These must come last in case you've also got [link text][1]
		# or [link text](/foo)
		#
		$text = preg_replace_callback('{
			(					# wrap whole match in $1
			  \[
				([^\[\]]+)		# link text = $2; can\'t contain [ or ]
			  \]
			)
			}xs',
			array(&$this, '_doAnchors_reference_callback'), $text);

		$this->in_anchor = false;
		return $text;
	}
	function _doAnchors_reference_callback($matches) {
		$whole_match =  $matches[1];
		$link_text   =  $matches[2];
		$link_id     =& $matches[3];

		if ($link_id == "") {
			# for shortcut links like [this][] or [this].
			$link_id = $link_text;
		}

		# lower-case and turn embedded newlines into spaces
		$link_id = strtolower($link_id);
		$link_id = preg_replace('{[ ]?\n}', ' ', $link_id);

		if (isset($this->urls[$link_id])) {
			$url = $this->urls[$link_id];
			$url = $this->encodeAttribute($url);

			$result = "<a href=\"$url\"";
			if ( isset( $this->titles[$link_id] ) ) {
				$title = $this->titles[$link_id];
				$title = $this->encodeAttribute($title);
				$result .=  " title=\"$title\"";
			}
			if (isset($this->ref_attr[$link_id]))
				$result .= $this->ref_attr[$link_id];

			$link_text = $this->runSpanGamut($link_text);
			$result .= ">$link_text</a>";
			$result = $this->hashPart($result);
		}
		else {
			$result = $whole_match;
		}
		return $result;
	}
	function _doAnchors_inline_callback($matches) {
		$whole_match	=  $matches[1];
		$link_text		=  $this->runSpanGamut($matches[2]);
		$url			=  $matches[3] == '' ? $matches[4] : $matches[3];
		$title			=& $matches[7];
		$attr  = $this->doExtraAttributes("a", $dummy =& $matches[8]);


		$url = $this->encodeAttribute($url);

		$result = "<a href=\"$url\"";
		if (isset($title)) {
			$title = $this->encodeAttribute($title);
			$result .=  " title=\"$title\"";
		}
		$result .= $attr;

		$link_text = $this->runSpanGamut($link_text);
		$result .= ">$link_text</a>";

		return $this->hashPart($result);
	}


	function doImages($text) {
	#
	# Turn Markdown image shortcuts into <img> tags.
	#
		#
		# First, handle reference-style labeled images: ![alt text][id]
		#
		$text = preg_replace_callback('{
			(				# wrap whole match in $1
			  !\[
				('.$this->nested_brackets_re.')		# alt text = $2
			  \]

			  [ ]?				# one optional space
			  (?:\n[ ]*)?		# one optional newline followed by spaces

			  \[
				(.*?)		# id = $3
			  \]

			)
			}xs',
			array(&$this, '_doImages_reference_callback'), $text);

		#
		# Next, handle inline images:  ![alt text](url "optional title")
		# Don't forget: encode * and _
		#
		$text = preg_replace_callback('{
			(				# wrap whole match in $1
			  !\[
				('.$this->nested_brackets_re.')		# alt text = $2
			  \]
			  \s?			# One optional whitespace character
			  \(			# literal paren
				[ \n]*
				(?:
					<(\S*)>	# src url = $3
				|
					('.$this->nested_url_parenthesis_re.')	# src url = $4
				)
				[ \n]*
				(			# $5
				  ([\'"])	# quote char = $6
				  (.*?)		# title = $7
				  \6		# matching quote
				  [ \n]*
				)?			# title is optional
			  \)
			  (?:[ ]? '.$this->id_class_attr_catch_re.' )?	 # $8 = id/class attributes
			)
			}xs',
			array(&$this, '_doImages_inline_callback'), $text);

		return $text;
	}
	function _doImages_reference_callback($matches) {
		$whole_match = $matches[1];
		$alt_text    = $matches[2];
		$link_id     = strtolower($matches[3]);

		if ($link_id == "") {
			$link_id = strtolower($alt_text); # for shortcut links like ![this][].
		}

		$alt_text = $this->encodeAttribute($alt_text);
		if (isset($this->urls[$link_id])) {
			$url = $this->encodeAttribute($this->urls[$link_id]);
			$result = "<img src=\"$url\" alt=\"$alt_text\"";
			if (isset($this->titles[$link_id])) {
				$title = $this->titles[$link_id];
				$title = $this->encodeAttribute($title);
				$result .=  " title=\"$title\"";
			}
			if (isset($this->ref_attr[$link_id]))
				$result .= $this->ref_attr[$link_id];
			$result .= $this->empty_element_suffix;
			$result = $this->hashPart($result);
		}
		else {
			# If there's no such link ID, leave intact:
			$result = $whole_match;
		}

		return $result;
	}
	function _doImages_inline_callback($matches) {
		$whole_match	= $matches[1];
		$alt_text		= $matches[2];
		$url			= $matches[3] == '' ? $matches[4] : $matches[3];
		$title			=& $matches[7];
		$attr  = $this->doExtraAttributes("img", $dummy =& $matches[8]);

		$alt_text = $this->encodeAttribute($alt_text);
		$url = $this->encodeAttribute($url);
		$result = "<img src=\"$url\" alt=\"$alt_text\"";
		if (isset($title)) {
			$title = $this->encodeAttribute($title);
			$result .=  " title=\"$title\""; # $title already quoted
		}
		$result .= $attr;
		$result .= $this->empty_element_suffix;

		return $this->hashPart($result);
	}


	function doHeaders($text) {
	#
	# Redefined to add id and class attribute support.
	#
		# Setext-style headers:
		#	  Header 1  {#header1}
		#	  ========
		#
		#	  Header 2  {#header2 .class1 .class2}
		#	  --------
		#
		$text = preg_replace_callback(
			'{
				(^.+?)								# $1: Header text
				(?:[ ]+ '.$this->id_class_attr_catch_re.' )?	 # $3 = id/class attributes
				[ ]*\n(=+|-+)[ ]*\n+				# $3: Header footer
			}mx',
			array(&$this, '_doHeaders_callback_setext'), $text);

		# atx-style headers:
		#	# Header 1        {#header1}
		#	## Header 2       {#header2}
		#	## Header 2 with closing hashes ##  {#header3.class1.class2}
		#	...
		#	###### Header 6   {.class2}
		#
		$text = preg_replace_callback('{
				^(\#{1,6})	# $1 = string of #\'s
				[ ]*
				(.+?)		# $2 = Header text
				[ ]*
				\#*			# optional closing #\'s (not counted)
				(?:[ ]+ '.$this->id_class_attr_catch_re.' )?	 # $3 = id/class attributes
				[ ]*
				\n+
			}xm',
			array(&$this, '_doHeaders_callback_atx'), $text);

		return $text;
	}
	function _doHeaders_callback_setext($matches) {
		if ($matches[3] == '-' && preg_match('{^- }', $matches[1]))
			return $matches[0];
		$level = $matches[3][0] == '=' ? 1 : 2;
		$attr  = $this->doExtraAttributes("h$level", $dummy =& $matches[2]);
		$block = "<h$level$attr>".$this->runSpanGamut($matches[1])."</h$level>";
		return "\n" . $this->hashBlock($block) . "\n\n";
	}
	function _doHeaders_callback_atx($matches) {
		$level = strlen($matches[1]);
		$attr  = $this->doExtraAttributes("h$level", $dummy =& $matches[3]);
		$block = "<h$level$attr>".$this->runSpanGamut($matches[2])."</h$level>";
		return "\n" . $this->hashBlock($block) . "\n\n";
	}


	function doTables($text) {
	#
	# Form HTML tables.
	#
		$less_than_tab = $this->tab_width - 1;
		#
		# Find tables with leading pipe.
		#
		#	| Header 1 | Header 2
		#	| -------- | --------
		#	| Cell 1   | Cell 2
		#	| Cell 3   | Cell 4
		#
		$text = preg_replace_callback('
			{
				^							# Start of a line
				[ ]{0,'.$less_than_tab.'}	# Allowed whitespace.
				[|]							# Optional leading pipe (present)
				(.+) \n						# $1: Header row (at least one pipe)

				[ ]{0,'.$less_than_tab.'}	# Allowed whitespace.
				[|] ([ ]*[-:]+[-| :]*) \n	# $2: Header underline

				(							# $3: Cells
					(?>
						[ ]*				# Allowed whitespace.
						[|] .* \n			# Row content.
					)*
				)
				(?=\n|\Z)					# Stop at final double newline.
			}xm',
			array(&$this, '_doTable_leadingPipe_callback'), $text);

		#
		# Find tables without leading pipe.
		#
		#	Header 1 | Header 2
		#	-------- | --------
		#	Cell 1   | Cell 2
		#	Cell 3   | Cell 4
		#
		$text = preg_replace_callback('
			{
				^							# Start of a line
				[ ]{0,'.$less_than_tab.'}	# Allowed whitespace.
				(\S.*[|].*) \n				# $1: Header row (at least one pipe)

				[ ]{0,'.$less_than_tab.'}	# Allowed whitespace.
				([-:]+[ ]*[|][-| :]*) \n	# $2: Header underline

				(							# $3: Cells
					(?>
						.* [|] .* \n		# Row content
					)*
				)
				(?=\n|\Z)					# Stop at final double newline.
			}xm',
			array(&$this, '_DoTable_callback'), $text);

		return $text;
	}
	function _doTable_leadingPipe_callback($matches) {
		$head		= $matches[1];
		$underline	= $matches[2];
		$content	= $matches[3];

		# Remove leading pipe for each row.
		$content	= preg_replace('/^ *[|]/m', '', $content);

		return $this->_doTable_callback(array($matches[0], $head, $underline, $content));
	}
	function _doTable_callback($matches) {
		$head		= $matches[1];
		$underline	= $matches[2];
		$content	= $matches[3];

		# Remove any tailing pipes for each line.
		$head		= preg_replace('/[|] *$/m', '', $head);
		$underline	= preg_replace('/[|] *$/m', '', $underline);
		$content	= preg_replace('/[|] *$/m', '', $content);

		# Reading alignement from header underline.
		$separators	= preg_split('/ *[|] */', $underline);
		foreach ($separators as $n => $s) {
			if (preg_match('/^ *-+: *$/', $s))		$attr[$n] = ' align="right"';
			else if (preg_match('/^ *:-+: *$/', $s))$attr[$n] = ' align="center"';
			else if (preg_match('/^ *:-+ *$/', $s))	$attr[$n] = ' align="left"';
			else									$attr[$n] = '';
		}

		# Parsing span elements, including code spans, character escapes,
		# and inline HTML tags, so that pipes inside those gets ignored.
		$head		= $this->parseSpan($head);
		$headers	= preg_split('/ *[|] */', $head);
		$col_count	= count($headers);
		$attr       = array_pad($attr, $col_count, '');

		# Write column headers.
		$text = "<table>\n";
		$text .= "<thead>\n";
		$text .= "<tr>\n";
		foreach ($headers as $n => $header)
			$text .= "  <th$attr[$n]>".$this->runSpanGamut(trim($header))."</th>\n";
		$text .= "</tr>\n";
		$text .= "</thead>\n";

		# Split content by row.
		$rows = explode("\n", trim($content, "\n"));

		$text .= "<tbody>\n";
		foreach ($rows as $row) {
			# Parsing span elements, including code spans, character escapes,
			# and inline HTML tags, so that pipes inside those gets ignored.
			$row = $this->parseSpan($row);

			# Split row by cell.
			$row_cells = preg_split('/ *[|] */', $row, $col_count);
			$row_cells = array_pad($row_cells, $col_count, '');

			$text .= "<tr>\n";
			foreach ($row_cells as $n => $cell)
				$text .= "  <td$attr[$n]>".$this->runSpanGamut(trim($cell))."</td>\n";
			$text .= "</tr>\n";
		}
		$text .= "</tbody>\n";
		$text .= "</table>";

		return $this->hashBlock($text) . "\n";
	}


	function doDefLists($text) {
	#
	# Form HTML definition lists.
	#
		$less_than_tab = $this->tab_width - 1;

		# Re-usable pattern to match any entire dl list:
		$whole_list_re = '(?>
			(								# $1 = whole list
			  (								# $2
				[ ]{0,'.$less_than_tab.'}
				((?>.*\S.*\n)+)				# $3 = defined term
				\n?
				[ ]{0,'.$less_than_tab.'}:[ ]+ # colon starting definition
			  )
			  (?s:.+?)
			  (								# $4
				  \z
				|
				  \n{2,}
				  (?=\S)
				  (?!						# Negative lookahead for another term
					[ ]{0,'.$less_than_tab.'}
					(?: \S.*\n )+?			# defined term
					\n?
					[ ]{0,'.$less_than_tab.'}:[ ]+ # colon starting definition
				  )
				  (?!						# Negative lookahead for another definition
					[ ]{0,'.$less_than_tab.'}:[ ]+ # colon starting definition
				  )
			  )
			)
		)'; // mx

		$text = preg_replace_callback('{
				(?>\A\n?|(?<=\n\n))
				'.$whole_list_re.'
			}mx',
			array(&$this, '_doDefLists_callback'), $text);

		return $text;
	}
	function _doDefLists_callback($matches) {
		# Re-usable patterns to match list item bullets and number markers:
		$list = $matches[1];

		# Turn double returns into triple returns, so that we can make a
		# paragraph for the last item in a list, if necessary:
		$result = trim($this->processDefListItems($list));
		$result = "<dl>\n" . $result . "\n</dl>";
		return $this->hashBlock($result) . "\n\n";
	}


	function processDefListItems($list_str) {
	#
	#	Process the contents of a single definition list, splitting it
	#	into individual term and definition list items.
	#
		$less_than_tab = $this->tab_width - 1;

		# trim trailing blank lines:
		$list_str = preg_replace("/\n{2,}\\z/", "\n", $list_str);

		# Process definition terms.
		$list_str = preg_replace_callback('{
			(?>\A\n?|\n\n+)					# leading line
			(								# definition terms = $1
				[ ]{0,'.$less_than_tab.'}	# leading whitespace
				(?!\:[ ]|[ ])				# negative lookahead for a definition
											#   mark (colon) or more whitespace.
				(?> \S.* \n)+?				# actual term (not whitespace).
			)
			(?=\n?[ ]{0,3}:[ ])				# lookahead for following line feed
											#   with a definition mark.
			}xm',
			array(&$this, '_processDefListItems_callback_dt'), $list_str);

		# Process actual definitions.
		$list_str = preg_replace_callback('{
			\n(\n+)?						# leading line = $1
			(								# marker space = $2
				[ ]{0,'.$less_than_tab.'}	# whitespace before colon
				\:[ ]+						# definition mark (colon)
			)
			((?s:.+?))						# definition text = $3
			(?= \n+ 						# stop at next definition mark,
				(?:							# next term or end of text
					[ ]{0,'.$less_than_tab.'} \:[ ]	|
					<dt> | \z
				)
			)
			}xm',
			array(&$this, '_processDefListItems_callback_dd'), $list_str);

		return $list_str;
	}
	function _processDefListItems_callback_dt($matches) {
		$terms = explode("\n", trim($matches[1]));
		$text = '';
		foreach ($terms as $term) {
			$term = $this->runSpanGamut(trim($term));
			$text .= "\n<dt>" . $term . "</dt>";
		}
		return $text . "\n";
	}
	function _processDefListItems_callback_dd($matches) {
		$leading_line	= $matches[1];
		$marker_space	= $matches[2];
		$def			= $matches[3];

		if ($leading_line || preg_match('/\n{2,}/', $def)) {
			# Replace marker with the appropriate whitespace indentation
			$def = str_repeat(' ', strlen($marker_space)) . $def;
			$def = $this->runBlockGamut($this->outdent($def . "\n\n"));
			$def = "\n". $def ."\n";
		}
		else {
			$def = rtrim($def);
			$def = $this->runSpanGamut($this->outdent($def));
		}

		return "\n<dd>" . $def . "</dd>\n";
	}


	function doFencedCodeBlocks($text) {
	#
	# Adding the fenced code block syntax to regular Markdown:
	#
	# ~~~
	# Code block
	# ~~~
	#
		$less_than_tab = $this->tab_width;

		$text = preg_replace_callback('{
				(?:\n|\A)
				# 1: Opening marker
				(
					(?:~{3,}|`{3,}) # 3 or more tildes/backticks.
				)
				[ ]*
				(?:
					\.?([-_:a-zA-Z0-9]+) # 2: standalone class name
				|
					'.$this->id_class_attr_catch_re.' # 3: Extra attributes
				)?
				[ ]* \n # Whitespace and newline following marker.

				# 4: Content
				(
					(?>
						(?!\1 [ ]* \n)	# Not a closing marker.
						.*\n+
					)+
				)

				# Closing marker.
				\1 [ ]* (?= \n )
			}xm',
			array(&$this, '_doFencedCodeBlocks_callback'), $text);

		return $text;
	}
	function _doFencedCodeBlocks_callback($matches) {
		$classname =& $matches[2];
		$attrs     =& $matches[3];
		$codeblock = $matches[4];
		$codeblock = htmlspecialchars($codeblock, ENT_NOQUOTES);
		$codeblock = preg_replace_callback('/^\n+/',
			array(&$this, '_doFencedCodeBlocks_newlines'), $codeblock);

		if ($classname != "") {
			if ($classname[0] == '.')
				$classname = substr($classname, 1);
			$attr_str = ' class="'.$this->code_class_prefix.$classname.'"';
		} else {
			$attr_str = $this->doExtraAttributes($this->code_attr_on_pre ? "pre" : "code", $attrs);
		}
		$pre_attr_str  = $this->code_attr_on_pre ? $attr_str : '';
		$code_attr_str = $this->code_attr_on_pre ? '' : $attr_str;
		$codeblock  = "<pre$pre_attr_str><code$code_attr_str>$codeblock</code></pre>";

		return "\n\n".$this->hashBlock($codeblock)."\n\n";
	}
	function _doFencedCodeBlocks_newlines($matches) {
		return str_repeat("<br$this->empty_element_suffix",
			strlen($matches[0]));
	}


	#
	# Redefining emphasis markers so that emphasis by underscore does not
	# work in the middle of a word.
	#
	public $em_relist = array(
		''  => '(?:(?<!\*)\*(?!\*)|(?<![a-zA-Z0-9_])_(?!_))(?=\S|$)(?![\.,:;]\s)',
		'*' => '(?<=\S|^)(?<!\*)\*(?!\*)',
		'_' => '(?<=\S|^)(?<!_)_(?![a-zA-Z0-9_])',
		);
	public $strong_relist = array(
		''   => '(?:(?<!\*)\*\*(?!\*)|(?<![a-zA-Z0-9_])__(?!_))(?=\S|$)(?![\.,:;]\s)',
		'**' => '(?<=\S|^)(?<!\*)\*\*(?!\*)',
		'__' => '(?<=\S|^)(?<!_)__(?![a-zA-Z0-9_])',
		);
	public $em_strong_relist = array(
		''    => '(?:(?<!\*)\*\*\*(?!\*)|(?<![a-zA-Z0-9_])___(?!_))(?=\S|$)(?![\.,:;]\s)',
		'***' => '(?<=\S|^)(?<!\*)\*\*\*(?!\*)',
		'___' => '(?<=\S|^)(?<!_)___(?![a-zA-Z0-9_])',
		);


	function formParagraphs($text) {
	#
	#	Params:
	#		$text - string to process with html <p> tags
	#
		# Strip leading and trailing lines:
		$text = preg_replace('/\A\n+|\n+\z/', '', $text);

		$grafs = preg_split('/\n{2,}/', $text, -1, PREG_SPLIT_NO_EMPTY);

		#
		# Wrap <p> tags and unhashify HTML blocks
		#
		foreach ($grafs as $key => $value) {
			$value = trim($this->runSpanGamut($value));

			# Check if this should be enclosed in a paragraph.
			# Clean tag hashes & block tag hashes are left alone.
			$is_p = !preg_match('/^B\x1A[0-9]+B|^C\x1A[0-9]+C$/', $value);

			if ($is_p) {
				$value = "<p>$value</p>";
			}
			$grafs[$key] = $value;
		}

		# Join grafs in one text, then unhash HTML tags.
		$text = implode("\n\n", $grafs);

		# Finish by removing any tag hashes still present in $text.
		$text = $this->unhash($text);

		return $text;
	}


	### Footnotes

	function stripFootnotes($text) {
	#
	# Strips link definitions from text, stores the URLs and titles in
	# hash references.
	#
		$less_than_tab = $this->tab_width - 1;

		# Link defs are in the form: [^id]: url "optional title"
		$text = preg_replace_callback('{
			^[ ]{0,'.$less_than_tab.'}\[\^(.+?)\][ ]?:	# note_id = $1
			  [ ]*
			  \n?					# maybe *one* newline
			(						# text = $2 (no blank lines allowed)
				(?:
					.+				# actual text
				|
					\n				# newlines but
					(?!\[\^.+?\]:\s)# negative lookahead for footnote marker.
					(?!\n+[ ]{0,3}\S)# ensure line is not blank and followed
									# by non-indented content
				)*
			)
			}xm',
			array(&$this, '_stripFootnotes_callback'),
			$text);
		return $text;
	}
	function _stripFootnotes_callback($matches) {
		$note_id = $this->fn_id_prefix . $matches[1];
		$this->footnotes[$note_id] = $this->outdent($matches[2]);
		return ''; # String that will replace the block
	}


	function doFootnotes($text) {
	#
	# Replace footnote references in $text [^id] with a special text-token
	# which will be replaced by the actual footnote marker in appendFootnotes.
	#
		if (!$this->in_anchor) {
			$text = preg_replace('{\[\^(.+?)\]}', "F\x1Afn:\\1\x1A:", $text);
		}
		return $text;
	}


	function appendFootnotes($text) {
	#
	# Append footnote list to text.
	#
		$text = preg_replace_callback('{F\x1Afn:(.*?)\x1A:}',
			array(&$this, '_appendFootnotes_callback'), $text);

		if (!empty($this->footnotes_ordered)) {
			$text .= "\n\n";
			$text .= "<div class=\"footnotes\">\n";
			$text .= "<hr". $this->empty_element_suffix ."\n";
			$text .= "<ol>\n\n";

			$attr = "";
			if ($this->fn_backlink_class != "") {
				$class = $this->fn_backlink_class;
				$class = $this->encodeAttribute($class);
				$attr .= " class=\"$class\"";
			}
			if ($this->fn_backlink_title != "") {
				$title = $this->fn_backlink_title;
				$title = $this->encodeAttribute($title);
				$attr .= " title=\"$title\"";
			}
			$num = 0;

			while (!empty($this->footnotes_ordered)) {
				$footnote = reset($this->footnotes_ordered);
				$note_id = key($this->footnotes_ordered);
				unset($this->footnotes_ordered[$note_id]);
				$ref_count = $this->footnotes_ref_count[$note_id];
				unset($this->footnotes_ref_count[$note_id]);
				unset($this->footnotes[$note_id]);

				$footnote .= "\n"; # Need to append newline before parsing.
				$footnote = $this->runBlockGamut("$footnote\n");
				$footnote = preg_replace_callback('{F\x1Afn:(.*?)\x1A:}',
					array(&$this, '_appendFootnotes_callback'), $footnote);

				$attr = str_replace("%%", ++$num, $attr);
				$note_id = $this->encodeAttribute($note_id);

				# Prepare backlink, multiple backlinks if multiple references
				$backlink = "<a href=\"#fnref:$note_id\"$attr>&#8617;</a>";
				for ($ref_num = 2; $ref_num <= $ref_count; ++$ref_num) {
					$backlink .= " <a href=\"#fnref$ref_num:$note_id\"$attr>&#8617;</a>";
				}
				# Add backlink to last paragraph; create new paragraph if needed.
				if (preg_match('{</p>$}', $footnote)) {
					$footnote = substr($footnote, 0, -4) . "&#160;$backlink</p>";
				} else {
					$footnote .= "\n\n<p>$backlink</p>";
				}

				$text .= "<li id=\"fn:$note_id\">\n";
				$text .= $footnote . "\n";
				$text .= "</li>\n\n";
			}

			$text .= "</ol>\n";
			$text .= "</div>";
		}
		return $text;
	}
	function _appendFootnotes_callback($matches) {
		$node_id = $this->fn_id_prefix . $matches[1];

		# Create footnote marker only if it has a corresponding footnote *and*
		# the footnote hasn't been used by another marker.
		if (isset($this->footnotes[$node_id])) {
			$num =& $this->footnotes_numbers[$node_id];
			if (!isset($num)) {
				# Transfer footnote content to the ordered list and give it its
				# number
				$this->footnotes_ordered[$node_id] = $this->footnotes[$node_id];
				$this->footnotes_ref_count[$node_id] = 1;
				$num = $this->footnote_counter++;
				$ref_count_mark = '';
			} else {
				$ref_count_mark = $this->footnotes_ref_count[$node_id] += 1;
			}

			$attr = "";
			if ($this->fn_link_class != "") {
				$class = $this->fn_link_class;
				$class = $this->encodeAttribute($class);
				$attr .= " class=\"$class\"";
			}
			if ($this->fn_link_title != "") {
				$title = $this->fn_link_title;
				$title = $this->encodeAttribute($title);
				$attr .= " title=\"$title\"";
			}

			$attr = str_replace("%%", $num, $attr);
			$node_id = $this->encodeAttribute($node_id);

			return
				"<sup id=\"fnref$ref_count_mark:$node_id\">".
				"<a href=\"#fn:$node_id\"$attr>$num</a>".
				"</sup>";
		}

		return "[^".$matches[1]."]";
	}


	### Abbreviations ###

	function stripAbbreviations($text) {
	#
	# Strips abbreviations from text, stores titles in hash references.
	#
		$less_than_tab = $this->tab_width - 1;

		# Link defs are in the form: [id]*: url "optional title"
		$text = preg_replace_callback('{
			^[ ]{0,'.$less_than_tab.'}\*\[(.+?)\][ ]?:	# abbr_id = $1
			(.*)					# text = $2 (no blank lines allowed)
			}xm',
			array(&$this, '_stripAbbreviations_callback'),
			$text);
		return $text;
	}
	function _stripAbbreviations_callback($matches) {
		$abbr_word = $matches[1];
		$abbr_desc = $matches[2];
		if ($this->abbr_word_re)
			$this->abbr_word_re .= '|';
		$this->abbr_word_re .= preg_quote($abbr_word);
		$this->abbr_desciptions[$abbr_word] = trim($abbr_desc);
		return ''; # String that will replace the block
	}


	function doAbbreviations($text) {
	#
	# Find defined abbreviations in text and wrap them in <abbr> elements.
	#
		if ($this->abbr_word_re) {
			// cannot use the /x modifier because abbr_word_re may
			// contain significant spaces:
			$text = preg_replace_callback('{'.
				'(?<![\w\x1A])'.
				'(?:'.$this->abbr_word_re.')'.
				'(?![\w\x1A])'.
				'}',
				array(&$this, '_doAbbreviations_callback'), $text);
		}
		return $text;
	}
	function _doAbbreviations_callback($matches) {
		$abbr = $matches[0];
		if (isset($this->abbr_desciptions[$abbr])) {
			$desc = $this->abbr_desciptions[$abbr];
			if (empty($desc)) {
				return $this->hashPart("<abbr>$abbr</abbr>");
			} else {
				$desc = $this->encodeAttribute($desc);
				return $this->hashPart("<abbr title=\"$desc\">$abbr</abbr>");
			}
		} else {
			return $matches[0];
		}
	}

}


/*

PHP Markdown Extra
==================

Description
-----------

This is a PHP port of the original Markdown formatter written in Perl
by John Gruber. This special "Extra" version of PHP Markdown features
further enhancements to the syntax for making additional constructs
such as tables and definition list.

Markdown is a text-to-HTML filter; it translates an easy-to-read /
easy-to-write structured text format into HTML. Markdown's text format
is mostly similar to that of plain text email, and supports features such
as headers, *emphasis*, code blocks, blockquotes, and links.

Markdown's syntax is designed not as a generic markup language, but
specifically to serve as a front-end to (X)HTML. You can use span-level
HTML tags anywhere in a Markdown document, and you can use block level
HTML tags (like <div> and <table> as well).

For more information about Markdown's syntax, see:

<http://daringfireball.net/projects/markdown/>


Bugs
----

To file bug reports please send email to:

<michel.fortin@michelf.ca>

Please include with your report: (1) the example input; (2) the output you
expected; (3) the output Markdown actually produced.


Version History
---------------

See the readme file for detailed release notes for this version.


Copyright and License
---------------------

PHP Markdown & Extra
Copyright (c) 2004-2013 Michel Fortin
<http://michelf.ca/>
All rights reserved.

Based on Markdown
Copyright (c) 2003-2006 John Gruber
<http://daringfireball.net/>
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

*	Redistributions of source code must retain the above copyright notice,
	this list of conditions and the following disclaimer.

*	Redistributions in binary form must reproduce the above copyright
	notice, this list of conditions and the following disclaimer in the
	documentation and/or other materials provided with the distribution.

*	Neither the name "Markdown" nor the names of its contributors may
	be used to endorse or promote products derived from this software
	without specific prior written permission.

This software is provided by the copyright holders and contributors "as
is" and any express or implied warranties, including, but not limited
to, the implied warranties of merchantability and fitness for a
particular purpose are disclaimed. In no event shall the copyright owner
or contributors be liable for any direct, indirect, incidental, special,
exemplary, or consequential damages (including, but not limited to,
procurement of substitute goods or services; loss of use, data, or
profits; or business interruption) however caused and on any theory of
liability, whether in contract, strict liability, or tort (including
negligence or otherwise) arising in any way out of the use of this
software, even if advised of the possibility of such damage.

*/
?>
gfm.php                                                                                                                                                                                                                                                        13941         1711191376  plugins/jetpack/_inc/lib/markdown                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <?php
/**
 * GitHub-Flavoured Markdown. Inspired by Evan's plugin, but modified.
 *
 * @author Evan Solomon
 * @author Matt Wiebe <wiebe@automattic.com>
 * @author Brandon Kraft <kraft@automattic.com> -- Strikedown support converted from GPL code at https://github.com/annaesvensson/yellow-markdown/blob/main/markdown.php
 * @link https://github.com/evansolomon/wp-github-flavored-markdown-comments
 *
 * Add a few extras from GitHub's Markdown implementation. Must be used in a WordPress environment.
 */

class WPCom_GHF_Markdown_Parser extends MarkdownExtra_Parser {

	/**
	 * Hooray somewhat arbitrary numbers that are fearful of 1.0.x.
	 */
	const WPCOM_GHF_MARDOWN_VERSION = '0.9.1';

	/**
	 * Use a [code] shortcode when encountering a fenced code block
	 * @var boolean
	 */
	public $use_code_shortcode = true;

	/**
	 * Preserve shortcodes, untouched by Markdown.
	 * This requires use within a WordPress installation.
	 * @var boolean
	 */
	public $preserve_shortcodes = true;

	/**
	 * Preserve the legacy $latex your-latex-code-here$ style
	 * LaTeX markup
	 */
	public $preserve_latex = true;

	/**
	 * Preserve single-line <code> blocks.
	 * @var boolean
	 */
	public $preserve_inline_code_blocks = true;

	/**
	 * Strip paragraphs from the output. This is the right default for WordPress,
	 * which generally wants to create its own paragraphs with `wpautop`
	 * @var boolean
	 */
	public $strip_paras = true;

	// Will run through sprintf - you can supply your own syntax if you want
	public $shortcode_start = '[code lang=%s]';
	public $shortcode_end   = '[/code]';

	// Stores shortcodes we remove and then replace
	protected $preserve_text_hash = array();

	/**
	 * Set environment defaults based on presence of key functions/classes.
	 */
	public function __construct() {
		$this->use_code_shortcode  = class_exists( 'SyntaxHighlighter' );
		/**
		 * Allow processing shortcode contents.
		 *
		 * @module markdown
		 *
		 * @since 4.4.0
		 *
		 * @param boolean $preserve_shortcodes Defaults to $this->preserve_shortcodes.
		 */
		$this->preserve_shortcodes = apply_filters( 'jetpack_markdown_preserve_shortcodes', $this->preserve_shortcodes ) && function_exists( 'get_shortcode_regex' );
		$this->preserve_latex      = function_exists( 'latex_markup' );
		$this->strip_paras         = function_exists( 'wpautop' );

		$this->span_gamut['do_strikethrough'] = 55;

		parent::__construct();
	}

	/**
	 * Overload to specify heading styles only if the hash has space(s) after it. This is actually in keeping with
	 * the documentation and eases the semantic overload of the hash character.
	 * #Will Not Produce a Heading 1
	 * # This Will Produce a Heading 1
	 *
	 * @param  string $text Markdown text
	 * @return string       HTML-transformed text
	 */
	public function transform( $text ) {
		// Preserve anything inside a single-line <code> element
		if ( $this->preserve_inline_code_blocks ) {
			$text = $this->single_line_code_preserve( $text );
		}
		// Remove all shortcodes so their interiors are left intact
		if ( $this->preserve_shortcodes ) {
			$text = $this->shortcode_preserve( $text );
		}
		// Remove legacy LaTeX so it's left intact
		if ( $this->preserve_latex ) {
			$text = $this->latex_preserve( $text );
		}

		// Do not process characters inside URLs.
		$text = $this->urls_preserve( $text );

		// escape line-beginning # chars that do not have a space after them.
		$text = preg_replace_callback( '|^#{1,6}( )?|um', array( $this, '_doEscapeForHashWithoutSpacing' ), $text );

		/**
		 * Allow third-party plugins to define custom patterns that won't be processed by Markdown.
		 *
		 * @module markdown
		 *
		 * @since 3.9.2
		 *
		 * @param array $custom_patterns Array of custom patterns to be ignored by Markdown.
		 */
		$custom_patterns = apply_filters( 'jetpack_markdown_preserve_pattern', array() );
		if ( is_array( $custom_patterns ) && ! empty( $custom_patterns ) ) {
			foreach ( $custom_patterns as $pattern ) {
				$text = preg_replace_callback( $pattern, array( $this, '_doRemoveText'), $text );
			}
		}

		// run through core Markdown
		$text = parent::transform( $text );

		// Occasionally Markdown Extra chokes on a para structure, producing odd paragraphs.
		$text = str_replace( "<p>&lt;</p>\n\n<p>p>", '<p>', $text );

		// put start-of-line # chars back in place
		$text = $this->restore_leading_hash( $text );

		// Strip paras if set
		if ( $this->strip_paras ) {
			$text = $this->unp( $text );
		}

		// Restore preserved things like shortcodes/LaTeX
		$text = $this->do_restore( $text );

		return $text;
	}

	/**
	 * Prevents blocks like <code>__this__</code> from turning into <code><strong>this</strong></code>
	 * @param  string $text Text that may need preserving
	 * @return string       Text that was preserved if needed
	 */
	public function single_line_code_preserve( $text ) {
		return preg_replace_callback( '|<code\b[^>]*>(.*?)</code>|', array( $this, 'do_single_line_code_preserve' ), $text );
	}

	/**
	 * Regex callback for inline code presevation
	 * @param  array $matches Regex matches
	 * @return string         Hashed content for later restoration
	 */
	public function do_single_line_code_preserve( $matches ) {
		return '<code>' . $this->hash_block( $matches[1] ) . '</code>';
	}

	/**
	 * Preserve code block contents by HTML encoding them. Useful before getting to KSES stripping.
	 * @param  string $text Markdown/HTML content
	 * @return string       Markdown/HTML content with escaped code blocks
	 */
	public function codeblock_preserve( $text ) {
		return preg_replace_callback( "/^([`~]{3})([^`\n]+)?\n([^`~]+)(\\1)/m", array( $this, 'do_codeblock_preserve' ), $text );
	}

	/**
	 * Regex callback for code block preservation.
	 * @param  array $matches Regex matches
	 * @return string         Codeblock with escaped interior
	 */
	public function do_codeblock_preserve( $matches ) {
		$block = stripslashes( $matches[3] );
		$block = esc_html( $block );
		$block = str_replace( '\\', '\\\\', $block );
		$open = $matches[1] . $matches[2] . "\n";
		return $open . $block . $matches[4];
	}

	/**
	 * Restore previously preserved (i.e. escaped) code block contents.
	 * @param  string $text Markdown/HTML content with escaped code blocks
	 * @return string       Markdown/HTML content
	 */
	public function codeblock_restore( $text ) {
		return preg_replace_callback( "/^([`~]{3})([^`\n]+)?\n([^`~]+)(\\1)/m", array( $this, 'do_codeblock_restore' ), $text );
	}

	/**
	 * Regex callback for code block restoration (unescaping).
	 * @param  array $matches Regex matches
	 * @return string         Codeblock with unescaped interior
	 */
	public function do_codeblock_restore( $matches ) {
		$block = html_entity_decode( $matches[3], ENT_QUOTES );
		$open = $matches[1] . $matches[2] . "\n";
		return $open . $block . $matches[4];
	}

	/**
	 * Called to preserve legacy LaTeX like $latex some-latex-text $
	 * @param  string $text Text in which to preserve LaTeX
	 * @return string       Text with LaTeX replaced by a hash that will be restored later
	 */
	protected function latex_preserve( $text ) {
		// regex from latex_remove()
		$regex = '%
			\$latex(?:=\s*|\s+)
			((?:
				[^$]+ # Not a dollar
			|
				(?<=(?<!\\\\)\\\\)\$ # Dollar preceded by exactly one slash
			)+)
			(?<!\\\\)\$ # Dollar preceded by zero slashes
		%ix';
		$text = preg_replace_callback( $regex, array( $this, '_doRemoveText'), $text );
		return $text;
	}

	/**
	 * Called to preserve WP shortcodes from being formatted by Markdown in any way.
	 * @param  string $text Text in which to preserve shortcodes
	 * @return string       Text with shortcodes replaced by a hash that will be restored later
	 */
	protected function shortcode_preserve( $text ) {
		$text = preg_replace_callback( $this->get_shortcode_regex(), array( $this, '_doRemoveText' ), $text );
		return $text;
	}

	/**
	 * Avoid characters inside URLs from being formatted by Markdown in any way.
	 *
	 * @param  string $text Text in which to preserve URLs.
	 *
	 * @return string Text with URLs replaced by a hash that will be restored later.
	 */
	protected function urls_preserve( $text ) {
		$text = preg_replace_callback(
			'#(?<!<)(?:https?|ftp)://([^\s<>"\'\[\]()]+|\[(?1)*+\]|\((?1)*+\))+(?<![_*.?])#i',
			array( $this, '_doRemoveText' ),
			$text
		);
		return $text;
	}

	/**
	 * Restores any text preserved by $this->hash_block()
	 * @param  string $text Text that may have hashed preservation placeholders
	 * @return string       Text with hashed preseravtion placeholders replaced by original text
	 */
	protected function do_restore( $text ) {
		// Reverse hashes to ensure nested blocks are restored.
		$hashes = array_reverse( $this->preserve_text_hash, true );
		foreach( $hashes as $hash => $value ) {
			$placeholder = $this->hash_maker( $hash );
			$text = str_replace( $placeholder, $value, $text );
		}
		// reset the hash
		$this->preserve_text_hash = array();
		return $text;
	}

	/**
	 * Regex callback for text preservation
	 * @param  array $m  Regex $matches array
	 * @return string    A placeholder that will later be replaced by the original text
	 */
	protected function _doRemoveText( $m ) {
		return $this->hash_block( $m[0] );
	}

	/**
	 * Call this to store a text block for later restoration.
	 * @param  string $text Text to preserve for later
	 * @return string       Placeholder that will be swapped out later for the original text
	 */
	protected function hash_block( $text ) {
		$hash = md5( $text );
		$this->preserve_text_hash[ $hash ] = $text;
		$placeholder = $this->hash_maker( $hash );
		return $placeholder;
	}

	/**
	 * Less glamorous than the Keymaker
	 * @param  string $hash An md5 hash
	 * @return string       A placeholder hash
	 */
	protected function hash_maker( $hash ) {
		return 'MARKDOWN_HASH' . $hash . 'MARKDOWN_HASH';
	}

	/**
	 * Remove bare <p> elements. <p>s with attributes will be preserved.
	 * @param  string $text HTML content
	 * @return string       <p>-less content
	 */
	public function unp( $text ) {
		return preg_replace( "#<p>(.*?)</p>(\n|$)#ums", '$1$2', $text );
	}

	/**
	 * A regex of all shortcodes currently registered by the current
	 * WordPress installation
	 * @uses   get_shortcode_regex()
	 * @return string A regex for grabbing shortcodes.
	 */
	protected function get_shortcode_regex() {
		$pattern = get_shortcode_regex();

		// don't match markdown link anchors that could be mistaken for shortcodes.
		$pattern .= '(?!\()';

		return "/$pattern/s";
	}

	/**
	 * Since we escape unspaced #Headings, put things back later.
	 * @param  string $text text with a leading escaped hash
	 * @return string       text with leading hashes unescaped
	 */
	protected function restore_leading_hash( $text ) {
		return preg_replace( "/^(<p>)?(&#35;|\\\\#)/um", "$1#", $text );
	}

	/**
	 * Overload to support ```-fenced code blocks for pre-Markdown Extra 1.2.8
	 * https://help.github.com/articles/github-flavored-markdown#fenced-code-blocks
	 */
	public function doFencedCodeBlocks( $text ) {
		// If we're at least at 1.2.8, native fenced code blocks are in.
		// Below is just copied from it in case we somehow got loaded on
		// top of someone else's Markdown Extra
		if ( version_compare( MARKDOWNEXTRA_VERSION, '1.2.8', '>=' ) )
			return parent::doFencedCodeBlocks( $text );

		#
		# Adding the fenced code block syntax to regular Markdown:
		#
		# ~~~
		# Code block
		# ~~~
		#
		$less_than_tab = $this->tab_width;

		$text = preg_replace_callback('{
				(?:\n|\A)
				# 1: Opening marker
				(
					(?:~{3,}|`{3,}) # 3 or more tildes/backticks.
				)
				[ ]*
				(?:
					\.?([-_:a-zA-Z0-9]+) # 2: standalone class name
				|
					'.$this->id_class_attr_catch_re.' # 3: Extra attributes
				)?
				[ ]* \n # Whitespace and newline following marker.

				# 4: Content
				(
					(?>
						(?!\1 [ ]* \n)	# Not a closing marker.
						.*\n+
					)+
				)

				# Closing marker.
				\1 [ ]* (?= \n )
			}xm',
			array($this, '_doFencedCodeBlocks_callback'), $text);

		return $text;
	}

	/**
	 * Callback for pre-processing start of line hashes to slyly escape headings that don't
	 * have a leading space
	 * @param  array $m  preg_match matches
	 * @return string    possibly escaped start of line hash
	 */
	public function _doEscapeForHashWithoutSpacing( $m ) {
		if ( ! isset( $m[1] ) )
			$m[0] = '\\' . $m[0];
		return $m[0];
	}

	/**
	 * Overload to support Viper's [code] shortcode. Because awesome.
	 */
	public function _doFencedCodeBlocks_callback( $matches ) {
		// in case we have some escaped leading hashes right at the start of the block
		$matches[4] = $this->restore_leading_hash( $matches[4] );
		// just MarkdownExtra_Parser if we're not going ultra-deluxe
		if ( ! $this->use_code_shortcode ) {
			return parent::_doFencedCodeBlocks_callback( $matches );
		}

		// default to a "text" class if one wasn't passed. Helps with encoding issues later.
		if ( empty( $matches[2] ) ) {
			$matches[2] = 'text';
		}

		$classname =& $matches[2];
		$codeblock = preg_replace_callback('/^\n+/', array( $this, '_doFencedCodeBlocks_newlines' ), $matches[4] );

		if ( $classname[0] == '.' )
			$classname = substr( $classname, 1 );

		$codeblock = esc_html( $codeblock );
		$codeblock = sprintf( $this->shortcode_start, $classname ) . "\n{$codeblock}" . $this->shortcode_end;
		return "\n\n" . $this->hashBlock( $codeblock ). "\n\n";
	}

	/**
	 * Add strikethrough support.
	 *
	 * GPL code modified from https://github.com/annaesvensson/yellow-markdown/blob/main/markdown.php
	 */
	public function do_strikethrough($text) {
		$parts = preg_split("/(?<![~])(~~)(?![~])/", $text, -1, PREG_SPLIT_DELIM_CAPTURE);
		if (count($parts)>3) {
			$text = "";
			$open = false;
			foreach ($parts as $part) {
				if ($part=="~~") {
					$text .= $open ? "</del>" : "<del>";
					$open = !$open;
				} else {
					$text .= $part;
				}
			}
			if ($open) $text .= "</del>";
		}
		return $text;
	}

}
README.md                                                                                                                                                                                                                                                      1129          1711191376  plugins/jetpack/_inc/lib/markdown                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               # Markdown parsing library

Contains two libraries:

* `/extra`
	- Gives you `MardownExtra_Parser` and `Markdown_Parser`
	- Docs at http://michelf.ca/projects/php-markdown/extra/

* `/gfm` -- Github Flavored Markdown
	- Gives you `WPCom_GHF_Markdown_Parser`
	- It has the same interface as `MarkdownExtra_Parser`
	- Adds support for fenced code blocks: https://help.github.com/articles/creating-and-highlighting-code-blocks/#fenced-code-blocks
	- By default it replaces them with a code shortcode
	- You can change this using the `$use_code_shortcode` member variable
	- You can change the code shortcode wrapping with `$shortcode_start` and `$shortcode_end` member variables
	- The `$preserve_shortcodes` member variable will preserve all registered shortcodes untouched. Requires WordPress to be loaded for `get_shortcode_regex()`
	- The `$preserve_latex` member variable will preserve oldskool $latex yer-latex$ codes untouched.
	- The `$strip_paras` member variable will strip <p> tags because that's what WordPress likes.
	- See `WPCom_GHF_Markdown_Parser::__construct()` for how the above member variable defaults are set.
markdown.php                                                                                                                                                                                                                                                   344           1711191376  plugins/jetpack/_inc/lib                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <?php
/**
 * Loader for the Markdown library.
 *
 * This file loads in a couple specific things from the markdown dir.
 *
 * @package automattic/jetpack
 */

if ( ! class_exists( 'MarkdownExtra_Parser' ) ) {
	require_once JETPACK__PLUGIN_DIR . '/_inc/lib/markdown/extra.php';
}

require_once JETPACK__PLUGIN_DIR . '/_inc/lib/markdown/gfm.php';
plans.php                                                                                                                                                                                                                                                      1935          1711191376  plugins/jetpack/_inc/lib                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <?php //phpcs:ignore WordPress.Files.FileName.InvalidClassFileName
/**
 * Plans Library
 *
 * Fetch plans data from WordPress.com.
 *
 * Not to be confused with the `Jetpack_Plan` (singular)
 * class, which stores and syncs data about the site's _current_ plan.
 *
 * @package automattic/jetpack
 */
class Jetpack_Plans {
	/**
	 * Get a list of all available plans from WordPress.com
	 *
	 * @since 7.7.0
	 *
	 * @return array The plans list
	 */
	public static function get_plans() {
		if ( defined( 'IS_WPCOM' ) && IS_WPCOM ) {
			if ( ! class_exists( 'Store_Product_List' ) ) {
				require WP_CONTENT_DIR . '/admin-plugins/wpcom-billing/store-product-list.php';
			}

			return Store_Product_List::api_only_get_active_plans_v1_4();
		}

		// We're on Jetpack, so it's safe to use this namespace.
		$request = Automattic\Jetpack\Connection\Client::wpcom_json_api_request_as_user(
			'/plans?_locale=' . get_user_locale(),
			// We're using version 1.5 of the endpoint rather than the default version 2
			// since the latter only returns Jetpack Plans, but we're also interested in
			// WordPress.com plans, for consumers of this method that run on WP.com.
			'1.5',
			array(
				'method'  => 'GET',
				'headers' => array(
					'X-Forwarded-For' => ( new Automattic\Jetpack\Status\Visitor() )->get_ip( true ),
				),
			),
			null,
			'rest'
		);

		$body = wp_remote_retrieve_body( $request );
		if ( 200 === wp_remote_retrieve_response_code( $request ) ) {
			return json_decode( $body );
		} else {
			return $body;
		}
	}

	/**
	 * Get plan information for a plan given its slug
	 *
	 * @since 7.7.0
	 *
	 * @param string $plan_slug Plan slug.
	 *
	 * @return object The plan object
	 */
	public static function get_plan( $plan_slug ) {
		$plans = self::get_plans();
		if ( ! is_array( $plans ) ) {
			return;
		}

		foreach ( $plans as $plan ) {
			if ( $plan_slug === $plan->product_slug ) {
				return $plan;
			}
		}
	}
}
plugins.php                                                                                                                                                                                                                                                    209           1711191376  plugins/jetpack/_inc/lib                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <?php
/**
 * This file has been moved to the jetpack-plugins-installer package
 *
 * @deprecated 10.7
 *
 * @package jetpack
 */

class_alias( Automattic\Jetpack\Plugins_Installer::class, 'Jetpack_Plugins' );
tonesque.php                                                                                                                                                                                                                                                   6598          1711191376  plugins/jetpack/_inc/lib                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <?php // phpcs:ignore WordPress.Files.FileName.InvalidClassFileName
/**
 * Tonesque
 * Grab an average color representation from an image.
 *
 * @author Automattic
 * @author Matias Ventura
 * @package automattic/jetpack
 */

/**
 * Color representation class.
 */
class Tonesque {
	/**
	 * Image URL.
	 *
	 * @var string
	 */
	private $image_url = '';
	/**
	 * Image identifier representing the image.
	 *
	 * @var null|object
	 */
	private $image_obj = null;
	/**
	 * Color code.
	 *
	 * @var string
	 */
	private $color = '';

	/**
	 * Constructor.
	 *
	 * @param string $image_url Image URL.
	 */
	public function __construct( $image_url ) {
		if ( ! class_exists( 'Jetpack_Color' ) ) {
			require_once JETPACK__PLUGIN_DIR . '/_inc/lib/class.color.php';
		}

		$this->image_url = esc_url_raw( $image_url );
		$this->image_url = trim( $this->image_url );
		/**
		 * Allows any image URL to be passed in for $this->image_url.
		 *
		 * @module theme-tools
		 *
		 * @since 2.5.0
		 *
		 * @param string $image_url The URL to any image
		 */
		$this->image_url = apply_filters( 'tonesque_image_url', $this->image_url );

		$this->image_obj = self::imagecreatefromurl( $this->image_url );
	}

	/**
	 * Get an image object from a URL.
	 *
	 * @param string $image_url Image URL.
	 *
	 * @return object|bool Image object or false if the image could not be loaded.
	 */
	public static function imagecreatefromurl( $image_url ) {
		$data = null;

		// If it's a URL.
		if ( preg_match( '#^https?://#i', $image_url ) ) {
			// If it's a url pointing to a local media library url.
			$content_url = content_url();
			$_image_url  = set_url_scheme( $image_url );
			if ( str_starts_with( $_image_url, $content_url ) ) {
				$_image_path = str_replace( $content_url, WP_CONTENT_DIR, $_image_url );
				if ( file_exists( $_image_path ) ) {
					$filetype = wp_check_filetype( $_image_path );
					$type     = $filetype['type'];

					if ( str_starts_with( $type, 'image/' ) ) {
						$data = file_get_contents( $_image_path ); // phpcs:ignore WordPress.WP.AlternativeFunctions.file_get_contents_file_get_contents
					}
				}
			}

			if ( empty( $data ) ) {
				$response      = wp_safe_remote_get( $image_url );
				$response_code = wp_remote_retrieve_response_code( $response );
				if (
					is_wp_error( $response )
					|| ! $response_code
					|| $response_code < 200
					|| $response_code >= 300
				) {
					return false;
				}
				$data = wp_remote_retrieve_body( $response );
			}
		}

		// If it's a local path in our WordPress install.
		if ( file_exists( $image_url ) ) {
			$filetype = wp_check_filetype( $image_url );
			$type     = $filetype['type'];

			if ( str_starts_with( $type, 'image/' ) ) {
				$data = file_get_contents( $image_url ); // phpcs:ignore WordPress.WP.AlternativeFunctions.file_get_contents_file_get_contents
			}
		}

		if ( null === $data ) {
			return false;
		}

		// Now turn it into an image and return it.
		return imagecreatefromstring( $data );
	}

	/**
	 * Construct object from image.
	 *
	 * @param string $type Type (hex, rgb, hsv) (optional).
	 *
	 * @return string|bool color as a string formatted as $type or false if the image could not be loaded.
	 */
	public function color( $type = 'hex' ) {
		// Bail if there is no image to work with.
		if ( ! $this->image_obj ) {
			return false;
		}

		// Finds dominant color.
		$color = self::grab_color();
		// Passes value to Color class.
		return self::get_color( $color, $type );
	}

	/**
	 * Grabs the color index for each of five sample points of the image
	 *
	 * @param string $type can be 'index' or 'hex'.
	 *
	 * @return array|false color indices or false if the image could not be loaded.
	 */
	public function grab_points( $type = 'index' ) {
		$img = $this->image_obj;
		if ( ! $img ) {
			return false;
		}

		$height = imagesy( $img );
		$width  = imagesx( $img );

		/*
		 * Sample five points in the image
		 * based on rule of thirds and center.
		 */
		$topy    = round( $height / 3 );
		$bottomy = round( ( $height / 3 ) * 2 );
		$leftx   = round( $width / 3 );
		$rightx  = round( ( $width / 3 ) * 2 );
		$centery = round( $height / 2 );
		$centerx = round( $width / 2 );

		// Cast those colors into an array.
		$points = array(
			imagecolorat( $img, $leftx, $topy ),
			imagecolorat( $img, $rightx, $topy ),
			imagecolorat( $img, $leftx, $bottomy ),
			imagecolorat( $img, $rightx, $bottomy ),
			imagecolorat( $img, $centerx, $centery ),
		);

		if ( 'hex' === $type ) {
			foreach ( $points as $i => $p ) {
				$c            = imagecolorsforindex( $img, $p );
				$points[ $i ] = self::get_color(
					array(
						'r' => $c['red'],
						'g' => $c['green'],
						'b' => $c['blue'],
					),
					'hex'
				);
			}
		}

		return $points;
	}

	/**
	 * Finds the average color of the image based on five sample points
	 *
	 * @return array|bool array with rgb color or false if the image could not be loaded.
	 */
	public function grab_color() {
		$img = $this->image_obj;
		if ( ! $img ) {
			return false;
		}

		$rgb = self::grab_points();

		$r = array();
		$g = array();
		$b = array();

		/*
		 * Process the color points
		 * Find the average representation
		 */
		foreach ( $rgb as $color ) {
			$index = imagecolorsforindex( $img, $color );
			$r[]   = $index['red'];
			$g[]   = $index['green'];
			$b[]   = $index['blue'];
		}
		$red   = round( array_sum( $r ) / 5 );
		$green = round( array_sum( $g ) / 5 );
		$blue  = round( array_sum( $b ) / 5 );

		// The average color of the image as rgb array.
		$color = array(
			'r' => $red,
			'g' => $green,
			'b' => $blue,
		);

		return $color;
	}

	/**
	 * Get a Color object using /lib class.color
	 * Convert to appropriate type
	 *
	 * @param string $color Color code.
	 * @param string $type  Color type (rgb, hex, hsv).
	 *
	 * @return string
	 */
	public function get_color( $color, $type ) {
		$c           = new Jetpack_Color( $color, 'rgb' );
		$this->color = $c;

		switch ( $type ) {
			case 'rgb':
				$color = implode( ',', $c->toRgbInt() );
				break;
			case 'hex':
				$color = $c->toHex();
				break;
			case 'hsv':
				$color = implode( ',', $c->toHsvInt() );
				break;
			default:
				return $c->toHex();
		}

		return $color;
	}

	/**
	 *
	 * Checks contrast against main color
	 * Gives either black or white for using with opacity
	 *
	 * @return string|bool Returns black or white or false if the image could not be loaded.
	 */
	public function contrast() {
		if ( ! $this->color ) {
			return false;
		}

		$c = $this->color->getMaxContrastColor();
		return implode( ',', $c->toRgbInt() );
	}
}
widgets.php                                                                                                                                                                                                                                                    26830         1711191376  plugins/jetpack/_inc/lib                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <?php // phpcs:ignore WordPress.Files.FileName.InvalidClassFileName
/**
 * Widgets and Sidebars Library
 *
 * Helper functions for manipulating widgets on a per-blog basis.
 * Only helpful on `wp_loaded` or later (currently requires widgets to be registered and the theme context to already be loaded).
 *
 * Used by the REST API
 *
 * @package automattic/jetpack
 */

/**
 * Widgets and Sidebars Library
 */
class Jetpack_Widgets {

	/**
	 * Returns the `sidebars_widgets` option with the `array_version` element removed.
	 *
	 * @return array The current value of sidebars_widgets
	 */
	public static function get_sidebars_widgets() {
		$sidebars = get_option( 'sidebars_widgets', array() );
		if ( isset( $sidebars['array_version'] ) ) {
			unset( $sidebars['array_version'] );
		}
		return $sidebars;
	}

	/**
	 * Format widget data for output and for use by other widget functions.
	 *
	 * The output looks like:
	 *
	 * array(
	 *  'id' => 'text-3',
	 *  'sidebar' => 'sidebar-1',
	 *  'position' => '0',
	 *  'settings' => array(
	 *      'title' => 'hello world'
	 *  )
	 * )
	 *
	 * @param string|integer   $position The position of the widget in its sidebar.
	 * @param string           $widget_id The widget's id (eg: 'text-3').
	 * @param string           $sidebar The widget's sidebar id (eg: 'sidebar-1').
	 * @param array (Optional) $settings The settings for the widget.
	 *
	 * @return array A normalized array representing this widget.
	 */
	public static function format_widget( $position, $widget_id, $sidebar, $settings = null ) {
		if ( ! $settings ) {
			$all_settings = get_option( self::get_widget_option_name( $widget_id ) );
			$instance     = self::get_widget_instance_key( $widget_id );
			$settings     = $all_settings[ $instance ];
		}
		$widget = array();

		$widget['id']       = $widget_id;
		$widget['id_base']  = self::get_widget_id_base( $widget_id );
		$widget['settings'] = $settings;
		$widget['sidebar']  = $sidebar;
		$widget['position'] = $position;

		return $widget;
	}

	/**
	 * Return a widget's id_base from its id.
	 *
	 * @param string $widget_id The id of a widget. (eg: 'text-3').
	 *
	 * @return string The id_base of a widget (eg: 'text').
	 */
	public static function get_widget_id_base( $widget_id ) {
		// Grab what's before the hyphen.
		return substr( $widget_id, 0, strrpos( $widget_id, '-' ) );
	}

	/**
	 * Determine a widget's option name (the WP option where the widget's settings
	 * are stored - generally `widget_` + the widget's id_base).
	 *
	 * @param string $widget_id The id of a widget. (eg: 'text-3').
	 *
	 * @return string The option name of the widget's settings. (eg: 'widget_text')
	 */
	public static function get_widget_option_name( $widget_id ) {
		return 'widget_' . self::get_widget_id_base( $widget_id );
	}

	/**
	 * Determine a widget instance key from its ID. (eg: 'text-3' becomes '3').
	 * Used to access the widget's settings.
	 *
	 * @param string $widget_id The id of a widget.
	 *
	 * @return integer The instance key of that widget.
	 */
	public static function get_widget_instance_key( $widget_id ) {
		// Grab all numbers from the end of the id.
		preg_match( '/(\d+)$/', $widget_id, $matches );

		return (int) $matches[0];
	}

	/**
	 * Return a widget by ID (formatted for output) or null if nothing is found.
	 *
	 * @param string $widget_id The id of a widget to look for.
	 *
	 * @return array|null The matching formatted widget (see format_widget).
	 */
	public static function get_widget_by_id( $widget_id ) {
		$found = null;
		foreach ( self::get_all_widgets() as $widget ) {
			if ( $widget['id'] === $widget_id ) {
				$found = $widget;
			}
		}
		return $found;
	}

	/**
	 * Return an array of all widgets (active and inactive) formatted for output.
	 *
	 * @return array An array of all widgets (see format_widget).
	 */
	public static function get_all_widgets() {
		$all_widgets      = array();
		$sidebars_widgets = self::get_all_sidebars();

		foreach ( $sidebars_widgets as $sidebar => $widgets ) {
			if ( ! is_array( $widgets ) ) {
				continue;
			}
			foreach ( $widgets as $key => $widget_id ) {
				array_push( $all_widgets, self::format_widget( $key, $widget_id, $sidebar ) );
			}
		}

		return $all_widgets;
	}

	/**
	 * Return an array of all active widgets formatted for output.
	 *
	 * @return array An array of all active widgets (see format_widget).
	 */
	public static function get_active_widgets() {
		$active_widgets = array();
		$all_widgets    = self::get_all_widgets();
		foreach ( $all_widgets as $widget ) {
			if ( 'wp_inactive_widgets' === $widget['sidebar'] ) {
				continue;
			}
			array_push( $active_widgets, $widget );
		}
		return $active_widgets;
	}

	/**
	 * Return an array of all widget IDs (active and inactive)
	 *
	 * @return array An array of all widget IDs.
	 */
	public static function get_all_widget_ids() {
		$all_widgets      = array();
		$sidebars_widgets = self::get_all_sidebars();
		foreach ( array_values( $sidebars_widgets ) as $widgets ) {
			if ( ! is_array( $widgets ) ) {
				continue;
			}
			foreach ( array_values( $widgets ) as $widget_id ) {
				array_push( $all_widgets, $widget_id );
			}
		}
		return $all_widgets;
	}

	/**
	 * Return an array of widgets with a specific id_base (eg: `text`).
	 *
	 * @param string $id_base The id_base of a widget type.
	 *
	 * @return array All the formatted widgets matching that widget type (see format_widget).
	 */
	public static function get_widgets_with_id_base( $id_base ) {
		$matching_widgets = array();
		foreach ( self::get_all_widgets() as $widget ) {
			if ( self::get_widget_id_base( $widget['id'] ) === $id_base ) {
				array_push( $matching_widgets, $widget );
			}
		}
		return $matching_widgets;
	}

	/**
	 * Return the array of widget IDs in a sidebar or null if that sidebar does
	 * not exist. Will return an empty array for an existing empty sidebar.
	 *
	 * @param string $sidebar The id of a sidebar.
	 *
	 * @return array|null The array of widget IDs in the sidebar.
	 */
	public static function get_widgets_in_sidebar( $sidebar ) {
		$sidebars = self::get_all_sidebars();

		if ( ! $sidebars || ! is_array( $sidebars ) ) {
			return null;
		}
		if ( ! $sidebars[ $sidebar ] && array_key_exists( $sidebar, $sidebars ) ) {
			return array();
		}
		return $sidebars[ $sidebar ];
	}

	/**
	 * Return an associative array of all registered sidebars for this theme,
	 * active and inactive, including the hidden disabled widgets sidebar (keyed
	 * by `wp_inactive_widgets`). Each sidebar is keyed by the ID of the sidebar
	 * and its value is an array of widget IDs for that sidebar.
	 *
	 * @return array An associative array of all sidebars and their widget IDs.
	 */
	public static function get_all_sidebars() {
		$sidebars_widgets = self::get_sidebars_widgets();

		if ( ! is_array( $sidebars_widgets ) ) {
			return array();
		}
		return $sidebars_widgets;
	}

	/**
	 * Return an associative array of all active sidebars for this theme, Each
	 * sidebar is keyed by the ID of the sidebar and its value is an array of
	 * widget IDs for that sidebar.
	 *
	 * @return array An associative array of all active sidebars and their widget IDs.
	 */
	public static function get_active_sidebars() {
		$sidebars = array();
		foreach ( self::get_all_sidebars() as $sidebar => $widgets ) {
			if ( 'wp_inactive_widgets' === $sidebar || ! isset( $widgets ) || ! is_array( $widgets ) ) {
				continue;
			}
			$sidebars[ $sidebar ] = $widgets;
		}
		return $sidebars;
	}

	/**
	 * Activates a widget in a sidebar. Does not validate that the sidebar exists,
	 * so please do that first. Also does not save the widget's settings. Please
	 * do that with `set_widget_settings`.
	 *
	 * If position is not set, it will be set to the next available position.
	 *
	 * @param string         $widget_id The newly-formed id of the widget to be added.
	 * @param string         $sidebar   The id of the sidebar where the widget will be added.
	 * @param string|integer $position  (Optional) The position within the sidebar where the widget will be added.
	 *
	 * @return bool
	 */
	public static function add_widget_to_sidebar( $widget_id, $sidebar, $position ) {
		return self::move_widget_to_sidebar( array( 'id' => $widget_id ), $sidebar, $position );
	}

	/**
	 * Removes a widget from a sidebar. Does not validate that the sidebar exists
	 * or remove any settings from the widget, so please do that separately.
	 *
	 * @param array $widget The widget to be removed.
	 */
	public static function remove_widget_from_sidebar( $widget ) {
		$sidebars_widgets = self::get_sidebars_widgets();
		// Remove the widget from its old location and reflow the positions of the remaining widgets.
		array_splice( $sidebars_widgets[ $widget['sidebar'] ], $widget['position'], 1 );

		update_option( 'sidebars_widgets', $sidebars_widgets );
	}

	/**
	 * Moves a widget to a sidebar. Does not validate that the sidebar exists,
	 * so please do that first. Also does not save the widget's settings. Please
	 * do that with `set_widget_settings`. The first argument should be a
	 * widget as returned by `format_widget` including `id`, `sidebar`, and
	 * `position`.
	 *
	 * If $position is not set, it will be set to the next available position.
	 *
	 * Can be used to add a new widget to a sidebar if
	 * $widget['sidebar'] === NULL
	 *
	 * Can be used to move a widget within a sidebar as well if
	 * $widget['sidebar'] === $sidebar.
	 *
	 * @param array          $widget   The widget to be moved (see format_widget).
	 * @param string         $sidebar  The sidebar where this widget will be moved.
	 * @param string|integer $position (Optional) The position where this widget will be moved in the sidebar.
	 *
	 * @return bool
	 */
	public static function move_widget_to_sidebar( $widget, $sidebar, $position ) {
		$sidebars_widgets = self::get_sidebars_widgets();

		/*
		 * If a position is passed and the sidebar isn't empty,
		 * splice the widget into the sidebar,
		 * update the sidebar option, and return the result.
		 */
		if ( isset( $widget['sidebar'] ) && isset( $widget['position'] ) ) {
			array_splice( $sidebars_widgets[ $widget['sidebar'] ], $widget['position'], 1 );
		}

		// Sometimes an existing empty sidebar is NULL, so initialize it.
		if ( array_key_exists( $sidebar, $sidebars_widgets ) && ! is_array( $sidebars_widgets[ $sidebar ] ) ) {
			$sidebars_widgets[ $sidebar ] = array();
		}

		// If no position is passed, set one from items in sidebar.
		if ( ! isset( $position ) ) {
			$position      = 0;
			$last_position = self::get_last_position_in_sidebar( $sidebar );
			if ( isset( $last_position ) && is_numeric( $last_position ) ) {
				$position = $last_position + 1;
			}
		}

		// Add the widget to the sidebar and reflow the positions of the other widgets.
		if ( empty( $sidebars_widgets[ $sidebar ] ) ) {
			$sidebars_widgets[ $sidebar ][] = $widget['id'];
		} else {
			array_splice( $sidebars_widgets[ $sidebar ], (int) $position, 0, $widget['id'] );
		}

		set_theme_mod(
			'sidebars_widgets',
			array(
				'time' => time(),
				'data' => $sidebars_widgets,
			)
		);
		return update_option( 'sidebars_widgets', $sidebars_widgets );
	}

	/**
	 * Return an integer containing the largest position number in a sidebar or
	 * null if there are no widgets in that sidebar.
	 *
	 * @param string $sidebar The id of a sidebar.
	 *
	 * @return integer|null The last index position of a widget in that sidebar.
	 */
	public static function get_last_position_in_sidebar( $sidebar ) {
		$widgets = self::get_widgets_in_sidebar( $sidebar );
		if ( ! $widgets ) {
			return null;
		}
		$last_position = 0;
		foreach ( $widgets as $widget_id ) {
			$widget = self::get_widget_by_id( $widget_id );
			if ( (int) $widget['position'] > (int) $last_position ) {
				$last_position = (int) $widget['position'];
			}
		}
		return $last_position;
	}

	/**
	 * Saves settings for a widget. Does not add that widget to a sidebar. Please
	 * do that with `move_widget_to_sidebar` first. Will merge the settings of
	 * any existing widget with the same `$widget_id`.
	 *
	 * @param string $widget_id The id of a widget.
	 * @param array  $settings An associative array of settings to merge with any existing settings on this widget.
	 *
	 * @return boolean|WP_Error True if update was successful.
	 */
	public static function set_widget_settings( $widget_id, $settings ) {
		$widget_option_name = self::get_widget_option_name( $widget_id );
		$widget_settings    = get_option( $widget_option_name );
		$instance_key       = self::get_widget_instance_key( $widget_id );
		$old_settings       = $widget_settings[ $instance_key ];
		$settings           = self::sanitize_widget_settings( $widget_id, $settings, $old_settings );

		if ( ! $settings ) {
			return new WP_Error( 'invalid_data', 'Update failed.', 500 );
		}
		if ( is_array( $old_settings ) ) {
			// array_filter prevents empty arguments from replacing existing ones.
			$settings = wp_parse_args( array_filter( $settings ), $old_settings );
		}

		$widget_settings[ $instance_key ] = $settings;

		return update_option( $widget_option_name, $widget_settings );
	}

	/**
	 * Sanitize an associative array for saving.
	 *
	 * @param string $widget_id The id of a widget.
	 * @param array  $settings A widget settings array.
	 * @param array  $old_settings The existing widget settings array.
	 *
	 * @return array|false The settings array sanitized by `WP_Widget::update` or false if sanitization failed.
	 */
	private static function sanitize_widget_settings( $widget_id, $settings, $old_settings ) {
		$widget = self::get_registered_widget_object( self::get_widget_id_base( $widget_id ) );

		if ( ! $widget ) {
			return false;
		}
		$new_settings = $widget->update( $settings, $old_settings );
		if ( ! is_array( $new_settings ) ) {
			return false;
		}
		return $new_settings;
	}

	/**
	 * Deletes settings for a widget. Does not remove that widget to a sidebar. Please
	 * do that with `remove_widget_from_sidebar` first.
	 *
	 * @param array $widget The widget which will have its settings removed (see format_widget).
	 */
	public static function remove_widget_settings( $widget ) {
		$widget_option_name = self::get_widget_option_name( $widget['id'] );
		$widget_settings    = get_option( $widget_option_name );
		unset( $widget_settings[ self::get_widget_instance_key( $widget['id'] ) ] );
		update_option( $widget_option_name, $widget_settings );
	}

	/**
	 * Update a widget's settings, sidebar, and position. Returns the (updated)
	 * formatted widget if successful or a WP_Error if it fails.
	 *
	 * @param string              $widget_id The id of a widget to update.
	 * @param string              $sidebar (Optional) A sidebar to which this widget will be moved.
	 * @param string|integer      $position (Optional) A new position to which this widget will be moved within its new or existing sidebar.
	 * @param array|object|string $settings Settings to merge with the existing settings of the widget (will be passed through `decode_settings`).
	 *
	 * @return array|WP_Error The newly added widget as an associative array with all the above properties.
	 */
	public static function update_widget( $widget_id, $sidebar, $position, $settings ) {
		$settings = self::decode_settings( $settings );
		if ( isset( $settings ) && ! is_array( $settings ) ) {
			return new WP_Error( 'invalid_data', 'Invalid settings', 400 );
		}
		// Default to an empty array if nothing is specified.
		if ( ! is_array( $settings ) ) {
			$settings = array();
		}
		$widget = self::get_widget_by_id( $widget_id );
		if ( ! $widget ) {
			return new WP_Error( 'not_found', 'No widget found.', 400 );
		}
		if ( ! $sidebar ) {
			$sidebar = $widget['sidebar'];
		}
		if ( ! isset( $position ) ) {
			$position = $widget['position'];
		}
		if ( ! is_numeric( $position ) ) {
			return new WP_Error( 'invalid_data', 'Invalid position', 400 );
		}
		$widgets_in_sidebar = self::get_widgets_in_sidebar( $sidebar );
		if ( ! isset( $widgets_in_sidebar ) ) {
			return new WP_Error( 'invalid_data', 'No such sidebar exists', 400 );
		}
		self::move_widget_to_sidebar( $widget, $sidebar, $position );
		$widget_save_status = self::set_widget_settings( $widget_id, $settings );
		if ( is_wp_error( $widget_save_status ) ) {
			return $widget_save_status;
		}
		return self::get_widget_by_id( $widget_id );
	}

	/**
	 * Deletes a widget entirely including all its settings. Returns a WP_Error if
	 * the widget could not be found. Otherwise returns an empty array.
	 *
	 * @param string $widget_id The id of a widget to delete. (eg: 'text-2').
	 *
	 * @return array|WP_Error An empty array if successful.
	 */
	public static function delete_widget( $widget_id ) {
		$widget = self::get_widget_by_id( $widget_id );
		if ( ! $widget ) {
			return new WP_Error( 'not_found', 'No widget found.', 400 );
		}
		self::remove_widget_from_sidebar( $widget );
		self::remove_widget_settings( $widget );
		return array();
	}

	/**
	 * Return an array of settings. The input can be either an object, a JSON
	 * string, or an array.
	 *
	 * @param array|string|object $settings The settings of a widget as passed into the API.
	 *
	 * @return array Decoded associative array of settings.
	 */
	public static function decode_settings( $settings ) {
		// Treat as string in case JSON was passed.
		if ( is_object( $settings ) && property_exists( $settings, 'scalar' ) ) {
			$settings = $settings->scalar;
		}
		if ( is_object( $settings ) ) {
			$settings = (array) $settings;
		}
		// Attempt to decode JSON string.
		if ( is_string( $settings ) ) {
			$settings = (array) json_decode( $settings );
		}
		return $settings;
	}

	/**
	 * Activate a new widget.
	 *
	 * @param string              $id_base The id_base of the new widget (eg: 'text').
	 * @param string              $sidebar The id of the sidebar where this widget will go. Dependent on theme. (eg: 'sidebar-1').
	 * @param string|integer      $position (Optional) The position of the widget in the sidebar. Defaults to the last position.
	 * @param array|object|string $settings (Optional) An associative array of settings for this widget (will be passed through `decode_settings`). Varies by widget.
	 *
	 * @return array|WP_Error The newly added widget as an associative array with all the above properties except 'id_base' replaced with the generated 'id'.
	 */
	public static function activate_widget( $id_base, $sidebar, $position, $settings ) {
		if ( ! isset( $id_base ) || ! self::validate_id_base( $id_base ) ) {
			return new WP_Error( 'invalid_data', 'Invalid ID base', 400 );
		}

		if ( ! isset( $sidebar ) ) {
			return new WP_Error( 'invalid_data', 'No sidebar provided', 400 );
		}

		if ( isset( $position ) && ! is_numeric( $position ) ) {
			return new WP_Error( 'invalid_data', 'Invalid position', 400 );
		}

		$settings = self::decode_settings( $settings );
		if ( isset( $settings ) && ! is_array( $settings ) ) {
			return new WP_Error( 'invalid_data', 'Invalid settings', 400 );
		}

		// Default to an empty array if nothing is specified.
		if ( ! is_array( $settings ) ) {
			$settings = array();
		}

		$widget_counter = 1 + self::get_last_widget_instance_key_with_id_base( $id_base );
		$widget_id      = $id_base . '-' . $widget_counter;
		if ( 0 >= $widget_counter ) {
			return new WP_Error( 'invalid_data', 'Error creating widget ID' . $widget_id, 500 );
		}
		if ( self::get_widget_by_id( $widget_id ) ) {
			return new WP_Error( 'invalid_data', 'Widget ID already exists', 500 );
		}

		self::add_widget_to_sidebar( $widget_id, $sidebar, $position );
		$widget_save_status = self::set_widget_settings( $widget_id, $settings );
		if ( is_wp_error( $widget_save_status ) ) {
			return $widget_save_status;
		}

		// Add a Tracks event for non-Headstart activity.
		if ( ! defined( 'HEADSTART' ) ) {
			$tracking = new Automattic\Jetpack\Tracking();
			$tracking->tracks_record_event(
				wp_get_current_user(),
				'wpcom_widgets_activate_widget',
				array(
					'widget'   => $id_base,
					'settings' => wp_json_encode( $settings ),
				)
			);
		}

		return self::get_widget_by_id( $widget_id );
	}

	/**
	 * Activate an array of new widgets. Like calling `activate_widget` multiple times.
	 *
	 * @param array $widgets An array of widget arrays. Each sub-array must be of the format required by `activate_widget`.
	 *
	 * @return array|WP_Error The newly added widgets in the form returned by `get_all_widgets`.
	 */
	public static function activate_widgets( $widgets ) {
		if ( ! is_array( $widgets ) ) {
			return new WP_Error( 'invalid_data', 'Invalid widgets', 400 );
		}

		$added_widgets = array();

		foreach ( $widgets as $widget ) {
			$added_widgets[] = self::activate_widget( $widget['id_base'], $widget['sidebar'], $widget['position'], $widget['settings'] );
		}

		return $added_widgets;
	}

	/**
	 * Return the last instance key (integer) of an existing widget matching
	 * `$id_base`. So if you pass in `text`, and there is a widget with the id
	 * `text-2`, this function will return `2`.
	 *
	 * @param string $id_base The id_base of a type of widget. (eg: 'rss').
	 *
	 * @return integer The last instance key of that type of widget.
	 */
	public static function get_last_widget_instance_key_with_id_base( $id_base ) {
		$similar_widgets = self::get_widgets_with_id_base( $id_base );

		if ( ! empty( $similar_widgets ) ) {
			// If the last widget with the same name is `text-3`, we want `text-4`.
			usort( $similar_widgets, __CLASS__ . '::sort_widgets' );

			$last_widget = array_pop( $similar_widgets );
			$last_val    = (int) self::get_widget_instance_key( $last_widget['id'] );

			return $last_val;
		}

		return 0;
	}

	/**
	 * Method used to sort widgets
	 *
	 * @since 5.4
	 *
	 * @param array $a A normalized array representing a widget.
	 * @param array $b A normalized array representing a widget.
	 *
	 * @return int
	 */
	public static function sort_widgets( $a, $b ) {
		$a_val = (int) self::get_widget_instance_key( $a['id'] );
		$b_val = (int) self::get_widget_instance_key( $b['id'] );
		return $a_val <=> $b_val;
	}

	/**
	 * Retrieve a given widget object instance by ID base (eg. 'text' or 'archives').
	 *
	 * @param string $id_base The id_base of a type of widget.
	 *
	 * @return WP_Widget|false The found widget object or false if the id_base was not found.
	 */
	public static function get_registered_widget_object( $id_base ) {
		if ( ! $id_base ) {
			return false;
		}

		// Get all of the registered widgets.
		global $wp_widget_factory;
		if ( ! isset( $wp_widget_factory ) ) {
			return false;
		}

		$registered_widgets = $wp_widget_factory->widgets;
		if ( empty( $registered_widgets ) ) {
			return false;
		}

		foreach ( array_values( $registered_widgets ) as $registered_widget_object ) {
			if ( $registered_widget_object->id_base === $id_base ) {
				return $registered_widget_object;
			}
		}
		return false;
	}

	/**
	 * Validate a given widget ID base (eg. 'text' or 'archives').
	 *
	 * @param string $id_base The id_base of a type of widget.
	 *
	 * @return boolean True if the widget is of a known type.
	 */
	public static function validate_id_base( $id_base ) {
		return ( false !== self::get_registered_widget_object( $id_base ) );
	}

	/**
	 * Insert a new widget in a given sidebar.
	 *
	 * @param string $widget_id ID of the widget.
	 * @param array  $widget_options Content of the widget.
	 * @param string $sidebar ID of the sidebar to which the widget will be added.
	 *
	 * @return WP_Error|true True when data has been saved correctly, error otherwise.
	 */
	public static function insert_widget_in_sidebar( $widget_id, $widget_options, $sidebar ) {
		// Retrieve sidebars, widgets and their instances.
		$sidebars_widgets = get_option( 'sidebars_widgets', array() );
		$widget_instances = get_option( 'widget_' . $widget_id, array() );

		// Retrieve the key of the next widget instance.
		$numeric_keys = array_filter( array_keys( $widget_instances ), 'is_int' );
		$next_key     = $numeric_keys ? max( $numeric_keys ) + 1 : 2;

		// Add this widget to the sidebar.
		if ( ! isset( $sidebars_widgets[ $sidebar ] ) ) {
			$sidebars_widgets[ $sidebar ] = array();
		}
		$sidebars_widgets[ $sidebar ][] = $widget_id . '-' . $next_key;

		// Add the new widget instance.
		$widget_instances[ $next_key ] = $widget_options;

		// Store updated sidebars, widgets and their instances.
		if (
			! ( update_option( 'sidebars_widgets', $sidebars_widgets ) )
			|| ( ! ( update_option( 'widget_' . $widget_id, $widget_instances ) ) )
		) {
			return new WP_Error( 'widget_update_failed', 'Failed to update widget or sidebar.', 400 );
		}

		return true;
	}

	/**
	 * Update the content of an existing widget in a given sidebar.
	 *
	 * @param string $widget_id ID of the widget.
	 * @param array  $widget_options New content for the update.
	 * @param string $sidebar ID of the sidebar to which the widget will be added.
	 *
	 * @return WP_Error|true True when data has been updated correctly, error otherwise.
	 */
	public static function update_widget_in_sidebar( $widget_id, $widget_options, $sidebar ) {
		// Retrieve sidebars, widgets and their instances.
		$sidebars_widgets = get_option( 'sidebars_widgets', array() );
		$widget_instances = get_option( 'widget_' . $widget_id, array() );

		// Retrieve index of first widget instance in that sidebar.
		$widget_key = false;
		foreach ( $sidebars_widgets[ $sidebar ] as $widget ) {
			if ( str_contains( $widget, $widget_id ) ) {
				$widget_key = absint( str_replace( $widget_id . '-', '', $widget ) );
				break;
			}
		}

		// There is no widget instance.
		if ( ! $widget_key ) {
			return new WP_Error( 'invalid_data', 'No such widget.', 400 );
		}

		// Update the widget instance and option if the data has changed.
		if ( $widget_instances[ $widget_key ]['title'] !== $widget_options['title']
			|| $widget_instances[ $widget_key ]['address'] !== $widget_options['address']
		) {

			$widget_instances[ $widget_key ] = array_merge( $widget_instances[ $widget_key ], $widget_options );

			// Store updated widget instances and return Error when not successful.
			if ( ! ( update_option( 'widget_' . $widget_id, $widget_instances ) ) ) {
				return new WP_Error( 'widget_update_failed', 'Failed to update widget.', 400 );
			}
		}
		return true;
	}

	/**
	 * Retrieve the first active sidebar.
	 *
	 * @return string|WP_Error First active sidebar, error if none exists.
	 */
	public static function get_first_sidebar() {
		$active_sidebars = get_option( 'sidebars_widgets', array() );
		unset( $active_sidebars['wp_inactive_widgets'], $active_sidebars['array_version'] );

		if ( empty( $active_sidebars ) ) {
			return false;
		}
		$active_sidebars_keys = array_keys( $active_sidebars );
		return array_shift( $active_sidebars_keys );
	}
}
polldaddy-shortcode.js                                                                                                                                                                                                                                         2723          1711191376  plugins/jetpack/_inc                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ( function ( w, d ) {
	function parseJSON( str ) {
		try {
			return str ? w.JSON.parse( str ) : null;
		} catch ( error ) {
			return null;
		}
	}

	w.polldaddyshortcode = {
		render: function () {
			const ratings = d.querySelectorAll( 'div.pd-rating[data-settings]' );
			const polls = d.querySelectorAll( 'div.PDS_Poll[data-settings]' );

			polls.forEach( pollEl => {
				if ( pollEl.hasAttribute( 'data-pd-init-done' ) ) {
					return;
				}

				pollEl.setAttribute( 'data-pd-init-done', '1' );
				const poll = parseJSON( pollEl.getAttribute( 'data-settings' ) );

				if ( poll ) {
					let poll_url;
					try {
						poll_url = new w.URL( poll.url, 'https://invalid.tld' );
					} catch ( error ) {
						return false;
					}
					if (
						poll_url.hostname !== 'secure.polldaddy.com' &&
						poll_url.hostname !== 'static.polldaddy.com'
					) {
						return false;
					}
					const pathname = poll_url.pathname;
					if ( ! /\/?p\/\d+\.js/.test( pathname ) ) {
						return false;
					}
					const wp_pd_js = d.createElement( 'script' );
					wp_pd_js.src = poll.url;
					wp_pd_js.async = true;
					d.head.appendChild( wp_pd_js );
				}
			} );

			if ( ratings.length ) {
				let scriptContents = '';

				ratings.forEach( ratingEl => {
					if ( ratingEl.hasAttribute( 'data-pd-init-done' ) ) {
						return;
					}

					ratingEl.setAttribute( 'data-pd-init-done', '1' );

					const rating = parseJSON( ratingEl.getAttribute( 'data-settings' ) );

					if ( rating ) {
						scriptContents += `
						PDRTJS_settings_${ rating.id }${ rating.item_id } = ${ rating.settings };
						if ( typeof PDRTJS_RATING !== 'undefined' ) {
							if ( typeof PDRTJS_${ rating.id }${ rating.item_id } === 'undefined' ) {
								PDRTJS_${ rating.id }${ rating.item_id } =
									new PDRTJS_RATING( PDRTJS_settings_${ rating.id }${ rating.item_id } );
							}
						}
						`;
					}
				} );

				if ( scriptContents ) {
					const anchorEl = d.querySelector( '#polldaddyRatings' );
					if ( anchorEl ) {
						const script = d.createElement( 'script' );
						script.id = 'polldaddyDynamicRatings';
						script.text = scriptContents;

						anchorEl.after( script );
					}
				}
			}
		},
	};

	d.body.addEventListener( 'is.post-load', () => w.polldaddyshortcode.render() );

	// In environments where jQuery is present, listen and dispatch with jQuery.
	if ( typeof w.jQuery !== 'undefined' ) {
		w.jQuery( d.body ).on( 'pd-script-load', () => w.polldaddyshortcode.render() );
		w.jQuery( d.body ).trigger( 'pd-script-load' );
	} else {
		d.body.addEventListener( 'pd-script-load', () => w.polldaddyshortcode.render() );
		d.body.dispatchEvent( new Event( 'pd-script-load' ) );
	}
} )( window, document );
social-logos.css                                                                                                                                                                                                                                               13477         1711191376  plugins/jetpack/_inc/social-logos                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               /* Generated by grunt-webfont */
/* Based on https://github.com/endtwist/fontcustom/blob/master/lib/fontcustom/templates/fontcustom.css */



@font-face {
	font-family:"social-logos";
	src: url(data:application/octet-stream;base64,d09GMgABAAAAABzgAAsAAAAAM7gAABySAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHFQGYACJcgrNPL1NATYCJAOBZAt0AAQgBYRGB4R7G5EqVUaFjQOQme3bTfb/dQI3hoR3Yt0xJNpjlVjuuOuDHd2n38Rs6stnCPiGNqH8UJgox1RXOGizhYd7HWfNFhDNhlLCQ62V/5qGe7b3GMiFoTwKnwgV4WJTUREyRtH/eyQvAFrePgMyz9PfvnP7vGrmi5DURBzlkECwptEOz2/z/1wq9HKJUklBG0FEMCgBxUi0Z2zDXCQ+/8yVc13q4m+uwrUsW125/b+oem7Tsv39JbmiddHsW2b6TX/P18kgMDEgTgjv+ubNab3UuUnTmyFpSrsv1GaBBohle/ZlPy7kcpWu0tWWAjMcB5wUKEl5GOwkAv5+akat9A5bUzogmQAWwEKgvix590vvZ/fJad/aqlSXFDnVclp1AkhraFEmqFTFm2I7xXZKrTQdkOSOlQroHWFHUegBSA/S2Zr5FnLZVhjqQ/+RTetLkM1hgTr1fyyIBkiQ86tBgEiPKfK8bxyQ3vD2OWU0b02Bw8zidg9uEbh++k5zIRjmUU+aa3EDca6dK1jefPFL5hOSqfEuYOdavMuPr3oJ0FV1pbkAqpfAAAU6cjZcHvfHiA21C3dQomuPTscBDWpo+stQfKGSnDAnu4Av6BfMi8pL4wpdmLvyupLc3PwvwBAEV1c8lH4FMkvnxQoNZixZ84Wzurc73fXY6/8pD6SsAgMqlWnXoUipWIU2QwzH1yMyKF+xalWsPiO6FPLUytOoXosagVSJRIM6TboJihZq1qpTv2G9MsohCpgxAciHR0bwvxBdkPhfRBb/K6TgDTSQAYABUgnwgJQBfCDtgABIByAEUgSIgJQCYmhsIAFSAbBA2gApkCFABiIMcohwyAkRPnJSRA9yCokABsggwAOSD/CBFANCINUAB6QKkAViAXlA+gD5QEYABUC6AIXQABRBIz0oBlILKIGGLKgB0gioA1IPFUgLoAEaNGgEEgCaICLFhRNRgot8EQkuCkU04OKRiDpcFiJNGyiCiG5cgQioQBRAAtEABSQEGCDNAA9IK8AH0gkIgPQDQiDDAAekF1ABJAOoRxzlAEbDpK/BN5I3zdxYED8+Bs0b8KmEgM+QhAIKnSRDCEo3BCUih7rwuaS5YsKZvudzZEcOdUEGI3LdvyAFeXFcHunKKLGJK5nO11rpVYwN4zQMrfY6Ba6zybQIIq+F74cDJGlobUm9zurg1asisaVJXW2pDUNdUuJ0otzNYKW1oW50XVXzqxX5tnKzRldpnXRLJT98xwvqlTKmd9RmstnS/GxxlbNlqxZuaKx25VpHQYdrrc0v6s7vNN5AZBMvlTxHlQ1e4NqyVk1Wsw1Ap5pYrOd0z+/XhK2cYoYhLwFCZpSnZbqG+N7epOvpp5QyKy0sfEpWgLhVxAPIMnUMqOZavZPP6qH1D0ulv46wcJQ35koTLpVPIi5NlVG+V9SKeeH7JdpI+jOAFhvLCO2wRB0y6e4QApZQHLJgf9GOh0XdxLd6iHeCO+xuq5sSqzO3Y4iWHIm4q0sHuGxjiAoIcmlA9uQDQvzdIwDo4/cYi49PocSgjUWpeI2XK1YGkKnXCo+6f6YIHZPbXDFpx7rUc4ZoA+0sT9wO1sLDokkuypLplkU3LLppZbUNC1KrZnsHN2Llw1v7g7TUXL63dOy+fnuXv+dZtnFtM1P/sTJh6rfjpZR/ZBtWpmu7VzLdCTVxFzJDFqBh2JJrRNOA7vCE6Zi2ddG2Abk8um+vZV+xcrZjEehcmth/wOH9PhsMRBTRMHRkuvNb9E3rKelnozC6EXuPhV3JPb1gSuMVWUa3IltkXp5ZPN4Lncdh3Zwy1/qWm2zsLcW7u/wUW8wT2yGWY1tCkiuxCNkPLAfuLfy/aMJQvT/rpKgO4rrIHsVCGeSSRSM06dRj7o6SFrcZ0nSU6T9i3RKel+dhCGgUnYIIYsi2sUjpAHHNBQBPIvDy1gCyfj/valZmKnlNmc7ZuCMJ8fTUYYqnPmG7BrKUjg95GtUsCQnyTZR2DFOZ9sFuuYZhpb57JKjbNgW2mdgVox3F9lt3g07jVtPaNiai4HIBMA8qMggws/v+ZCCsyBH5Vrm8QZuixYI8fzVPF16Lt0ts8Q229EKZKoeo7hU95JgYi41RCSrLjrgLAPXOSzxtMhrRiAt3KFkKzUEQYwQw3AmG7Q11hFptUZanIKz2N2YEAWbigZheL6U8s2J2pgPIchKWE80xOlUXoeY3Hq4Uo1oT0GzjNy9RZlYykUdagovB4OjKbvIPT9jTj1gcOhggvkE3RU4lEMQeoGE+hFC51LvNPtHPntZn+xNBBBDAAEP8bXFf2FcxlZWookjJFUmVGw4CdAqpRwM4D3AxVkxWUcpj9934QpJAsZ0aspG8SPl+sxQv0Vix2NBBj5ana7WgPFJmiUqlVc/Ur/Bny41b9+j9282V5+Jlt3X3IXtwJ+i8ILzXpjOrYn2Oza4RvsW2xSY3ebE0iEmmLw07iPdiWDQBoA2ESqsYi68Qsi//BfTzwVhPmKzRkLXEy2uovIHCTt6eOXl4WCi4g8mbCOJpLiVTSoJFGxbqs15lJlcrAVamw+MlEEdoCE2h5QwIseFwPowcLI8rVgSAgih44dRzTT2jzPFkNd0xaiMSwpVd/pnux0RlogIh+6FswDWbiHg8UcFiU/oaDPH1HNt58f4xffSuHm+5JWYW6Hybzy6ypTlL3Kf3+AP2MD80vINkXQCoPgUQzCkICbKBq38fyeZHZUBmTENsOTj/rDecDCN7BvH9vi0t8RkAU7gDCFnAG0eXbHRGylAqvEuAku5hYZqV9QKbDnZ3wr2979qT2i5lfGaXyKmJilnJqEz3a2GCCIaAxpvdtX1CGfLOJS5lWlhEgIaIBwmVuMsCxNuA6jopjpXi1vQqMZf41VvtEEq3dQIanbuTcAzZOppQDpvmNrF42ngG4hMVycrVaDHXqC1C9jS3jsXrx3T+HeI1Y7L4nY9V1CrIGmqZiwPx1dE+fXXXyh7cPWCuDyYSkBHicsOWUnm3nm45SjSpemc4uBJNeXrQ52FWa7RHk1suMtX+hyf9wdeBVX7y4t38wuu3S4tpWW1oxSnPN+tzI1IaNc0t6tDzsWtE7ny5tTJzq9eZvbv+fPN++9WLrQdLb59P+TNxSOdfIZ72M92nhPf7kA0GZ7TlMGyRM/o6GC9vpZ8f2gQ01g4dDNCfqAPLnVVHrjeQFVtG6P8YIkuTRDMpuesC0zVngQUd7YPtWJosA+JVzZauRpbDpOR1Ryj0c0EP9xUyQ1VsVSoiRdf+W9d2vRGTFu+rGR+ISOVCoVOeVqlE0f/ygLX6QqETZX/XiEe1BoJ8WiqllzAUCSX+5FlbMcNpim22xTcA1UlgcqiVorZ5Jbe8qROglzIIDSIAxg5tb/Rqoz029GqSfrFjE7oBypDNbTetW0rDBqzjbvQ5ej+hocOSzUbKu3fXDMnqYsZiYLFkgE7XsOmlXad8kEGvGTUkrxGe8rFJW7iJU/7uukafuFIqc2B53q/H5lr/pO14G53zvG/f2EhfMbuDU8+1Hq0WAp4lLh2tHarue6WiRj4CLUZGcsPlyeya6k2RcxSzaSR/JfXKxftWwExnZzWizYgSyPNP/S3IJYSoQbwmyq6EB0BK09UZOSWXq6rWIPwt71Rzrct7kTti1PvlvCanIafyQEEaD76c1oA3e18L45W4F6/9tvxprNRMNfe8/LE14c/EihuvUN/0pPnE05nHmmN7HvzQt2GYRTMYOY4LxSC3PXF3fJZU1+6YKqMqUreybl7TlSCC6z2QAkYtX4JF270XW3fm1jEGslqkJb9egQWsl/QZ0MRdANXSFAEdRh7gteWGWY/utuCfLqrONEdjiHDh4Fas/RvAgM6cqmzietc0sNbN5enyMKB1bcIVxo+lQaCUEeaYWy0ggG2BZOhazA3sQHIVXaVNNVyoJluJ4R68eDUff9E/XKQzKZ6ViZuparq0KjcQN3r4zl/5qFqCsKXTbx0FNMz2+H6/a/LA8MxaAKGH5R2z+TolK/UVvW4WNWW6hdpLT+K23Sfx7PR6bjvz0oq4k12yxF3EkwMr0juL46xXjZOFIYJ8/4S+iqHhw8UvceRXx/c6+VMaRm2ykSDbyrURaTarFFdjXEpkuJrWoFOVSrSszc+oekXlVl2YGtYvz/Li7TKLk/fiVHO5EdjzWrGhcWks2kwpU4BI5Exqofj9+ODHjmmnf5LXiYZtcsfZ7f+xGYisY4gGJNm5wO+wyGSE56Kk5djSgFwqnPLPY3+963iAjpL1/K90c6GaZ8FBxEYWwY6F7REb/47yGKAZO7WEMCQQoqhQnvFEdU6fPvksvLwS/lhs9LTG9FJzDuTwT50681JjKhZImIlR87/UCIGWU06UhmunfzrJuUfgSoOXTfcTdrZG1IWXHxg2HExNFxMl4avkhbRKSWgePFi/x1UiS+dhHYqNCgdG2ImQ2Wv4WA9yW/UQKk3OkBzL94NZXMGKel0sVWEcH3ROaQmjjPeJycsUZ1TWipUooHBHQGiM6Jzq40lnzMgxYMNU+tMhB2Q8/MQyLuPNfA6tETeu0jOWRizYdwOviY0ZSXzUXUNiltD18V/AYZbnKL+QjvtCdvDK3oDeFakGTtjoJawZ5KHGohUMyvet0XgHUpRVzasGG4KYgDRABGJOk0gvauKIW3c1ph0il/Tua7DVo/+Wx0py9syK7tnEAfoA0Z4aaHtxLlzO1Cn4msMMgXgX1YUPxE2nTv9QG4C0IuguYTmuFUftDguElwTy+sIsIeOVBCcP7nGbnxATue8GS5L8nil3nZ4SzWEHGbidgvtZP1mNNa3PJ0gXXwQxB5sH+dSiOC/8vKLhZQOC+XmpkTDFLxr0mSBf5MwUJUV5slkcMTPyzOS92+mW+BPP5hb/Sg2X/Gwzbfivhw8erGmOBgSGAH9ESPul2cFggK40MrJ0fMpLI8fvXuJ/ur9kDIvjWlY+meMcRjLybZCBdaR8A07vuyX69vKPu0tHNTSZsWI+im1EprA/rS96piwLN9WXZtyae+vvTG8HY6Ztls/PjubSYSdb6MIEMDipIdkRNyl90r1ZnBN/S0hbOoYj7twb9RRV5HrV23HzygVNWyA6L46HErcGorereHd5KmWu31RqKVhlpKaPYWPYMc1GYuL8MlCC4EeWKozNGbZ7MENxPPEGLiOvM/3/FYDS5w0Ge0t1kbrwkPz0KPZidaw6VH7Y1xN6qPZC2io8ZdGzwxazf62Q/HBdcR8BmGSsOTNy1LZL22pH9Kcsex9jk24eLl6UuCJkli38lm1WXNKih8M3SKyPVnikZm9wYxjTg9QuDIYU38pAY4mRoxfG1j3sEscpPjCiv7Sk5szBUXUxK0Lq1nUZ6RvcCpLl1FDu+g07DeyVp4wYLCneQro78cJ6LgZDjKwtgf9LrwtbFe/uOAIyHbrScQnZeN7uigReWihS5T+0/8HhHGFL6HUgwGorWQ62ZJlRajBIjbKk2baSjNDU0K/MGSW28doyTUmJpkwbq2e9C/Izg7Yqb4pb56boKDt1OymXvde67vS1ARN7nzC31nlU0fuMJfMsNQ0itBVZaQ32u5BPChmJnobJwy8jkPHL8Ym4Wuw8tBMXQxxntecBiIdzYbuxLia4o1+RvOKZOFRTUtPyp8+Sny1PSnZBE7x11rSRBkapEys1PzoxfViETFeuNikn4AzYpimZVukp47U+8ea9GS81opxIMm0sjrDuaeASzbTAp+sIuLE0cmS2WPOybP09Lx3WOcbASB1laTBV8qJU92brsiQdPCuvQ6JUmJXewsuGy0bxO4k1tDaYojFbQBdjthc5UGI0SDPj5HJzRqSe3V+3ZNpEiTw7BbuL5pulVwZ6ngCZLUkKrmUBEpQVZZkwfYDOrNoTB15aHqQQpXMJvg+WWXh8If8rZx4YlKVNlOzqr+nxlXQG2gI7JQqfQxszpXm0gvanpYsuDFcOiWbYwOCqwSbDZvEKDKGKgFkh3mxoqoqexBQRNvLyN3oN/dulUWE1h3rPBuLVhfwLWyO2XogIw7xOflyEf672o9SzZzyI9+n3QdWr/oB+hoPJ2/+4yiy5Vz3ez2NKaNIAKc3lCFYlubFjsK4nnjJIEc/m713brT1H+DEHmfOD4CH2Ej++qs1jaYvl9fmsfG13BBcqOPuT7vdzdyDo6sqmtSIAaaVtKuD8rnJeIkU2+PdyPmhZtHRFz7hWH5qEDqWQKkdSbrin7ymjxS0qMXxbEYPDgfjr19RZ3eokPpYGNCcf9oEF+SDaIvrR0fFD5CUT1QRWdi4CP22A1k/gJaoMrBHJwOpGyfx298+3hAO/xtHcOBPOLbaPpRCv5F9BRAXQ9zT58evzzSL0ArRIhXFismiY8doFBPOCMlx4OyYJ0x6HG4tV/QeTqK1X1seDPx/dFVrT0CSsMWJchb2FPC7CXkFuOZylAetGtwZMkVWjRKggLGYoMst/FjLUPlQJ1qA53e4LiVHX6kOFWFFktBScPAO6SiX1VfxZpeiy9SlsnL9y2L9WBV+27fPlmce1p/fXkQG2V7d/QkBCoOCtZ9tQVgNa3LaL5vP0mFuuMkYrIsLiZMxV5oCJ3QImjdnH94yxC6c6fBlClAKqOK1weNYYmf7GIN/EkKBga4p88F2E2V7drbFwKuUBFFYRTL3GXWPi6GWwd3bg+kPIA4/MkFHbyhFULibdbzRXQroGBUt75LYjEgF8LOGGxfhC2P3zBzc36mKoRbATbuLqAuw6UcG57k3QQa2IZ8dtwhc2Di12cVzDii0psV1PHmelJrE909gQuxd9Z81pFnF923/qzUK70adOhfLmSAN3SxH0gBm1oIZgZceprPya/Z7r7owmLsm0iedP+fwr0hMHOx3zM+Udtp/zhDussBz4e5PbF41bgxdvaR7zj7OrdtYkFcNyyJwSqz1e+KQ5dhYXCG7E+rD89v+XuGTISnWuSpWrVoY4MtToMRutYf7xqGyR3RSeQknh5cKpp2atPjQjojxS8L+5hTrQ09UU2MRgGAy0Vlq/4AbDls5ssgKQY44EsALUBwysl6Gvp7+pX3+BOPsF7UU9kYrwxaAXzThcch+2oDgpZk/YKZoocsHUILsdFmagvPIVBmTtRflhBnXfBhZeossWVeQm6CQ43IYz5i738+fUeZfolxNXU8VU0oR9WzadXBKa6v0w5uFgQza2GbNW7p9AvvcIYUwwhcaBOYADzfemQFyIA7iAk4ngaRYFUFjE3GblB3/g/0GEA41dXNqSHA6FszhHFG5Ra4hiPu7h2cLwXY/hwsU5LDw/K7UF3DoNwx1rUVCbDQIQal0n5CtDb3ey+dAujqAHbYBRsH+CwOmT4E8TQWjUK8HVf1p8VsMYGIjpoxN8XIIEf0SJwqBejYC57s+aV/RxZzjF8lvj2rLDMvHk1yTP81dZ/u2PZeztj+XvJzCoYwNvj19VocyiD5A8qnNniMM2LFSXl0aulHYqE4NHcQyLeLnGOn6myhQwXH0io2siNTR9f3RB6fzJntTMaCYlEWvBpnb+a+0sGI4i2h2LOXZwROuKc7W0OGiHaY7OyWWxDGZluRqbDosPlw11xZkQB3KJHxEfuRlEHK646Y+VImGtW3b4Rsg1IdvkiDv5sNglPuyEgWnQBORmAQbXtTj9WokDyAAxJl7vNzH188vSRryP3Cd6Dazy8nPCW2LkE1MmyqPjo6k1NdSYVYU8FF4LQeKWjNxQFOyXCWGGZISZ8CYRfDfLOBYLahGhyHclDPn8eKYNkkHg0xHNKdqnsUx0KOlkGa3TnlcfpI19O8W/AJxbfGbxuQMvqjd33TgZlTAagHSvS1AawVggtaY7+wko4/mXREWOh7yOrFIJ/d7bjzAnMzrsPqjqmck+dGSGPohAii/ovpMWNI+y7ssBkMc5cIKArA1u41CCdmff5NxwOm9SAKY3gUprWBzdGBYPK3yXxi72jbmZ8DjGvv/yfOl238JR+FEFBaMYYNisfnra6kpaU0ZsRmU0GqO4HbdGHTCN23137vWAtO05YFHPQvqWTA9VqD9xUriC2lMNCARJYhRSRSI+jTKuQ7oMFGdIKiTF5cHfgw3XuBZ2SXi4OaWi4ov40aUSVXjqXyG401y3YOeaNafVmxIn1JiKQjl7g618Jg8SjnqqVs04vvNLDGnemYSk/aZXZ6PJLSm/JLY5GLRIaLiJyfJV5r+GW1I6OtH5NGgx5dfUtTK7W//gAWYL6rbxx7W+NeC+E2XIGZU3QS/n2cQtdBsb22un/N6XLiX3TUo3e5gRD00OSy2GccKqAlQcBA5517jHRpaURmoDkgVdguQA3ctTkh+IeGnJWKYAitSQ0DSFZAdk4EkUs7xHrFB1qWkGyhgoQ3SlEytRHzOXiXK9T0sdtQgdoku/MU2Y9tEOgCgLwYn399/2vRCNaUjzBot6A7xUXq9ExNGoT606vJcxxe8ylwWT6ZH01nd0U8ucZkYp1mkDSD0Oaz1FRwiGW6pi2QQcLJm3lZilqfKYnO0JUO8iN3asR/7u0uiK8Pm/MAYfONm/Rlwvs5OoDA/hJhNXqnAEL6NQFTSsTYNNt1z1r/dOnzcPYOU2LE3BvfQjvBzaK6vikIWPdZvPK3NVYT3YfnDpwN9rZqeodlbJrNHze+d3iRoXOReNOrXpyYRNqpcpKtCjn8yxsTGoMTisaXsXwbUsNsfomnGytF1o3KlQ7DQK20tPznAZFQwuSygJ0xuhPWN2pRk/7Lzc8VRrrVGfhMX9d2Lt2GjQOOjFUwAA0HOof9PyFjS9ZQ90vOVxyM36o5IG15/oLEW5VviGhVnLh1A1a48mclN9bM3X0BKW+Apj1Wn58sK28JpX1vw/1MRbfoc+t9wC3U68N++rc5yxPTJ9PFEfpXbXyhuurTmAAnVRew+ri+tjLd3Q0SHvQTtaPoJOJu7Lo8KLTnIf2NL/GqoO1CGde4s9o78SyOlv8XDTAffGD32/NiI8kD1mqx4n+v9PkPrX8X8zUvgRpSz/XFARNPLL4Qalzs96KRUSssyoH1EcqnYsH4KuXd3FiLV38SSGaHSFzeHksXzPKKIJEUq8W3WRUl+oeq/9lWrU/t7FKPKLeqj9u0vkKJhvFmvKHn8zKQf+6MlS/oq2eODThdin/ETOjmJ/PV0uXdwHRmQQ1P2w9Hm2NxHTG6bQ3ynWOXlPfWL6RCWnUSS9n8+GX8JJUVhlUg780ZMlp8evaMv6AROWiJk/MQZ17r6L/fV0IQofeiT3CIKaDwuLzbO9ic9NL+KZQn+XKhN1L8Xs03X6+UYVN09jjGB6P/uJDNU8KSlKD1P+y26xXmZqLSp1mrQp6dJn+PfnOzxmypwlKw2hM5gsNofL43t5+wiEIrFE6iuT+/kHBAYFh4QqwpSqcHWEJlKrE6pAgP8UqwFHiAq7wZO1yEfwUh3IJouCeVoqRRoTxlqzG67X0WOlmdJAzxZnjDKwE6wNKByIpsagdjNyxp1B1AfjnZq4NVQ4/yvAuLcjZTlYJ2MZWktkPabIvuyt5EuODtrB4TVt42IWsAxh512c6oCkNHXcBXC+VkwW0hTbcG6UEB8O+8upIz5FE3GVQBgpviYXBRmzEIqaT9shkZrw2Y2816D1sk983XOI1trJPo95J7VRXcIqJxJnlq5APCeov8osJVSNsySKtaDHXB66kpERdG7FTSJvjpS93hKBz7zMcZCHEzV2aybtoB4uaj+7gFQ/RpAMKXUPIkUhICtsirNO6eeT18/9E6KFaqEiZcAV) format('woff2');
	font-weight:normal;
	font-style:normal;
}


.social-logo {
	font-family:"social-logos";
	display:inline-block;
	vertical-align:middle;
	line-height:1;
	font-weight:normal;
	font-style:normal;
	speak:none;
	text-decoration:inherit;
	text-transform:none;
	text-rendering:auto;
	-webkit-font-smoothing:antialiased;
	-moz-osx-font-smoothing:grayscale;
}


/* Icons */


.social-logo__amazon:before {
	content:"\f600";
}


.social-logo__behance:before {
	content:"\f101";
}


.social-logo__blogger-alt:before {
	content:"\f601";
}


.social-logo__blogger:before {
	content:"\f602";
}


.social-logo__bluesky:before {
	content: "\f10f";
}


.social-logo__codepen:before {
	content:"\f216";
}


.social-logo__dribbble:before {
	content:"\f201";
}


.social-logo__dropbox:before {
	content:"\f225";
}


.social-logo__eventbrite:before {
	content:"\f603";
}


.social-logo__facebook:before {
	content:"\f203";
}


.social-logo__fediverse:before {
	content:"\f10b";
}


.social-logo__feed:before {
	content:"\f413";
}


.social-logo__flickr:before {
	content:"\f211";
}


.social-logo__foursquare:before {
	content:"\f226";
}


.social-logo__ghost:before {
	content:"\f61c";
}


.social-logo__github:before {
	content:"\f200";
}


.social-logo__google-alt:before {
	content:"\f102";
}


.social-logo__google-plus-alt:before {
	content:"\f218";
}


.social-logo__google-plus:before {
	content:"\f206";
}


.social-logo__google:before {
	content:"\f103";
}


.social-logo__instagram:before {
	content:"\f215";
}


.social-logo__link:before {
	content:"\f109";
}


.social-logo__linkedin:before {
	content:"\f207";
}


.social-logo__mail:before {
	content:"\f410";
}


.social-logo__mastodon:before {
	content:"\f10a";
}


.social-logo__medium-alt:before {
	content:"\f106";
}


.social-logo__medium:before {
	content:"\f623";
}


.social-logo__nextdoor:before {
	content:"\f10c";
}


.social-logo__patreon:before {
	content:"\f105";
}


.social-logo__pinterest-alt:before {
	content:"\f210";
}


.social-logo__pinterest:before {
	content:"\f209";
}


.social-logo__pocket:before {
	content:"\f224";
}


.social-logo__polldaddy:before {
	content:"\f217";
}


.social-logo__print:before {
	content:"\f469";
}


.social-logo__reddit:before {
	content:"\f222";
}


.social-logo__share:before {
	content:"\f415";
}


.social-logo__skype:before {
	content:"\f220";
}


.social-logo__spotify:before {
	content:"\f515";
}


.social-logo__squarespace:before {
	content:"\f605";
}


.social-logo__stumbleupon:before {
	content:"\f223";
}


.social-logo__telegram:before {
	content:"\f606";
}


.social-logo-threads:before {
	content: "\f10d";
}


.social-logo__tiktok-alt:before {
	content:"\f107";
}


.social-logo__tiktok:before {
	content:"\f108";
}


.social-logo__tumblr-alt:before {
	content:"\f607";
}


.social-logo__tumblr:before {
	content:"\f214";
}


.social-logo__twitch:before {
	content:"\f516";
}


.social-logo__twitter-alt:before {
	content:"\f202";
}


.social-logo__twitter:before {
	content:"\f610";
}


.social-logo__vimeo:before {
	content:"\f212";
}


.social-logo__whatsapp:before {
	content:"\f608";
}


.social-logo__woocommerce:before {
	content:"\f104";
}


.social-logo__wordpress:before {
	content:"\f205";
}


.social-logo__x:before {
	content: "\f10e";
}


.social-logo__xanga:before {
	content:"\f609";
}


.social-logo__youtube:before {
	content:"\f213";
}
social-logos.html                                                                                                                                                                                                                                              22093         1711191376  plugins/jetpack/_inc/social-logos                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>social-logos</title>
		<style>
		body {
			margin:0;
			padding:10px 20px;
			background:#fff;
			color:#222;
			}
		h1, div, footer {
			font-family:"Helvetica Neue", Arial, sans-serif;
			}
		h1 {
			margin:0 0 20px;
			font-size:32px;
			font-weight:normal;
			}
		.icons {
			margin-bottom:40px;
			-webkit-column-count:5;
			-moz-column-count:5;
					column-count:5;
			-webkit-column-gap:20px;
			-moz-column-gap:20px;
					column-gap:20px;
		}
		.icons__item,
		.icons__item i {
			line-height:2em;
			cursor:pointer;
			overflow:hidden;
		}
		.icons__item:hover {
			color:#3c90be;
			}
		.icons__item i {
			display:inline-block;
			width:32px;
			text-align:center;
		}
		.icons__item:hover i {
			-webkit-transform:scale(1.5);
			        transform:scale(1.5);
			}
		footer {
			margin-top:40px;
			font-size:14px;
			color:#999;
			}

/* Generated by grunt-webfont */
/* Based on https://github.com/endtwist/fontcustom/blob/master/lib/fontcustom/templates/fontcustom.css */



@font-face {
	font-family:"social-logos";
	src: url(data:application/octet-stream;base64,d09GMgABAAAAABzgAAsAAAAAM7gAABySAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHFQGYACJcgrNPL1NATYCJAOBZAt0AAQgBYRGB4R7G5EqVUaFjQOQme3bTfb/dQI3hoR3Yt0xJNpjlVjuuOuDHd2n38Rs6stnCPiGNqH8UJgox1RXOGizhYd7HWfNFhDNhlLCQ62V/5qGe7b3GMiFoTwKnwgV4WJTUREyRtH/eyQvAFrePgMyz9PfvnP7vGrmi5DURBzlkECwptEOz2/z/1wq9HKJUklBG0FEMCgBxUi0Z2zDXCQ+/8yVc13q4m+uwrUsW125/b+oem7Tsv39JbmiddHsW2b6TX/P18kgMDEgTgjv+ubNab3UuUnTmyFpSrsv1GaBBohle/ZlPy7kcpWu0tWWAjMcB5wUKEl5GOwkAv5+akat9A5bUzogmQAWwEKgvix590vvZ/fJad/aqlSXFDnVclp1AkhraFEmqFTFm2I7xXZKrTQdkOSOlQroHWFHUegBSA/S2Zr5FnLZVhjqQ/+RTetLkM1hgTr1fyyIBkiQ86tBgEiPKfK8bxyQ3vD2OWU0b02Bw8zidg9uEbh++k5zIRjmUU+aa3EDca6dK1jefPFL5hOSqfEuYOdavMuPr3oJ0FV1pbkAqpfAAAU6cjZcHvfHiA21C3dQomuPTscBDWpo+stQfKGSnDAnu4Av6BfMi8pL4wpdmLvyupLc3PwvwBAEV1c8lH4FMkvnxQoNZixZ84Wzurc73fXY6/8pD6SsAgMqlWnXoUipWIU2QwzH1yMyKF+xalWsPiO6FPLUytOoXosagVSJRIM6TboJihZq1qpTv2G9MsohCpgxAciHR0bwvxBdkPhfRBb/K6TgDTSQAYABUgnwgJQBfCDtgABIByAEUgSIgJQCYmhsIAFSAbBA2gApkCFABiIMcohwyAkRPnJSRA9yCokABsggwAOSD/CBFANCINUAB6QKkAViAXlA+gD5QEYABUC6AIXQABRBIz0oBlILKIGGLKgB0gioA1IPFUgLoAEaNGgEEgCaICLFhRNRgot8EQkuCkU04OKRiDpcFiJNGyiCiG5cgQioQBRAAtEABSQEGCDNAA9IK8AH0gkIgPQDQiDDAAekF1ABJAOoRxzlAEbDpK/BN5I3zdxYED8+Bs0b8KmEgM+QhAIKnSRDCEo3BCUih7rwuaS5YsKZvudzZEcOdUEGI3LdvyAFeXFcHunKKLGJK5nO11rpVYwN4zQMrfY6Ba6zybQIIq+F74cDJGlobUm9zurg1asisaVJXW2pDUNdUuJ0otzNYKW1oW50XVXzqxX5tnKzRldpnXRLJT98xwvqlTKmd9RmstnS/GxxlbNlqxZuaKx25VpHQYdrrc0v6s7vNN5AZBMvlTxHlQ1e4NqyVk1Wsw1Ap5pYrOd0z+/XhK2cYoYhLwFCZpSnZbqG+N7epOvpp5QyKy0sfEpWgLhVxAPIMnUMqOZavZPP6qH1D0ulv46wcJQ35koTLpVPIi5NlVG+V9SKeeH7JdpI+jOAFhvLCO2wRB0y6e4QApZQHLJgf9GOh0XdxLd6iHeCO+xuq5sSqzO3Y4iWHIm4q0sHuGxjiAoIcmlA9uQDQvzdIwDo4/cYi49PocSgjUWpeI2XK1YGkKnXCo+6f6YIHZPbXDFpx7rUc4ZoA+0sT9wO1sLDokkuypLplkU3LLppZbUNC1KrZnsHN2Llw1v7g7TUXL63dOy+fnuXv+dZtnFtM1P/sTJh6rfjpZR/ZBtWpmu7VzLdCTVxFzJDFqBh2JJrRNOA7vCE6Zi2ddG2Abk8um+vZV+xcrZjEehcmth/wOH9PhsMRBTRMHRkuvNb9E3rKelnozC6EXuPhV3JPb1gSuMVWUa3IltkXp5ZPN4Lncdh3Zwy1/qWm2zsLcW7u/wUW8wT2yGWY1tCkiuxCNkPLAfuLfy/aMJQvT/rpKgO4rrIHsVCGeSSRSM06dRj7o6SFrcZ0nSU6T9i3RKel+dhCGgUnYIIYsi2sUjpAHHNBQBPIvDy1gCyfj/valZmKnlNmc7ZuCMJ8fTUYYqnPmG7BrKUjg95GtUsCQnyTZR2DFOZ9sFuuYZhpb57JKjbNgW2mdgVox3F9lt3g07jVtPaNiai4HIBMA8qMggws/v+ZCCsyBH5Vrm8QZuixYI8fzVPF16Lt0ts8Q229EKZKoeo7hU95JgYi41RCSrLjrgLAPXOSzxtMhrRiAt3KFkKzUEQYwQw3AmG7Q11hFptUZanIKz2N2YEAWbigZheL6U8s2J2pgPIchKWE80xOlUXoeY3Hq4Uo1oT0GzjNy9RZlYykUdagovB4OjKbvIPT9jTj1gcOhggvkE3RU4lEMQeoGE+hFC51LvNPtHPntZn+xNBBBDAAEP8bXFf2FcxlZWookjJFUmVGw4CdAqpRwM4D3AxVkxWUcpj9934QpJAsZ0aspG8SPl+sxQv0Vix2NBBj5ana7WgPFJmiUqlVc/Ur/Bny41b9+j9282V5+Jlt3X3IXtwJ+i8ILzXpjOrYn2Oza4RvsW2xSY3ebE0iEmmLw07iPdiWDQBoA2ESqsYi68Qsi//BfTzwVhPmKzRkLXEy2uovIHCTt6eOXl4WCi4g8mbCOJpLiVTSoJFGxbqs15lJlcrAVamw+MlEEdoCE2h5QwIseFwPowcLI8rVgSAgih44dRzTT2jzPFkNd0xaiMSwpVd/pnux0RlogIh+6FswDWbiHg8UcFiU/oaDPH1HNt58f4xffSuHm+5JWYW6Hybzy6ypTlL3Kf3+AP2MD80vINkXQCoPgUQzCkICbKBq38fyeZHZUBmTENsOTj/rDecDCN7BvH9vi0t8RkAU7gDCFnAG0eXbHRGylAqvEuAku5hYZqV9QKbDnZ3wr2979qT2i5lfGaXyKmJilnJqEz3a2GCCIaAxpvdtX1CGfLOJS5lWlhEgIaIBwmVuMsCxNuA6jopjpXi1vQqMZf41VvtEEq3dQIanbuTcAzZOppQDpvmNrF42ngG4hMVycrVaDHXqC1C9jS3jsXrx3T+HeI1Y7L4nY9V1CrIGmqZiwPx1dE+fXXXyh7cPWCuDyYSkBHicsOWUnm3nm45SjSpemc4uBJNeXrQ52FWa7RHk1suMtX+hyf9wdeBVX7y4t38wuu3S4tpWW1oxSnPN+tzI1IaNc0t6tDzsWtE7ny5tTJzq9eZvbv+fPN++9WLrQdLb59P+TNxSOdfIZ72M92nhPf7kA0GZ7TlMGyRM/o6GC9vpZ8f2gQ01g4dDNCfqAPLnVVHrjeQFVtG6P8YIkuTRDMpuesC0zVngQUd7YPtWJosA+JVzZauRpbDpOR1Ryj0c0EP9xUyQ1VsVSoiRdf+W9d2vRGTFu+rGR+ISOVCoVOeVqlE0f/ygLX6QqETZX/XiEe1BoJ8WiqllzAUCSX+5FlbMcNpim22xTcA1UlgcqiVorZ5Jbe8qROglzIIDSIAxg5tb/Rqoz029GqSfrFjE7oBypDNbTetW0rDBqzjbvQ5ej+hocOSzUbKu3fXDMnqYsZiYLFkgE7XsOmlXad8kEGvGTUkrxGe8rFJW7iJU/7uukafuFIqc2B53q/H5lr/pO14G53zvG/f2EhfMbuDU8+1Hq0WAp4lLh2tHarue6WiRj4CLUZGcsPlyeya6k2RcxSzaSR/JfXKxftWwExnZzWizYgSyPNP/S3IJYSoQbwmyq6EB0BK09UZOSWXq6rWIPwt71Rzrct7kTti1PvlvCanIafyQEEaD76c1oA3e18L45W4F6/9tvxprNRMNfe8/LE14c/EihuvUN/0pPnE05nHmmN7HvzQt2GYRTMYOY4LxSC3PXF3fJZU1+6YKqMqUreybl7TlSCC6z2QAkYtX4JF270XW3fm1jEGslqkJb9egQWsl/QZ0MRdANXSFAEdRh7gteWGWY/utuCfLqrONEdjiHDh4Fas/RvAgM6cqmzietc0sNbN5enyMKB1bcIVxo+lQaCUEeaYWy0ggG2BZOhazA3sQHIVXaVNNVyoJluJ4R68eDUff9E/XKQzKZ6ViZuparq0KjcQN3r4zl/5qFqCsKXTbx0FNMz2+H6/a/LA8MxaAKGH5R2z+TolK/UVvW4WNWW6hdpLT+K23Sfx7PR6bjvz0oq4k12yxF3EkwMr0juL46xXjZOFIYJ8/4S+iqHhw8UvceRXx/c6+VMaRm2ykSDbyrURaTarFFdjXEpkuJrWoFOVSrSszc+oekXlVl2YGtYvz/Li7TKLk/fiVHO5EdjzWrGhcWks2kwpU4BI5Exqofj9+ODHjmmnf5LXiYZtcsfZ7f+xGYisY4gGJNm5wO+wyGSE56Kk5djSgFwqnPLPY3+963iAjpL1/K90c6GaZ8FBxEYWwY6F7REb/47yGKAZO7WEMCQQoqhQnvFEdU6fPvksvLwS/lhs9LTG9FJzDuTwT50681JjKhZImIlR87/UCIGWU06UhmunfzrJuUfgSoOXTfcTdrZG1IWXHxg2HExNFxMl4avkhbRKSWgePFi/x1UiS+dhHYqNCgdG2ImQ2Wv4WA9yW/UQKk3OkBzL94NZXMGKel0sVWEcH3ROaQmjjPeJycsUZ1TWipUooHBHQGiM6Jzq40lnzMgxYMNU+tMhB2Q8/MQyLuPNfA6tETeu0jOWRizYdwOviY0ZSXzUXUNiltD18V/AYZbnKL+QjvtCdvDK3oDeFakGTtjoJawZ5KHGohUMyvet0XgHUpRVzasGG4KYgDRABGJOk0gvauKIW3c1ph0il/Tua7DVo/+Wx0py9syK7tnEAfoA0Z4aaHtxLlzO1Cn4msMMgXgX1YUPxE2nTv9QG4C0IuguYTmuFUftDguElwTy+sIsIeOVBCcP7nGbnxATue8GS5L8nil3nZ4SzWEHGbidgvtZP1mNNa3PJ0gXXwQxB5sH+dSiOC/8vKLhZQOC+XmpkTDFLxr0mSBf5MwUJUV5slkcMTPyzOS92+mW+BPP5hb/Sg2X/Gwzbfivhw8erGmOBgSGAH9ESPul2cFggK40MrJ0fMpLI8fvXuJ/ur9kDIvjWlY+meMcRjLybZCBdaR8A07vuyX69vKPu0tHNTSZsWI+im1EprA/rS96piwLN9WXZtyae+vvTG8HY6Ztls/PjubSYSdb6MIEMDipIdkRNyl90r1ZnBN/S0hbOoYj7twb9RRV5HrV23HzygVNWyA6L46HErcGorereHd5KmWu31RqKVhlpKaPYWPYMc1GYuL8MlCC4EeWKozNGbZ7MENxPPEGLiOvM/3/FYDS5w0Ge0t1kbrwkPz0KPZidaw6VH7Y1xN6qPZC2io8ZdGzwxazf62Q/HBdcR8BmGSsOTNy1LZL22pH9Kcsex9jk24eLl6UuCJkli38lm1WXNKih8M3SKyPVnikZm9wYxjTg9QuDIYU38pAY4mRoxfG1j3sEscpPjCiv7Sk5szBUXUxK0Lq1nUZ6RvcCpLl1FDu+g07DeyVp4wYLCneQro78cJ6LgZDjKwtgf9LrwtbFe/uOAIyHbrScQnZeN7uigReWihS5T+0/8HhHGFL6HUgwGorWQ62ZJlRajBIjbKk2baSjNDU0K/MGSW28doyTUmJpkwbq2e9C/Izg7Yqb4pb56boKDt1OymXvde67vS1ARN7nzC31nlU0fuMJfMsNQ0itBVZaQ32u5BPChmJnobJwy8jkPHL8Ym4Wuw8tBMXQxxntecBiIdzYbuxLia4o1+RvOKZOFRTUtPyp8+Sny1PSnZBE7x11rSRBkapEys1PzoxfViETFeuNikn4AzYpimZVukp47U+8ea9GS81opxIMm0sjrDuaeASzbTAp+sIuLE0cmS2WPOybP09Lx3WOcbASB1laTBV8qJU92brsiQdPCuvQ6JUmJXewsuGy0bxO4k1tDaYojFbQBdjthc5UGI0SDPj5HJzRqSe3V+3ZNpEiTw7BbuL5pulVwZ6ngCZLUkKrmUBEpQVZZkwfYDOrNoTB15aHqQQpXMJvg+WWXh8If8rZx4YlKVNlOzqr+nxlXQG2gI7JQqfQxszpXm0gvanpYsuDFcOiWbYwOCqwSbDZvEKDKGKgFkh3mxoqoqexBQRNvLyN3oN/dulUWE1h3rPBuLVhfwLWyO2XogIw7xOflyEf672o9SzZzyI9+n3QdWr/oB+hoPJ2/+4yiy5Vz3ez2NKaNIAKc3lCFYlubFjsK4nnjJIEc/m713brT1H+DEHmfOD4CH2Ej++qs1jaYvl9fmsfG13BBcqOPuT7vdzdyDo6sqmtSIAaaVtKuD8rnJeIkU2+PdyPmhZtHRFz7hWH5qEDqWQKkdSbrin7ymjxS0qMXxbEYPDgfjr19RZ3eokPpYGNCcf9oEF+SDaIvrR0fFD5CUT1QRWdi4CP22A1k/gJaoMrBHJwOpGyfx298+3hAO/xtHcOBPOLbaPpRCv5F9BRAXQ9zT58evzzSL0ArRIhXFismiY8doFBPOCMlx4OyYJ0x6HG4tV/QeTqK1X1seDPx/dFVrT0CSsMWJchb2FPC7CXkFuOZylAetGtwZMkVWjRKggLGYoMst/FjLUPlQJ1qA53e4LiVHX6kOFWFFktBScPAO6SiX1VfxZpeiy9SlsnL9y2L9WBV+27fPlmce1p/fXkQG2V7d/QkBCoOCtZ9tQVgNa3LaL5vP0mFuuMkYrIsLiZMxV5oCJ3QImjdnH94yxC6c6fBlClAKqOK1weNYYmf7GIN/EkKBga4p88F2E2V7drbFwKuUBFFYRTL3GXWPi6GWwd3bg+kPIA4/MkFHbyhFULibdbzRXQroGBUt75LYjEgF8LOGGxfhC2P3zBzc36mKoRbATbuLqAuw6UcG57k3QQa2IZ8dtwhc2Di12cVzDii0psV1PHmelJrE909gQuxd9Z81pFnF923/qzUK70adOhfLmSAN3SxH0gBm1oIZgZceprPya/Z7r7owmLsm0iedP+fwr0hMHOx3zM+Udtp/zhDussBz4e5PbF41bgxdvaR7zj7OrdtYkFcNyyJwSqz1e+KQ5dhYXCG7E+rD89v+XuGTISnWuSpWrVoY4MtToMRutYf7xqGyR3RSeQknh5cKpp2atPjQjojxS8L+5hTrQ09UU2MRgGAy0Vlq/4AbDls5ssgKQY44EsALUBwysl6Gvp7+pX3+BOPsF7UU9kYrwxaAXzThcch+2oDgpZk/YKZoocsHUILsdFmagvPIVBmTtRflhBnXfBhZeossWVeQm6CQ43IYz5i738+fUeZfolxNXU8VU0oR9WzadXBKa6v0w5uFgQza2GbNW7p9AvvcIYUwwhcaBOYADzfemQFyIA7iAk4ngaRYFUFjE3GblB3/g/0GEA41dXNqSHA6FszhHFG5Ra4hiPu7h2cLwXY/hwsU5LDw/K7UF3DoNwx1rUVCbDQIQal0n5CtDb3ey+dAujqAHbYBRsH+CwOmT4E8TQWjUK8HVf1p8VsMYGIjpoxN8XIIEf0SJwqBejYC57s+aV/RxZzjF8lvj2rLDMvHk1yTP81dZ/u2PZeztj+XvJzCoYwNvj19VocyiD5A8qnNniMM2LFSXl0aulHYqE4NHcQyLeLnGOn6myhQwXH0io2siNTR9f3RB6fzJntTMaCYlEWvBpnb+a+0sGI4i2h2LOXZwROuKc7W0OGiHaY7OyWWxDGZluRqbDosPlw11xZkQB3KJHxEfuRlEHK646Y+VImGtW3b4Rsg1IdvkiDv5sNglPuyEgWnQBORmAQbXtTj9WokDyAAxJl7vNzH188vSRryP3Cd6Dazy8nPCW2LkE1MmyqPjo6k1NdSYVYU8FF4LQeKWjNxQFOyXCWGGZISZ8CYRfDfLOBYLahGhyHclDPn8eKYNkkHg0xHNKdqnsUx0KOlkGa3TnlcfpI19O8W/AJxbfGbxuQMvqjd33TgZlTAagHSvS1AawVggtaY7+wko4/mXREWOh7yOrFIJ/d7bjzAnMzrsPqjqmck+dGSGPohAii/ovpMWNI+y7ssBkMc5cIKArA1u41CCdmff5NxwOm9SAKY3gUprWBzdGBYPK3yXxi72jbmZ8DjGvv/yfOl238JR+FEFBaMYYNisfnra6kpaU0ZsRmU0GqO4HbdGHTCN23137vWAtO05YFHPQvqWTA9VqD9xUriC2lMNCARJYhRSRSI+jTKuQ7oMFGdIKiTF5cHfgw3XuBZ2SXi4OaWi4ov40aUSVXjqXyG401y3YOeaNafVmxIn1JiKQjl7g618Jg8SjnqqVs04vvNLDGnemYSk/aZXZ6PJLSm/JLY5GLRIaLiJyfJV5r+GW1I6OtH5NGgx5dfUtTK7W//gAWYL6rbxx7W+NeC+E2XIGZU3QS/n2cQtdBsb22un/N6XLiX3TUo3e5gRD00OSy2GccKqAlQcBA5517jHRpaURmoDkgVdguQA3ctTkh+IeGnJWKYAitSQ0DSFZAdk4EkUs7xHrFB1qWkGyhgoQ3SlEytRHzOXiXK9T0sdtQgdoku/MU2Y9tEOgCgLwYn399/2vRCNaUjzBot6A7xUXq9ExNGoT606vJcxxe8ylwWT6ZH01nd0U8ucZkYp1mkDSD0Oaz1FRwiGW6pi2QQcLJm3lZilqfKYnO0JUO8iN3asR/7u0uiK8Pm/MAYfONm/Rlwvs5OoDA/hJhNXqnAEL6NQFTSsTYNNt1z1r/dOnzcPYOU2LE3BvfQjvBzaK6vikIWPdZvPK3NVYT3YfnDpwN9rZqeodlbJrNHze+d3iRoXOReNOrXpyYRNqpcpKtCjn8yxsTGoMTisaXsXwbUsNsfomnGytF1o3KlQ7DQK20tPznAZFQwuSygJ0xuhPWN2pRk/7Lzc8VRrrVGfhMX9d2Lt2GjQOOjFUwAA0HOof9PyFjS9ZQ90vOVxyM36o5IG15/oLEW5VviGhVnLh1A1a48mclN9bM3X0BKW+Apj1Wn58sK28JpX1vw/1MRbfoc+t9wC3U68N++rc5yxPTJ9PFEfpXbXyhuurTmAAnVRew+ri+tjLd3Q0SHvQTtaPoJOJu7Lo8KLTnIf2NL/GqoO1CGde4s9o78SyOlv8XDTAffGD32/NiI8kD1mqx4n+v9PkPrX8X8zUvgRpSz/XFARNPLL4Qalzs96KRUSssyoH1EcqnYsH4KuXd3FiLV38SSGaHSFzeHksXzPKKIJEUq8W3WRUl+oeq/9lWrU/t7FKPKLeqj9u0vkKJhvFmvKHn8zKQf+6MlS/oq2eODThdin/ETOjmJ/PV0uXdwHRmQQ1P2w9Hm2NxHTG6bQ3ynWOXlPfWL6RCWnUSS9n8+GX8JJUVhlUg780ZMlp8evaMv6AROWiJk/MQZ17r6L/fV0IQofeiT3CIKaDwuLzbO9ic9NL+KZQn+XKhN1L8Xs03X6+UYVN09jjGB6P/uJDNU8KSlKD1P+y26xXmZqLSp1mrQp6dJn+PfnOzxmypwlKw2hM5gsNofL43t5+wiEIrFE6iuT+/kHBAYFh4QqwpSqcHWEJlKrE6pAgP8UqwFHiAq7wZO1yEfwUh3IJouCeVoqRRoTxlqzG67X0WOlmdJAzxZnjDKwE6wNKByIpsagdjNyxp1B1AfjnZq4NVQ4/yvAuLcjZTlYJ2MZWktkPabIvuyt5EuODtrB4TVt42IWsAxh512c6oCkNHXcBXC+VkwW0hTbcG6UEB8O+8upIz5FE3GVQBgpviYXBRmzEIqaT9shkZrw2Y2816D1sk983XOI1trJPo95J7VRXcIqJxJnlq5APCeov8osJVSNsySKtaDHXB66kpERdG7FTSJvjpS93hKBz7zMcZCHEzV2aybtoB4uaj+7gFQ/RpAMKXUPIkUhICtsirNO6eeT18/9E6KFaqEiZcAV) format('woff2');
	font-weight:normal;
	font-style:normal;
}

.social-logo {
	font-family:"social-logos";
	display:inline-block;
	vertical-align:middle;
	line-height:1;
	font-weight:normal;
	font-style:normal;
	speak:none;
	text-decoration:inherit;
	text-transform:none;
	text-rendering:auto;
	-webkit-font-smoothing:antialiased;
	-moz-osx-font-smoothing:grayscale;
}


/* Icons */


.social-logo__amazon:before {
	content:"\f600";
}


.social-logo__behance:before {
	content:"\f101";
}


.social-logo__blogger-alt:before {
	content:"\f601";
}


.social-logo__blogger:before {
	content:"\f602";
}


.social-logo__bluesky:before {
	content:"\f10f";
}


.social-logo__codepen:before {
	content:"\f216";
}


.social-logo__dribbble:before {
	content:"\f201";
}


.social-logo__dropbox:before {
	content:"\f225";
}


.social-logo__eventbrite:before {
	content:"\f603";
}


.social-logo__facebook:before {
	content:"\f203";
}


.social-logo__fediverse:before {
	content:"\f10b";
}


.social-logo__feed:before {
	content:"\f413";
}


.social-logo__flickr:before {
	content:"\f211";
}


.social-logo__foursquare:before {
	content:"\f226";
}


.social-logo__ghost:before {
	content:"\f61c";
}


.social-logo__github:before {
	content:"\f200";
}


.social-logo__google-alt:before {
	content:"\f102";
}


.social-logo__google-plus-alt:before {
	content:"\f218";
}


.social-logo__google-plus:before {
	content:"\f206";
}


.social-logo__google:before {
	content:"\f103";
}


.social-logo__instagram:before {
	content:"\f215";
}


.social-logo__link:before {
	content:"\f109";
}


.social-logo__linkedin:before {
	content:"\f207";
}


.social-logo__mail:before {
	content:"\f410";
}


.social-logo__mastodon:before {
	content:"\f10a";
}


.social-logo__medium-alt:before {
	content:"\f106";
}


.social-logo__medium:before {
	content:"\f623";
}


.social-logo__nextdoor:before {
	content:"\f10c";
}


.social-logo__patreon:before {
	content:"\f105";
}


.social-logo__pinterest-alt:before {
	content:"\f210";
}


.social-logo__pinterest:before {
	content:"\f209";
}


.social-logo__pocket:before {
	content:"\f224";
}


.social-logo__polldaddy:before {
	content:"\f217";
}


.social-logo__print:before {
	content:"\f469";
}


.social-logo__reddit:before {
	content:"\f222";
}


.social-logo__share:before {
	content:"\f415";
}


.social-logo__skype:before {
	content:"\f220";
}


.social-logo__spotify:before {
	content:"\f515";
}


.social-logo__squarespace:before {
	content:"\f605";
}


.social-logo__stumbleupon:before {
	content:"\f223";
}


.social-logo__telegram:before {
	content:"\f606";
}


.social-logo__threads:before {
	content:"\f10d";
}


.social-logo__tiktok-alt:before {
	content:"\f107";
}


.social-logo__tiktok:before {
	content:"\f108";
}


.social-logo__tumblr-alt:before {
	content:"\f607";
}


.social-logo__tumblr:before {
	content:"\f214";
}


.social-logo__twitch:before {
	content:"\f516";
}


.social-logo__twitter-alt:before {
	content:"\f202";
}


.social-logo__twitter:before {
	content:"\f610";
}


.social-logo__vimeo:before {
	content:"\f212";
}


.social-logo__whatsapp:before {
	content:"\f608";
}


.social-logo__woocommerce:before {
	content:"\f104";
}


.social-logo__wordpress:before {
	content:"\f205";
}


.social-logo__x:before {
	content:"\f10e";
}


.social-logo__xanga:before {
	content:"\f609";
}


.social-logo__youtube:before {
	content:"\f213";
}


</style>
</head>
<body>
<h1>social-logos</h1>

<div class="icons" id="icons">

		<div class="icons__item" data-name="amazon"><i class="social-logo social-logo__amazon"></i> social-logo__amazon</div>

		<div class="icons__item" data-name="behance"><i class="social-logo social-logo__behance"></i> social-logo__behance</div>

		<div class="icons__item" data-name="blogger-alt"><i class="social-logo social-logo__blogger-alt"></i> social-logo__blogger-alt</div>

		<div class="icons__item" data-name="blogger"><i class="social-logo social-logo__blogger"></i> social-logo__blogger</div>

		<div class="icons__item" data-name="bluesky"><i class="social-logo social-logo__bluesky"></i> social-logo__bluesky</div>

		<div class="icons__item" data-name="codepen"><i class="social-logo social-logo__codepen"></i> social-logo__codepen</div>

		<div class="icons__item" data-name="dribbble"><i class="social-logo social-logo__dribbble"></i> social-logo__dribbble</div>

		<div class="icons__item" data-name="dropbox"><i class="social-logo social-logo__dropbox"></i> social-logo__dropbox</div>

		<div class="icons__item" data-name="eventbrite"><i class="social-logo social-logo__eventbrite"></i> social-logo__eventbrite</div>

		<div class="icons__item" data-name="facebook"><i class="social-logo social-logo__facebook"></i> social-logo__facebook</div>

		<div class="icons__item" data-name="fediverse"><i class="social-logo social-logo__fediverse"></i> social-logo__fediverse</div>

		<div class="icons__item" data-name="feed"><i class="social-logo social-logo__feed"></i> social-logo__feed</div>

		<div class="icons__item" data-name="flickr"><i class="social-logo social-logo__flickr"></i> social-logo__flickr</div>

		<div class="icons__item" data-name="foursquare"><i class="social-logo social-logo__foursquare"></i> social-logo__foursquare</div>

		<div class="icons__item" data-name="ghost"><i class="social-logo social-logo__ghost"></i> social-logo__ghost</div>

		<div class="icons__item" data-name="github"><i class="social-logo social-logo__github"></i> social-logo__github</div>

		<div class="icons__item" data-name="google-alt"><i class="social-logo social-logo__google-alt"></i> social-logo__google-alt</div>

		<div class="icons__item" data-name="google-plus-alt"><i class="social-logo social-logo__google-plus-alt"></i> social-logo__google-plus-alt</div>

		<div class="icons__item" data-name="google-plus"><i class="social-logo social-logo__google-plus"></i> social-logo__google-plus</div>

		<div class="icons__item" data-name="google"><i class="social-logo social-logo__google"></i> social-logo__google</div>

		<div class="icons__item" data-name="instagram"><i class="social-logo social-logo__instagram"></i> social-logo__instagram</div>

		<div class="icons__item" data-name="link"><i class="social-logo social-logo__link"></i> social-logo__link</div>

		<div class="icons__item" data-name="linkedin"><i class="social-logo social-logo__linkedin"></i> social-logo__linkedin</div>

		<div class="icons__item" data-name="mail"><i class="social-logo social-logo__mail"></i> social-logo__mail</div>

		<div class="icons__item" data-name="mastodon"><i class="social-logo social-logo__mastodon"></i> social-logo__mastodon</div>

		<div class="icons__item" data-name="medium-alt"><i class="social-logo social-logo__medium-alt"></i> social-logo__medium-alt</div>

		<div class="icons__item" data-name="medium"><i class="social-logo social-logo__medium"></i> social-logo__medium</div>

		<div class="icons__item" data-name="nextdoor"><i class="social-logo social-logo__nextdoor"></i> social-logo__nextdoor</div>

		<div class="icons__item" data-name="patreon"><i class="social-logo social-logo__patreon"></i> social-logo__patreon</div>

		<div class="icons__item" data-name="pinterest-alt"><i class="social-logo social-logo__pinterest-alt"></i> social-logo__pinterest-alt</div>

		<div class="icons__item" data-name="pinterest"><i class="social-logo social-logo__pinterest"></i> social-logo__pinterest</div>

		<div class="icons__item" data-name="pocket"><i class="social-logo social-logo__pocket"></i> social-logo__pocket</div>

		<div class="icons__item" data-name="polldaddy"><i class="social-logo social-logo__polldaddy"></i> social-logo__polldaddy</div>

		<div class="icons__item" data-name="print"><i class="social-logo social-logo__print"></i> social-logo__print</div>

		<div class="icons__item" data-name="reddit"><i class="social-logo social-logo__reddit"></i> social-logo__reddit</div>

		<div class="icons__item" data-name="share"><i class="social-logo social-logo__share"></i> social-logo__share</div>

		<div class="icons__item" data-name="skype"><i class="social-logo social-logo__skype"></i> social-logo__skype</div>

		<div class="icons__item" data-name="spotify"><i class="social-logo social-logo__spotify"></i> social-logo__spotify</div>

		<div class="icons__item" data-name="squarespace"><i class="social-logo social-logo__squarespace"></i> social-logo__squarespace</div>

		<div class="icons__item" data-name="stumbleupon"><i class="social-logo social-logo__stumbleupon"></i> social-logo__stumbleupon</div>

		<div class="icons__item" data-name="telegram"><i class="social-logo social-logo__telegram"></i> social-logo__telegram</div>

		<div class="icons__item" data-name="threads"><i class="social-logo social-logo__threads"></i> social-logo__threads</div>

		<div class="icons__item" data-name="tiktok-alt"><i class="social-logo social-logo__tiktok-alt"></i> social-logo__tiktok-alt</div>

		<div class="icons__item" data-name="tiktok"><i class="social-logo social-logo__tiktok"></i> social-logo__tiktok</div>

		<div class="icons__item" data-name="tumblr-alt"><i class="social-logo social-logo__tumblr-alt"></i> social-logo__tumblr-alt</div>

		<div class="icons__item" data-name="tumblr"><i class="social-logo social-logo__tumblr"></i> social-logo__tumblr</div>

		<div class="icons__item" data-name="twitch"><i class="social-logo social-logo__twitch"></i> social-logo__twitch</div>

		<div class="icons__item" data-name="twitter-alt"><i class="social-logo social-logo__twitter-alt"></i> social-logo__twitter-alt</div>

		<div class="icons__item" data-name="twitter"><i class="social-logo social-logo__twitter"></i> social-logo__twitter</div>

		<div class="icons__item" data-name="vimeo"><i class="social-logo social-logo__vimeo"></i> social-logo__vimeo</div>

		<div class="icons__item" data-name="whatsapp"><i class="social-logo social-logo__whatsapp"></i> social-logo__whatsapp</div>

		<div class="icons__item" data-name="woocommerce"><i class="social-logo social-logo__woocommerce"></i> social-logo__woocommerce</div>

		<div class="icons__item" data-name="wordpress"><i class="social-logo social-logo__wordpress"></i> social-logo__wordpress</div>

		<div class="icons__item" data-name="x"><i class="social-logo social-logo__x"></i> social-logo__x</div>

		<div class="icons__item" data-name="xanga"><i class="social-logo social-logo__xanga"></i> social-logo__xanga</div>

		<div class="icons__item" data-name="youtube"><i class="social-logo social-logo__youtube"></i> social-logo__youtube</div>

</div>

		<h1>Usage</h1>
		<pre><code>&lt;i class=&quot;social-logo social-logo__<span id="name">name</span>&quot;&gt;&lt;/i&gt;</code></pre>


		<footer>Generated by <a href="https://github.com/sapegin/grunt-webfont">grunt-webfont</a>.</footer>

		<script>
		(function() {
			document.getElementById('icons').onclick = function(e) {
				e = e || window.event;
				var name = e.target.getAttribute('data-name') || e.target.parentNode.getAttribute('data-name');
				document.getElementById('name').innerHTML = name;

			}
		})();
		</script>
	</body>
</html>
</body>
</html>
social-logos.min.css                                                                                                                                                                                                                                           12818         1711191376  plugins/jetpack/_inc/social-logos                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               @font-face{font-family:social-logos;src:url(data:application/octet-stream;base64,d09GMgABAAAAABzgAAsAAAAAM7gAABySAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHFQGYACJcgrNPL1NATYCJAOBZAt0AAQgBYRGB4R7G5EqVUaFjQOQme3bTfb/dQI3hoR3Yt0xJNpjlVjuuOuDHd2n38Rs6stnCPiGNqH8UJgox1RXOGizhYd7HWfNFhDNhlLCQ62V/5qGe7b3GMiFoTwKnwgV4WJTUREyRtH/eyQvAFrePgMyz9PfvnP7vGrmi5DURBzlkECwptEOz2/z/1wq9HKJUklBG0FEMCgBxUi0Z2zDXCQ+/8yVc13q4m+uwrUsW125/b+oem7Tsv39JbmiddHsW2b6TX/P18kgMDEgTgjv+ubNab3UuUnTmyFpSrsv1GaBBohle/ZlPy7kcpWu0tWWAjMcB5wUKEl5GOwkAv5+akat9A5bUzogmQAWwEKgvix590vvZ/fJad/aqlSXFDnVclp1AkhraFEmqFTFm2I7xXZKrTQdkOSOlQroHWFHUegBSA/S2Zr5FnLZVhjqQ/+RTetLkM1hgTr1fyyIBkiQ86tBgEiPKfK8bxyQ3vD2OWU0b02Bw8zidg9uEbh++k5zIRjmUU+aa3EDca6dK1jefPFL5hOSqfEuYOdavMuPr3oJ0FV1pbkAqpfAAAU6cjZcHvfHiA21C3dQomuPTscBDWpo+stQfKGSnDAnu4Av6BfMi8pL4wpdmLvyupLc3PwvwBAEV1c8lH4FMkvnxQoNZixZ84Wzurc73fXY6/8pD6SsAgMqlWnXoUipWIU2QwzH1yMyKF+xalWsPiO6FPLUytOoXosagVSJRIM6TboJihZq1qpTv2G9MsohCpgxAciHR0bwvxBdkPhfRBb/K6TgDTSQAYABUgnwgJQBfCDtgABIByAEUgSIgJQCYmhsIAFSAbBA2gApkCFABiIMcohwyAkRPnJSRA9yCokABsggwAOSD/CBFANCINUAB6QKkAViAXlA+gD5QEYABUC6AIXQABRBIz0oBlILKIGGLKgB0gioA1IPFUgLoAEaNGgEEgCaICLFhRNRgot8EQkuCkU04OKRiDpcFiJNGyiCiG5cgQioQBRAAtEABSQEGCDNAA9IK8AH0gkIgPQDQiDDAAekF1ABJAOoRxzlAEbDpK/BN5I3zdxYED8+Bs0b8KmEgM+QhAIKnSRDCEo3BCUih7rwuaS5YsKZvudzZEcOdUEGI3LdvyAFeXFcHunKKLGJK5nO11rpVYwN4zQMrfY6Ba6zybQIIq+F74cDJGlobUm9zurg1asisaVJXW2pDUNdUuJ0otzNYKW1oW50XVXzqxX5tnKzRldpnXRLJT98xwvqlTKmd9RmstnS/GxxlbNlqxZuaKx25VpHQYdrrc0v6s7vNN5AZBMvlTxHlQ1e4NqyVk1Wsw1Ap5pYrOd0z+/XhK2cYoYhLwFCZpSnZbqG+N7epOvpp5QyKy0sfEpWgLhVxAPIMnUMqOZavZPP6qH1D0ulv46wcJQ35koTLpVPIi5NlVG+V9SKeeH7JdpI+jOAFhvLCO2wRB0y6e4QApZQHLJgf9GOh0XdxLd6iHeCO+xuq5sSqzO3Y4iWHIm4q0sHuGxjiAoIcmlA9uQDQvzdIwDo4/cYi49PocSgjUWpeI2XK1YGkKnXCo+6f6YIHZPbXDFpx7rUc4ZoA+0sT9wO1sLDokkuypLplkU3LLppZbUNC1KrZnsHN2Llw1v7g7TUXL63dOy+fnuXv+dZtnFtM1P/sTJh6rfjpZR/ZBtWpmu7VzLdCTVxFzJDFqBh2JJrRNOA7vCE6Zi2ddG2Abk8um+vZV+xcrZjEehcmth/wOH9PhsMRBTRMHRkuvNb9E3rKelnozC6EXuPhV3JPb1gSuMVWUa3IltkXp5ZPN4Lncdh3Zwy1/qWm2zsLcW7u/wUW8wT2yGWY1tCkiuxCNkPLAfuLfy/aMJQvT/rpKgO4rrIHsVCGeSSRSM06dRj7o6SFrcZ0nSU6T9i3RKel+dhCGgUnYIIYsi2sUjpAHHNBQBPIvDy1gCyfj/valZmKnlNmc7ZuCMJ8fTUYYqnPmG7BrKUjg95GtUsCQnyTZR2DFOZ9sFuuYZhpb57JKjbNgW2mdgVox3F9lt3g07jVtPaNiai4HIBMA8qMggws/v+ZCCsyBH5Vrm8QZuixYI8fzVPF16Lt0ts8Q229EKZKoeo7hU95JgYi41RCSrLjrgLAPXOSzxtMhrRiAt3KFkKzUEQYwQw3AmG7Q11hFptUZanIKz2N2YEAWbigZheL6U8s2J2pgPIchKWE80xOlUXoeY3Hq4Uo1oT0GzjNy9RZlYykUdagovB4OjKbvIPT9jTj1gcOhggvkE3RU4lEMQeoGE+hFC51LvNPtHPntZn+xNBBBDAAEP8bXFf2FcxlZWookjJFUmVGw4CdAqpRwM4D3AxVkxWUcpj9934QpJAsZ0aspG8SPl+sxQv0Vix2NBBj5ana7WgPFJmiUqlVc/Ur/Bny41b9+j9282V5+Jlt3X3IXtwJ+i8ILzXpjOrYn2Oza4RvsW2xSY3ebE0iEmmLw07iPdiWDQBoA2ESqsYi68Qsi//BfTzwVhPmKzRkLXEy2uovIHCTt6eOXl4WCi4g8mbCOJpLiVTSoJFGxbqs15lJlcrAVamw+MlEEdoCE2h5QwIseFwPowcLI8rVgSAgih44dRzTT2jzPFkNd0xaiMSwpVd/pnux0RlogIh+6FswDWbiHg8UcFiU/oaDPH1HNt58f4xffSuHm+5JWYW6Hybzy6ypTlL3Kf3+AP2MD80vINkXQCoPgUQzCkICbKBq38fyeZHZUBmTENsOTj/rDecDCN7BvH9vi0t8RkAU7gDCFnAG0eXbHRGylAqvEuAku5hYZqV9QKbDnZ3wr2979qT2i5lfGaXyKmJilnJqEz3a2GCCIaAxpvdtX1CGfLOJS5lWlhEgIaIBwmVuMsCxNuA6jopjpXi1vQqMZf41VvtEEq3dQIanbuTcAzZOppQDpvmNrF42ngG4hMVycrVaDHXqC1C9jS3jsXrx3T+HeI1Y7L4nY9V1CrIGmqZiwPx1dE+fXXXyh7cPWCuDyYSkBHicsOWUnm3nm45SjSpemc4uBJNeXrQ52FWa7RHk1suMtX+hyf9wdeBVX7y4t38wuu3S4tpWW1oxSnPN+tzI1IaNc0t6tDzsWtE7ny5tTJzq9eZvbv+fPN++9WLrQdLb59P+TNxSOdfIZ72M92nhPf7kA0GZ7TlMGyRM/o6GC9vpZ8f2gQ01g4dDNCfqAPLnVVHrjeQFVtG6P8YIkuTRDMpuesC0zVngQUd7YPtWJosA+JVzZauRpbDpOR1Ryj0c0EP9xUyQ1VsVSoiRdf+W9d2vRGTFu+rGR+ISOVCoVOeVqlE0f/ygLX6QqETZX/XiEe1BoJ8WiqllzAUCSX+5FlbMcNpim22xTcA1UlgcqiVorZ5Jbe8qROglzIIDSIAxg5tb/Rqoz029GqSfrFjE7oBypDNbTetW0rDBqzjbvQ5ej+hocOSzUbKu3fXDMnqYsZiYLFkgE7XsOmlXad8kEGvGTUkrxGe8rFJW7iJU/7uukafuFIqc2B53q/H5lr/pO14G53zvG/f2EhfMbuDU8+1Hq0WAp4lLh2tHarue6WiRj4CLUZGcsPlyeya6k2RcxSzaSR/JfXKxftWwExnZzWizYgSyPNP/S3IJYSoQbwmyq6EB0BK09UZOSWXq6rWIPwt71Rzrct7kTti1PvlvCanIafyQEEaD76c1oA3e18L45W4F6/9tvxprNRMNfe8/LE14c/EihuvUN/0pPnE05nHmmN7HvzQt2GYRTMYOY4LxSC3PXF3fJZU1+6YKqMqUreybl7TlSCC6z2QAkYtX4JF270XW3fm1jEGslqkJb9egQWsl/QZ0MRdANXSFAEdRh7gteWGWY/utuCfLqrONEdjiHDh4Fas/RvAgM6cqmzietc0sNbN5enyMKB1bcIVxo+lQaCUEeaYWy0ggG2BZOhazA3sQHIVXaVNNVyoJluJ4R68eDUff9E/XKQzKZ6ViZuparq0KjcQN3r4zl/5qFqCsKXTbx0FNMz2+H6/a/LA8MxaAKGH5R2z+TolK/UVvW4WNWW6hdpLT+K23Sfx7PR6bjvz0oq4k12yxF3EkwMr0juL46xXjZOFIYJ8/4S+iqHhw8UvceRXx/c6+VMaRm2ykSDbyrURaTarFFdjXEpkuJrWoFOVSrSszc+oekXlVl2YGtYvz/Li7TKLk/fiVHO5EdjzWrGhcWks2kwpU4BI5Exqofj9+ODHjmmnf5LXiYZtcsfZ7f+xGYisY4gGJNm5wO+wyGSE56Kk5djSgFwqnPLPY3+963iAjpL1/K90c6GaZ8FBxEYWwY6F7REb/47yGKAZO7WEMCQQoqhQnvFEdU6fPvksvLwS/lhs9LTG9FJzDuTwT50681JjKhZImIlR87/UCIGWU06UhmunfzrJuUfgSoOXTfcTdrZG1IWXHxg2HExNFxMl4avkhbRKSWgePFi/x1UiS+dhHYqNCgdG2ImQ2Wv4WA9yW/UQKk3OkBzL94NZXMGKel0sVWEcH3ROaQmjjPeJycsUZ1TWipUooHBHQGiM6Jzq40lnzMgxYMNU+tMhB2Q8/MQyLuPNfA6tETeu0jOWRizYdwOviY0ZSXzUXUNiltD18V/AYZbnKL+QjvtCdvDK3oDeFakGTtjoJawZ5KHGohUMyvet0XgHUpRVzasGG4KYgDRABGJOk0gvauKIW3c1ph0il/Tua7DVo/+Wx0py9syK7tnEAfoA0Z4aaHtxLlzO1Cn4msMMgXgX1YUPxE2nTv9QG4C0IuguYTmuFUftDguElwTy+sIsIeOVBCcP7nGbnxATue8GS5L8nil3nZ4SzWEHGbidgvtZP1mNNa3PJ0gXXwQxB5sH+dSiOC/8vKLhZQOC+XmpkTDFLxr0mSBf5MwUJUV5slkcMTPyzOS92+mW+BPP5hb/Sg2X/Gwzbfivhw8erGmOBgSGAH9ESPul2cFggK40MrJ0fMpLI8fvXuJ/ur9kDIvjWlY+meMcRjLybZCBdaR8A07vuyX69vKPu0tHNTSZsWI+im1EprA/rS96piwLN9WXZtyae+vvTG8HY6Ztls/PjubSYSdb6MIEMDipIdkRNyl90r1ZnBN/S0hbOoYj7twb9RRV5HrV23HzygVNWyA6L46HErcGorereHd5KmWu31RqKVhlpKaPYWPYMc1GYuL8MlCC4EeWKozNGbZ7MENxPPEGLiOvM/3/FYDS5w0Ge0t1kbrwkPz0KPZidaw6VH7Y1xN6qPZC2io8ZdGzwxazf62Q/HBdcR8BmGSsOTNy1LZL22pH9Kcsex9jk24eLl6UuCJkli38lm1WXNKih8M3SKyPVnikZm9wYxjTg9QuDIYU38pAY4mRoxfG1j3sEscpPjCiv7Sk5szBUXUxK0Lq1nUZ6RvcCpLl1FDu+g07DeyVp4wYLCneQro78cJ6LgZDjKwtgf9LrwtbFe/uOAIyHbrScQnZeN7uigReWihS5T+0/8HhHGFL6HUgwGorWQ62ZJlRajBIjbKk2baSjNDU0K/MGSW28doyTUmJpkwbq2e9C/Izg7Yqb4pb56boKDt1OymXvde67vS1ARN7nzC31nlU0fuMJfMsNQ0itBVZaQ32u5BPChmJnobJwy8jkPHL8Ym4Wuw8tBMXQxxntecBiIdzYbuxLia4o1+RvOKZOFRTUtPyp8+Sny1PSnZBE7x11rSRBkapEys1PzoxfViETFeuNikn4AzYpimZVukp47U+8ea9GS81opxIMm0sjrDuaeASzbTAp+sIuLE0cmS2WPOybP09Lx3WOcbASB1laTBV8qJU92brsiQdPCuvQ6JUmJXewsuGy0bxO4k1tDaYojFbQBdjthc5UGI0SDPj5HJzRqSe3V+3ZNpEiTw7BbuL5pulVwZ6ngCZLUkKrmUBEpQVZZkwfYDOrNoTB15aHqQQpXMJvg+WWXh8If8rZx4YlKVNlOzqr+nxlXQG2gI7JQqfQxszpXm0gvanpYsuDFcOiWbYwOCqwSbDZvEKDKGKgFkh3mxoqoqexBQRNvLyN3oN/dulUWE1h3rPBuLVhfwLWyO2XogIw7xOflyEf672o9SzZzyI9+n3QdWr/oB+hoPJ2/+4yiy5Vz3ez2NKaNIAKc3lCFYlubFjsK4nnjJIEc/m713brT1H+DEHmfOD4CH2Ej++qs1jaYvl9fmsfG13BBcqOPuT7vdzdyDo6sqmtSIAaaVtKuD8rnJeIkU2+PdyPmhZtHRFz7hWH5qEDqWQKkdSbrin7ymjxS0qMXxbEYPDgfjr19RZ3eokPpYGNCcf9oEF+SDaIvrR0fFD5CUT1QRWdi4CP22A1k/gJaoMrBHJwOpGyfx298+3hAO/xtHcOBPOLbaPpRCv5F9BRAXQ9zT58evzzSL0ArRIhXFismiY8doFBPOCMlx4OyYJ0x6HG4tV/QeTqK1X1seDPx/dFVrT0CSsMWJchb2FPC7CXkFuOZylAetGtwZMkVWjRKggLGYoMst/FjLUPlQJ1qA53e4LiVHX6kOFWFFktBScPAO6SiX1VfxZpeiy9SlsnL9y2L9WBV+27fPlmce1p/fXkQG2V7d/QkBCoOCtZ9tQVgNa3LaL5vP0mFuuMkYrIsLiZMxV5oCJ3QImjdnH94yxC6c6fBlClAKqOK1weNYYmf7GIN/EkKBga4p88F2E2V7drbFwKuUBFFYRTL3GXWPi6GWwd3bg+kPIA4/MkFHbyhFULibdbzRXQroGBUt75LYjEgF8LOGGxfhC2P3zBzc36mKoRbATbuLqAuw6UcG57k3QQa2IZ8dtwhc2Di12cVzDii0psV1PHmelJrE909gQuxd9Z81pFnF923/qzUK70adOhfLmSAN3SxH0gBm1oIZgZceprPya/Z7r7owmLsm0iedP+fwr0hMHOx3zM+Udtp/zhDussBz4e5PbF41bgxdvaR7zj7OrdtYkFcNyyJwSqz1e+KQ5dhYXCG7E+rD89v+XuGTISnWuSpWrVoY4MtToMRutYf7xqGyR3RSeQknh5cKpp2atPjQjojxS8L+5hTrQ09UU2MRgGAy0Vlq/4AbDls5ssgKQY44EsALUBwysl6Gvp7+pX3+BOPsF7UU9kYrwxaAXzThcch+2oDgpZk/YKZoocsHUILsdFmagvPIVBmTtRflhBnXfBhZeossWVeQm6CQ43IYz5i738+fUeZfolxNXU8VU0oR9WzadXBKa6v0w5uFgQza2GbNW7p9AvvcIYUwwhcaBOYADzfemQFyIA7iAk4ngaRYFUFjE3GblB3/g/0GEA41dXNqSHA6FszhHFG5Ra4hiPu7h2cLwXY/hwsU5LDw/K7UF3DoNwx1rUVCbDQIQal0n5CtDb3ey+dAujqAHbYBRsH+CwOmT4E8TQWjUK8HVf1p8VsMYGIjpoxN8XIIEf0SJwqBejYC57s+aV/RxZzjF8lvj2rLDMvHk1yTP81dZ/u2PZeztj+XvJzCoYwNvj19VocyiD5A8qnNniMM2LFSXl0aulHYqE4NHcQyLeLnGOn6myhQwXH0io2siNTR9f3RB6fzJntTMaCYlEWvBpnb+a+0sGI4i2h2LOXZwROuKc7W0OGiHaY7OyWWxDGZluRqbDosPlw11xZkQB3KJHxEfuRlEHK646Y+VImGtW3b4Rsg1IdvkiDv5sNglPuyEgWnQBORmAQbXtTj9WokDyAAxJl7vNzH188vSRryP3Cd6Dazy8nPCW2LkE1MmyqPjo6k1NdSYVYU8FF4LQeKWjNxQFOyXCWGGZISZ8CYRfDfLOBYLahGhyHclDPn8eKYNkkHg0xHNKdqnsUx0KOlkGa3TnlcfpI19O8W/AJxbfGbxuQMvqjd33TgZlTAagHSvS1AawVggtaY7+wko4/mXREWOh7yOrFIJ/d7bjzAnMzrsPqjqmck+dGSGPohAii/ovpMWNI+y7ssBkMc5cIKArA1u41CCdmff5NxwOm9SAKY3gUprWBzdGBYPK3yXxi72jbmZ8DjGvv/yfOl238JR+FEFBaMYYNisfnra6kpaU0ZsRmU0GqO4HbdGHTCN23137vWAtO05YFHPQvqWTA9VqD9xUriC2lMNCARJYhRSRSI+jTKuQ7oMFGdIKiTF5cHfgw3XuBZ2SXi4OaWi4ov40aUSVXjqXyG401y3YOeaNafVmxIn1JiKQjl7g618Jg8SjnqqVs04vvNLDGnemYSk/aZXZ6PJLSm/JLY5GLRIaLiJyfJV5r+GW1I6OtH5NGgx5dfUtTK7W//gAWYL6rbxx7W+NeC+E2XIGZU3QS/n2cQtdBsb22un/N6XLiX3TUo3e5gRD00OSy2GccKqAlQcBA5517jHRpaURmoDkgVdguQA3ctTkh+IeGnJWKYAitSQ0DSFZAdk4EkUs7xHrFB1qWkGyhgoQ3SlEytRHzOXiXK9T0sdtQgdoku/MU2Y9tEOgCgLwYn399/2vRCNaUjzBot6A7xUXq9ExNGoT606vJcxxe8ylwWT6ZH01nd0U8ucZkYp1mkDSD0Oaz1FRwiGW6pi2QQcLJm3lZilqfKYnO0JUO8iN3asR/7u0uiK8Pm/MAYfONm/Rlwvs5OoDA/hJhNXqnAEL6NQFTSsTYNNt1z1r/dOnzcPYOU2LE3BvfQjvBzaK6vikIWPdZvPK3NVYT3YfnDpwN9rZqeodlbJrNHze+d3iRoXOReNOrXpyYRNqpcpKtCjn8yxsTGoMTisaXsXwbUsNsfomnGytF1o3KlQ7DQK20tPznAZFQwuSygJ0xuhPWN2pRk/7Lzc8VRrrVGfhMX9d2Lt2GjQOOjFUwAA0HOof9PyFjS9ZQ90vOVxyM36o5IG15/oLEW5VviGhVnLh1A1a48mclN9bM3X0BKW+Apj1Wn58sK28JpX1vw/1MRbfoc+t9wC3U68N++rc5yxPTJ9PFEfpXbXyhuurTmAAnVRew+ri+tjLd3Q0SHvQTtaPoJOJu7Lo8KLTnIf2NL/GqoO1CGde4s9o78SyOlv8XDTAffGD32/NiI8kD1mqx4n+v9PkPrX8X8zUvgRpSz/XFARNPLL4Qalzs96KRUSssyoH1EcqnYsH4KuXd3FiLV38SSGaHSFzeHksXzPKKIJEUq8W3WRUl+oeq/9lWrU/t7FKPKLeqj9u0vkKJhvFmvKHn8zKQf+6MlS/oq2eODThdin/ETOjmJ/PV0uXdwHRmQQ1P2w9Hm2NxHTG6bQ3ynWOXlPfWL6RCWnUSS9n8+GX8JJUVhlUg780ZMlp8evaMv6AROWiJk/MQZ17r6L/fV0IQofeiT3CIKaDwuLzbO9ic9NL+KZQn+XKhN1L8Xs03X6+UYVN09jjGB6P/uJDNU8KSlKD1P+y26xXmZqLSp1mrQp6dJn+PfnOzxmypwlKw2hM5gsNofL43t5+wiEIrFE6iuT+/kHBAYFh4QqwpSqcHWEJlKrE6pAgP8UqwFHiAq7wZO1yEfwUh3IJouCeVoqRRoTxlqzG67X0WOlmdJAzxZnjDKwE6wNKByIpsagdjNyxp1B1AfjnZq4NVQ4/yvAuLcjZTlYJ2MZWktkPabIvuyt5EuODtrB4TVt42IWsAxh512c6oCkNHXcBXC+VkwW0hTbcG6UEB8O+8upIz5FE3GVQBgpviYXBRmzEIqaT9shkZrw2Y2816D1sk983XOI1trJPo95J7VRXcIqJxJnlq5APCeov8osJVSNsySKtaDHXB66kpERdG7FTSJvjpS93hKBz7zMcZCHEzV2aybtoB4uaj+7gFQ/RpAMKXUPIkUhICtsirNO6eeT18/9E6KFaqEiZcAV) format('woff2');font-weight:400;font-style:normal}.social-logo{font-family:social-logos;display:inline-block;vertical-align:middle;line-height:1;font-weight:400;font-style:normal;speak:none;text-decoration:inherit;text-transform:none;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.social-logo__amazon:before{content:"\f600"}.social-logo__behance:before{content:"\f101"}.social-logo__blogger-alt:before{content:"\f601"}.social-logo__blogger:before{content:"\f602"}.social-logo__bluesky:before{content:"\f10f"}.social-logo__codepen:before{content:"\f216"}.social-logo__dribbble:before{content:"\f201"}.social-logo__dropbox:before{content:"\f225"}.social-logo__eventbrite:before{content:"\f603"}.social-logo__facebook:before{content:"\f203"}.social-logo__fediverse:before{content:"\f10b"}.social-logo__feed:before{content:"\f413"}.social-logo__flickr:before{content:"\f211"}.social-logo__foursquare:before{content:"\f226"}.social-logo__ghost:before{content:"\f61c"}.social-logo__github:before{content:"\f200"}.social-logo__google-alt:before{content:"\f102"}.social-logo__google-plus-alt:before{content:"\f218"}.social-logo__google-plus:before{content:"\f206"}.social-logo__google:before{content:"\f103"}.social-logo__instagram:before{content:"\f215"}.social-logo__link:before{content:"\f109"}.social-logo__linkedin:before{content:"\f207"}.social-logo__mail:before{content:"\f410"}.social-logo__mastodon:before{content:"\f10a"}.social-logo__medium-alt:before{content:"\f106"}.social-logo__medium:before{content:"\f623"}.social-logo__nextdoor:before{content:"\f10c"}.social-logo__patreon:before{content:"\f105"}.social-logo__pinterest-alt:before{content:"\f210"}.social-logo__pinterest:before{content:"\f209"}.social-logo__pocket:before{content:"\f224"}.social-logo__polldaddy:before{content:"\f217"}.social-logo__print:before{content:"\f469"}.social-logo__reddit:before{content:"\f222"}.social-logo__share:before{content:"\f415"}.social-logo__skype:before{content:"\f220"}.social-logo__spotify:before{content:"\f515"}.social-logo__squarespace:before{content:"\f605"}.social-logo__stumbleupon:before{content:"\f223"}.social-logo__telegram:before{content:"\f606"}.social-logo-threads:before{content:"\f10d"}.social-logo__tiktok-alt:before{content:"\f107"}.social-logo__tiktok:before{content:"\f108"}.social-logo__tumblr-alt:before{content:"\f607"}.social-logo__tumblr:before{content:"\f214"}.social-logo__twitch:before{content:"\f516"}.social-logo__twitter-alt:before{content:"\f202"}.social-logo__twitter:before{content:"\f610"}.social-logo__vimeo:before{content:"\f212"}.social-logo__whatsapp:before{content:"\f608"}.social-logo__woocommerce:before{content:"\f104"}.social-logo__wordpress:before{content:"\f205"}.social-logo__x:before{content:"\f10e"}.social-logo__xanga:before{content:"\f609"}.social-logo__youtube:before{content:"\f213"}
social-logos.woff2                                                                                                                                                                                                                                             7392          1711191376  plugins/jetpack/_inc/social-logos                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               wOF2          3                         T` r
<M6$dt  F{*UFMu7wb1$cXݧlg6P(TW8h{g͆RC{ȅ<
bSQ2F{$/ Z>2߾sj拐D@o\*rRIAAD0(Hgl\$>̕s]oµ,[]znӲ%u[fM 01 NiԹIӛ!iJ/fe{e?.rՖ3(Iy$~jF[S:  B,yKgiڪT9rZuHkhQ&Tśb;vJ4䎕
aGQHٚrVCMKa:,HAH)o9e4oMvn~Ns!QOkqq+X|K.`Zˏz	Uu  :r6\ǈwPkNjhP|0'/̋K
]/WW<~2K
f,Y󅳺;)*iסHX6C#2(_jU>#Ө^TD:M	j֪Sa2!
1ȇGF]_D+4R	|  H Rbhl R@ )!@"rp	>rRDr
  B  
by@ @F @  A#=(R(,RH4h  "ŅQ|	.
E4⑈:\"M(n\@@ $  H+	B  P$G Fä77X?>𩄀ϐ
$CJ7%"𹤹bsdGuA#rݿ yq\(+ZU4:ɴ"$ihmIի"I]mC]Rt`nt]UrFWitK%?|2wflqenhvZGAk/4@d/<G^ڲVMV@Xtׄb!/Bfeޤ駔2+-,|JVU2uZKp7J.O".MQWԊy%H3D2P`юEķzw;n3cKlc
ri@B# OĠEx+V
\1iǺsh,OâI.ʒE7,ieRf{7b[\t~{Yqm3S2a㥔dVkW2	5q2CaؒkDӀ阶uѶ<oe_rc\>D0td[M)g0{]=`JYF"[d^Y<aݜ2l-Ż[!c[B+,-hP?뤨BE#4ct?bahbȶH q O" ~?jVf*yMٸ#	a>ay,		MvSna{$6[wNV6&r0*20d VAł<5O^KlB*=Q	*ˎ K<m2шw(Y
Ac0	uZmQ 7ff⁘^/<bvr1:U7Zl7/QfV2GZnOӏX: A7EN%a>PԻ>ϞgA Cmq_W1HIt
G8p1VLVQcB@H~/XAk<RfJUԯgˍ[͕eu!{p' צ3b}ͮŶ&7y4I/;bX4J/XOѐkNޞ9yxX(ɛi.%SJE^e&W+V%GhMp>,+V(xsM=d51j#]De!l5x<QbSy1}o%f|.9Kܧ0?4d] >)	Ge@fLCl987#{-- SYGltFP*Kaavw½ړ.e|fȩYɨLkaƛݵ}B%.eZXD	ۀ:)*1[Jup:P6xxh1ר-B4t5cU*j>}u=`&rÖRyn9J4zg8MyzaVkG[.2'ׁU~KiYmh)7s#R5-kD|2sי|~ՋKoO3qH_!3ݧg0l3:/o4П˝UG7[F"KD3)5gX,U͖FäuG(sA2CUlU*"E[vHBSVDBe׈G|Z*0	%Y[1im7 I`ry%2" moj=6j~cʐm7[Jn9z?ÒFʻwbb`dNװ]|A5$I[SFR*s`yޯZxoH_1Sϵ%.{F>-FFrMsi$%VLgg5͈O-%A&ʮ@J9% -Ts{;b&!@Aր7{_㕸iL55ĊPәǚc{зaE39 =qw|T**Rn^ӕ =F-_E۽[w1Z%^] FY.4GcpVΜlz40umƏA[- mdZ@r]M5\&[x5?\3)j*77z_Zo4~kZ :%+n5eKO'zn;Ҋ]]ē+;W!|/qW:SFm ʵi6Wc\Jd֠SJϨzEV]/2TsZqi,L)SHLjǎi׉mrc$ٹd碤Ҁ\*cxtsgAF;0$PDuN>,XlRsO:Rc*HQSNk:ɹGJMvFԅ6LM%䅴JIh<XU"Ka
F؉kXr[*MΐY\z],UatNi	gT֊(pG@hIg1`T!d<2.|73F,wI|]Cb_a(BvހN%ƢxRUͫ4@bNH/j[w5"kգJr̊ ўh{q.\)xՅMNP".a9G,!'qK)waY?Y5'H_1Ԣ8/ey0/ _%EyY13Jl3mi DH`42t|K#^dZV>F2mu|N%KG54b>mD?/z,7՗fܚ{Locmώa'[08!7)}ҽYKH[:#UzqM[ :/xwy*eTj)Xeac1Fb2PG*{0Cq<.#3{Ku(bu:T~zB*<eѳp]qd93rԶKjG,{cn.^"d-mV\Ң7HVxfopcӃ.@c=)>0Qu1+Bu
P;앧,)B;z.C-K[82q	x^Z(R?aKu j+YdQj0HٶЯ%2MILg3*o[(;u;)׺{0yT%,5"YiO
/#Z<Cgsa.&_8TSRϒ-OJvAuִF+5?:1}XLW6)'ئ)V)>/5H2m,iʹ4rdXl=/9Hei0UTf$<+CTˆF;561[@c9Pb4H3rsF_dD<;曥Wz -I
ee0}ά^Zs	Yx|!+gMt;%
C3y.Wf&f
Y!lh67zۥQa5zՅ[#^üN~\Գg<Aի~,W=cJh )V%c'2H]ۭ=G1!?ci|mw*8sw ʦ" im*r^"E6r>hYtEϸV*GRn)-*1|[ÁY$>4' "C%Vv.?mO%FvϷ8-_AD4"Hqbh2\x;&	UWǃ?Z$1b\<.^An9FLUD ,f(22>T	֠9QCXQd<J%UY)lrؿV_ǵבWB@BgPVZܶ[2F+"dU怉&:|B8px Đ`k|]^ݭp*VL]cewvC̐QT.&o4WBK{#|,B77bEn:QMAgm6-vq\Ê-)]Og&=}giq}BѧNHwK`eǩ&.ɴO+;3;{[oi󏳫v$rȜ=^9vndJuJV821alBI©f>4#<R𿹅:`VZÖlc_8E=Š8\r8)fO)(r fdEau^U&$8܆3.yWST҄}[6\0`C6V@aL0Ɓ9@\iPXfA]\ڒ8GnQkb>]9,<?+:kQPj]'+Cow.mQOAh+Z|V|\D ^ϚWqg8[ڲ2$WYe'0co_U̢<sg6,TFv*Gqx:~0\}"k"54}tAɞh&%kvk,"9vpDs8hiefeuřrD鏕"a[vF5!;%>섁if׵8Z 1&^71F'zs[bS&ʣ㣩55ԘU<^A▌P	ad&|78jw%xA)ڧLt(dӞW};ſ [|f/7w80tKPX ;	(DER	ۏ0'3:>>td>@/输49pnPvgp:oR 7JkX+|.8ƾ|vQQ`ج~zJZSFlFe4F0}w9`QBLU?qRSIbRE">2CgH*$߃׸vIx9ѥUx_!\`5՛'ԘB9{|&zV8KiޙWg-)$9HhU濆[R::4h1Ե2[fǵ5e7A/-tkޗ.%MJ7{MK-qªTy׸FFj] SxiX Ԑ4ddIGPui(Ct+Q3rOKK1M(iHzT^DѨO:12wtS˜fF)iH=k=EG[b,	P"7vG08ٿF\/&Wp/P4MM\N7`6,M#+␅u+sUa=~pkfvVɬ{w9:ɄM)*У̱118i{,6q]hܩP4
KOp.K(	=cv?TkQwbh8S  s4etqן,EVYˇP5k&rS}l
ci¶W?[~>N7s=2}<Qv9uQ{c-!A;Z>N&ˣNr!{=op}6"<=f'O3R,\P4z)̨Qv,]ňw$ht|(	J[uR_zj(zK(ok3)RxӅاDΎb=].]Fdy7)9yO}bD%Q$φ_IQXeRѓ%ǯh?1ut!
z$ͳM/B*u/uF7Oc`z?<))JSn^fj-*u)g;<fʜ%+3,6{y"D+*pu&R@G
GR&yZ*EZc@g2(Ơv3rƝA㝚5T8+#e9X'cZKd=ȾK5mba]ꀤ4upVLpn˩#>Eq@)&O!ٍנO|s>y'Q]*'g@<',%T$\tnM"oϼq5vk&.j?T?F)u"E! +lNj"esocial-logos.php                                                                                                                                                                                                                                               1014          1711191376  plugins/jetpack/_inc                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <?php
/**
 * Social Logos
 * Icon Font of the social logos we use on WordPress.com and in Jetpack
 *
 * Reference: https://github.com/Automattic/social-logos
 *
 * @package automattic/jetpack
 */

define( 'JETPACK_SOCIAL_LOGOS_URL', plugin_dir_url( __FILE__ ) . 'social-logos/' );
define( 'JETPACK_SOCIAL_LOGOS_DIR', plugin_dir_path( __FILE__ ) . 'social-logos/' );

/**
 * Globally registers the 'social-logos' style and font.
 *
 * This ensures any theme or plugin using it is on the latest version of Social Logos, and helps to avoid conflicts.
 */
function jetpack_register_social_logos() {
	if ( ! wp_style_is( 'social-logos', 'registered' ) ) {
		/** This filter is documented in modules/sharedaddy/sharing.php */
		$post_fix = apply_filters( 'jetpack_should_use_minified_assets', true ) ? '.min' : '';
		wp_register_style(
			'social-logos',
			JETPACK_SOCIAL_LOGOS_URL . 'social-logos' . $post_fix . '.css',
			false,
			JETPACK__VERSION
		);
	}
}
add_action( 'init', 'jetpack_register_social_logos', 1 );
twitter-timeline.js                                                                                                                                                                                                                                            351           1711191376  plugins/jetpack/_inc                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ! ( function ( d, s, id ) {
	var js,
		fjs = d.getElementsByTagName( s )[ 0 ],
		p = /^http:/.test( d.location ) ? 'http' : 'https';
	if ( ! d.getElementById( id ) ) {
		js = d.createElement( s );
		js.id = id;
		js.src = p + '://platform.twitter.com/widgets.js';
		fjs.parentNode.insertBefore( js, fjs );
	}
} )( document, 'script', 'twitter-wjs' );
.gitignore                                                                                                                                                                                                                                                     34            1711191352  plugins/mailchimp-for-woocommerce                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               .DS_Store
.idea/
_test.php
vendor/class-mailchimp-woocommerce-admin.php                                                                                                                                                                                                                          85037         1711191352  plugins/mailchimp-for-woocommerce/admin                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         <?php

/**
 * The admin-specific functionality of the plugin.
 *
 * @link       https://mailchimp.com
 * @since      1.0.1
 *
 * @package    MailChimp_WooCommerce
 * @subpackage MailChimp_WooCommerce/admin
 */

use \Automattic\WooCommerce\Admin\Features\Navigation\Menu;
/**
 * The admin-specific functionality of the plugin.
 *
 * Defines the plugin name, version, and two examples hooks for how to
 * enqueue the admin-specific stylesheet and JavaScript.
 *
 * @package    MailChimp_WooCommerce
 * @subpackage MailChimp_WooCommerce/admin
 * @author     Ryan Hungate <ryan@vextras.com>
 */

class MailChimp_WooCommerce_Admin extends MailChimp_WooCommerce_Options {

	protected $swapped_list_id  = null;
	protected $swapped_store_id = null;

	/** @var null|static */
	protected static $_instance = null;

	/**
	 * @return MailChimp_WooCommerce_Admin
	 */
	public static function instance() {
		if ( ! empty( static::$_instance ) ) {
			return static::$_instance;
		}
		$env               = mailchimp_environment_variables();
		static::$_instance = new MailChimp_WooCommerce_Admin();
		static::$_instance->setVersion( $env->version );
		return static::$_instance;
	}

	/**
	 * @return MailChimp_WooCommerce_Admin|MailChimp_WooCommerce_Options
	 */
	public static function connect() {
		return static::instance();
	}

	/**
	 * @return array
	 */
	private function disconnect_store() {
		// remove user from our marketing status audience
		try {
			mailchimp_remove_communication_status();
		} catch ( Exception $e ) {
		}

		if ( ( $store_id = mailchimp_get_store_id() ) && ( $mc = mailchimp_get_api() ) ) {
			set_site_transient( 'mailchimp_disconnecting_store', true, 15 );
			if ( $mc->deleteStore( $store_id ) ) {
				mailchimp_log( 'store.disconnected', 'Store id ' . mailchimp_get_store_id() . ' has been disconnected' );
			} else {
				mailchimp_log( 'store.NOT DISCONNECTED', 'Store id ' . mailchimp_get_store_id() . ' has NOT been disconnected' );
			}
		}

        // delete the webhooks on store disconnects.
		$webhooks = new MailChimp_WooCommerce_WebHooks_Sync;
		$webhooks->cleanHooks(true);

		// clean database
		mailchimp_clean_database();

		return array();
	}

	/**
	 * @return bool
	 */
	private function is_disconnecting() {
		return isset( $_REQUEST['mailchimp_woocommerce_disconnect_store'] )
			   && current_user_can( 'manage_options' )
			   && $_REQUEST['mailchimp_woocommerce_disconnect_store'] == 1
			   && isset( $_REQUEST['_disconnect-nonce'] )
			   && wp_verify_nonce( $_REQUEST['_disconnect-nonce'], '_disconnect-nonce-' . mailchimp_get_store_id() );
	}

	/**
	 * @return bool
	 */
	private function is_resyncing() {
		return isset( $_REQUEST['mailchimp_woocommerce_resync'] )
			&& current_user_can( 'manage_options' )
			&& $_REQUEST['mailchimp_woocommerce_resync'] == 1
			&& isset( $_REQUEST['_resync-nonce'] )
			&& wp_verify_nonce( $_REQUEST['_resync-nonce'], '_resync-nonce-' . mailchimp_get_store_id() );
	}

	/**
	 * @param $hook
	 * @since    1.0.0
	 */
	public function enqueue_styles( $hook ) {
		wp_enqueue_style( $this->plugin_name, plugin_dir_url( __FILE__ ) . 'css/mailchimp-woocommerce-admin.css', array(), $this->version . '.21' );

		if ( strpos( $hook, 'page_mailchimp-woocommerce' ) !== false ) {
			if ( get_bloginfo( 'version' ) < '5.3' ) {
				wp_enqueue_style( $this->plugin_name . '-settings', plugin_dir_url( __FILE__ ) . 'css/mailchimp-woocommerce-admin-settings-5.2.css', array(), $this->version );
			}
			wp_enqueue_style( $this->plugin_name . '-settings', plugin_dir_url( __FILE__ ) . 'css/mailchimp-woocommerce-admin-settings.css', array(), $this->version . '.01' );
			wp_style_add_data( $this->plugin_name . '-settings', 'rtl', 'replace' );
		}
	}

	/**
	 * Register the JavaScript for the admin area.
	 *
	 * @param $hook
	 * @since    1.0.0
	 */
	public function enqueue_scripts( $hook ) {
		if ( strpos( $hook, 'page_mailchimp-woocommerce' ) !== false ) {
			$label = $this->getOption( 'newsletter_label' );
			if ( $label == '' ) {
				$label = __( 'Subscribe to our newsletter', 'mailchimp-for-woocommerce' );
			}
			$options                   = get_option( $this->plugin_name, array() );
			$checkbox_default_settings = ( array_key_exists( 'mailchimp_checkbox_defaults', $options ) && ! is_null( $options['mailchimp_checkbox_defaults'] ) ) ? $options['mailchimp_checkbox_defaults'] : 'check';
			wp_register_script( $this->plugin_name, plugin_dir_url( __FILE__ ) . 'js/mailchimp-woocommerce-admin.js', array( 'jquery', 'swal' ), $this->version );
			wp_localize_script(
				$this->plugin_name,
				'phpVars',
				array(
					'removeReviewBannerRestUrl' => MailChimp_WooCommerce_Rest_Api::url( 'review-banner' ),
					'l10n'                      => array(
						'are_you_sure'                 => __( 'Are you sure?', 'mailchimp-for-woocommerce' ),
						'log_delete_subtitle'          => __( 'You will not be able to revert.', 'mailchimp-for-woocommerce' ),
						'log_delete_confirm'           => __( 'Yes, delete it!', 'mailchimp-for-woocommerce' ),
						'no_cancel'                    => __( 'No, cancel!', 'mailchimp-for-woocommerce' ),
						'please_wait'                  => __( 'Please wait', 'mailchimp-for-woocommerce' ),
						'store_disconnect_subtitle'    => __( 'You are about to disconnect your store from Mailchimp.', 'mailchimp-for-woocommerce' ),
						'store_disconnect_confirm'     => __( 'Yes, disconnect.', 'mailchimp-for-woocommerce' ),
						'try_again'                    => __( 'Try again', 'mailchimp-for-woocommerce' ),
						'resync_in_progress'           => __( 'Resync request in progress', 'mailchimp-for-woocommerce' ),
						'resync_failed'                => __( 'Could not resync orders, please try again.', 'mailchimp-for-woocommerce' ),
						'store_disconnect_in_progress' => __( 'Disconnecting store in progress', 'mailchimp-for-woocommerce' ),
						'login_popup_blocked'          => __( 'Login Popup is blocked!', 'mailchimp-for-woocommerce' ),
						'login_popup_blocked_desc'     => __( 'Please allow your browser to show popups for this page', 'mailchimp-for-woocommerce' ),
						'support_message_sending'      => __( 'Sending support request', 'mailchimp-for-woocommerce' ),
						'support_message_ok'           => __( 'Message received', 'mailchimp-for-woocommerce' ),
						'support_message_desc'         => __( 'Thanks, your message has been received.', 'mailchimp-for-woocommerce' ),
						'subscribe_newsletter'         => $label,
					),
					'current_optin_state'       => $checkbox_default_settings,
				)
			);
			wp_enqueue_script( $this->plugin_name );
			wp_enqueue_script( 'swal', '//cdn.jsdelivr.net/npm/sweetalert2@8', '', $this->version );
		}
	}

	/**
	 * Register the administration menu for this plugin into the WordPress Dashboard menu.
	 *
	 * @since    1.0.0
	 */
	public function add_plugin_admin_menu() {

		// Add woocommerce menu subitem
		$mailchimp_icon = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDgwMCA4MDAiIHZpZXdCb3g9IjAgMCA4MDAgODAwIj48cGF0aCBkPSJNNTUyLjQgMzk3LjJjLTQuMy0uMS03LjggNC42LTcuOSAxMC41LS4xIDUuOSAzLjMgMTAuNyA3LjYgMTAuNyA0LjMuMSA3LjgtNC42IDcuOS0xMC41LjEtNS44LTMuMy0xMC42LTcuNi0xMC43ek01NDIuNiAzODMuNWM0LjQtLjUgOC42LS42IDEyLjQgMCAyLjItNS4xIDIuNi0xNCAuNi0yMy42LTMtMTQuMy03LTIyLjktMTUuNC0yMS41LTguNCAxLjMtOC43IDExLjctNS43IDI2IDEuOCA4IDQuOCAxNC44IDguMSAxOS4xek00NzEgMzk0LjhjNiAyLjYgOS43IDQuMyAxMSAyLjkgMS0uOS43LTIuOC0uNy01LjEtMy45LTUuNS05LjItOS44LTE1LjUtMTIuNC0xMy42LTUuNi0yOS4xLTMuOC00MC45IDQuOS00IDIuOS03LjcgNy03LjMgOS40LjIuOC44IDEuNCAyLjIgMS43IDMuMy40IDE0LjgtNS41IDI4LjEtNi4zIDkuNC0uNyAxNy4xIDIuMyAyMy4xIDQuOXpNNDU5IDQwMS43Yy03LjcgMS4yLTEyIDMuOC0xNC44IDYuMi0yLjQgMi4xLTMuOCA0LjMtMy44IDUuOWwuNiAxLjQgMS4yLjVjMS44IDAgNS43LTEuNSA1LjctMS41IDEwLjgtMy44IDE4LTMuNCAyNS4xLTIuNiAzLjkuNSA1LjcuNyA2LjYtLjcuMi0uNC42LTEuMi0uMi0yLjUtMS45LTMtOS43LTgtMjAuNC02Ljd6TTUxOC40IDQyNi45YzUuMyAyLjYgMTEuMSAxLjUgMTMtMi4zIDItMy44LS44LTkuMS02LjEtMTEuNi01LjMtMi42LTExLjEtMS42LTEzIDIuMi0xLjkgMy44LjkgOS4xIDYuMSAxMS43ek0yNjQuMiA1MDMuM2MtMS4xLTEuMy0yLjgtMS00LjUtLjUtMS4yLjItMi41LjYtNCAuNS0yLjkuMS01LjctMS4zLTcuNC0zLjctMi0zLTEuOS03LjUuMy0xMi42bDEtMi4zYzMuNS03LjcgOS4yLTIwLjYgMi43LTMyLjktNC4zLTguOC0xMi43LTE0LjktMjIuNC0xNi4zLTkuMi0xLjItMTguMyAyLjEtMjQuNiA4LjktOS41IDEwLjQtMTAuOSAyNC43LTkuMSAyOS44LjcgMS45IDEuOCAyLjQgMi41IDIuNSAxLjYuMiA0LTEgNS41LTVsLjUtMS4zYy43LTIuMSAxLjktNi4xIDMuOS05LjMgNS4yLTggMTUuOS0xMC4yIDIzLjktNSA2LjcgNC40IDkuMiAxMi41IDYuMyAyMC4zLTEuNSA0LTMuOCAxMS43LTMuMyAxOCAxLjEgMTIuOCA5IDE3LjkgMTYgMTguNSA2LjkuMiAxMS43LTMuNiAxMi45LTYuNC44LTEuOC4yLTIuOC0uMi0zLjJ6Ii8+PHBhdGggZD0iTTY2MC43IDQ3OS45Yy0uMy0xLTItNy4yLTQuMy0xNC43bC00LjgtMTIuOGM5LjQtMTQuMSA5LjUtMjYuNiA4LjMtMzMuOC0xLjQtOS4yLTUuOC0xNy42LTEyLjQtMjQuMS03LjQtNy43LTIyLjYtMTUuNy00My44LTIxLjdsLTExLjItMy4xYy0uMS0uNS0uNi0yNi4zLTEtMzcuNC0uNC04LTEtMjAuNS00LjktMzIuOS00LjctMTYuNy0xMi43LTMxLjMtMjIuOC00MC43IDI3LjgtMjguOCA0NS4yLTYwLjYgNDUuMS04Ny44LS4xLTUyLjQtNjQuNC02OC4zLTE0My43LTM1LjRsLTE2LjggNy4xYy0uMS0uMS0zMC40LTI5LjgtMzAuOC0zMC4yLTkwLjUtNzguOC0zNzMuMSAyMzUuNC0yODIuNyAzMTEuN2wxOS44IDE2LjdjLTUuMyAxNC4zLTcuMiAyOS43LTUuNSA0NC44IDIuMiAyMSAxMyA0MS4xIDMwLjUgNTYuNyAxNi43IDE0LjcgMzguNiAyNC4xIDU5LjkgMjQuMSAzNSA4MS4xIDExNS40IDEzMC44IDIwOS42IDEzMy42IDEwMS4xIDMgMTg1LjktNDQuNCAyMjEuNS0xMjkuNiAyLjMtNiAxMi4yLTMyLjkgMTIuMi01Ni43LS4xLTIzLjktMTMuNi0zMy44LTIyLjItMzMuOHptLTQxMy41IDYzLjdjLTMuMS42LTYuMi44LTkuMy43LTMwLjUtLjktNjMuNS0yOC4zLTY2LjgtNjAuOS0zLjYtMzYgMTQuOC02My43IDQ3LjQtNzAuMyAzLjktLjggOC42LTEuMyAxMy43LTEgMTguMyAxLjEgNDUuMSAxNS4xIDUxLjMgNTQuOCA1LjQgMzUuMi0zLjMgNzEuMS0zNi4zIDc2Ljd6bS0zNC0xNTJjLTE5LjggMy43LTM3LjQgMTQuOS00OS4xIDMxLjMtNi42LTUuNS0xOC43LTE2LTIwLjktMjAuMS0xNy41LTMzLjEgMTktOTcuNiA0NC42LTEzNCA2My04OS45IDE2MS43LTE1OCAyMDcuNC0xNDUuNyA3LjQgMi4xIDMyIDMwLjcgMzIgMzAuN3MtNDUuNyAyNS4zLTg4LjEgNjAuNmMtNTcgNDQtMTAwLjIgMTA3LjktMTI1LjkgMTc3LjJ6bTExNi4zLTEyMy4yYzIyLjQtMjUuOSA1MC00OC40IDc0LjctNjEgLjgtLjUgMS43LjUgMS4zIDEuMy0zIDUuMy01LjQgMTEtNi45IDE2LjktLjIuOS44IDEuNiAxLjUgMS4xIDE1LjQtMTAuNSA0Mi4xLTIxLjcgNjUuNi0yMy4xLjUtLjEgMS4xLjMgMS4yLjguMS40LS4xLjgtLjUgMS0zLjkgMy03LjQgNi41LTEwLjMgMTAuNGExIDEgMCAwIDAgLjggMS42YzE2LjUuMSAzOS43IDUuOCA1NC44IDE0LjMgMSAuNi4zIDIuNi0uOCAyLjMtMjIuOS01LjItNjAuNC05LjItOTkuMy4zLTM0LjggOC41LTYxLjMgMjEuNS04MC42IDM1LjYtMS4xLjctMi4zLS42LTEuNS0xLjV6bTMzMi4yIDI1My4zYy00LjQgMjYuNi0xNS43IDQ4LjItMzQuNyA2OC0xMS44IDEyLjktMjYgMjMuNC00MS42IDMxLjEtOC43IDQuNi0xNy44IDguNC0yNy4xIDExLjUtNzEuNiAyMy40LTE0NS0yLjMtMTY4LjYtNTcuNi0xLjktNC4yLTMuNS04LjYtNC43LTEzLjEtMTAuMS0zNi40LTEuNS04MCAyNS4yLTEwNy41IDEuNy0xLjcgMy40LTMuOCAzLjQtNi40IDAtMi4xLTEuNC00LjQtMi42LTYuMS05LjMtMTMuNS00MS44LTM2LjYtMzUuMi04MS4zIDQuNi0zMi4xIDMyLjctNTQuNyA1OC45LTUzLjRsNi43LjRjMTEuMy43IDIxLjIgMi4xIDMwLjYgMi41IDE1LjcuNiAyOS43LTEuNiA0Ni40LTE1LjUgNS42LTQuNyAxMC4xLTguOCAxNy43LTEwIC44LS4yIDIuOC0uOCA2LjgtLjcgNC4xLjIgOCAxLjQgMTEuNCAzLjYgMTMuMyA4LjkgMTUuMiAzMC40IDE2IDQ2LjIuNCA5IDEuNSAzMC43IDEuOCAzNi45LjkgMTQuMyA0LjYgMTYuMyAxMi4yIDE4LjggNC4zIDEuNSA4LjMgMi41IDE0LjEgNC4yIDE3LjYgNC45IDI4LjIgMTAgMzQuOCAxNi40IDMuNCAzLjMgNS42IDcuNyA2LjMgMTIuNCAyLjIgMTUuMi0xMS44IDM0LTQ4LjUgNTEuMS00MC4yIDE4LjYtODkgMjMuNC0xMjIuNiAxOS42bC0xMS44LTEuM2MtMjctMy42LTQyLjMgMzEuMi0yNi4xIDU1IDEwLjQgMTUuNCAzOC44IDI1LjQgNjcuMiAyNS40IDY1LjEuMSAxMTUuMi0yNy43IDEzMy44LTUxLjhsMS41LTIuMWMuOS0xLjQuMi0yLjEtMS0xLjQtMTUuMiAxMC40LTgyLjggNTEuNy0xNTUgMzkuMyAwIDAtOC44LTEuNS0xNi44LTQuNi02LjMtMi40LTE5LjctOC42LTIxLjMtMjIuMyA1OC4yIDE4LjEgOTUgMSA5NSAxIC43LS4zIDEuMS0xIDEtMS44LS4xLS45LS45LTEuNi0xLjgtMS41aC0uMXMtNDcuOCA3LjEtOTMtOS40YzQuOS0xNiAxOC0xMC4zIDM3LjgtOC42IDMwLjcgMS44IDYxLjUtMS41IDkxLjItOS45IDIwLjQtNS45IDQ3LjMtMTcuNSA2OC4yLTMzLjkgNy4xIDE1LjUgOS41IDMyLjUgOS41IDMyLjVzNS40LTEgMTAgMS44YzQgMi44IDcuMSA4LjMgNSAyMi41eiIvPjwvc3ZnPg==';

		add_menu_page(
			__( 'Mailchimp for WooCommerce', 'mailchimp-for-woocommerce' ),
			__( 'Mailchimp', 'mailchimp-for-woocommerce' ),
			mailchimp_get_allowed_capability(),
			$this->plugin_name,
			array( $this, 'display_plugin_setup_page' ),
			$mailchimp_icon,
			58
		);

		// Add the WooCommerce navigation items if the feauture exists.
		if ( ! class_exists( '\Automattic\WooCommerce\Admin\Features\Navigation\Menu' ) ) {
			return;
		}

		Menu::add_plugin_item(
			array(
				'id'         => 'mailchimp-for-woocommerce',
				'title'      => __( 'Mailchimp', 'mailchimp-for-woocommerce' ),
				'capability' => mailchimp_get_allowed_capability(),
				'url'        => $this->plugin_name,
			)
		);
	}

	/**
	 * Include the new Navigation Bar the Admin page.
	 */
	public function add_woocommerce_navigation_bar() {
		if ( function_exists( 'wc_admin_connect_page' ) ) {
			wc_admin_connect_page(
				array(
					'id'        => $this->plugin_name,
					'screen_id' => 'woocommerce_page_mailchimp-woocommerce',
					'title'     => __( 'Mailchimp for WooCommerce', 'mailchimp-for-woocommerce' ),
				)
			);
		}
	}

	/**
	 * check if current user can view options pages/ save plugin options
	 */
	public function mailchimp_woocommerce_option_page_capability() {
		return mailchimp_get_allowed_capability();
	}

	/**
	 * Setup Feedback Survey Form
	 *
	 * @since    2.1.15
	 * @return bool
	 */
	public function setup_survey_form() {
		if ( is_admin() ) {
			try {
				new Mailchimp_Woocommerce_Deactivation_Survey( $this->plugin_name, 'mailchimp-for-woocommerce' );
			} catch ( Throwable $e ) {
				mailchimp_error( 'admin@setup_survey_form', $e->getCode() . ' :: ' . $e->getMessage() . ' on ' . $e->getLine() . ' in ' . $e->getFile() );
				return false;
			}
		}
		return true;
	}

	/**
	 * @return string
	 */
	protected function mailchimp_svg() {
		return base64_encode( '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52.03 55"><defs><style>.cls-1{fill:#fff;}</style></defs><title>Asset 1</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="cls-1" d="M11.64,28.54a4.75,4.75,0,0,0-1.17.08c-2.79.56-4.36,2.94-4.05,6a6.24,6.24,0,0,0,5.72,5.21,4.17,4.17,0,0,0,.8-.06c2.83-.48,3.57-3.55,3.1-6.57C15.51,29.83,13.21,28.63,11.64,28.54Zm2.77,8.07a1.17,1.17,0,0,1-1.1.55,1.53,1.53,0,0,1-1.37-1.58A4,4,0,0,1,12.23,34a1.44,1.44,0,0,0-.55-1.74,1.48,1.48,0,0,0-1.12-.21,1.44,1.44,0,0,0-.92.64,3.39,3.39,0,0,0-.34.79l0,.11c-.13.34-.33.45-.47.43s-.16-.05-.21-.21a3,3,0,0,1,.78-2.55,2.46,2.46,0,0,1,2.11-.76,2.5,2.5,0,0,1,1.91,1.39,3.19,3.19,0,0,1-.23,2.82l-.09.2A1.16,1.16,0,0,0,13,36a.74.74,0,0,0,.63.32,1.38,1.38,0,0,0,.34,0c.15,0,.3-.07.39,0A.24.24,0,0,1,14.41,36.61Z"/><path class="cls-1" d="M51,33.88a3.84,3.84,0,0,0-1.15-1l-.11-.37-.14-.42a5.57,5.57,0,0,0,.5-3.32,5.43,5.43,0,0,0-1.54-3,10.09,10.09,0,0,0-4.24-2.26c0-.67,0-1.43-.06-1.9a12.83,12.83,0,0,0-.49-3.25,10.46,10.46,0,0,0-1.3-2.92c2.14-2.56,3.29-5.21,3.29-7.57,0-3.83-3-6.3-7.59-6.3a19.3,19.3,0,0,0-7.22,1.6l-.34.14L28.7,1.52A6.31,6.31,0,0,0,24.43,0,14.07,14.07,0,0,0,17.6,2.2a36.93,36.93,0,0,0-6.78,5.21c-4.6,4.38-8.3,9.63-9.91,14A12.51,12.51,0,0,0,0,26.54a6.16,6.16,0,0,0,2.13,4.4l.78.66A10.44,10.44,0,0,0,2.74,35a9.36,9.36,0,0,0,3.21,6,10,10,0,0,0,5.13,2.43,20.19,20.19,0,0,0,7.31,8A23.33,23.33,0,0,0,30.17,55H31a23.27,23.27,0,0,0,12-3.16,19.1,19.1,0,0,0,7.82-9.06l0,0A16.89,16.89,0,0,0,52,37.23,5.17,5.17,0,0,0,51,33.88Zm-1.78,8.21c-3,7.29-10.3,11.35-19,11.09-8.06-.24-14.94-4.5-18-11.43a7.94,7.94,0,0,1-5.12-2.06,7.56,7.56,0,0,1-2.61-4.85A8.31,8.31,0,0,1,5,31L3.32,29.56C-4.42,23,19.77-3.86,27.51,2.89l2.64,2.58,1.44-.61c6.79-2.81,12.3-1.45,12.3,3,0,2.33-1.48,5.05-3.86,7.52a7.54,7.54,0,0,1,2,3.48,11,11,0,0,1,.42,2.82c0,1,.09,3.16.09,3.2l1,.27A8.64,8.64,0,0,1,47.2,27a3.66,3.66,0,0,1,1.06,2.06A4,4,0,0,1,47.55,32,10.15,10.15,0,0,1,48,33.08c.2.64.35,1.18.37,1.25.74,0,1.89.85,1.89,2.89A15.29,15.29,0,0,1,49.18,42.09Z"/><path class="cls-1" d="M48,36a1.36,1.36,0,0,0-.86-.16,11.76,11.76,0,0,0-.82-2.78A17.89,17.89,0,0,1,40.45,36a23.64,23.64,0,0,1-7.81.84c-1.69-.14-2.81-.63-3.23.74a18.3,18.3,0,0,0,8,.81.14.14,0,0,1,.16.13.15.15,0,0,1-.09.15s-3.14,1.46-8.14-.08a2.58,2.58,0,0,0,1.83,1.91,8.24,8.24,0,0,0,1.44.39c6.19,1.06,12-2.47,13.27-3.36.1-.07.16,0,.08.12l-.13.18c-1.59,2.06-5.88,4.44-11.45,4.44-2.43,0-4.86-.86-5.75-2.17-1.38-2-.07-5,2.24-4.71l1,.11a21.13,21.13,0,0,0,10.5-1.68c3.15-1.46,4.34-3.07,4.16-4.37A1.87,1.87,0,0,0,46,28.34a6.8,6.8,0,0,0-3-1.41c-.5-.14-.84-.23-1.2-.35-.65-.21-1-.39-1-1.61,0-.53-.12-2.4-.16-3.16-.06-1.35-.22-3.19-1.36-4a1.92,1.92,0,0,0-1-.31,1.86,1.86,0,0,0-.58.06,3.07,3.07,0,0,0-1.52.86,5.24,5.24,0,0,1-4,1.32c-.8,0-1.65-.16-2.62-.22l-.57,0a5.22,5.22,0,0,0-5,4.57c-.56,3.83,2.22,5.81,3,7a1,1,0,0,1,.22.52.83.83,0,0,1-.28.55h0a9.8,9.8,0,0,0-2.16,9.2,7.59,7.59,0,0,0,.41,1.12c2,4.73,8.3,6.93,14.43,4.93a15.06,15.06,0,0,0,2.33-1,12.23,12.23,0,0,0,3.57-2.67,10.61,10.61,0,0,0,3-5.82C48.6,36.7,48.33,36.23,48,36Zm-8.25-7.82c0,.5-.31.91-.68.9s-.66-.42-.65-.92.31-.91.68-.9S39.72,27.68,39.71,28.18Zm-1.68-6c.71-.12,1.06.62,1.32,1.85a3.64,3.64,0,0,1-.05,2,4.14,4.14,0,0,0-1.06,0,4.13,4.13,0,0,1-.68-1.64C37.29,23.23,37.31,22.34,38,22.23Zm-2.4,6.57a.82.82,0,0,1,1.11-.19c.45.22.69.67.53,1a.82.82,0,0,1-1.11.19C35.7,29.58,35.47,29.13,35.63,28.8Zm-2.8-.37c-.07.11-.23.09-.57.06a4.24,4.24,0,0,0-2.14.22,2,2,0,0,1-.49.14.16.16,0,0,1-.11,0,.15.15,0,0,1-.05-.12.81.81,0,0,1,.32-.51,2.41,2.41,0,0,1,1.27-.53,1.94,1.94,0,0,1,1.75.57A.19.19,0,0,1,32.83,28.43Zm-5.11-1.26c-.12,0-.17-.07-.19-.14s.28-.56.62-.81a3.6,3.6,0,0,1,3.51-.42A3,3,0,0,1,33,26.87c.12.2.15.35.07.44s-.44,0-.95-.24a4.18,4.18,0,0,0-2-.43A21.85,21.85,0,0,0,27.71,27.17Z"/><path class="cls-1" d="M35.5,13.29c.1,0,.16-.15.07-.2a11,11,0,0,0-4.69-1.23.09.09,0,0,1-.07-.14,4.78,4.78,0,0,1,.88-.89.09.09,0,0,0-.06-.16,12.46,12.46,0,0,0-5.61,2,.09.09,0,0,1-.13-.09,6.16,6.16,0,0,1,.59-1.45.08.08,0,0,0-.11-.11A22.79,22.79,0,0,0,20,16.24a.09.09,0,0,0,.12.13A19.53,19.53,0,0,1,27,13.32,19.1,19.1,0,0,1,35.5,13.29Z"/><path class="cls-1" d="M28.34,6.42S26.23,4,25.6,3.8C21.69,2.74,13.24,8.57,7.84,16.27,5.66,19.39,2.53,24.9,4,27.74a11.43,11.43,0,0,0,1.79,1.72A6.65,6.65,0,0,1,10,26.78,34.21,34.21,0,0,1,20.8,11.62,55.09,55.09,0,0,1,28.34,6.42Z"/></g></g></svg>' );
	}

	/**
	 * @param $links
	 *
	 * @return array
	 * @since    1.0.0
	 */
	public function add_action_links( $links ) {
		$settings_link = array(
			'<a href="' . admin_url( 'admin.php?page=' . $this->plugin_name ) . '">' . __( 'Settings' ) . '</a>',
		);
		return array_merge( $settings_link, $links );
	}

	/**
	 * Render the settings page for this plugin.
	 *
	 * @since    1.0.0
	 */
	public function display_plugin_setup_page() {
		include_once 'partials/mailchimp-woocommerce-admin-tabs.php';
	}

	public function display_user_profile_info( $user ) {
		$gdpr_fields = mailchimp_render_gdpr_fields() ?
			MailChimp_WooCommerce_Public::gdpr_fields( $user ) :
			array();
		$this->syncUserStatus( $user );
		include_once 'user-profile/mailchimp-user-profile.php';
	}

	/**
	 * @param $user
	 *
	 * @return bool
	 */
	protected function syncUserStatus( $user ) {
        try {
			if ( empty( $user ) || ! is_email( $user->user_email ) || ! mailchimp_is_configured() ) {
				return false;
			}
			// if we're setting the subscriber status in an admin update this might still be in limbo.
			if ( mailchimp_get_transient("updating_subscriber_status.{$user->ID}", false) ) {
			    return false;
            }
			if ( ( $status = mailchimp_get_api()->getCachedSubscriberStatusForAdminProfileView( mailchimp_get_list_id(), $user->user_email ) ) ) {
                if ( is_string( $status ) ) {
			        if ( $status === 'unsubscribed' ) {
                        $subscribed_status = 'unsubscribed';
                    } else if ( $status === 'archived' ) {
                        $subscribed_status = 'archived';
                    } else if ( in_array( $status, array( 'subscribed', 'pending' ) ) ) {
                        $subscribed_status = '1';
                    } else {
                        $subscribed_status = '0';
                    }

                    $saved = get_user_meta( $user->ID, 'mailchimp_woocommerce_is_subscribed', true );
                    if ( $subscribed_status !== $saved ) {
                        update_user_meta( $user->ID, 'mailchimp_woocommerce_is_subscribed', $subscribed_status );
                    }
                }
			}
		} catch ( Exception $e ) {
			return false;
		}
		return true;
	}

	/**
	 *
	 */
	public function options_update() {
		global $pagenow;

		register_setting( $this->plugin_name, $this->plugin_name, array( $this, 'validate' ) );

		// tammullen found this.
		if ( $pagenow == 'admin.php' && isset( $_GET ) && isset( $_GET['page'] ) && 'mailchimp-woocommerce' === $_GET['page'] ) {
			$this->handle_abandoned_cart_table();
			$this->update_db_check();

			// if we don't have the server address set, let's save it to be used with curl requests
			if ( ! mailchimp_get_data( 'SERVER_ADDR' ) ) {
				if ( isset( $_SERVER ) && isset( $_SERVER['SERVER_ADDR'] ) && ! empty( $_SERVER['SERVER_ADDR'] ) ) {
					mailchimp_set_data( 'SERVER_ADDR', sanitize_text_field( $_SERVER['SERVER_ADDR'] ) );
				}
			}

			// this is where we need to cache this data for a longer period of time and only during admin page views.
			// https://wordpress.org/support/topic/the-plugin-slows-down-the-website-because-of-slow-api/#post-14339311
			if ( mailchimp_is_configured() && ( $list_id = mailchimp_get_list_id() ) ) {
				$transient  = "mailchimp-woocommerce-gdpr-fields.{$list_id}";
				$GDPRfields = get_site_transient( $transient );
				if ( ! is_array( $GDPRfields ) ) {
					try {
						$GDPRfields = mailchimp_get_api()->getGDPRFields( $list_id );
						set_site_transient( $transient, $GDPRfields, 600 );
					} catch ( Exception $e ) {
						set_site_transient( $transient, array(), 60 );
					}
				}
			}

			$active_tab = isset( $_GET['tab'] ) ? sanitize_text_field( $_GET['tab'] ) : ( $this->getOption( 'active_tab' ) ? $this->getOption( 'active_tab' ) : 'api_key' );
			if ( $active_tab == 'sync' && get_option( 'mailchimp-woocommerce-sync.initial_sync' ) == 1 && get_option( 'mailchimp-woocommerce-sync.completed_at' ) > 0 ) {
				$this->mailchimp_show_initial_sync_message();
			}
			if ( isset( $_GET['log_removed'] ) && $_GET['log_removed'] == '1' ) {
				add_settings_error( 'mailchimp_log_settings', '', __( 'Log file deleted.', 'mailchimp-for-woocommerce' ), 'info' );
			}
		}
	}


	/**
	 * Displays notice when plugin is installed but not yet configured / connected to Mailchimp.
	 */
	public function initial_notice() {
		global $pagenow;

        // if we're on the mc admin setup pages - don't do anything
		if ($pagenow == 'admin.php' && isset( $_GET ) && isset( $_GET['page'] ) && 'mailchimp-woocommerce' === $_GET['page'] ) {
            return null;
		}

        // if they've logged in oauth - but have not selected a list id yet - show the admin notice.
		if ( (bool) (mailchimp_get_api_key() && !mailchimp_get_list_id())) {
			$class   = 'notice notice-warning is-dismissible';
			$message = sprintf(
			/* translators: Placeholders %1$s - opening strong HTML tag, %2$s - closing strong HTML tag, %3$s - opening link HTML tag, %4$s - closing link HTML tag */
				esc_html__(
					'%1$sMailchimp for Woocommerce%2$s is not yet connected to a Mailchimp account. To complete the connection, %3$svisit the plugin settings page%4$s.',
					'mailchimp-for-woocommerce'
				),
				'<strong>',
				'</strong>',
				'<a href="' . admin_url( 'admin.php?page=' ) . $this->plugin_name . '">',
				'</a>'
			);
			printf( '<div class="%1$s"><p>%2$s</p></div>', $class, $message );
		}
	}


	/**
	 * Displays notice when action scheduler does not exist on the system
	 */
	public function action_scheduler_notice() {
		if ( ! mailchimp_action_scheduler_exists() ) {
			$class   = 'notice notice-warning is-dismissible';
			$message = sprintf(
			/* translators: Placeholders %1$s - opening strong HTML tag, %2$s */
				esc_html__(
					'%1$sMailchimp for Woocommerce%2$s needs Action Scheduler plugin to function correctly, please confirm is installed',
					'mailchimp-for-woocommerce'
				),
				'<strong>',
				'</strong>'
			);
			printf( '<div class="%1$s"><p>%2$s</p></div>', $class, $message );
		}
	}

	/**
     * Turning this off because it's more common than not to have the rest api disabled through a firewall
	 * Displays notice when plugin is installed but not yet configured / connected to Mailchimp.
	 */
	public function webook_initial_notice() {
	    return null;
//		if ( mailchimp_is_configured() && ! mailchimp_get_webhook_url() && mailchimp_is_done_syncing()) {
//			$class   = 'notice notice-warning';
//			$message = sprintf(
//			        //Mailchimp for Woocommerce has not added the webhook to Mailchimp. Please follow the instructions outlined in the wiki to troubleshoot further.
//			/* translators: Placeholders %1$s - opening strong HTML tag, %2$s - closing strong HTML tag, %3$s - opening link HTML tag, %4$s - closing link HTML tag */
//				esc_html__(
//					'%1$sMailchimp for Woocommerce%2$s has not added the webhook to Mailchimp, Please follow the instructions outlined in the %3$swiki%4$s to troubleshoot further.',
//					'mailchimp-for-woocommerce'
//				),
//				'<strong>',
//				'</strong>',
//				'<a href="https://github.com/mailchimp/mc-woocommerce/wiki/Webhook-Has-Not-Been-Setup-Error">',
//				'</a>'
//			);
//			printf( '<div class="%1$s"><p>%2$s</p></div>', $class, $message );
//		}
	}

	/**
	 * Depending on the version we're on we may need to run some sort of migrations.
	 */
	public function update_db_check() {
		// grab the current version set in the plugin variables
		global $wpdb;
		global $pagenow;

		$version = mailchimp_environment_variables()->version;

		// grab the saved version or default to 1.0.3 since that's when we first did this.
		$saved_version = get_site_option( 'mailchimp_woocommerce_version', '1.0.3' );

		// if the saved version is less than the current version
		if ( version_compare( $version, $saved_version ) > 0 ) {
			// resave the site option so this only fires once.
			update_site_option( 'mailchimp_woocommerce_version', $version );

			// get plugin options
			$options = $this->getOptions();

			// set permission_cap in case there's none set.
			if ( ! isset( $options['mailchimp_permission_cap'] ) || empty( $options['mailchimp_permission_cap'] ) ) {
				$options['mailchimp_permission_cap'] = 'manage_options';
				update_option( $this->plugin_name, $options );
			}

			// resend marketing status to update latest changes
			if ( ! empty( $options['admin_email'] ) ) {
				try {
					// send the post to the mailchimp server
					$comm_opt = get_option( 'mailchimp-woocommerce-comm.opt', 0 );
					$this->mailchimp_set_communications_status_on_server( $comm_opt, $options['admin_email'] );
				} catch ( Exception $e ) {
					mailchimp_error( 'marketing_status_update', $e->getMessage() );
				}
			}

            // we have some stores that are in a perpetual state of syncing - causing issues with support.
            // trying to adjust things on plugin update
			//$this->fix_is_syncing_problem();
		}

		if ( ! get_option( $this->plugin_name . '_cart_table_add_index_update' ) ) {
			$check_index_sql = "SELECT COUNT(*) FROM INFORMATION_SCHEMA.STATISTICS WHERE table_schema='{$wpdb->dbname}' AND table_name='{$wpdb->prefix}mailchimp_carts' AND index_name='primary' and column_name='email';";
			$index_exists    = $wpdb->get_var( $check_index_sql );
			if ( $index_exists == '1' ) {
				update_option( $this->plugin_name . '_cart_table_add_index_update', true );
			} else {
				// remove table duplicates
				$delete_sql = "DELETE carts_1 FROM {$wpdb->prefix}mailchimp_carts carts_1 INNER JOIN {$wpdb->prefix}mailchimp_carts carts_2 WHERE carts_1.created_at < carts_2.created_at AND carts_1.email = carts_2.email;";
				if ( $wpdb->query( $delete_sql ) !== false ) {
					$sql = "ALTER TABLE {$wpdb->prefix}mailchimp_carts ADD PRIMARY KEY (email);";
					// only update the option if the query returned sucessfully
					try {
						if ( $wpdb->query( $sql ) !== false ) {
							update_option( $this->plugin_name . '_cart_table_add_index_update', true );
						}
					} catch ( Exception $e ) {
						update_option( $this->plugin_name . '_cart_table_add_index_update', true );
					}
				}
			}
		}

		if ( ! get_option( $this->plugin_name . '_woo_currency_update' ) ) {
			if ( $this->mailchimp_update_woo_settings() ) {
				update_option( $this->plugin_name . '_woo_currency_update', true );
			}
		}

		if ( $wpdb->get_var( "SHOW TABLES LIKE '{$wpdb->prefix}mailchimp_jobs';" ) != $wpdb->prefix . 'mailchimp_jobs' ) {
			MailChimp_WooCommerce_Activator::create_queue_tables();
			MailChimp_WooCommerce_Activator::migrate_jobs();
		}

		if ( defined( 'DISABLE_WP_HTTP_WORKER' ) || defined( 'MAILCHIMP_USE_CURL' ) || defined( 'MAILCHIMP_REST_LOCALHOST' ) || defined( 'MAILCHIMP_REST_IP' ) || defined( 'MAILCHIMP_DISABLE_QUEUE' ) && true === MAILCHIMP_DISABLE_QUEUE ) {
			$constants_used = array();

			if ( defined( 'DISABLE_WP_HTTP_WORKER' ) ) {
				$constants_used[] = 'DISABLE_WP_HTTP_WORKER';
			}

			if ( defined( 'MAILCHIMP_DISABLE_QUEUE' ) ) {
				$constants_used[] = 'MAILCHIMP_DISABLE_QUEUE';
			}

			if ( defined( 'MAILCHIMP_USE_CURL' ) ) {
				$constants_used[] = 'MAILCHIMP_USE_CURL';
			}

			if ( defined( 'MAILCHIMP_REST_LOCALHOST' ) ) {
				$constants_used[] = 'MAILCHIMP_REST_LOCALHOST';
			}

			if ( defined( 'MAILCHIMP_REST_IP' ) ) {
				$constants_used[] = 'MAILCHIMP_REST_IP';
			}

			$text = __( 'Mailchimp for Woocommerce', 'mailchimp-for-woocommerce' ) . '<br/>' .
			'<p id="http-worker-deprecated-message">' . __( 'We dectected that this site has the following constants defined, likely at wp-config.php file', 'mailchimp-for-woocommerce' ) . ': ' .
			implode( ' | ', $constants_used ) . '<br/>' .
			__( 'These constants are deprecated since Mailchimp for Woocommerce version 2.3. Please refer to the <a href="https://github.com/mailchimp/mc-woocommerce/wiki/">plugin official wiki</a> for further details.', 'mailchimp-for-woocommerce' ) . '</p>';

			// only print notice for deprecated constants, on mailchimp woocoomerce pages
			if ( $pagenow == 'admin.php' && 'mailchimp-woocommerce' === $_GET['page'] ) {
				add_settings_error( 'mailchimp-woocommerce_notice', $this->plugin_name, $text, 'info' );
			}
		}

	}

	public function update_plugin_check() {
		$version = mailchimp_environment_variables()->version;

		// grab the saved version or default to 1.0.3 since that's when we first did this.
		$saved_version = get_site_option( 'mailchimp_woocommerce_version', '1.0.3' );

		// if the saved version is less than the current version
		if (version_compare( $version, $saved_version ) > 0) {
			$webhooks = new MailChimp_WooCommerce_WebHooks_Sync;
			$webhooks->subscribeWebhook();

			$this->update_db_check();

			mailchimp_log('webhooks', 'Ran plugin updater');
		}
	}

	public function plugin_upgrade_completed( $upgrader_object, $options ) {
		$our_plugin = 'mc-woocommerce/mailchimp-woocommerce.php';

		// If an update has taken place and the updated type is plugins and the plugins element exists
		if ( isset( $options ) && isset( $options['action'] ) && isset( $options['type'] ) && $options['action'] === 'update' && $options['type'] === 'plugin' && isset( $options['plugins'] ) ) {
			// Iterate through the plugins being updated and check if ours is there
			foreach ( $options['plugins'] as $plugin ) {
				if ( $plugin == $our_plugin ) {
					$this->update_plugin_check();
				}
			}
		}
	}

	/**
	 * @param null $code
	 *
	 * @return array
	 */
	private function mailchimp_set_store_currency_code( $code = null ) {
		if ( ! isset( $code ) ) {
			$code = get_woocommerce_currency();
		}
		$options                                      = $this->getOptions();
		$options['woocommerce_settings_save_general'] = true;
		$options['store_currency_code']               = $code;
		update_option( $this->plugin_name, $options );
		return $options;
	}

    public function fix_is_syncing_problem()
    {
	    if ((bool) mailchimp_get_data('sync.syncing' )) {
		    $toggle_mailchimp = false;
            if (get_option( 'mailchimp-woocommerce-sync.orders.completed_at' )) {
			    $toggle_mailchimp = true;
		    } else {
	            $sync_started_at = (int) get_option( 'mailchimp-woocommerce-sync.started_at' );
	            $seconds_in_days = 86400;
	            $now = time();
	            $difference = $sync_started_at > 0 ? ($now - $sync_started_at) : 0;
                if ($difference >= $seconds_in_days && ($sync_started_at / $seconds_in_days >= 30)) {
		            $toggle_mailchimp = true;
	                update_option( 'mailchimp-woocommerce-sync.products.started_at', $sync_started_at);
	                update_option( 'mailchimp-woocommerce-sync.products.completed_at', $sync_started_at+60);
		            update_option( 'mailchimp-woocommerce-sync.orders.started_at', $sync_started_at);
		            update_option( 'mailchimp-woocommerce-sync.orders.completed_at', $sync_started_at+60);
	            }
            }
		    if ($toggle_mailchimp) {
			    mailchimp_set_data('sync.syncing', false);
			    mailchimp_log('tower', 'Fixed local sync.syncing record during plugin update.');
			    if (mailchimp_is_configured() && ($store_id = mailchimp_get_store_id())) {
				    if ( mailchimp_get_api()->flagStoreSync($store_id, false) ) {
					    mailchimp_log('tower', 'Toggled Mailchimp store to not syncing during plugin update.');
				    }
			    }
		    }
            return $toggle_mailchimp;
	    }
        return false;
    }

	/**
	 * @return bool
	 */
	public function mailchimp_update_woo_settings() {
		$new_currency_code = null;

		if ( isset( $_POST['woo_multi_currency_params'] ) ) {
			$new_currency_code = sanitize_text_field( $_POST['currency_default'] );
		} elseif ( isset( $_POST['woocommerce_currency'] ) ) {
			$new_currency_code = sanitize_text_field( $_POST['woocommerce_currency'] );
		}

		$data = $this->mailchimp_set_store_currency_code( $new_currency_code );

		// sync the store with MC
		try {
			return $this->syncStore( $data );
		} catch ( Exception $e ) {
			mailchimp_log( 'store.sync@woo.update', 'Store cannot be synced', $e->getMessage() );
			return false;
		}
	}

	/**
	 * We were considering auto subscribing people that had just updated the plugin for the first time
	 * after releasing the marketing status block, but decided against that. The admin user must subscribe specifically.
	 *
	 * @return array|WP_Error|null
	 */
	protected function automatically_subscribe_admin_to_marketing() {
		$site_option = 'mailchimp_woocommerce_updated_marketing_status';

		// if we've already done this, just return null.
		if ( get_site_option( $site_option ) ) {
			return null;
		}

		// if we've already set this value to something other than NULL, that means they've already done this.
		if ( ( $original_opt = $this->getData( 'comm.opt' ) ) !== null ) {
			return null;
		}

		// if they have not set the admin_email yet during plugin setup, we will just return null
		$admin_email = $this->getOption( 'admin_email' );

		if ( empty( $admin_email ) ) {
			return null;
		}

		// tell the site options that we've already subscribed this person to marketing through the
		// plugin update process.
		update_site_option( $site_option, true );

		try {
			// send the post to the mailchimp server
			return $this->mailchimp_set_communications_status_on_server( true, $admin_email );
		} catch ( Exception $e ) {
			mailchimp_error( 'initial_marketing_status', $e->getMessage() );
			return null;
		}
	}

	/**
	 * We need to do a tidy up function on the mailchimp_carts table to
	 * remove anything older than 30 days.
	 *
	 * Also if we don't have the configuration set, we need to create the table.
	 */
	protected function handle_abandoned_cart_table() {
		global $wpdb;

		if ( get_site_option( 'mailchimp_woocommerce_db_mailchimp_carts' ) ) {
			// need to tidy up the mailchimp_cart table and make sure we don't have anything older than 30 days old.
			$date = gmdate( 'Y-m-d H:i:s', strtotime( date( 'Y-m-d' ) . '-30 days' ) );
			$sql  = $wpdb->prepare( "DELETE FROM {$wpdb->prefix}mailchimp_carts WHERE created_at <= %s", $date );
			$wpdb->query( $sql );
		} else {

			// create the table for the first time now.
			$charset_collate = $wpdb->get_charset_collate();
			$table           = "{$wpdb->prefix}mailchimp_carts";

			$sql = "CREATE TABLE IF NOT EXISTS $table (
				id VARCHAR (255) NOT NULL,
				email VARCHAR (100) NOT NULL,
				user_id INT (11) DEFAULT NULL,
                cart text NOT NULL,
                created_at datetime NOT NULL,
				PRIMARY KEY  (email)
				) $charset_collate;";

			if ( ( $result = $wpdb->query( $sql ) ) > 0 ) {
				update_site_option( 'mailchimp_woocommerce_db_mailchimp_carts', true );
			}
		}
	}

	/**
	 * @param $input
	 *
	 * @return array
	 * @throws MailChimp_WooCommerce_Error
	 * @throws MailChimp_WooCommerce_RateLimitError
	 * @throws MailChimp_WooCommerce_ServerError
	 */
	public function validate( $input ) {

		$active_tab = isset( $input['mailchimp_active_tab'] ) ? $input['mailchimp_active_tab'] : null;

		if ( empty( $active_tab ) && isset( $input['woocommerce_settings_save_general'] ) && $input['woocommerce_settings_save_general'] ) {
			unset( $input['woocommerce_settings_save_general'] );
			$data['store_currency_code'] = (string) $input['store_currency_code'];
		}

		if ( get_site_transient( 'mailchimp_disconnecting_store' ) ) {
			delete_site_transient( 'mailchimp_disconnecting_store' );
			return array(
				'active_tab'        => 'api_key',
				'mailchimp_api_key' => null,
				'mailchimp_list'    => null,
			);
		}

		switch ( $active_tab ) {

			case 'api_key':
				$data = $this->validatePostApiKey( $input );
				break;

			case 'store_info':
				$data = $this->validatePostStoreInfo( $input );
				break;

			case 'newsletter_settings':
				$data = $this->validatePostNewsletterSettings( $input );
				$this->defineWebHooks();
				break;

			case 'sync':
				// case sync
				if ( $this->is_resyncing() ) {
					// remove all the pointers to be sure
					$service = new MailChimp_Service();
					$service->removePointers();
					$this->startSync();
					$this->showSyncStartedMessage();
					$this->setData( 'sync.config.resync', true );
				}
				break;

			case 'logs':
				if ( isset( $_POST['log_file'] ) && ! empty( $_POST['log_file'] ) ) {
					set_site_transient( 'mailchimp-woocommerce-view-log-file', sanitize_text_field( $_POST['log_file'] ), 30 );
				}

				$data = array(
					'mailchimp_logging' => isset( $input['mailchimp_logging'] ) ? $input['mailchimp_logging'] : 'none',
				);

				if ( isset( $_POST['mc_action'] ) && in_array( $_POST['mc_action'], array( 'view_log', 'remove_log' ) ) ) {
					$path = 'admin.php?page=mailchimp-woocommerce&tab=logs';
					wp_redirect( $path );
					exit();
				}

				break;
			case 'plugin_settings':
				// case disconnect
				if ( $this->is_disconnecting() ) {
					// Disconnect store!
					if ( $this->disconnect_store() ) {
						return array(
							'active_tab'        => 'api_key',
							'mailchimp_api_key' => null,
							'mailchimp_list'    => null,
						);
					}
					$data['active_tab'] = 'plugin_settings';
					add_settings_error( 'mailchimp_store_settings', '', __( 'Store Disconnect Failed', 'mailchimp-for-woocommerce' ), 'warning' );
				}
				break;
		}

		// if no API is provided, check if the one saved on the database is still valid, ** only not if disconnect store is issued **.
		if ( ! $this->is_disconnecting() && ! isset( $input['mailchimp_api_key'] ) && $this->getOption( 'mailchimp_api_key' ) ) {
			// set api key for validation
			$input['mailchimp_api_key'] = $this->getOption( 'mailchimp_api_key' );
			$api_key_valid              = $this->validatePostApiKey( $input );

			// if there's no error, remove the api_ping_error from the db
			if ( ! $api_key_valid['api_ping_error'] ) {
				$data['api_ping_error'] = $api_key_valid['api_ping_error'];
			}
		}

		return ( isset( $data ) && is_array( $data ) ) ? array_merge( $this->getOptions(), $data ) : $this->getOptions();
	}

	/**
	 * @param $input
	 *
	 * @return array
	 */
	protected function validatePostApiKey( $input ) {
		$data = array(
			'mailchimp_api_key'               => isset( $input['mailchimp_api_key'] ) ? trim( $input['mailchimp_api_key'] ) : false,
			'mailchimp_debugging'             => isset( $input['mailchimp_debugging'] ) ? $input['mailchimp_debugging'] : false,
			'mailchimp_account_info_id'       => null,
			'mailchimp_account_info_username' => null,
		);

		$api = new MailChimp_WooCommerce_MailChimpApi( $data['mailchimp_api_key'] );

		try {
			$profile = $api->ping( true, true );
			// tell our reporting system whether or not we had a valid ping.
			$this->setData( 'validation.api.ping', true );
			$data['active_tab'] = 'store_info';
			if ( isset( $profile ) && is_array( $profile ) && array_key_exists( 'account_id', $profile ) ) {
				$data['mailchimp_account_info_id']       = $profile['account_id'];
				$data['mailchimp_account_info_username'] = $profile['username'];
			}
			$data['api_ping_error'] = false;
		} catch ( Exception $e ) {
			unset( $data['mailchimp_api_key'] );
			$data['active_tab']     = 'api_key';
			$data['api_ping_error'] = $e->getCode() . ' :: ' . $e->getMessage() . ' on ' . $e->getLine() . ' in ' . $e->getFile();
			mailchimp_error( 'admin@validatePostApiKey', $e->getCode() . ' :: ' . $e->getMessage() . ' on ' . $e->getLine() . ' in ' . $e->getFile() );
			add_settings_error( 'mailchimp_store_settings', $e->getCode(), $e->getMessage() );
			return $data;
		}

		return $data;
	}

	/**
	 * Mailchimp OAuth connection start
	 */
	public function mailchimp_woocommerce_ajax_oauth_start() {
		$this->adminOnlyMiddleware();

		$secret = uniqid();
		$args   = array(
			'domain' => site_url(),
			'secret' => $secret,
		);

		$pload = array(
			'headers' => array(
				'Content-type' => 'application/json',
			),
			'body'    => json_encode( $args ),
		);

		$response = wp_remote_post( 'https://woocommerce.mailchimpapp.com/api/start', $pload );

		// need to return the error message if this is the problem.
		if ( $response instanceof WP_Error ) {
			wp_send_json_error( $response );
		}

		if ( $response['response']['code'] == 201 ) {
			set_site_transient( 'mailchimp-woocommerce-oauth-secret', $secret, 60 * 60 );
			wp_send_json_success( $response );
		} else {
			wp_send_json_error( $response );
		}

	}

	/**
	 * Mailchimp OAuth connection status
	 */
	public function mailchimp_woocommerce_ajax_oauth_status() {
		$this->adminOnlyMiddleware();

		$url = esc_url_raw( $_POST['url'] );
		// set the default headers to NOTHING because the oauth server will block
		// any non standard header that it was not expecting to receive and it was
		// preventing folks from being able to connect.
		$pload = array(
			'headers' => array(),
		);

		$response = wp_safe_remote_post( $url, $pload );

		// need to return the error message if this is the problem.
		if ( $response instanceof WP_Error ) {
			wp_send_json_error( $response );
		}

		if ( $response['response']['code'] == 200 && isset( $response['body'] ) ) {
			wp_send_json_success( json_decode( $response['body'] ) );
		} else {
			wp_send_json_error( $response );
		}
	}

	/**
	 * Mailchimp OAuth connection finish
	 */
	public function mailchimp_woocommerce_ajax_oauth_finish() {
		$this->adminOnlyMiddleware();

		$args = array(
			'domain' => site_url(),
			'secret' => get_site_transient( 'mailchimp-woocommerce-oauth-secret' ),
			'token'  => sanitize_text_field( $_POST['token'] ),
		);

		$pload = array(
			'headers' => array(
				'Content-type' => 'application/json',
			),
			'body'    => json_encode( $args ),
		);

		$response = wp_remote_post( 'https://woocommerce.mailchimpapp.com/api/finish', $pload );

		// need to return the error message if this is the problem.
		if ( $response instanceof WP_Error ) {
			wp_send_json_error( $response );
		}

		if ( $response['response']['code'] == 200 ) {
			delete_site_transient( 'mailchimp-woocommerce-oauth-secret' );
			// save api_key? If yes, we can skip api key validation for validatePostApiKey();
			wp_send_json_success( $response );
		} else {
			wp_send_json_error( $response );
		}

	}


	public function mailchimp_woocommerce_ajax_create_account_check_username() {
		$this->adminOnlyMiddleware();

		$username = sanitize_text_field( $_POST['username'] );
		$response = wp_remote_get( 'https://woocommerce.mailchimpapp.com/api/usernames/available/' . $username );
		// need to return the error message if this is the problem.
		if ( $response instanceof WP_Error ) {
			wp_send_json_error( $response );
		}
		$response_body = json_decode( $response['body'] );
		if ( $response['response']['code'] == 200 && $response_body->success == true ) {
			wp_send_json_success( $response );
		} elseif ( $response['response']['code'] == 404 ) {
			wp_send_json_error(
				array(
					'success' => false,
				)
			);
		} else {
			$suggestion = wp_remote_get( 'https://woocommerce.mailchimpapp.com/api/usernames/suggestions/' . preg_replace( '/[^A-Za-z0-9\-\@\.]/', '', $username ) );
			// need to return the error message if this is the problem.
			if ( $suggestion instanceof WP_Error ) {
				wp_send_json_error( $suggestion );
			}
			$suggested_username = json_decode( $suggestion['body'] )->data;
			wp_send_json_error(
				array(
					'success'    => false,
					'suggestion' => $suggested_username[0],
				)
			);
		}
	}

	/**
	 * @return array
	 */
	protected function getPostData() {
		$data = $_POST['data'];

		// try to figure out user IP address
		if ( $_SERVER['REMOTE_ADDR'] == '::1' || $_SERVER['REMOTE_ADDR'] == '127.0.0.1' ) {
			$data['ip_address'] = '127.0.0.1';
		} else {
			$data['ip_address'] = isset( $_SERVER['HTTP_CLIENT_IP'] ) ? $_SERVER['HTTP_CLIENT_IP'] : ( isset( $_SERVER['HTTP_X_FORWARDED_FOR'] ) ? $_SERVER['HTTP_X_FORWARDED_FOR'] : $_SERVER['REMOTE_ADDR'] );
		}

		return array(
			'headers' => array(
				'Content-type' => 'application/json',
			),
			'body'    => json_encode( $data ),
			'timeout' => 30,
		);
	}

	public function mailchimp_woocommerce_ajax_support_form() {
		$this->adminOnlyMiddleware();
		$pload    = $this->getPostData();
		$response = wp_remote_post( 'https://woocommerce.mailchimpapp.com/api/support', $pload );
		// need to return the error message if this is the problem.
		if ( $response instanceof WP_Error ) {
			wp_send_json_error( $response );
		}
		$response_body = json_decode( $response['body'] );
		if ( $response['response']['code'] == 200 && $response_body->success == true ) {
			wp_send_json_success( $response_body );
		} elseif ( $response['response']['code'] == 404 ) {
			wp_send_json_error(
				array(
					'success' => false,
					'error'   => $response,
				)
			);
		}
	}

	/**
	 * @return array|mixed|object|null
	 */
	public function mailchimp_send_sync_finished_email() {
		try {
			$order_count = mailchimp_get_api()->getOrderCount( mailchimp_get_store_id() );
			$list_name   = $this->getListName();
		} catch ( Exception $e ) {
			$list_name   = mailchimp_get_list_id();
			$order_count = mailchimp_get_order_count();
		}

		$admin_email = $this->getOption( 'admin_email' );

		if ( empty( $admin_email ) ) {
			return null;
		}

		$pload    = array(
			'headers' => array(
				'Content-type' => 'application/json',
			),
			'body'    => json_encode(
				array(
					'sync_finished' => true,
					'audience_name' => $list_name,
					'total_orders'  => $order_count,
					'store_name'    => get_option( 'blogname' ),
					'email'         => $admin_email,
				)
			),
			'timeout' => 30,
		);
		$response = wp_remote_post( 'https://woocommerce.mailchimpapp.com/api/support', $pload );
		// need to return the error message if this is the problem.
		if ( $response instanceof WP_Error ) {
			wp_send_json_error( $response );
		}
		return json_decode( $response['body'] );
	}

	public function mailchimp_woocommerce_ajax_create_account_signup() {
		$this->adminOnlyMiddleware();
		$pload    = $this->getPostData();
		$response = wp_remote_post( 'https://woocommerce.mailchimpapp.com/api/signup/', $pload );
		// need to return the error message if this is the problem.
		if ( $response instanceof WP_Error ) {
			wp_send_json_error( $response );
		}
		$response_body = json_decode( $response['body'] );
		if ( $response['response']['code'] == 200 && $response_body->success == true ) {
			wp_send_json_success( $response_body );
		} elseif ( $response['response']['code'] == 404 ) {
			wp_send_json_error( array( 'success' => false ) );
		} else {
			$suggestion         = wp_remote_get( 'https://woocommerce.mailchimpapp.com/api/usernames/suggestions/' . $_POST['username'] );
			$suggested_username = json_decode( $suggestion['body'] )->data;
			wp_send_json_error(
				array(
					'success'    => false,
					'suggestion' => $suggested_username[0],
				)
			);
		}
	}

	/**
	 * @param $input
	 *
	 * @return array
	 */
	protected function validatePostStoreInfo( $input ) {
		$data = $this->compileStoreInfoData( $input );

		if ( ! $this->hasValidStoreInfo( $data ) ) {

			if ( $this->hasInvalidStoreAddress( $data ) ) {
				$this->addInvalidAddressAlert();
			}

			if ( $this->hasInvalidStorePhone( $data ) ) {
				$this->addInvalidPhoneAlert();
			}

			if ( $this->hasInvalidStoreName( $data ) ) {
				$this->addInvalidStoreNameAlert();
			}

			$this->setData( 'validation.store_info', false );

			$data['active_tab'] = 'store_info';

			return $input;
		}

		// change communication status options
		$comm_opt = get_option( 'mailchimp-woocommerce-comm.opt', 0 );
		$this->mailchimp_set_communications_status_on_server( $comm_opt, $data['admin_email'] );

		$this->setData( 'validation.store_info', true );

		if ( $this->hasValidMailChimpList() ) {
			// sync the store with MC
			try {
				$this->syncStore( array_merge( $this->getOptions(), $data ) );
			} catch ( Exception $e ) {
				$this->setData( 'validation.store_info', false );
				mailchimp_log( 'errors.store_info', 'Store cannot be synced :: ' . $e->getMessage() );
				add_settings_error( 'mailchimp_store_info', '', __( 'Cannot create or update Store at Mailchimp.', 'mailchimp-for-woocommerce' ) . ' Mailchimp says: ' . $e->getMessage() );
				return $data;
			}
		}

		$data['active_tab']          = 'newsletter_settings';
		$data['store_currency_code'] = get_woocommerce_currency();

		return $data;
	}

	/**
	 * @param $input
	 *
	 * @return array
	 */
	protected function compileStoreInfoData( $input ) {
		$checkbox = $this->getOption( 'mailchimp_permission_cap', 'check' );

		// see if it's posted in the form.
		if ( isset( $input['mailchimp_permission_cap'] ) && ! empty( $input['mailchimp_permission_cap'] ) ) {
			$checkbox = $input['mailchimp_permission_cap'];
		}
		return array(
			// store basics
			'store_name'               => trim( ( isset( $input['store_name'] ) ? $input['store_name'] : get_option( 'blogname' ) ) ),
			'store_street'             => isset( $input['store_street'] ) ? $input['store_street'] : false,
			'store_city'               => isset( $input['store_city'] ) ? $input['store_city'] : false,
			'store_state'              => isset( $input['store_state'] ) ? $input['store_state'] : false,
			'store_postal_code'        => isset( $input['store_postal_code'] ) ? $input['store_postal_code'] : false,
			'store_country'            => isset( $input['store_country'] ) ? $input['store_country'] : false,
			'store_phone'              => isset( $input['store_phone'] ) ? $input['store_phone'] : false,
			// locale info
			'store_locale'             => isset( $input['store_locale'] ) ? $input['store_locale'] : false,
			'store_timezone'           => mailchimp_get_timezone(),
			'admin_email'              => isset( $input['admin_email'] ) && is_email( $input['admin_email'] ) ? $input['admin_email'] : $this->getOption( 'admin_email', false ),
			'mailchimp_permission_cap' => $checkbox,
		);
	}

	/**
	 * @param $data
	 *
	 * @return array|false
	 */
	protected function hasInvalidStoreAddress( $data ) {
		$address_keys = array(
			'admin_email',
			'store_city',
			'store_state',
			'store_postal_code',
			'store_country',
			'store_street',
		);

		$invalid = array();
		foreach ( $address_keys as $address_key ) {
			if ( empty( $data[ $address_key ] ) ) {
				$invalid[] = $address_key;
			}
		}
		return empty( $invalid ) ? false : $invalid;
	}

	/**
	 * @param $data
	 *
	 * @return bool
	 */
	protected function hasInvalidStorePhone( $data ) {
		if ( empty( $data['store_phone'] ) || strlen( $data['store_phone'] ) <= 6 ) {
			return true;
		}

		return false;
	}

	/**
	 * @param $data
	 *
	 * @return bool
	 */
	protected function hasInvalidStoreName( $data ) {
		if ( empty( $data['store_name'] ) ) {
			return true;
		}
		return false;
	}

	protected function addInvalidAddressAlert() {
		add_settings_error( 'mailchimp_store_settings', '', __( 'As part of the Mailchimp Terms of Use, we require a contact email and a physical mailing address.', 'mailchimp-for-woocommerce' ) );
	}

	protected function addInvalidPhoneAlert() {
		add_settings_error( 'mailchimp_store_settings', '', __( 'As part of the Mailchimp Terms of Use, we require a valid phone number for your store.', 'mailchimp-for-woocommerce' ) );
	}

	protected function addInvalidStoreNameAlert() {
		add_settings_error( 'mailchimp_store_settings', '', __( 'Mailchimp for WooCommerce requires a Store Name to connect your store.', 'mailchimp-for-woocommerce' ) );
	}

	/**
	 * @param $input
	 *
	 * @return array|string[]
	 */
	protected function validatePostNewsletterSettings( $input ) {
		// default value.
		$checkbox = $this->getOption( 'mailchimp_checkbox_defaults', 'check' );

		// see if it's posted in the form.
		if ( isset( $input['mailchimp_checkbox_defaults'] ) && ! empty( $input['mailchimp_checkbox_defaults'] ) ) {
			$checkbox = $input['mailchimp_checkbox_defaults'];
		}
		$sanitized_tags = array_map( 'sanitize_text_field', explode( ',', $input['mailchimp_user_tags'] ) );

		$allowed_html = array(
			'a'  => array(
				'href'   => array(),
				'title'  => array(),
				'target' => array(),
			),
			'br' => array(),
		);

		$data = array(
			'mailchimp_list'                => isset( $input['mailchimp_list'] ) ? $input['mailchimp_list'] : $this->getOption( 'mailchimp_list', '' ),
			'newsletter_label'              => ( isset( $input['newsletter_label'] ) ) ? wp_kses( $input['newsletter_label'], $allowed_html ) : $this->getOption( 'newsletter_label', __( 'Subscribe to our newsletter', 'mailchimp-for-woocommerce' ) ),
			'mailchimp_auto_subscribe'      => isset( $input['mailchimp_auto_subscribe'] ) ? (bool) $input['mailchimp_auto_subscribe'] : false,
			'mailchimp_ongoing_sync_status' => isset( $input['mailchimp_ongoing_sync_status'] ) ? (bool) $input['mailchimp_ongoing_sync_status'] : false,
			'mailchimp_checkbox_defaults'   => $checkbox,
			'mailchimp_checkbox_action'     => isset( $input['mailchimp_checkbox_action'] ) ? $input['mailchimp_checkbox_action'] : $this->getOption( 'mailchimp_checkbox_action', 'woocommerce_after_checkout_billing_form' ),
			'mailchimp_user_tags'           => isset( $input['mailchimp_user_tags'] ) ? implode( ',', $sanitized_tags ) : $this->getOption( 'mailchimp_user_tags' ),
			'mailchimp_product_image_key'   => isset( $input['mailchimp_product_image_key'] ) ? $input['mailchimp_product_image_key'] : 'medium',
			'mailchimp_cart_tracking'       => isset( $input['mailchimp_cart_tracking'] ) ? $input['mailchimp_cart_tracking'] : 'all',
			'campaign_from_name'            => isset( $input['campaign_from_name'] ) ? $input['campaign_from_name'] : false,
			'campaign_from_email'           => isset( $input['campaign_from_email'] ) && is_email( $input['campaign_from_email'] ) ? $input['campaign_from_email'] : false,
			'campaign_subject'              => isset( $input['campaign_subject'] ) ? $input['campaign_subject'] : get_option( 'blogname' ),
			'campaign_language'             => isset( $input['campaign_language'] ) ? $input['campaign_language'] : $this->getOption( 'store_locale' , 'en'),
			'campaign_permission_reminder'  => isset( $input['campaign_permission_reminder'] ) ? $input['campaign_permission_reminder'] : sprintf( /* translators: %s - plugin name. */esc_html__( 'You were subscribed to the newsletter from %s', 'mailchimp-for-woocommerce' ), get_option( 'blogname' ) ),
		);

		if ( ! $this->hasValidCampaignDefaults( $data ) ) {
			$this->setData( 'validation.newsletter_settings', false );
			add_settings_error( 'mailchimp_list_settings', '', __( 'One or more fields were not updated', 'mailchimp-for-woocommerce' ) );
			return array( 'active_tab' => 'newsletter_settings' );
		}
		$this->setData( 'validation.newsletter_settings', true );

		$list_id = mailchimp_get_list_id();

		if ( ! empty( $list_id ) ) {
			$this->updateMailChimpList( array_merge( $this->getOptions(), $data ), $list_id );
		}

		// if we don't have any audience on the account, create one
		if ( $data['mailchimp_list'] === 'create_new' ) {
			$data['mailchimp_list'] = $this->updateMailChimpList( array_merge( $this->getOptions(), $data ) );
		}

		// as long as we have a list set, and it's currently in MC as a valid list, let's sync the store.
		if ( ! empty( $data['mailchimp_list'] ) && $this->api()->hasList( $data['mailchimp_list'] ) ) {

			$this->setData( 'validation.newsletter_settings', true );

			// sync the store with MC
			try {
				$store_created = $this->syncStore( array_merge( $this->getOptions(), $data ), true );
			} catch ( Exception $e ) {
				$this->setData( 'validation.newsletter_settings', false );
				mailchimp_log( 'errors.newsletter_settings', 'Store cannot be synced :: ' . $e->getMessage() );
				add_settings_error( 'mailchimp_newsletter_settings', '', __( 'Cannot create or update Store at Mailchimp.', 'mailchimp-for-woocommerce' ) . ' Mailchimp says: ' . $e->getMessage() );
				$data['active_tab'] = 'newsletter_settings';
				return $data;
			}

			// if there was already a store in Mailchimp, use the list ID from Mailchimp
			if ( $this->swapped_list_id ) {
				$data['mailchimp_list'] = $this->swapped_list_id;
			}

			// run sync all products if the image size has changed
			if ( mailchimp_get_option( 'mailchimp_product_image_key', 'medium' ) !== $data['mailchimp_product_image_key'] ) {
				 mailchimp_handle_or_queue(new MailChimp_WooCommerce_Process_Products());
			}

			// start the sync automatically if the sync is false
			if ( $store_created && ( (bool) $this->getData( 'sync.started_at', false ) === false ) ) {
				// tell the next page view to start the sync with a transient since the data isn't available yet
				set_site_transient( 'mailchimp_woocommerce_start_sync', microtime(), 300 );

				$this->showSyncStartedMessage();
			}

			$data['active_tab'] = 'sync';

			return $data;
		}

		$this->setData( 'validation.newsletter_settings', false );

		add_settings_error( 'mailchimp_newsletter_settings', '', __( 'One or more fields were not updated', 'mailchimp-for-woocommerce' ) );

		$data['active_tab'] = 'newsletter_settings';

		return $data;
	}

	/**
	 * @param null $data
	 *
	 * @return bool
	 */
	public function hasValidStoreInfo( $data = null ) {
		return $this->validateOptions(
			array(
				'store_name',
				'store_street',
				'store_city',
				'store_state',
				'store_postal_code',
				'store_country',
				'store_phone',
				'store_locale',
				'store_phone',
				'mailchimp_permission_cap',
			),
			$data
		);
	}

	/**
	 * @param null $data
	 *
	 * @return bool
	 */
	public function hasValidCampaignDefaults( $data = null ) {
		return $this->validateOptions(
			array(
				'campaign_from_name',
				'campaign_from_email',
				'campaign_subject',
				'campaign_language',
				'campaign_permission_reminder',
			),
			$data
		);
	}

	/**
	 * @return array|bool|mixed|object|null
	 */
	public function validateApiKey() {
		try {
			return $this->hasValidApiKey();
		} catch ( Exception $e ) {
			return false;
		}
	}

	/**
	 * @param null  $data
	 * @param false $throw_if_not_valid
	 *
	 * @return array|bool|mixed|object|null
	 * @throws MailChimp_WooCommerce_Error
	 * @throws MailChimp_WooCommerce_RateLimitError
	 * @throws MailChimp_WooCommerce_ServerError
	 */
	public function hasValidApiKey( $data = null, $throw_if_not_valid = false ) {
		if ( ! $this->validateOptions( array( 'mailchimp_api_key' ), $data ) ) {
			return false;
		}

		if ( ( $pinged = $this->getCached( 'api-ping-check' ) ) === null ) {
			if ( ( $pinged = $this->api()->ping( false, $throw_if_not_valid === true ) ) ) {
				$this->setCached( 'api-ping-check', true, 120 );
			}
		}

		return $pinged;
	}

	/**
	 * @return array|bool|mixed|object|null
	 */
	public function hasValidMailChimpList() {
		if ( ! $this->validateApiKey() ) {
			add_settings_error( 'mailchimp_api_key', '', __( 'You must supply your Mailchimp API key to pull the audiences.', 'mailchimp-for-woocommerce' ) );
			return false;
		}

		try {
			if ( ! ( $this->validateOptions( array( 'mailchimp_list' ) ) ) ) {
				return $this->api()->getLists( true );
			}

			return $this->api()->hasList( $this->getOption( 'mailchimp_list' ) );
		} catch ( Exception $e ) {
			return false;
		}
	}

	/**
	 * @return array|bool|mixed|object|null
	 * @throws MailChimp_WooCommerce_Error
	 * @throws MailChimp_WooCommerce_RateLimitError
	 * @throws MailChimp_WooCommerce_ServerError
	 */
	public function getAccountDetails() {
		if ( ! $this->hasValidApiKey() ) {
			return false;
		}

		try {
			if ( ( $account = $this->getCached( 'api-account-name' ) ) === null ) {
				if ( ( $account = $this->api()->getProfile() ) ) {
					$this->setCached( 'api-account-name', $account, 120 );
				}
			}
			return $account;
		} catch ( Exception $e ) {
			return false;
		}
	}

	/**
	 * @return array|bool|mixed|object|null
	 */
	public function getMailChimpLists() {
		try {
			if ( ! $this->validateApiKey() ) {
				return false;
			}
		} catch ( Exception $e ) {
			return false;
		}

		try {
			if ( ( $pinged = $this->getCached( 'api-lists' ) ) === null ) {
				$pinged = $this->api()->getLists( true );
				if ( $pinged ) {
					$this->setCached( 'api-lists', $pinged, 120 );
				}
				return $pinged;
			}
			return $pinged;
		} catch ( Exception $e ) {
			return array();
		}
	}

	/**
	 * @return false|mixed
	 */
	public function getListName() {
		if ( ! $this->validateApiKey() ) {
			return false;
		}

		if ( ! ( $list_id = $this->getOption( 'mailchimp_list', false ) ) ) {
			return false;
		}

		try {
			if ( ( $lists = $this->getCached( 'api-lists' ) ) === null ) {
				$lists = $this->api()->getLists( true );
				if ( $lists ) {
					$this->setCached( 'api-lists', $lists, 120 );
				}
			}

			return array_key_exists( $list_id, $lists ) ? $lists[ $list_id ] : false;
		} catch ( Exception $e ) {
			return false;
		}
	}

	/**
	 * @return bool
	 * @throws MailChimp_WooCommerce_Error
	 * @throws MailChimp_WooCommerce_RateLimitError
	 * @throws MailChimp_WooCommerce_ServerError
	 */
	public function isReadyForSync() {
		if ( ! $this->hasValidApiKey() ) {
			return false;
		}

		if ( ! $this->getOption( 'mailchimp_list', false ) ) {
			return false;
		}

		if ( ! $this->api()->hasList( $this->getOption( 'mailchimp_list' ) ) ) {
			return false;
		}

		if ( ! $this->api()->getStore( $this->getUniqueStoreID() ) ) {
			return false;
		}

		return true;
	}

	public function inject_sync_ajax_call() {
		global $wp; ?>
		<script type="text/javascript" >
			jQuery(document).ready(function($) {
				var endpoint = '<?php echo MailChimp_WooCommerce_Rest_Api::url( 'sync/stats' ); ?>';
				var on_sync_tab = '<?php echo ( mailchimp_check_if_on_sync_tab() ? 'yes' : 'no' ); ?>';
				var sync_status = '<?php echo ( ( mailchimp_has_started_syncing() && ! mailchimp_is_done_syncing() ) ? 'historical' : 'current' ); ?>';
				var promo_rulesProgress = 0;
				var orderProgress = 0;
				var productProgress = 0;

				if (on_sync_tab === 'yes') {
					var call_mailchimp_for_stats = function (showSpinner = false) {
						let mc_last_updated = jQuery('#mailchimp_last_updated');
						if (showSpinner ) mc_last_updated.next('.spinner').css('visibility', 'visible');
						jQuery.get(endpoint, function(response) {
							if (response.success) {

								// if the response is now finished - but the original sync status was "historical"
								// perform a page refresh because we need the re-sync buttons to show up again.
								if (response.has_finished === true && sync_status === 'historical') {
									return document.location.reload(true);
								}

								if (response.has_started && !response.has_finished) {
									jQuery('.sync-stats-audience .sync-loader').css('visibility', 'visible');
									jQuery('.sync-stats-audience .card_count').hide();

									jQuery('.sync-stats-store .card_count').hide();

									jQuery('.sync-stats-card .progress-bar-wrapper').show();

									if (response.promo_rules_page === 'complete') {
										promo_rulesProgress = 100;
										jQuery('#mailchimp_promo_rules_count').html(response.promo_rules_in_mailchimp.toLocaleString(undefined, {maximumFractionDigits: 0})).css('display', 'inline-block');
										jQuery('.sync-stats-card.promo_rules .progress-bar-wrapper').hide();
									} else {
										if (response.promo_rules_in_mailchimp === 0) {
											promo_rulesProgress = 0;
											promo_rulesPartial = "0 / " + response.promo_rules_in_store;
										} else {
											promo_rulesProgress = response.promo_rules_in_mailchimp / response.promo_rules_in_store * 100
											promo_rulesPartial = response.promo_rules_in_mailchimp + " / " + response.promo_rules_in_store;
										}
										if (promo_rulesProgress > 100) promo_rulesProgress = 100;
										jQuery('.mailchimp_promo_rules_count_partial').html(promo_rulesPartial);
									}
									jQuery('.sync-stats-card.promo_rules .progress-bar').width(promo_rulesProgress+"%");

									if (response.products_page === 'complete') {
										productsProgress = 100;
										jQuery('#mailchimp_product_count').html(response.products_in_mailchimp.toLocaleString(undefined, {maximumFractionDigits: 0})).css('display', 'inline-block');
										jQuery('.sync-stats-card.products .progress-bar-wrapper').hide();
									} else {
										if (response.products_in_mailchimp === 0) {
											productsProgress = 0;
											productsPartial = "0 / " + response.products_in_store;
										} else {
											productsProgress = response.products_in_mailchimp / response.products_in_store * 100
											productsPartial = response.products_in_mailchimp + " / " + response.products_in_store;
										}
										if (productsProgress > 100) productsProgress = 100;
										jQuery('.mailchimp_product_count_partial').html(productsPartial);
									}
									jQuery('.sync-stats-card.products .progress-bar').width(productsProgress+"%");

									if (response.orders_page === 'complete') {
										ordersProgress = 100;
										jQuery('#mailchimp_order_count').html(response.orders_in_mailchimp.toLocaleString(undefined, {maximumFractionDigits: 0})).css('display', 'inline-block');
										jQuery('.sync-stats-card.orders .progress-bar-wrapper').hide();
									} else {
										if (response.orders_in_mailchimp === 0) {
											ordersProgress = 0;
											ordersPartial = "0 / " + response.orders_in_store;
										} else {
											ordersProgress = response.orders_in_mailchimp / response.orders_in_store * 100
											ordersPartial = response.orders_in_mailchimp + " / " + response.orders_in_store;
										}
										if (ordersProgress > 100) ordersProgress = 100;
										jQuery('.mailchimp_order_count_partial').html(ordersPartial);
									}
									jQuery('.sync-stats-card.orders .progress-bar').width(ordersProgress+"%");

									mc_last_updated.html(response.date);

									// only call status again if sync is running.
									setTimeout(function() {
										call_mailchimp_for_stats(true);
									}, 10000);
									mc_last_updated.next('.spinner').css('visibility', 'hidden');
								}
								else {
									mc_last_updated.next('.spinner').css('visibility', 'hidden');
									jQuery('.sync-stats-card .progress-bar-wrapper').hide();
									jQuery('#mailchimp_order_count').css('display', 'inline-block');
									jQuery('#mailchimp_product_count').css('display', 'inline-block');
									jQuery('#mailchimp_promo_rules_count').css('display', 'inline-block');
								}
							}
						});
					};

					call_mailchimp_for_stats();
				}
			});
		</script>
		<?php
	}

	/**
	 * @param null $data
	 * @param null $list_id
	 *
	 * @return false|mixed|null
	 */
	private function updateMailChimpList( $data = null, $list_id = null ) {
		if ( empty( $data ) ) {
			$data = $this->getOptions();
		}

		$required = array(
			'store_name',
			'store_street',
			'store_city',
			'store_state',
			'store_postal_code',
			'store_country',
			'campaign_from_name',
			'campaign_from_email',
			'campaign_subject',
			'campaign_permission_reminder',
		);

		foreach ( $required as $requirement ) {
			if ( ! isset( $data[ $requirement ] ) || empty( $data[ $requirement ] ) ) {
				mailchimp_log( 'admin', 'does not have enough data to update the mailchimp list.' );
				return false;
			}
		}

		$submission = new MailChimp_WooCommerce_CreateListSubmission();

		// allow the subscribers to choose preferred email type (html or text).
		$submission->setEmailTypeOption( true );

		// set the store name if the list id is not set.
		if ( empty( $list_id ) ) {
			$submission->setName( $data['store_name'] );
			if ( isset( $data['admin_email'] ) && ! empty( $data['admin_email'] ) ) {
				$submission->setNotifyOnSubscribe( $data['admin_email'] );
				$submission->setNotifyOnUnSubscribe( $data['admin_email'] );
			}
		}

		// set the campaign defaults
		$submission->setCampaignDefaults(
			$data['campaign_from_name'],
			$data['campaign_from_email'],
			$data['campaign_subject'],
			$data['campaign_language']
		);

		// set the permission reminder message.
		$submission->setPermissionReminder( $data['campaign_permission_reminder'] );

		$submission->setContact( $this->address( $data ) );

		// let's turn this on for debugging purposes.
		mailchimp_debug( 'admin', 'list info submission', array( 'submission' => print_r( $submission->getSubmission(), true ) ) );

		try {
			$response = ! empty( $list_id ) ?
				$this->api()->updateList( $list_id, $submission ) :
				$this->api()->createList( $submission );

			if ( empty( $list_id ) ) {
				$list_id = array_key_exists( 'id', $response ) ? $response['id'] : false;
			}

			$this->setData( 'errors.mailchimp_list', false );

			try {
				if ( ! empty( $list_id ) ) {
					$transient  = "mailchimp-woocommerce-gdpr-fields.{$list_id}";
					$GDPRfields = mailchimp_get_api()->getGDPRFields( $list_id );
					set_site_transient( $transient, $GDPRfields );
					mailchimp_log(
						'admin',
						'updated GDPR fields',
						array(
							'fields' => $GDPRfields,
						)
					);
				}
			} catch ( Exception $e ) {
				set_site_transient( $transient, array(), 60 );
			}

			return $list_id;

		} catch ( MailChimp_WooCommerce_Error $e ) {
			mailchimp_error( 'admin', $e->getMessage() );
			$this->setData( 'errors.mailchimp_list', $e->getMessage() );
			return false;
		}
	}

	/**
	 * @param null $data
	 * @param bool $update_campaign_defaults
	 * @return bool
	 * @throws Exception
	 * @throws MailChimp_WooCommerce_Error
	 * @throws MailChimp_WooCommerce_RateLimitError
	 * @throws MailChimp_WooCommerce_ServerError
	 */
	public function syncStore( $data = null, $update_campaign_defaults = false ) {
		if ( empty( $data ) ) {
			$data = $this->getOptions();
		}

		$list_id  = $this->array_get( $data, 'mailchimp_list', false );
		$site_url = $this->getUniqueStoreID();

		if ( empty( $list_id ) || empty( $site_url ) ) {
			return false;
		}

		$new = false;

		if ( ! ( $store = $this->api()->getStore( $site_url ) ) ) {
			$new   = true;
			$store = new MailChimp_WooCommerce_Store();
		}

		$call     = $new ? 'addStore' : 'updateStore';
		$time_key = $new ? 'store_created_at' : 'store_updated_at';

		$store->setId( $site_url );
		$store->setPlatform( 'woocommerce' );

		// set the locale data
		$store->setPrimaryLocale( $this->array_get( $data, 'store_locale', 'en' ) );
		$store->setTimezone( mailchimp_get_timezone() );
		$store->setCurrencyCode( $this->array_get( $data, 'store_currency_code', 'USD' ) );
		$store->setMoneyFormat( $store->getCurrencyCode() );

		// set the basics
		$store->setName( $this->array_get( $data, 'store_name' ) );
		$store->setDomain( get_option( 'siteurl' ) );

		// don't know why we did this before
		// $store->setEmailAddress($this->array_get($data, 'campaign_from_email'));
		$store->setEmailAddress( $this->array_get( $data, 'admin_email' ) );

		$store->setAddress( $this->address( $data ) );
		$store->setPhone( $this->array_get( $data, 'store_phone' ) );
		$store->setListId( $list_id );

		try {
			mailchimp_log('sync_store', 'posting data', array('store_post' => $store->toArray()));

			// let's create a new store for this user through the API
			$this->api()->$call( $store, false );

			// apply extra meta for store created at
			$this->setData( 'errors.store_info', false );
			$this->setData( $time_key, time() );

			// on a new store push, we need to make sure we save the site script into a local variable.
			mailchimp_update_connected_site_script();

			// we need to update the list again with the campaign defaults
            if (!$update_campaign_defaults) {
	            $this->updateMailChimpList( $data, $list_id );
            }

			return true;
		} catch ( Exception $e ) {
			if ( mailchimp_string_contains( $e->getMessage(), 'woocommerce already exists in the account' ) ) {
				// retrieve Mailchimp store using domain
				$stores = $this->api()->stores();
				// iterate thru stores, find correct store ID and save it to db
				foreach ( $stores as $mc_store ) {
					if ( $mc_store->getDomain() === $store->getDomain() && $store->getPlatform() == 'woocommerce' ) {
						update_option( 'mailchimp-woocommerce-store_id', $mc_store->getId(), 'yes' );

						// update the store with the previous listID
						$store->setListId( $mc_store->getListId() );
						$store->setId( $mc_store->getId() );

						$this->swapped_list_id  = $mc_store->getListId();
						$this->swapped_store_id = $mc_store->getId();

						// check if list id is the same, if not, throw error saying that there's already a store synched to a list, so we can't proceed.

						if ( $this->api()->updateStore( $store ) ) {
							return true;
						}
					}
				}
			}
			$this->setData( 'errors.store_info', $e->getMessage() );
			throw($e);
		}
	}

	/**
	 * @param array $data
	 * @return MailChimp_WooCommerce_Address
	 */
	private function address( array $data ) {
		$address = new MailChimp_WooCommerce_Address();

		if ( isset( $data['store_street'] ) && $data['store_street'] ) {
			$address->setAddress1( $data['store_street'] );
		}

		if ( isset( $data['store_city'] ) && $data['store_city'] ) {
			$address->setCity( $data['store_city'] );
		}

		if ( isset( $data['store_state'] ) && $data['store_state'] ) {
			$address->setProvince( $data['store_state'] );
		}

		if ( isset( $data['store_country'] ) && $data['store_country'] ) {
			$address->setCountry( $data['store_country'] );
		}

		if ( isset( $data['store_postal_code'] ) && $data['store_postal_code'] ) {
			$address->setPostalCode( $data['store_postal_code'] );
		}

		if ( isset( $data['store_name'] ) && $data['store_name'] ) {
			$address->setCompany( $data['store_name'] );
		}

		if ( isset( $data['store_phone'] ) && $data['store_phone'] ) {
			$address->setPhone( $data['store_phone'] );
		}

		$woo_countries = new WC_Countries();
		$address->setCountryCode( $woo_countries->get_base_country() );

		return $address;
	}

	/**
	 * @param array $required
	 * @param null  $options
	 * @return bool
	 */
	private function validateOptions( array $required, $options = null ) {
		$options = is_array( $options ) ? $options : $this->getOptions();

		foreach ( $required as $requirement ) {
			if ( ! isset( $options[ $requirement ] ) || empty( $options[ $requirement ] ) ) {
				return false;
			}
		}

		return true;
	}

	/**
	 * @return bool
	 * @throws MailChimp_WooCommerce_Error
	 * @throws MailChimp_WooCommerce_RateLimitError
	 * @throws MailChimp_WooCommerce_ServerError
	 */
	public function startSync() {
		// delete the transient so this only happens one time.
		delete_site_transient( 'mailchimp_woocommerce_start_sync' );

		$full_sync = new MailChimp_WooCommerce_Process_Full_Sync_Manager();

		// make sure the storeeId saved on DB is the same on Mailchimp
		try {
			$this->syncStore();
			$this->defineWebHooks();
		} catch ( Exception $e ) {
			mailchimp_log( 'error.sync', 'Store cannot be synced :: ' . $e->getMessage() );
			add_settings_error( 'mailchimp_sync_error', '', __( 'Cannot create or update Store at Mailchimp.', 'mailchimp-for-woocommerce' ) . ' Mailchimp says: ' . $e->getMessage() );
			return false;
		}

		// tell Mailchimp that we're syncing
		$full_sync->start_sync();

		// enqueue sync manager
		as_enqueue_async_action( 'MailChimp_WooCommerce_Process_Full_Sync_Manager', array(), 'mc-woocommerce' );
		return true;
	}

	/**
	 * Show the sync started message right when they sync things.
	 */
	private function showSyncStartedMessage() {
		 $text = '<b>' . __( 'Starting the sync process...', 'mailchimp-for-woocommerce' ) . '</b><br/>' .
			'<p id="sync-status-message">' .
			__( 'The plugin has started the initial sync with your store, and the process will work in the background automatically.', 'mailchimp-for-woocommerce' ) .
			' ' .
			__( 'Sometimes the sync can take a while, especially on sites with lots of orders and/or products. It is safe to navigate away from this screen while it is running.', 'mailchimp-for-woocommerce' ) .
			'</p>';
		add_settings_error( 'mailchimp-woocommerce_notice', $this->plugin_name, $text, 'success' );
	}

	/**
	 *
	 */
	private function mailchimp_show_initial_sync_message() {
		try {
			$order_count = mailchimp_get_api()->getOrderCount( mailchimp_get_store_id() );
		} catch ( Exception $e ) {
            $order_count = 'your';
		}

		$text = '<p id="sync-status-message">' .
			/* translators: %1$s: Number of synced orders %2$s: Audience name */
			sprintf(
				__( 'We successfully synced %1$s orders to your Audience, %2$s. If you’re happy with this integration, leave a 5-star review. It helps our community know we’re working hard to make it better each day.', 'mailchimp-for-woocommerce' ),
				$order_count,
				$this->getListName()
			) .
		'</p>' .
		'<a style="display:inline align-right" class="button mc-review-button" href="https://wordpress.org/support/plugin/mailchimp-for-woocommerce/reviews/" target=_blank>' .
			esc_html__( 'Leave a Review', 'mailchimp-for-woocommerce' ) .
		'</a>';

		add_settings_error( 'mailchimp-woocommerce_notice', $this->plugin_name . '-initial-sync-end', $text, 'success' );
	}

	/**
	 *
	 */
	public function mailchimp_woocommerce_communication_status() {
		$this->adminOnlyMiddleware();

		$original_opt = $this->getData( 'comm.opt', 0 );
		$opt          = $_POST['opt'];
		$admin_email  = $this->getOptions()['admin_email'];

		mailchimp_debug( 'communication_status', "setting to {$opt}" );

		// try to set the info on the server
		// post to communications api
		$response = $this->mailchimp_set_communications_status_on_server( $opt, $admin_email );

		// if success, set internal option to check for opt and display on sync page
		if ( $response['response']['code'] == 200 ) {
			$response_body = json_decode( $response['body'] );
			if ( isset( $response_body ) && $response_body->success == true ) {
				$this->setData( 'comm.opt', $opt );
				wp_send_json_success( __( 'Saved', 'mailchimp-for-woocommerce' ) );
			}
		} else {
			// if error, keep option to original value
			wp_send_json_error(
				array(
					'error' => __( 'Error setting communications status', 'mailchimp-for-woocommerce' ),
					'opt'   => $original_opt,
				)
			);
		}

		wp_die();
	}

	/**
	 * @throws MailChimp_WooCommerce_Error
	 * @throws MailChimp_WooCommerce_RateLimitError
	 * @throws MailChimp_WooCommerce_ServerError
	 */
	public function mailchimp_woocommerce_tower_status() {
		$this->adminOnlyMiddleware();

		$original_opt = $this->getData( 'tower.opt', 0 );
		$opt          = $_POST['opt'];

		mailchimp_debug( 'tower_status', "setting to {$opt}" );

		// try to set the info on the server
		// post to communications api
		$job           = new MailChimp_WooCommerce_Tower( mailchimp_get_store_id() );
		$response_body = $job->toggle( $opt );

		// if success, set internal option to check for opt and display on sync page
		if ( $response_body && $response_body->success == true ) {
			$this->setData( 'tower.opt', $opt );
			wp_send_json_success( __( 'Saved', 'mailchimp-for-woocommerce' ) );
		} else {
			// if error, keep option to original value
			wp_send_json_error(
				array(
					'error' => __( 'Error setting tower support status', 'mailchimp-for-woocommerce' ),
					'opt'   => $original_opt,
				)
			);
		}

		wp_die();
	}

	/**
	 * @param $opt
	 * @param $admin_email
	 * @param false       $remove
	 *
	 * @return array|WP_Error
	 */
	public function mailchimp_set_communications_status_on_server( $opt, $admin_email, $remove = false ) {
		$this->adminOnlyMiddleware();

		$env      = mailchimp_environment_variables();
		$audience = ! empty( mailchimp_get_list_id() ) ? 1 : 0;
		$synced   = get_option( 'mailchimp-woocommerce-sync.completed_at' ) > 0 ? 1 : 0;

		$post_data = array(
			'store_id'         => mailchimp_get_store_id(),
			'email'            => $admin_email,
			'domain'           => site_url(),
			'marketing_status' => $opt,
			'audience'         => $audience,
			'synced'           => $synced,
			'plugin_version'   => "MailChimp for WooCommerce/{$env->version}; PHP/{$env->php_version}; WordPress/{$env->wp_version}; Woo/{$env->wc_version};",
		);

		if ( $remove ) {
			$post_data['remove_email'] = true;
		}

		$route = 'https://woocommerce.mailchimpapp.com/api/opt_in_status';

		return wp_remote_post(
			esc_url_raw( $route ),
			array(
				'timeout'       => 12,
				'cache-control' => 'no-cache',
				'blocking'      => true,
				'method'        => 'POST',
				'data_format'   => 'body',
				'headers'       => array( 'Content-Type' => 'application/json; charset=utf-8' ),
				'body'          => json_encode( $post_data ),
			)
		);
	}

	/**
	 *
	 */
	public function mailchimp_woocommerce_ajax_delete_log_file() {
		$this->adminOnlyMiddleware();

		if ( ! isset( $_POST['log_file'] ) || empty( $_POST['log_file'] ) ) {
			wp_send_json_error( __( 'No log file provided', 'mailchimp-for-woocommerce' ) );
			return;
		}
		$requested_log_file = $_POST['log_file'];
		$log_handler        = new WC_Log_Handler_File();
		$removed            = $log_handler->remove( str_replace( '-log', '.log', $requested_log_file ) );
		wp_send_json_success( array( 'success' => $removed ) );
	}

	/**
	 * @return void
	 */
	public function mailchimp_woocommerce_ajax_load_log_file() {
		$this->adminOnlyMiddleware();

		if ( ! isset( $_POST['log_file'] ) || empty( $_POST['log_file'] ) ) {
			wp_send_json_error( __( 'No log file provided', 'mailchimp-for-woocommerce' ) );
			return;
		}
		$requested_log_file = sanitize_text_field( $_POST['log_file'] );
		$files              = defined( 'WC_LOG_DIR' ) ? @scandir( WC_LOG_DIR ) : array();

		$logs = array();
		if ( ! empty( $files ) ) {
			foreach ( array_reverse( $files ) as $key => $value ) {
				if ( ! in_array( $value, array( '.', '..' ) ) ) {
					if ( ! is_dir( $value ) && mailchimp_string_contains( $value, 'mailchimp_woocommerce' ) ) {
						$logs[ sanitize_title( $value ) ] = $value;
					}
				}
			}
		}

		if ( ! empty( $requested_log_file ) && isset( $logs[ sanitize_title( $requested_log_file ) ] ) ) {
			$viewed_log = $logs[ sanitize_title( $requested_log_file ) ];
			wp_send_json_success( esc_html( file_get_contents( WC_LOG_DIR . $viewed_log ) ) );
			return;
		}

		wp_send_json_error( __( 'Error loading log file contents', 'mailchimp-for-woocommerce' ) );
	}

	public function defineWebHooks() {
		// run this every time the store is saved to be sure we've got the hooks enabled.
		try {
			if ( mailchimp_is_configured() ) {
				mailchimp_handle_or_queue( new MailChimp_WooCommerce_WebHooks_Sync() );
			}
		} catch ( Exception $e ) {
			mailchimp_log( 'plugin', 'defineWebhooks', array( 'message' => $e->getMessage() ) );
		}
	}

	/**
	 * @param string $message
	 * @return bool
	 */
	protected function adminOnlyMiddleware( $message = "You're not allowed to do this" ) {
		if ( ! current_user_can( mailchimp_get_allowed_capability() ) ) {
            $error = new \Exception();
            mailchimp_debug('admin', 'tracing admin json error', $error->getTrace());
			wp_send_json_error( array( 'message' => $message, 'from' => 'mailchimp-for-woocommerce' ) );
		}
		return true;
	}
}
mailchimp-woocommerce-admin-settings-5.2.css                                                                                                                                                                                                                   30723         1711191352  plugins/mailchimp-for-woocommerce/admin/css                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     /**
 * mc-woocommerce Settings Page
 */
 @import url('https://use.typekit.net/wvc2hnb.css');

 @font-face {
	font-family: 'Proxima Nova Alt Light';
	font-style: normal;
	font-weight: normal;
	src: local('Proxima Nova Alt Light'), url('../fonts/Mark Simonson - Proxima Nova Alt Light.woff') format('woff');
	}

html {
	scroll-padding-top: 8em;
}

.mc-woocommerce-settings {
	width: 100%;
	margin: 0 !important;
	font-family: "proxima-nova", Arial, Helvetica, sans-serif;

}

.woocommerce-layout .woocommerce-store-alerts{
	display: none !important;
}

.mc-woocommerce-settings-header-wrapper {
	width:100%;
	padding-top: 56px;
}

.mc-woocommerce-settings-header-wrapper.wiz-header {
	background-color: white;
}

.mc-woocommerce-settings-header-wrapper.wiz-header .mc-woocommerce-settings-header{
	padding-bottom: 69px;
}


.mc-woocommerce-settings-header {
	width: 90%;
	margin: 2em auto 0 auto !important;
	font-family: "proxima-nova", Arial, Helvetica, sans-serif;
	padding-bottom: 0px;
	display:table;
}

.mc-woocommerce-settings-header .mailchimp-logo {
	margin: 0 1em;
}

.mc-woocommerce-settings-header svg.mc-woocommerce-logo{
	padding-left: 1em;
	display: inline-block;
}

.mc-woocommerce-settings-header .mc-woocommerce-wizard-btn {
	float: right;
	margin-top: 50px;
}

.mc-woocommerce-settings-header .mc-woocommerce-wizard-btn p{
	display: inline;
}

a.button.back-step {
	color: #7FAD45 !important;
	background-color: white !important;
	border: none !important;
	font-family: proxima-nova, Arial, Helvetica, sans-serif !important;
	font-size: 14px !important;
	line-height: 16px !important;
	padding: 15px 35px 27px 35px !important;
	display: inline;
	float: left;
	box-shadow: none;
	/* identical to box height */
	text-transform: uppercase !important;
}

.mc-woocommerce-header-steps {
	display: block;
	font-size: 12px;
	line-height: 24px;
	letter-spacing: 0.5px;
	text-transform: uppercase;
	margin-bottom: 15px;
	color: #AFAFAF;
}

.mc-woocommerce-header-title {
	display: block;
	font-style: normal;
	font-weight: 500;
	font-size: 30px;
	line-height: 28px;
	color: #241C15;
	margin-bottom: 15px;
}


.mc-woocommerce-header-subtitle {
	display: inline-block;
	font-style: normal;
	font-weight: normal;
	font-size: 20px;
	line-height: 30px;

	/* or 150% */
	letter-spacing: -0.32px;

	/* Functional / Tuna */
	color: #8C8C8C;
}

.mc-woocommerce-settings p {
	font-size: 14px;
	font-family: "Proxima Nova Alt Light", Arial, Helvetica, sans-serif;
}

.mc-woocommerce-settings-header-wrapper.wiz-header .mc-woocommerce-settings-subtitles {
	margin: 1em 0;
	display: inline-block;
	padding-left: 58px;
}

.mc-woocommerce-settings-subtitles {
	font-family: "proxima-nova", Arial, Helvetica, sans-serif;
	font-size: 22px !important;
	line-height: 32px;
	color: #3C3C3C;
	margin: 1em 1em 1em 13px;
	max-width: 75%;
}

.connect-buttons {
	padding-left: 151px;
	margin-top: 38px;
	z-index: 2;
	position: relative;
}

.connect-buttons .connect-button {
	display: inline;
}

.description {
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 12px !important;
	line-height: 16px  !important;
	color: #868585 !important;
}

.description.support-form {
	color: #444 !important;
}

.nav-tab-wrapper {
	border-bottom: 2px solid white !important;
	margin-bottom: 25px !important;
	margin: 0 1em;
}

.nav-tab-wrapper .nav-tab {
	background: #F1F1F1;
	border-radius: 4px 4px 0px 0px;
	border: 1px solid #F1F1F1;
	border-bottom: none;
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 14px;
	line-height: 24px;
	text-align: center;
	color: #212121;
	padding: 20px 35px;
	-webkit-transition: padding 0.1s ease-out;
	-moz-transition: padding 0.1s ease-out;
	-o-transition: padding 0.1s ease-out;
	transition: padding 0.1s ease-out;
}

.nav-tab-wrapper .nav-tab:first-of-type {
	margin-left: 0;
}

.nav-tab-wrapper .nav-tab:focus {
	outline: none !important;
	box-shadow: none !important;
}

.nav-tab-wrapper .nav-tab:hover:not(.nav-tab-active) {
	background: #F5F5F5;
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 14px;
	line-height: 24px;
	text-align: center;
	color: #212121;
	padding: 18px 35px 22px 35px;
	-webkit-transition: padding 0.1s ease-out;
	-moz-transition: padding 0.1s ease-out;
	-o-transition: padding 0.1s ease-out;
	transition: padding 0.1s ease-out;
}

.nav-tab-wrapper .nav-tab-active {
	background: white;
	padding: 18px 35px 22px 35px;
	border-radius: 4px 4px 0px 0px;
	border: 1px solid #F1F1F1;
	border-bottom: none;
}

.notices-content-wrapper.sync-notices {
	margin-bottom: 20px !important;
}

.mc-review-button {
	border: 1px solid #DBD9D2 !important;
	color: #0073AA !important;
}

.tab-content-wrapper,
.notices-content-wrapper {
	width: 90%;
	background: transparent;
	padding: 0;
	margin: 0 auto 0 auto !important;
	-webkit-box-sizing: border-box;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
}

.tab-content-wrapper {
	background: transparent !important;
}

.tab-content-wrapper fieldset{
	background: transparent !important;
}

.tab-content-wrapper fieldset input{
	background: white !important;
}

.tab-content-wrapper textarea{
	background: white !important;
}

.tab-content-wrapper fieldset select {
	background: white url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20width%3D%2220%22%20height%3D%2220%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M5%206l5%205%205-5%202%201-7%207-7-7%202-1z%22%20fill%3D%22%23555%22%2F%3E%3C%2Fsvg%3E') no-repeat right 5px top 55%;
	background-size: auto;

}

.tab-content-wrapper *,
.sync-content-wrapper {
	margin: 0;
	padding: 0;
	border: 0;
	-webkit-box-sizing: border-box;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
}

.tab-content-wrapper a {
	color: #8D5C87;
	text-decoration: none;
}
.tab-content-wrapper a:hover {
	text-decoration: underline;
}

.tab-content-wrapper form {
	margin: 0 auto;
	/* padding: 3em; */
}

.tab-content-wrapper fieldset{
	background: transparent;
	width: 100%;
}

.tab-content-wrapper fieldset .fieldset-header {
	float: left;
	padding-top: 3em;
	width: 100%;
	font-size: 18px !important;
}

.tab-content-wrapper fieldset .fieldset-header.no-padding {
	padding-top: 1em;
}

.tab-content-wrapper p.submit {
	margin-top: 0 !important;
	padding-top: 35px !important;
	margin-bottom: 45px !important;
}

.tab-content-wrapper p.submit:focus {
	margin-top: 10px !important;
}

.tab-content-wrapper .required-field-mark {
	color: red;
}

a.button.create-account {
	color: #7FAD45 !important;
	background-color: white !important;
	border: none !important;
	font-family: proxima-nova, Arial, Helvetica, sans-serif !important;
	font-size: 14px !important;
	line-height: 16px !important;
	padding: 15px 35px 27px 35px !important;
	box-shadow: none;
	/* identical to box height */
	text-transform: uppercase !important;
}

.tab-content-submit,
.mc-woocommerce-resync-button,
.mc-woocommerce-log-button {
	font-family: proxima-nova, Arial, Helvetica, sans-serif !important;
	font-size: 14px !important;
	line-height: 16px !important;
	padding: 15px 35px 27px 35px !important;

	/* identical to box height */
	text-transform: uppercase !important;
	color: #FFFFFF !important;
	border: none !important;

}

.oauth-description {
	display: none;
	color: #8C8C8C;
	position: absolute;
}

#mailchimp-oauth-connected {
	color: #7FAD45;
}

.mc-woocommerce-log-button {
	padding: 15px !important;
	text-decoration: none;
	display:inline-block;
	background-color: #FFFF;
}

.mc-woocommerce-log-button.delete-log-button:hover span {
	color: red;
}

.mc-woocommerce-log-button.mc-woocommerce-copy-log-button span.yes {
	color: green;
	display:none;
}

.tab-content-submit:not(.create-account):not(.mc-woocommerce-disconnect-button):not(.disconnect-confirm) {
	background: #7FAD45 !important;
	box-shadow:0 1px 0 #7FAD45 !important;
	text-shadow: 0 -1px 1px #7FAD45,1px 0 1px #7FAD45,0 1px 1px #7FAD45,-1px 0 1px #7FAD45 !important;
	-webkit-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
}

.disconnect-confirm {
	width:180px;
	margin: 0 0.5em !important;
	background: #b83110 !important;
	box-shadow:0 1px 0 #b83110 !important;
	text-shadow: 0 -1px 1px #b83110,1px 0 1px #b83110,0 1px 1px #b83110,-1px 0 1px #b83110 !important;
	-webkit-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
}

.disconnect-confirm:hover {
	background: #F72E2E !important;
	box-shadow:0 1px 0 #F72E2E !important;
	text-shadow: 0 -1px 1px #F72E2E,1px 0 1px #F72E2E,0 1px 1px #F72E2E,-1px 0 1px #F72E2E !important;
}

.tab-content-submit:not(.mc-woocommerce-disconnect-button):not(.disconnect-confirm):hover {
	background: #9EC769 !important;
	box-shadow:0 1px 0 #9EC769 !important;
	text-shadow: 0 -1px 1px #9EC769,1px 0 1px #9EC769,0 1px 1px #9EC769,-1px 0 1px #9EC769 !important;
	-webkit-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	text-decoration: none !important;
}

.mc-woocommerce-resync-button,
.mc-woocommerce-log-button {
	color: #3C3C3C !important;
	background: #DBD9D2 !important;
	box-shadow:0 1px 0 #DBD9D2 !important;
	-webkit-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;

}

.mc-woocommerce-resync-button:hover,
.mc-woocommerce-log-button:hover {
	color: #3C3C3C !important;
	background: #DADADA !important;
	box-shadow:0 1px 0 #DADADA !important;
	-webkit-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	text-decoration: none !important;
}

.mc-woocommerce-log-button {
	background: #fff !important;
	box-shadow:none !important;
}

.mc-woocommerce-log-button:hover {
	background: #eee !important;
}

.tab-content-submit:focus,.tab-content-submit:hover{
	background: rgb(149, 189, 101);
	border-color: rgb(149, 189, 101);
	color:#fff;
	box-shadow:0 1px 0 rgb(149, 189, 101);
}

.tab-content-wrapper label {
	display: block;
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 14px;
	font-weight: 600 !important;
	line-height: 30px;
	width: 100%;
	color: #3C3C3C;
}

.tab-content-wrapper h4 {
	margin-top: 0;
}

.sync-content-wrapper {
	display: table;
	margin: auto;
	width: 90%;
	padding: 0.5rem 1rem;
}

.sync-more-wrapper {
	position:relative;
	height: 264px;
}

.mc-comm-save {
	position: absolute;
	display: none;
	font-size: 0.8em;
	font-weight: 100 !important;
	color: #628735;
}

.sync-content-wrapper .sync-stats-wrapper {
	position:relative;
	background-color: white;
	padding: 4px 0em 0 0em;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
}

.sync-content-wrapper .sync-stats-wrapper.sync-stats-store{
	margin-right: 13px;
}

.sync-content-wrapper .sync-stats-wrapper.sync-stats-audience{
	margin-left: 13px;
}

.sync-content-wrapper .sync-stats-card {
	border-bottom: 1px solid #DBD9D2;
	margin: 1em 2em 0em 2em;
	padding: 2em 1em;
	min-height: 20px;
}

.sync-content-wrapper .overview-stats-store {
	margin-right: 13px;
	margin-bottom: 16px;
	padding: 2em 1em;
	min-height: 20px;
}

.sync-content-wrapper .last-updated {
	margin-left: 13px;
	margin-bottom: 16px;
	padding: 2em 1em;
	min-height: 20px;
}

.sync-content-wrapper .overview-stats-store .box,
.sync-content-wrapper .last-updated .box {
	margin: 0 2em;
	padding: 1em 0 0 0;
	min-height: 20px;
}

.sync-content-wrapper .sync-stats-card:last-child {
	border-bottom: none;
}

.sync-content-wrapper .sync-stats-card .sync-stats-card-content{
	position:relative;
}

.sync-content-wrapper .sync-stats-card span.card_label,
.sync-content-wrapper .sync-stats-card span.card_label{
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 14px;
	line-height: 14px;
}

.sync-content-wrapper .sync-stats-card span.card_count,
.sync-content-wrapper .sync-stats-card span.card_count{
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 22px;
	line-height: 22px;
	position: absolute;
	right: 1em;
	margin: 0;
}


.sync-content-wrapper .sync-stats-card .card_count_label {
	position: absolute;
	top: -1.3em;
	right: 0;
	color: #DBD9D2;
}

.sync-content-wrapper .sync-stats-card .sync-loader {
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 22px;
	line-height: 22px;
	position: absolute;
	right: 1em;
	margin: 8px 0px;
	visibility: hidden;
}

.progress-bar-wrapper {
	position: absolute;
	top: 0.6em;
	right: 1.8em;
	background: #F7F7F7;
	width: 50%;
	height: 3px;
	display: none;
}

.progress-bar {
	background: #8D5C87;
	width: 0%;
	height: 3px;
}

.sync-content-wrapper .sync-controls-wrapper {
	background-color: white;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
	width: 100%;
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 14px ;
	line-height: 14px;
	margin-bottom: 26px;
}

.sync-content-wrapper .sync-controls {
	padding: 1em 1em 1em 3em;
	font-size: 14px;
	line-height: 14px;
	min-height: 90px;
	position:relative;
}

.sync-content-wrapper .sync-controls .sync-controls-item {
	display: inline;
	float: left;
	margin-right: 42px;

}

.sync-content-wrapper .sync-controls p {
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	max-width: 300px;
}


.sync-content-wrapper .sync-controls .sync-controls-item .sync-controls-label{
	font-size: 13px;
	line-height: 20px;
}

.sync-content-wrapper .sync-controls #mailchimp_account_connected,
.sync-content-wrapper .sync-controls #mailchimp_list_name {
	font-size: 20px;
	line-height: 28px;
}

.sync-content-wrapper .sync-controls .mc-woocommerce-last-sync{
	display: table;
	float: right;
	min-height:90px;
	margin-right: 30px;
}

.sync-content-wrapper .sync-controls .mc-woocommerce-last-sync p{
	display: table-cell;
	vertical-align: middle;
}

.mc-woocommerce-disconnect-button {
	margin-top: 1em !important;
	border: 1px solid #b83110 !important;
	color: #b83110 !important;
	background: #F1F1F1 !important;
	box-shadow:0 1px 0 #F1F1F1 !important;
	text-shadow: 0 -1px 1px #F1F1F1,1px 0 1px #F1F1F1,0 1px 1px #F1F1F1,-1px 0 1px #F1F1F1 !important;
	-webkit-transition: background-color 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out;
	transition: background-color 0.3s ease-out;
	padding:10px !important;
}

.mc-woocommerce-disconnect-button span.dashicons{

	margin: -3px auto;
}

.mc-woocommerce-disconnect-button:hover {
	text-decoration: none !important;
	background: #f0f0f0 !important;
}

.mc-woocommerce-disconnect-button svg {
	margin-right: 2em;
	padding: 10px !important;
}


.tab-content-wrapper.overview-example {
	position: absolute;
	z-index:1;
	width:200px;
	height:200px;
	margin:50px auto;
	width:100%;
	text-align: center;
}

.tab-content-wrapper.overview-example:before {
	position:absolute;
	z-index:-1;
	top:0;
	left:0;
	width:100%;
	height:70%;
	content:"";
	background-color:white;
}

.tab-content-wrapper.overview-example img{
	width: 90%;
	margin: 0 auto;
	border: 1px solid silver;
}

.tab-content-wrapper .box {
	padding: 0.5rem 1rem;
	margin: 0;
	clear:both;
}

.sync-more-wrapper .box {
	margin: 0;
}

.sync-more-wrapper .box {
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
}

.tab-content-wrapper .box.box-half,
.sync-content-wrapper .box.box-half,
.sync-more-wrapper .box.box-half {
	float: left;
	clear: none;
	width: 50%;

}

.sync-more-wrapper .box.box-half .content{
	padding: 0 2em;
	background: white;
	min-height: 260px;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
}

.sync-more-wrapper .box.box-half.resync-container{
	width: 30%;
}

.sync-more-wrapper .box.box-half.resync-container .content{
	margin-left: 13px;
}

.sync-more-wrapper .box.box-half.support-container {
	width: 70%;
}

.sync-more-wrapper .box.box-half.support-container ul {
	padding-bottom: 1em;
}

.sync-more-wrapper .box.box-half.support-container .content{
	margin-right: 13px;
}

.sync-content-wrapper .box.box-half {
	height: 100%;
}

.tab-content-wrapper .box.box-half.margin-large {
	margin-top: 3em;
}

.tab-content-wrapper .box.box-third {
	float: left;
	clear:none;
	width: 33%;
}

.tab-content-wrapper fieldset label {
	font-weight: 500;
}

.tab-content-wrapper fieldset label p{
	font-weight: 400;
}

.tab-content-wrapper fieldset input[type="text"],
.tab-content-wrapper fieldset input[type="password"],
.tab-content-wrapper fieldset input[type="email"],
.tab-content-wrapper fieldset textarea {
	border: 1px solid #DBD9D2;
	box-sizing: border-box;
	border-radius: 4px;
	padding: 0.6em 1.5em;
	width: 100%;
	font-family: "Proxima Nova Alt Light", Arial, Helvetica, sans-serif

}

.tab-content-wrapper .mailchimp-select-wrapper {
	border: 1px solid #DBD9D2;
	padding: 6px 6px 4px 20px;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
	box-shadow: inset 0 1px 2px rgba(0,0,0,.07);
	background-color: white;
}

.tab-content-wrapper .mailchimp-select-wrapper select {
	padding: 0;
	background: transparent;
	font-size: 14px;
	font-family: "Proxima Nova Alt Light", Arial, Helvetica, sans-serif;
	border: none;
	-webkit-appearance: none;
	box-shadow: none;
	outline: none;
	width: 100%;
	background: no-repeat right center url("data:image/svg+xml;charset=UTF-8,%3csvg width='13' height='8' viewBox='0 0 13 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M11.34 0.590027L6.75 5.17003L2.16 0.590027L0.75 2.00003L6.75 8.00003L12.75 2.00003L11.34 0.590027Z' fill='%23212121'/%3e%3c/svg%3e ");
}

.tab-content-wrapper .mailchimp-select-wrapper select option{
	outline: none;
}

.tab-content-wrapper .mailchimp-select-wrapper select:disabled {
	color: #aaa;
	background: none;
}

.tab-content-wrapper fieldset select:focus {
	outline: none;
}

.tab-content-wrapper fieldset input[type='checkbox']:not(#mailchimp_woocommerce_newsletter) {
	width: 2em;
	height: 2em;
	border-radius: 4px;
	border: 1px solid #DBD9D2;
}

.tab-content-wrapper fieldset input[type='checkbox']:not(#mailchimp_woocommerce_newsletter):checked::before {
	color: #7FAD45;
	margin: -3px 0px 0px 5px;
	content: url("data:image/svg+xml;charset=UTF-8,%3csvg width='13' height='9' viewBox='0 0 13 9' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M10.75 0.5L12.25 2L5.26 9L0.75 4.5L2.25 3L5.26 6L10.75 0.5Z' fill='%237FAD45'/%3e%3c/svg%3e ");

}


.tab-content-wrapper fieldset input[type='radio'],
.sync-content-wrapper fieldset input[type='radio'] {
	width: 2em;
	height: 2em;
	border: 1px solid #DBD9D2;
	margin-right: 10px;
}

.tab-content-wrapper fieldset input[type='radio']:checked::before,
.sync-content-wrapper fieldset input[type='radio']:checked::before {
	background: url("data:image/svg+xml;charset=UTF-8,%3csvg width='13' height='9' viewBox='0 0 13 9' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M10.75 0.5L12.25 2L5.26 9L0.75 4.5L2.25 3L5.26 6L10.75 0.5Z' fill='%237FAD45'/%3e%3c/svg%3e ");
	background-repeat: none;
	width: 13px;
	height: 9px;
	margin: 8px 0 0 7px;
}

.tab-content-wrapper fieldset .radio-label,
.sync-content-wrapper fieldset .radio-label {
	margin-bottom: 10px;
}

.tab-content-wrapper fieldset textarea {
	border: 1px solid #DBD9D2;
	box-sizing: border-box;
	border-radius: 4px;
	padding: 15px 20px;
	width: 100%;

}

.tab-content-wrapper .optional-settings-label,
.tab-content-wrapper .optional-settings-button {
	margin-top: 3em;
	font-weight: 600;
}

.tab-content-wrapper .optional-settings-button:hover span {
	color: #628735;
}

.tab-content-wrapper .optional-settings-label span,
.tab-content-wrapper .optional-settings-button span {
	text-transform: uppercase;
	color: #7FAD45 ;
	font-size: 14px;
	cursor: default;
}

.tab-content-wrapper .optional-settings-button span {
	background: no-repeat left center url("data:image/svg+xml;charset=UTF-8,%3csvg width='13' height='8' viewBox='0 0 13 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M11.34 0.590027L6.75 5.17003L2.16 0.590027L0.75 2.00003L6.75 8.00003L12.75 2.00003L11.34 0.590027Z' fill='%23212121'/%3e%3c/svg%3e ");
	padding-left: 2em;
	cursor: pointer;
}

.tab-content-wrapper .optional-settings-button span.active {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg width='13' height='8' viewBox='0 0 13 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M2.16 7.40997L6.75 2.82997L11.34 7.40997L12.75 5.99997L6.75 -2.61783e-05L0.75 5.99997L2.16 7.40997Z' fill='%23212121'/%3e%3c/svg%3e ");
}

.tab-content-wrapper .optional-settings-content {
	display: block;
}

/* Old styles from tabs.php */

#sync-status-message strong,
#http-worker-deprecated-message strong {
	font-weight:inherit;
}

.view-log-select {
	width: 100%;
	display: inline-block;
}

.log-file-actions {
	display: flex;
	justify-content: space-around;
	align-items: stretch;
}

#log-actions {
	float: right;
	flex: 0 0 104px;
	margin-left: 20px;
}

.view-log-submit {
	width: 15%;
	display: inline-block;
}

#log-viewer {
	background: #fff;
	border: 1px solid #e5e5e5;
	box-shadow: 0 1px 1px rgba(0,0,0,.04);
	text-align: center;
}

#log-viewer pre {
	font-family: monospace;
	white-space: pre-wrap;
}

#log-viewer #log-header {
	border-bottom: 1px solid #e5e5e5;
	padding: 15px 20px;
}

#log-viewer #log-content {
	height: 500px;
	padding: 15px 20px;
	width: 100%;
	background-color: white;
	color: #444;
	font-family: monospace;
	white-space: pre-wrap;
	font-size: 1em;

}

#log-viewer #log-content:focus {
	outline: none;
	box-shadow: none !important;
}

#log-viewer .spinner {
	float:none;
	background-size: 16px 16px;
	width: 16px;
	height: 16px;
	margin: 30px 10px
}

/* account create modal */
#mc-woocommerce-create-account-link {
	padding-top: 20px;
}

#mc-woocommerce-create-account-go {
	float:right;
}

#mc-woocommerce-create-account-go-spinner {
	float:left;
}

.mc-woocommerce-modal {
	width: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	position: absolute;
	left: 0;
	visibility: hidden;
	display: none;
	padding-top: 20px;
	/* background: red;
	opacity: 0.5; */
}

#mc-woocommerce-support-form {
	bottom:0px;
	padding-bottom: 20px;
}

#mc-woocommerce-create-account {
	top:-235px;
}

.mc-woocommerce-modal .terms {
	padding-top: 20px;
	padding-bottom: 20px;
}

.mc-woocommerce-modal .terms a {
	color: #7FAD45 !important;
}

.mc-woocommerce-modal h3 {
	padding-bottom: 20px;
}

.mc-woocommerce-modal .notices {
	background:#fff;
	border-left: 4px solid#fff;
	border-left-color: rgb(255, 255, 255);
	box-shadow: 0 1px 1px 0 rgba(0,0,0,.1);
	margin: 5px 15px 2px;
	padding: 1px 12px;
	padding-right: 12px;
}

#mc-woocommerce-create-account:target,
#mc-woocommerce-support-form:target {
	visibility: visible;
	display: block;
}

.mc-woocommerce-modal .reveal-modal {
	position: relative;
	margin: 0 auto;
	width: 70%;
	max-width: 580px;
	background-color: #ffffff;
	box-shadow: 5px 10px 40px rgba(0, 0, 0, 0.1);
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	line-height: 17px;
}

.mc-woocommerce-modal .close-modal {
	position: absolute;
	left: 10px;
	top: 10px;
}

.mc-woocommerce-modal .modal-header {
	text-align: center;
	padding-top: 30px;
}

#mc-woocommerce-support-form .modal-header svg{
	display: inline;
}

#mc-woocommerce-support-form .modal-header h3{
	text-align: center;
	padding: 0px 0 20px 30px;
	font-size: 2em;
	display: inline-block;
}

.mc-woocommerce-modal .modal-header h3{
	text-align: center;
	padding-top: 30px;
	font-size: 2em;
}

#mc-woocommerce-support-form h3{
	padding-bottom: 0;
}

.mc-woocommerce-modal .modal-footer {
	padding: 35px;
	bottom: 0px;
	color: #B0B4BD;
	font-size: 10px;
}

.mc-woocommerce-create-account-step {
	padding: 5px 35px 10px 35px;
}

#mc-woocommerce-create-account-step-2 {
	display: none;
}

.mc-woocommerce-create-account-step .spinner{
	float:right;
	background-size: 16px 16px;
	width: 16px;
	height: 16px;
	margin: 15px 10px;
}

.mc-woocommerce-create-account-step-error p{
	display: none;

	background:#fff;
	border-left: 4px solid#fff;
	border-left-color: red;
	box-shadow: 1px 1px 1px 1px rgba(0,0,0,.1);
	margin: 5px 15px 2px;
	padding: 4px 12px;
	padding-right: 12px;
}

.mc-woocommerce-create-account-step-error #connecting,
.mc-woocommerce-create-account-step-error #success{
	border-left-color: #7FAD45;
}

.mc-woocommerce-create-account-step #username_suggestion {
	visibility: hidden;
}

.mc-woocommerce-create-account-step #username_suggestion span{
	color: #7FAD45;
	text-decoration: none;
	cursor: pointer;
}

.mc-woocommerce-create-account-step #username_suggestion span:hover{
	text-decoration: underline;
}

.mc-woocommerce-create-account-step .whitebtn{
	background: white !important;
	box-shadow: 0 1px 0 #DBD9D2 !important;
	text-shadow: 0 -1px 1px	#DBD9D2,1px 0 1px #DBD9D2,0 1px 1px #DBD9D2,-1px 0 1px #DBD9D2 !important;
}

#mc-woocommerce-create-account-next {
	float: right;
}

#mc-woocommerce-create-account-prev {
	float: none;
}

#mc-woocommerce-create-account-step-1 .tab-content-submit:hover{
	background: #F7F7F7;
}

#mc-woocommerce-create-account-step-1 ul{
	list-style: disc !important;
	margin-left: 13px;
}

.settings-sample-frame {

	border: 1px solid black;
	padding: 2em;
	position: relative;
	background: rgb(255,255,255);
}

.settings-sample-frame .mailchimp-newsletter{
	margin-top: 1em;
}

.settings-sample-frame .mailchimp-newsletter label{
	display: inline;
}

.settings-sample-frame .overlay {
	position: absolute;
	width:100%;
	height: 100%;
	top: 0;
	left: 0;
	background: rgb(255,255,255);
	background: linear-gradient(0deg, rgba(255,255,255,0) 10%, rgba(255,255,255,0.6964986678265056) 36%, rgba(255,255,255,1) 100%);
}

@media screen and (max-width: 782px) {
	.tab-content-wrapper, .notices-content-wrapper {
		padding: 0 1em;
	}
	.tab-content-submit,
	.mc-woocommerce-resync-button {
		padding: 15px 35px 27px 35px !important;
	}

	.log-file-actions {
		display: block;
	}

	#log-actions {
		float: left;
	}

	.tab-content-wrapper form{
		padding: 1em;
	}

	.tab-content-wrapper .mailchimp-select-wrapper select {

		font-size: 16px;
		line-height: 32px;
	}

	.mc-woocommerce-settings-header-wrapper.wiz-header .mc-woocommerce-settings-subtitles {
		padding-left: 28px;
		margin-top: 28px;
	}

	.tab-content-wrapper .box.box-half,
	.tab-content-wrapper .box.box-third,
	.sync-more-wrapper .box.box-half,
	.sync-content-wrapper .box.box-half {
		width: 100%;
	}

	.sync-content-wrapper {
		padding: 0 1rem;
	}

	.sync-content-wrapper .sync-stats-wrapper {
		display: block;
		position:relative;
		margin-bottom: 14px;
		margin-right: 0;
	}

	.sync-content-wrapper .sync-stats-content-wrapper {
		margin-right: 0;
		width: 100%;
		margin: 0;
	}

	.sync-content-wrapper .sync-stats-wrapper .sync-stats-card-content{
		margin-right: 0;
		margin-bottom: 0;
	}

	.sync-content-wrapper .sync-controls-wrapper,
	.sync-more-wrapper .box.box-half.support-container {
		display: block;
		width: 100%;
		position:relative;
		margin-bottom: 14px;
	}

	.sync-more-wrapper .box.box-half .content {
		padding: 0 1em;
	}

	.sync-content-wrapper .sync-controls {
		min-height: 150px;
	}

	.sync-content-wrapper .sync-controls .sync-controls-item {
		display: inline;
		float: left;
		margin-right: 42px;
	}

	.sync-content-wrapper .sync-controls .spinner {
		margin: -3px 10px 0 5px;
	}

	.sync-content-wrapper .sync-stats-wrapper.sync-stats-store,
	.sync-more-wrapper .box.box-half.support-container .content {
		margin-right: 0px;
	}

	.sync-content-wrapper .sync-stats-wrapper.sync-stats-store,
	.sync-content-wrapper .sync-stats-wrapper.overview-stats-store,
	.sync-content-wrapper .sync-stats-wrapper.last-updated {
		margin-right: 0px;
		margin-bottom: 26px;
	}

	.sync-content-wrapper .sync-stats-wrapper.sync-stats-audience,
	.sync-content-wrapper .sync-stats-wrapper.last-updated,
	.sync-more-wrapper .box.box-half.resync-container .content {
		margin-left: 0;
	}

	.sync-more-wrapper .box.box-half.support-container,
	.sync-more-wrapper .box.box-half.resync-container {
		width: 100%;

	}

	.view-log-select,
	.view-log-submit {
		width: 100%;
		display: block;
		margin-bottom: 1em;
	}

	#mc-woocommerce-create-account {
		padding-top: 60px;
	}
	#mc-woocommerce-create-account .reveal-modal{
		width: 80%;
	}

}


@media screen and (max-width: 482px) {
	.nav-tab-wrapper {
		border-bottom: none !important;
	}
	.nav-tab {
		width: 100%;
		padding: 2em 0 !important;
		margin-left: 0;
		border: none;
		border-bottom: 1px solid white !important;
		-webkit-border-radius: 0 !important;
		-moz-border-radius: 0 !important;
		border-radius: 0 !important;
	}

	.connect-buttons {
		padding-left: 28px;
		width: 100%;
	}

	.nav-tab:last-child {
		border: none;
	}

	.nav-tab.nav-tab-active {
		border: 1px solid white !important;
	}
	.disconnect-button {
		margin: 0.5em 0em !important;
	}

	#mc-woocommerce-create-account .reveal-modal{
		width: 100%;
	}

	.mc-woocommerce-create-account-step {
		padding: 5px 5px 10px 5px;
	}

	.mc-woocommerce-settings-header {
		margin-top: 1em !important;
	}

	.sync-content-wrapper .sync-controls {
		min-height: 280px;
	}

	.mc-woocommerce-settings-header-wrapper.wiz-header .mc-woocommerce-settings-subtitles {
		padding-left: 28px;
	}
}
mailchimp-woocommerce-admin-settings-rtl.css                                                                                                                                                                                                                   29612         1711191352  plugins/mailchimp-for-woocommerce/admin/css                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     /**
 * mc-woocommerce Settings Page
 */
 @import url('https://use.typekit.net/wvc2hnb.css');

 @font-face {
	font-family: 'Proxima Nova Alt Light';
	font-style: normal;
	font-weight: normal;
	src: local('Proxima Nova Alt Light'), url('../fonts/Mark Simonson - Proxima Nova Alt Light.woff') format('woff');
	}

html {
	scroll-padding-top: 8em;
}

.mc-woocommerce-settings {
	width: 100%;
	margin: 0 !important;
	font-family: "proxima-nova", Arial, Helvetica, sans-serif;

}

.woocommerce-layout .woocommerce-store-alerts{
	display: none !important;
}

.mc-woocommerce-settings-header-wrapper {
	width:100%;
	padding-top: 56px;
}

.mc-woocommerce-settings-header-wrapper.wiz-header {
	background-color: white;
}

.mc-woocommerce-settings-header-wrapper.wiz-header .mc-woocommerce-settings-header{
	padding-bottom: 69px;
}

.mc-woocommerce-settings-header .mailchimp-logo {
	margin: 0 1em;
}

.mc-woocommerce-settings-header {
	width: 90%;
	margin: 2em auto 0 auto !important;
	font-family: "proxima-nova", Arial, Helvetica, sans-serif;
	padding-bottom: 0px;
	display:table;
}
.mc-woocommerce-settings-header svg.mc-woocommerce-logo{
	padding-left: 1em;
	display: inline-block;
}

.mc-woocommerce-settings-header .mc-woocommerce-wizard-btn {
	float: left;
	margin-top: 50px;
}

.mc-woocommerce-settings-header .mc-woocommerce-wizard-btn p{
	display: inline;
}

a.button.back-step {
	color: #7FAD45 !important;
	background-color: white !important;
	border: none !important;
	font-family: proxima-nova, Arial, Helvetica, sans-serif !important;
	font-size: 14px !important;
	line-height: 16px !important;
	padding: 15px 35px 15px 35px !important;
	display: inline;
	float: right;
	/* identical to box height */
	text-transform: uppercase !important;
}

.mc-woocommerce-header-steps {
	display: block;
	font-size: 12px;
	line-height: 24px;
	letter-spacing: 0.5px;
	text-transform: uppercase;
	margin-bottom: 15px;
	color: #AFAFAF;
}

.mc-woocommerce-header-title {
	display: block;
	font-style: normal;
	font-weight: 500;
	font-size: 30px;
	line-height: 28px;
	color: #241C15;
	margin-bottom: 15px;
}


.mc-woocommerce-header-subtitle {
	display: inline-block;
	font-style: normal;
	font-weight: normal;
	font-size: 20px;
	line-height: 30px;

	/* or 150% */
	letter-spacing: -0.32px;

	/* Functional / Tuna */
	color: #8C8C8C;
}

.mc-woocommerce-settings p {
	font-size: 14px;
	font-family: "Proxima Nova Alt Light", Arial, Helvetica, sans-serif;
}

.mc-woocommerce-settings-header-wrapper.wiz-header .mc-woocommerce-settings-subtitles {
	margin: 1em 0;
	display: inline-block;
	padding-right: 58px;
}

.mc-woocommerce-settings-subtitles {
	font-family: "proxima-nova", Arial, Helvetica, sans-serif;
	font-size: 22px !important;
	line-height: 32px;
	color: #3C3C3C;
	margin: 1em 1em 1em 13px;
	max-width: 75%;
}

.connect-buttons {
	padding-left: 28px;
	margin-top: 38px;
	z-index: 2;
	position: relative;
}

.mc-woocommerce-settings-header-wrapper.wiz-header .mc-woocommerce-settings-subtitles {
	padding-left: 28px;
	margin-top: 28px;
}

.connect-buttons .connect-button {
	display: inline;
}

.description {
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 12px !important;
	line-height: 16px  !important;
	color: #868585 !important;
}

.description.support-form {
	color: #444 !important;
}

.nav-tab-wrapper {
	border-bottom: 2px solid white !important;
	margin-bottom: 25px !important;
	margin: 0 1em;
}

.nav-tab-wrapper .nav-tab {
	background: #F1F1F1;
	border-radius: 4px 4px 0px 0px;
	border: 1px solid #F1F1F1;
	border-bottom: none;
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 14px;
	line-height: 24px;
	text-align: center;
	color: #212121;
	padding: 20px 35px;
	-webkit-transition: padding 0.1s ease-out;
	-moz-transition: padding 0.1s ease-out;
	-o-transition: padding 0.1s ease-out;
	transition: padding 0.1s ease-out;
}

.nav-tab-wrapper .nav-tab:first-of-type {
	margin-left: 0;
}

.nav-tab-wrapper .nav-tab:focus {
	outline: none !important;
	box-shadow: none !important;
}

.nav-tab-wrapper .nav-tab:hover:not(.nav-tab-active) {
	background: #F5F5F5;
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 14px;
	line-height: 24px;
	text-align: center;
	color: #212121;
	padding: 18px 35px 22px 35px;
	-webkit-transition: padding 0.1s ease-out;
	-moz-transition: padding 0.1s ease-out;
	-o-transition: padding 0.1s ease-out;
	transition: padding 0.1s ease-out;
}

.nav-tab-wrapper .nav-tab-active {
	background: white;
	padding: 18px 35px 22px 35px;
	border-radius: 4px 4px 0px 0px;
	border: 1px solid #F1F1F1;
	border-bottom: none;
}

.notices-content-wrapper.sync-notices {
	margin-bottom: 20px !important;
}

.tab-content-wrapper,
.notices-content-wrapper {
	width: 90%;
	background: transparent;
	padding: 0;
	margin: 0 auto 0 auto !important;
	-webkit-box-sizing: border-box;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
}

.tab-content-wrapper {
	background: transparent !important;
}

.tab-content-wrapper fieldset{
	background: transparent !important;
}

.tab-content-wrapper fieldset input{
	background: white !important;
}

.tab-content-wrapper textarea{
	background: white !important;
}

.tab-content-wrapper fieldset select {
	background: white url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20width%3D%2220%22%20height%3D%2220%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M5%206l5%205%205-5%202%201-7%207-7-7%202-1z%22%20fill%3D%22%23555%22%2F%3E%3C%2Fsvg%3E') no-repeat left 5px top 55%;
	background-size: auto;

}

.tab-content-wrapper *,
.sync-content-wrapper {
	margin: 0;
	padding: 0;
	border: 0;
	-webkit-box-sizing: border-box;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
}

.tab-content-wrapper a {
	color: #8D5C87;
	text-decoration: none;
}
.tab-content-wrapper a:hover {
	text-decoration: underline;
}

.tab-content-wrapper form {
	margin: 0 auto;
	/* padding: 3em; */
}

.tab-content-wrapper fieldset{
	background: transparent;
	width: 100%;
}

.tab-content-wrapper fieldset .fieldset-header {
	float: left;
	padding-top: 3em;
	width: 100%;
	font-size: 18px !important;
}

.tab-content-wrapper fieldset .fieldset-header.no-padding {
	padding-top: 1em;
}

.tab-content-wrapper p.submit {
	margin-top: 0 !important;
	padding-top: 35px !important;
	margin-bottom: 45px !important;
}

.tab-content-wrapper p.submit:focus {
	margin-top: 10px !important;
}

.tab-content-wrapper .required-field-mark {
	color: red;
}

a.button.create-account {
	color: #7FAD45 !important;
	background-color: white !important;
	border: none !important;
	font-family: proxima-nova, Arial, Helvetica, sans-serif !important;
	font-size: 14px !important;
	line-height: 16px !important;
	padding: 15px 35px 15px 35px !important;

	/* identical to box height */
	text-transform: uppercase !important;
}

.tab-content-submit,
.mc-woocommerce-resync-button,
.mc-woocommerce-log-button {
	font-family: proxima-nova, Arial, Helvetica, sans-serif !important;
	font-size: 14px !important;
	line-height: 16px !important;
	padding: 15px 35px 15px 35px !important;

	/* identical to box height */
	text-transform: uppercase !important;
	color: #FFFFFF !important;
	border: none !important;

}

.oauth-description {
	display: none;
	color: #8C8C8C;
	position: absolute;
}

#mailchimp-oauth-connected {
	color: #7FAD45;
}

.mc-woocommerce-log-button {
	padding: 15px !important;
	text-decoration: none;
	display:inline-block;
	background-color: #FFFF;
}

.mc-woocommerce-log-button.delete-log-button:hover span {
	color: red;
}

.mc-woocommerce-log-button.mc-woocommerce-copy-log-button span.yes {
	color: green;
	display:none;
}

.tab-content-submit:not(.create-account):not(.mc-woocommerce-disconnect-button):not(.disconnect-confirm) {
	background: #7FAD45 !important;
	box-shadow:0 1px 0 #7FAD45 !important;
	text-shadow: 0 -1px 1px #7FAD45,1px 0 1px #7FAD45,0 1px 1px #7FAD45,-1px 0 1px #7FAD45 !important;
	-webkit-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
}

.disconnect-confirm {
	width:180px;
	margin: 0 0.5em !important;
	background: #b83110 !important;
	box-shadow:0 1px 0 #b83110 !important;
	text-shadow: 0 -1px 1px #b83110,1px 0 1px #b83110,0 1px 1px #b83110,-1px 0 1px #b83110 !important;
	-webkit-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
}

.disconnect-confirm:hover {
	background: #F72E2E !important;
	box-shadow:0 1px 0 #F72E2E !important;
	text-shadow: 0 -1px 1px #F72E2E,1px 0 1px #F72E2E,0 1px 1px #F72E2E,-1px 0 1px #F72E2E !important;
}

.tab-content-submit:not(.mc-woocommerce-disconnect-button):not(.disconnect-confirm):hover {
	background: #9EC769 !important;
	box-shadow:0 1px 0 #9EC769 !important;
	text-shadow: 0 -1px 1px #9EC769,1px 0 1px #9EC769,0 1px 1px #9EC769,-1px 0 1px #9EC769 !important;
	-webkit-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	text-decoration: none !important;
}

.mc-woocommerce-resync-button,
.mc-woocommerce-log-button {
	color: #3C3C3C !important;
	background: #DBD9D2 !important;
	box-shadow:0 1px 0 #DBD9D2 !important;
	-webkit-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;

}

.mc-woocommerce-resync-button:hover,
.mc-woocommerce-log-button:hover {
	color: #3C3C3C !important;
	background: #DADADA !important;
	box-shadow:0 1px 0 #DADADA !important;
	-webkit-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	text-decoration: none !important;
}

.mc-woocommerce-log-button {
	background: #fff !important;
	box-shadow:none !important;
}

.mc-woocommerce-log-button:hover {
	background: #eee !important;
}

.tab-content-submit:focus,.tab-content-submit:hover{
	background: rgb(149, 189, 101);
	border-color: rgb(149, 189, 101);
	color:#fff;
	box-shadow:0 1px 0 rgb(149, 189, 101);
}

.tab-content-wrapper label {
	display: block;
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 14px;
	font-weight: 600 !important;
	line-height: 30px;
	width: 100%;
	color: #3C3C3C;
}

.tab-content-wrapper h4 {
	margin-top: 0;
}

.sync-content-wrapper {
	display: table;
	margin: auto;
	width: 90%;
	padding: 0.5rem 1rem;
}

.sync-more-wrapper {
	position:relative;
	height: 264px;
}
.mc-comm-save {
	position: absolute;
	display: none;
	font-size: 0.8em;
	font-weight: 100 !important;
	color: #628735;
}

.sync-content-wrapper .sync-stats-wrapper {
	position:relative;
	background-color: white;
	padding: 4px 0em 0 0em;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
}

.sync-content-wrapper .sync-stats-wrapper.sync-stats-store{
	margin-right: 13px;
}

.sync-content-wrapper .sync-stats-wrapper.sync-stats-audience{
	margin-left: 13px;
}

.sync-content-wrapper .sync-stats-card {
	border-bottom: 1px solid #DBD9D2;
	margin: 1em 2em 0em 2em;
	padding: 2em 1em;
	min-height: 20px;
}

.sync-content-wrapper .overview-stats-store {
	margin-right: 13px;
	margin-bottom: 16px;
	padding: 2em 1em;
	min-height: 20px;
}

.sync-content-wrapper .last-updated {
	margin-left: 13px;
	margin-bottom: 16px;
	padding: 2em 1em;
	min-height: 20px;
}

.sync-content-wrapper .overview-stats-store .box,
.sync-content-wrapper .last-updated .box {
	margin: 0 2em;
	padding: 1em 0 0 0;
	min-height: 20px;
}

.sync-content-wrapper .sync-stats-card:last-child {
	border-bottom: none;
}

.sync-content-wrapper .sync-stats-card .sync-stats-card-content{
	position:relative;
}

.sync-content-wrapper .sync-stats-card span.card_label,
.sync-content-wrapper .sync-stats-card span.card_label{
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 14px;
	line-height: 14px;
}

.sync-content-wrapper .sync-stats-card span.card_count,
.sync-content-wrapper .sync-stats-card span.card_count{
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 22px;
	line-height: 22px;
	position: absolute;
	left: 1em;
	margin: 0;
}


.sync-content-wrapper .sync-stats-card .card_count_label {
	position: absolute;
	top: -1.3em;
	right: 0;
	color: #DBD9D2;
}

.sync-content-wrapper .sync-stats-card .sync-loader {
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 22px;
	line-height: 22px;
	position: absolute;
	left: 1em;
	margin: 8px 0px;
	visibility: hidden;
}

.progress-bar-wrapper {
	position: absolute;
	top: 0.6em;
	left: 1.8em;
	background: #F7F7F7;
	width: 50%;
	height: 3px;
	display: none;
}

.progress-bar {
	background: #8D5C87;
	width: 0%;
	height: 3px;
}

.sync-content-wrapper .sync-controls-wrapper {
	background-color: white;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
	width: 100%;
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 14px ;
	line-height: 14px;
	margin-bottom: 26px;
}

.sync-content-wrapper .sync-controls {
	padding: 1em 1em 1em 3em;
	font-size: 14px;
	line-height: 14px;
	min-height: 90px;
	position:relative;
}

.sync-content-wrapper .sync-controls .sync-controls-item {
	display: inline;
	float: right;
	margin-right: 42px;

}

.sync-content-wrapper .sync-controls p {
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	max-width: 300px;
}


.sync-content-wrapper .sync-controls .sync-controls-item .sync-controls-label{
	font-size: 13px;
	line-height: 20px;
}

.sync-content-wrapper .sync-controls #mailchimp_account_connected,
.sync-content-wrapper .sync-controls #mailchimp_list_name {
	font-size: 20px;
	line-height: 28px;
}

.sync-content-wrapper .sync-controls .mc-woocommerce-last-sync{
	display: table;
	float: left;
	min-height:90px;
	margin-right: 30px;
}

.sync-content-wrapper .sync-controls .mc-woocommerce-last-sync p{
	display: table-cell;
	vertical-align: middle;
}

.mc-woocommerce-disconnect-button {
	margin-top: 1em !important;
	border: 1px solid #b83110 !important;
	color: #b83110 !important;
	background: #F1F1F1 !important;
	box-shadow:0 1px 0 #F1F1F1 !important;
	text-shadow: 0 -1px 1px #F1F1F1,1px 0 1px #F1F1F1,0 1px 1px #F1F1F1,-1px 0 1px #F1F1F1 !important;
	-webkit-transition: background-color 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out;
	transition: background-color 0.3s ease-out;
}

.mc-woocommerce-disconnect-button span.dashicons{

	margin: -3px auto;
}

.mc-woocommerce-disconnect-button:hover {
	text-decoration: none !important;
	background: #f0f0f0 !important;
}

.mc-woocommerce-disconnect-button svg {
	margin-left: 2em;
}


.tab-content-wrapper.overview-example {
	position: absolute;
	z-index:1;
	width:200px;
	height:200px;
	margin:50px auto;
	width:100%;
	text-align: center;
}

.tab-content-wrapper.overview-example:before {
	position:absolute;
	z-index:-1;
	top:0;
	left:0;
	width:100%;
	height:70%;
	content:"";
	background-color:white;
}

.tab-content-wrapper.overview-example img{
	width: 90%;
	margin: 0 auto;
	border: 1px solid silver;
}

.tab-content-wrapper .box {
	padding: 0.5rem 1rem;
	margin: 0;
	clear:both;
}

.sync-more-wrapper .box {
	margin: 0;
}

.sync-more-wrapper .box {
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
}

.tab-content-wrapper .box.box-half,
.sync-content-wrapper .box.box-half,
.sync-more-wrapper .box.box-half {
	float: left;
	clear: none;
	width: 50%;

}

.sync-more-wrapper .box.box-half .content{
	padding: 0 2em;
	background: white;
	min-height: 260px;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
}

.sync-more-wrapper .box.box-half.resync-container{
	width: 30%;
}

.sync-more-wrapper .box.box-half.resync-container .content{
	margin-left: 13px;
}

.sync-more-wrapper .box.box-half.support-container {
	width: 70%;
}

.sync-more-wrapper .box.box-half.support-container ul {
	padding-bottom: 1em;
}

.sync-more-wrapper .box.box-half.support-container .content{
	margin-right: 13px;
}

.sync-content-wrapper .box.box-half {
	height: 100%;
}

.tab-content-wrapper .box.box-half.margin-large {
	margin-top: 3em;
}

.tab-content-wrapper .box.box-third {
	float: left;
	clear:none;
	width: 33%;
}

.tab-content-wrapper fieldset label {
	font-weight: 500;
}

.tab-content-wrapper fieldset label p{
	font-weight: 400;
}

.tab-content-wrapper fieldset input[type="text"],
.tab-content-wrapper fieldset input[type="password"],
.tab-content-wrapper fieldset input[type="email"],
.tab-content-wrapper fieldset textarea {
	border: 1px solid #DBD9D2;
	box-sizing: border-box;
	border-radius: 4px;
	padding: 0.6em 1.5em;
	width: 100%;
	font-family: "Proxima Nova Alt Light", Arial, Helvetica, sans-serif

}

.tab-content-wrapper .mailchimp-select-wrapper {
	border: 1px solid #DBD9D2;
	padding: 6px 6px 4px 20px;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
	box-shadow: inset 0 1px 2px rgba(0,0,0,.07);
	background-color: white;
}

.tab-content-wrapper .mailchimp-select-wrapper select {
	padding: 3px 24px 3px 0px;
	font-size: 14px;
	font-family: "Proxima Nova Alt Light", Arial, Helvetica, sans-serif;
	border: none;
	-webkit-appearance: none;
	box-shadow: none;
	outline: none;
	width: 100% !important;
	max-width: 10000px;
	color: #32373c;
}

.tab-content-wrapper .mailchimp-select-wrapper select option{
	outline: none;
}

.tab-content-wrapper .mailchimp-select-wrapper select:disabled {
	color: #aaa;
	background: none;
}

.tab-content-wrapper fieldset select:focus {
	outline: none;
}

.tab-content-wrapper fieldset input[type='checkbox'] {
	width: 2em;
	height: 2em;
	border-radius: 4px;
	border: 1px solid #DBD9D2;
}
.tab-content-wrapper fieldset input[type='checkbox']:checked::before {
	color: #7FAD45;
	margin: 0.6em 0px 0px 0.2em;
	content: url("data:image/svg+xml;charset=UTF-8,%3csvg width='13' height='9' viewBox='0 0 13 9' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M10.75 0.5L12.25 2L5.26 9L0.75 4.5L2.25 3L5.26 6L10.75 0.5Z' fill='%237FAD45'/%3e%3c/svg%3e ");
	float: left !important;
}


.tab-content-wrapper fieldset input[type='radio'],
.sync-content-wrapper fieldset input[type='radio'] {
	width: 2em;
	height: 2em;
	border: 1px solid #DBD9D2;
	margin-right: 10px;
}

.tab-content-wrapper fieldset input[type='radio']:checked::before,
.sync-content-wrapper fieldset input[type='radio']:checked::before {
	background: url("data:image/svg+xml;charset=UTF-8,%3csvg width='13' height='9' viewBox='0 0 13 9' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M10.75 0.5L12.25 2L5.26 9L0.75 4.5L2.25 3L5.26 6L10.75 0.5Z' fill='%237FAD45'/%3e%3c/svg%3e ");
	background-repeat: none;
	width: 13px;
	height: 9px;
	margin: 8px 7px 0 0px;
}

.tab-content-wrapper fieldset .radio-label,
.sync-content-wrapper fieldset .radio-label {
	margin-bottom: 10px;
}

.tab-content-wrapper fieldset textarea {
	border: 1px solid #DBD9D2;
	box-sizing: border-box;
	border-radius: 4px;
	padding: 15px 20px;
	width: 100%;

}

.tab-content-wrapper .optional-settings-label,
.tab-content-wrapper .optional-settings-button {
	margin-top: 3em;
	font-weight: 600;
}

.tab-content-wrapper .optional-settings-button:hover span {
	color: #628735;
}

.tab-content-wrapper .optional-settings-label span,
.tab-content-wrapper .optional-settings-button span {
	text-transform: uppercase;
	color: #7FAD45 ;
	font-size: 14px;
	cursor: default;
}

.tab-content-wrapper .optional-settings-button span {
	background: no-repeat left center url("data:image/svg+xml;charset=UTF-8,%3csvg width='13' height='8' viewBox='0 0 13 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M11.34 0.590027L6.75 5.17003L2.16 0.590027L0.75 2.00003L6.75 8.00003L12.75 2.00003L11.34 0.590027Z' fill='%23212121'/%3e%3c/svg%3e ");
	padding-left: 2em;
	cursor: pointer;
}

.tab-content-wrapper .optional-settings-button span.active {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg width='13' height='8' viewBox='0 0 13 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M2.16 7.40997L6.75 2.82997L11.34 7.40997L12.75 5.99997L6.75 -2.61783e-05L0.75 5.99997L2.16 7.40997Z' fill='%23212121'/%3e%3c/svg%3e ");
}

.tab-content-wrapper .optional-settings-content {
	display: block;
}

/* Old styles from tabs.php */

#sync-status-message strong,
#http-worker-deprecated-message strong {
	font-weight:inherit;
}

.view-log-select {
	width: 100%;
	display: inline-block;
}

.log-file-actions {
	display: flex;
	justify-content: space-around;
	align-items: stretch;
}

#log-actions {
	float: left;
	flex: 0 0 120px;
	margin-right: 20px;
}

.view-log-submit {
	width: 15%;
	display: inline-block;
}

#log-viewer {
	background: #fff;
	border: 1px solid #e5e5e5;
	box-shadow: 0 1px 1px rgba(0,0,0,.04);
	text-align: center;
}

#log-viewer pre {
	font-family: monospace;
	white-space: pre-wrap;
}

#log-viewer #log-header {
	border-bottom: 1px solid #e5e5e5;
	padding: 15px 20px;
}

#log-viewer #log-content {
	height: 500px;
	padding: 15px 20px;
	width: 100%;
	background-color: white;
	color: #444;
	font-family: monospace;
	white-space: pre-wrap;
	font-size: 1em;

}

#log-viewer #log-content:focus {
	outline: none;
	box-shadow: none !important;
}

#log-viewer .spinner {
	float:none;
	background-size: 16px 16px;
	width: 16px;
	height: 16px;
	margin: 30px 10px
}

/* account create modal */
#mc-woocommerce-create-account-link {
	padding-top: 20px;
}

#mc-woocommerce-create-account-go {
	float:right;
}

#mc-woocommerce-create-account-go-spinner {
	float:left;
}

.mc-woocommerce-modal {
	width: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	position: absolute;
	left: 0;
	visibility: hidden;
	display: none;
	padding-top: 20px;
	/* background: red;
	opacity: 0.5; */
}

#mc-woocommerce-support-form {
	bottom:0px;
	padding-bottom: 20px;
}

#mc-woocommerce-create-account {
	top:-235px;
}

.mc-woocommerce-modal .terms {
	padding-top: 20px;
	padding-bottom: 20px;
}

.mc-woocommerce-modal .terms a {
	color: #7FAD45 !important;
}

.mc-woocommerce-modal h3 {
	padding-bottom: 20px;
}

.mc-woocommerce-modal .notices {
	background:#fff;
	border-left: 4px solid#fff;
	border-left-color: rgb(255, 255, 255);
	box-shadow: 0 1px 1px 0 rgba(0,0,0,.1);
	margin: 5px 15px 2px;
	padding: 1px 12px;
	padding-right: 12px;
}

#mc-woocommerce-create-account:target,
#mc-woocommerce-support-form:target {
	visibility: visible;
	display: block;
}

.mc-woocommerce-modal .reveal-modal {
	position: relative;
	margin: 0 auto;
	width: 70%;
	max-width: 580px;
	background-color: #ffffff;
	box-shadow: 5px 10px 40px rgba(0, 0, 0, 0.1);
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	line-height: 17px;
}

.mc-woocommerce-modal .close-modal {
	position: absolute;
	left: 10px;
	top: 10px;
}

.mc-woocommerce-modal .modal-header {
	text-align: center;
	padding-top: 30px;
}

#mc-woocommerce-support-form .modal-header svg{
	display: inline;
}

#mc-woocommerce-support-form .modal-header h3{
	text-align: center;
	padding: 0px 0 20px 30px;
	font-size: 2em;
	display: inline-block;
}

.mc-woocommerce-modal .modal-header h3{
	text-align: center;
	padding-top: 30px;
	font-size: 2em;
}

#mc-woocommerce-support-form h3{
	padding-bottom: 0;
}

.mc-woocommerce-modal .modal-footer {
	padding: 35px;
	bottom: 0px;
	color: #B0B4BD;
	font-size: 10px;
}

.mc-woocommerce-create-account-step {
	padding: 5px 35px 10px 35px;
}

#mc-woocommerce-create-account-step-2 {
	display: none;
}

.mc-woocommerce-create-account-step .spinner{
	float:right;
	background-size: 16px 16px;
	width: 16px;
	height: 16px;
	margin: 15px 10px;
}

.mc-woocommerce-create-account-step-error p{
	display: none;

	background:#fff;
	border-left: 4px solid#fff;
	border-left-color: red;
	box-shadow: 1px 1px 1px 1px rgba(0,0,0,.1);
	margin: 5px 15px 2px;
	padding: 4px 12px;
	padding-right: 12px;
}

.mc-woocommerce-create-account-step-error #connecting,
.mc-woocommerce-create-account-step-error #success{
	border-left-color: #7FAD45;
}

.mc-woocommerce-create-account-step #username_suggestion {
	visibility: hidden;
}

.mc-woocommerce-create-account-step #username_suggestion span{
	color: #7FAD45;
	text-decoration: none;
	cursor: pointer;
}

.mc-woocommerce-create-account-step #username_suggestion span:hover{
	text-decoration: underline;
}

.mc-woocommerce-create-account-step .whitebtn{
	background: white !important;
	box-shadow: 0 1px 0 #DBD9D2 !important;
	text-shadow: 0 -1px 1px	#DBD9D2,1px 0 1px #DBD9D2,0 1px 1px #DBD9D2,-1px 0 1px #DBD9D2 !important;
}

#mc-woocommerce-create-account-next {
	float: right;
}

#mc-woocommerce-create-account-prev {
	float: none;
}

#mc-woocommerce-create-account-step-1 .tab-content-submit:hover{
	background: #F7F7F7;
}

#mc-woocommerce-create-account-step-1 ul{
	list-style: disc !important;
	margin-left: 13px;
}


@media screen and (max-width: 782px) {
	.tab-content-wrapper, .notices-content-wrapper {
		padding: 0 1em;
	}
	.tab-content-submit,
	.mc-woocommerce-resync-button {
		padding: 15px 35px 15px 35px !important;
	}

	.log-file-actions {
		display: block;
	}

	#log-actions {
		float: left;
	}

	.tab-content-wrapper form{
		padding: 1em;
	}

	.tab-content-wrapper .mailchimp-select-wrapper select {

		font-size: 16px;
		line-height: 32px;
	}

	.tab-content-wrapper .box.box-half,
	.tab-content-wrapper .box.box-third,
	.sync-more-wrapper .box.box-half,
	.sync-content-wrapper .box.box-half {
		width: 100%;
	}

	.sync-content-wrapper {
		padding: 0 1rem;
	}

	.sync-content-wrapper .sync-stats-wrapper {
		display: block;
		position:relative;
		margin-bottom: 14px;
		margin-left: 0;
	}

	.sync-content-wrapper .sync-stats-content-wrapper {
		margin-left: 0;
		width: 100%;
		margin: 0;
	}

	.sync-content-wrapper .sync-stats-wrapper .sync-stats-card-content{
		margin-left: 0;
		margin-bottom: 0;
	}

	.sync-content-wrapper .sync-controls-wrapper,
	.sync-more-wrapper .box.box-half.support-container {
		display: block;
		width: 100%;
		position:relative;
		margin-bottom: 14px;
	}

	.sync-more-wrapper .box.box-half .content {
		padding: 0 1em;
	}

	.sync-content-wrapper .sync-controls {
		min-height: 150px;
	}

	.sync-content-wrapper .sync-controls .sync-controls-item {
		display: inline;
		float: left;
		margin-right: 42px;
	}

	.sync-content-wrapper .sync-controls .spinner {
		margin: -3px 10px 0 5px;
	}

	.sync-content-wrapper .sync-stats-wrapper.sync-stats-store,
	.sync-more-wrapper .box.box-half.support-container .content {
		margin-right: 0px;
	}

	.sync-content-wrapper .sync-stats-wrapper.sync-stats-store,
	.sync-content-wrapper .sync-stats-wrapper.overview-stats-store,
	.sync-content-wrapper .sync-stats-wrapper.last-updated {
		margin-right: 0px;
		margin-bottom: 26px;
	}

	.sync-content-wrapper .sync-stats-wrapper.sync-stats-audience,
	.sync-content-wrapper .sync-stats-wrapper.last-updated,
	.sync-more-wrapper .box.box-half.resync-container .content {
		margin-left: 0;
	}

	.sync-more-wrapper .box.box-half.support-container,
	.sync-more-wrapper .box.box-half.resync-container {
		width: 100%;

	}

	.view-log-select,
	.view-log-submit {
		width: 100%;
		display: block;
		margin-bottom: 1em;
	}

	#mc-woocommerce-create-account {
		padding-top: 60px;
	}
	#mc-woocommerce-create-account .reveal-modal{
		width: 80%;
	}

}


@media screen and (max-width: 482px) {
	.nav-tab-wrapper {
		border-bottom: none !important;
	}
	.nav-tab {
		width: 100%;
		padding: 2em 0 !important;
		margin-left: 0;
		border: none;
		border-bottom: 1px solid white !important;
		-webkit-border-radius: 0 !important;
		-moz-border-radius: 0 !important;
		border-radius: 0 !important;
	}

	.nav-tab:last-child {
		border: none;
	}

	.nav-tab.nav-tab-active {
		border: 1px solid white !important;
	}
	.disconnect-button {
		margin: 0.5em 0em !important;
	}

	#mc-woocommerce-create-account .reveal-modal{
		width: 100%;
	}

	.mc-woocommerce-create-account-step {
		padding: 5px 5px 10px 5px;
	}

	.mc-woocommerce-settings-header {
		margin-top: 1em !important;
	}

	.sync-content-wrapper .sync-controls {
		min-height: 280px;
	}

	.mc-woocommerce-settings-header-wrapper.wiz-header .mc-woocommerce-settings-subtitles {
		padding-left: 28px;
	}
}
mailchimp-woocommerce-admin-settings.css                                                                                                                                                                                                                       30926         1711191352  plugins/mailchimp-for-woocommerce/admin/css                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     /**
 * mc-woocommerce Settings Page
 */
 @import url('https://use.typekit.net/wvc2hnb.css');

 @font-face {
	font-family: 'Proxima Nova Alt Light';
	font-style: normal;
	font-weight: normal;
	src: local('Proxima Nova Alt Light'), url('../fonts/Mark Simonson - Proxima Nova Alt Light.woff') format('woff');
	}

html {
	scroll-padding-top: 8em;
}

.mc-woocommerce-settings {
	width: 100%;
	margin: 0 !important;
	font-family: "proxima-nova", Arial, Helvetica, sans-serif;

}

.woocommerce-layout .woocommerce-store-alerts{
	display: none !important;
}

.mc-woocommerce-settings-header-wrapper {
	width:100%;
	padding-top: 56px;
}

.mc-woocommerce-settings-header-wrapper.wiz-header {
	background-color: white;
}

.mc-woocommerce-settings-header-wrapper.wiz-header .mc-woocommerce-settings-header{
	padding-bottom: 69px;
}


.mc-woocommerce-settings-header {
	width: 90%;
	margin: 2em auto 0 auto !important;
	font-family: "proxima-nova", Arial, Helvetica, sans-serif;
	padding-bottom: 0px;
	display:table;
}

.mc-woocommerce-settings-header .mailchimp-logo {
	margin: 0 1em;
}

.mc-woocommerce-settings-header svg.mc-woocommerce-logo{
	padding-left: 1em;
	display: inline-block;
}

.mc-woocommerce-settings-header .mc-woocommerce-wizard-btn {
	float: right;
	margin-top: 50px;
}

.mc-woocommerce-settings-header .mc-woocommerce-wizard-btn p{
	display: inline;
}

a.button.back-step {
	color: #7FAD45 !important;
	background-color: white !important;
	border: none !important;
	font-family: proxima-nova, Arial, Helvetica, sans-serif !important;
	font-size: 14px !important;
	line-height: 16px !important;
	padding: 15px 35px 15px 35px !important;
	display: inline;
	float: left;
	/* identical to box height */
	text-transform: uppercase !important;
}

.mc-woocommerce-header-steps {
	display: block;
	font-size: 12px;
	line-height: 24px;
	letter-spacing: 0.5px;
	text-transform: uppercase;
	margin-bottom: 15px;
	color: #AFAFAF;
}

.mc-woocommerce-header-title {
	display: block;
	font-style: normal;
	font-weight: 500;
	font-size: 30px;
	line-height: 28px;
	color: #241C15;
	margin-bottom: 15px;
}


.mc-woocommerce-header-subtitle {
	display: inline-block;
	font-style: normal;
	font-weight: normal;
	font-size: 20px;
	line-height: 30px;

	/* or 150% */
	letter-spacing: -0.32px;

	/* Functional / Tuna */
	color: #8C8C8C;
}

.mc-woocommerce-settings p {
	font-size: 14px;
	font-family: "Proxima Nova Alt Light", Arial, Helvetica, sans-serif;
}

.mc-woocommerce-settings-header-wrapper.wiz-header .mc-woocommerce-settings-subtitles {
	margin: 1em 0;
	display: inline-block;
	padding-left: 58px;
}

.mc-woocommerce-settings-subtitles-row {
	display: flex;
	align-items: center;
	justify-content: space-between;
}

.mc-woocommerce-settings-subtitles {
	font-family: "proxima-nova", Arial, Helvetica, sans-serif;
	font-size: 22px !important;
	line-height: 32px;
	color: #3C3C3C;
	margin: 1em 1em 1em 13px;
	max-width: 75%;
}

.connect-buttons {
	padding-left: 151px;
	margin-top: 38px;
	z-index: 2;
	position: relative;
}

.connect-buttons .connect-button {
	display: inline;
}

.description {
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 12px !important;
	line-height: 16px  !important;
	color: #868585 !important;
}

.description.support-form {
	color: #444 !important;
}

.nav-tab-wrapper {
	border-bottom: 2px solid white !important;
	margin-bottom: 25px !important;
	margin: 0 1em;
}

.nav-tab-wrapper .nav-tab {
	background: #F1F1F1;
	border-radius: 4px 4px 0px 0px;
	border: 1px solid #F1F1F1;
	border-bottom: none;
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 14px;
	line-height: 24px;
	text-align: center;
	color: #212121;
	padding: 20px 35px;
	-webkit-transition: padding 0.1s ease-out;
	-moz-transition: padding 0.1s ease-out;
	-o-transition: padding 0.1s ease-out;
	transition: padding 0.1s ease-out;
}

.nav-tab-wrapper .nav-tab:first-of-type {
	margin-left: 0;
}

.nav-tab-wrapper .nav-tab:focus {
	outline: none !important;
	box-shadow: none !important;
}

.nav-tab-wrapper .nav-tab:hover:not(.nav-tab-active) {
	background: #F5F5F5;
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 14px;
	line-height: 24px;
	text-align: center;
	color: #212121;
	padding: 18px 35px 22px 35px;
	-webkit-transition: padding 0.1s ease-out;
	-moz-transition: padding 0.1s ease-out;
	-o-transition: padding 0.1s ease-out;
	transition: padding 0.1s ease-out;
}

.nav-tab-wrapper .nav-tab-active {
	background: white;
	padding: 18px 35px 22px 35px;
	border-radius: 4px 4px 0px 0px;
	border: 1px solid #F1F1F1;
	border-bottom: none;
}

.notices-content-wrapper.sync-notices {
	margin-bottom: 20px !important;
}

.mc-review-button {
	border: 1px solid #DBD9D2 !important;
	color: #0073AA !important;
}

.tab-content-wrapper,
.notices-content-wrapper {
	width: 90%;
	background: transparent;
	padding: 0;
	margin: 0 auto 0 auto !important;
	-webkit-box-sizing: border-box;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
}

.tab-content-wrapper {
	background: transparent !important;
}

.tab-content-wrapper fieldset{
	background: transparent !important;
}

.tab-content-wrapper fieldset input{
	background: white !important;
}

.tab-content-wrapper textarea{
	background: white !important;
}

.tab-content-wrapper fieldset select {
	background: white url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20width%3D%2220%22%20height%3D%2220%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M5%206l5%205%205-5%202%201-7%207-7-7%202-1z%22%20fill%3D%22%23555%22%2F%3E%3C%2Fsvg%3E') no-repeat right 5px top 55%;
	background-size: auto;

}

.tab-content-wrapper *,
.sync-content-wrapper {
	margin: 0;
	padding: 0;
	border: 0;
	-webkit-box-sizing: border-box;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
}

.tab-content-wrapper a {
	color: #8D5C87;
	text-decoration: none;
}
.tab-content-wrapper a:hover {
	text-decoration: underline;
}

.tab-content-wrapper form {
	margin: 0 auto;
	/* padding: 3em; */
}

.tab-content-wrapper fieldset{
	background: transparent;
	width: 100%;
}

.tab-content-wrapper fieldset .fieldset-header {
	float: left;
	padding-top: 3em;
	width: 100%;
	font-size: 18px !important;
}

.tab-content-wrapper fieldset .fieldset-header.no-padding {
	padding-top: 1em;
}

.tab-content-wrapper p.submit {
	margin-top: 0 !important;
	padding-top: 35px !important;
	margin-bottom: 45px !important;
}

.tab-content-wrapper p.submit:focus {
	margin-top: 10px !important;
}

.tab-content-wrapper .required-field-mark {
	color: red;
}

a.button.create-account {
	color: #7FAD45 !important;
	background-color: white !important;
	border: none !important;
	font-family: proxima-nova, Arial, Helvetica, sans-serif !important;
	font-size: 14px !important;
	line-height: 16px !important;
	padding: 15px 35px 15px 35px !important;

	/* identical to box height */
	text-transform: uppercase !important;
}

.tab-content-submit,
.mc-woocommerce-resync-button,
.mc-woocommerce-log-button {
	font-family: proxima-nova, Arial, Helvetica, sans-serif !important;
	font-size: 14px !important;
	line-height: 16px !important;
	padding: 15px 35px 15px 35px !important;

	/* identical to box height */
	text-transform: uppercase !important;
	color: #FFFFFF !important;
	border: none !important;

}

.oauth-description {
	display: none;
	color: #8C8C8C;
	position: absolute;
}

#mailchimp-oauth-connected {
	color: #7FAD45;
}

.mc-woocommerce-log-button {
	padding: 15px !important;
	text-decoration: none;
	display:inline-block;
	background-color: #FFFF;
}

.mc-woocommerce-log-button.delete-log-button:hover span {
	color: red;
}

.mc-woocommerce-log-button.mc-woocommerce-copy-log-button span.yes {
	color: green;
	display:none;
}

.tab-content-submit:not(.create-account):not(.mc-woocommerce-disconnect-button):not(.disconnect-confirm) {
	background: #7FAD45 !important;
	box-shadow:0 1px 0 #7FAD45 !important;
	text-shadow: 0 -1px 1px #7FAD45,1px 0 1px #7FAD45,0 1px 1px #7FAD45,-1px 0 1px #7FAD45 !important;
	-webkit-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
}
.button.tab-content-submit[disabled] {
	opacity: 0.5 !important;
	color: #fff !important;
	cursor: not-allowed;
}
.disconnect-confirm {
	width:180px;
	margin: 0 0.5em !important;
	background: #b83110 !important;
	box-shadow:0 1px 0 #b83110 !important;
	text-shadow: 0 -1px 1px #b83110,1px 0 1px #b83110,0 1px 1px #b83110,-1px 0 1px #b83110 !important;
	-webkit-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
}

.disconnect-confirm:hover {
	background: #F72E2E !important;
	box-shadow:0 1px 0 #F72E2E !important;
	text-shadow: 0 -1px 1px #F72E2E,1px 0 1px #F72E2E,0 1px 1px #F72E2E,-1px 0 1px #F72E2E !important;
}

.tab-content-submit:not(.mc-woocommerce-disconnect-button):not(.disconnect-confirm):hover {
	background: #9EC769 !important;
	box-shadow:0 1px 0 #9EC769 !important;
	text-shadow: 0 -1px 1px #9EC769,1px 0 1px #9EC769,0 1px 1px #9EC769,-1px 0 1px #9EC769 !important;
	-webkit-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	text-decoration: none !important;
}

.mc-woocommerce-resync-button,
.mc-woocommerce-log-button {
	color: #3C3C3C !important;
	background: #DBD9D2 !important;
	box-shadow:0 1px 0 #DBD9D2 !important;
	-webkit-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;

}

.mc-woocommerce-resync-button:hover,
.mc-woocommerce-log-button:hover {
	color: #3C3C3C !important;
	background: #DADADA !important;
	box-shadow:0 1px 0 #DADADA !important;
	-webkit-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	transition: background-color 0.3s ease-out,
		text-shadow 0.3s ease-out,
		box-shadow 0.3s ease-out;
	text-decoration: none !important;
}

.mc-woocommerce-log-button {
	background: #fff !important;
	box-shadow:none !important;
}

.mc-woocommerce-log-button:hover {
	background: #eee !important;
}

.tab-content-submit:focus,.tab-content-submit:hover{
	background: rgb(149, 189, 101);
	border-color: rgb(149, 189, 101);
	color:#fff;
	box-shadow:0 1px 0 rgb(149, 189, 101);
}

.tab-content-wrapper label {
	display: block;
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 14px;
	font-weight: 600 !important;
	line-height: 30px;
	width: 100%;
	color: #3C3C3C;
}

.tab-content-wrapper h4 {
	margin-top: 0;
}

.sync-content-wrapper {
	display: table;
	margin: auto;
	width: 90%;
	padding: 0.5rem 1rem;
}

.sync-more-wrapper {
	position:relative;
	height: 264px;
}

.mc-comm-save {
	position: absolute;
	display: none;
	font-size: 0.8em;
	font-weight: 100 !important;
	color: #628735;
}

.mc-tower-save {
	position: absolute;
	display: none;
	font-size: 0.8em;
	font-weight: 100 !important;
	color: #628735;
}

.sync-content-wrapper .sync-stats-wrapper {
	position:relative;
	background-color: white;
	padding: 4px 0em 0 0em;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
}

.sync-content-wrapper .sync-stats-wrapper.sync-stats-store{
	margin-right: 13px;
}

.sync-content-wrapper .sync-stats-wrapper.sync-stats-audience{
	margin-left: 13px;
}

.sync-content-wrapper .sync-stats-card {
	border-bottom: 1px solid #DBD9D2;
	margin: 1em 2em 0em 2em;
	padding: 2em 1em;
	min-height: 20px;
}

.sync-content-wrapper .overview-stats-store {
	margin-right: 13px;
	margin-bottom: 16px;
	padding: 2em 1em;
	min-height: 20px;
}

.sync-content-wrapper .last-updated {
	margin-left: 13px;
	margin-bottom: 16px;
	padding: 2em 1em;
	min-height: 20px;
}

.sync-content-wrapper .overview-stats-store .box,
.sync-content-wrapper .last-updated .box {
	margin: 0 2em;
	padding: 1em 0 0 0;
	min-height: 20px;
}

.sync-content-wrapper .sync-stats-card:last-child {
	border-bottom: none;
}

.sync-content-wrapper .sync-stats-card .sync-stats-card-content{
	position:relative;
}

.sync-content-wrapper .sync-stats-card span.card_label,
.sync-content-wrapper .sync-stats-card span.card_label{
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 14px;
	line-height: 14px;
}

.sync-content-wrapper .sync-stats-card span.card_count,
.sync-content-wrapper .sync-stats-card span.card_count{
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 22px;
	line-height: 22px;
	position: absolute;
	right: 1em;
	margin: 0;
}


.sync-content-wrapper .sync-stats-card .card_count_label {
	position: absolute;
	top: -1.3em;
	right: 0;
	color: #DBD9D2;
}

.sync-content-wrapper .sync-stats-card .sync-loader {
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 22px;
	line-height: 22px;
	position: absolute;
	right: 1em;
	margin: 8px 0px;
	visibility: hidden;
}

.progress-bar-wrapper {
	position: absolute;
	top: 0.6em;
	right: 1.8em;
	background: #F7F7F7;
	width: 50%;
	height: 3px;
	display: none;
}

.progress-bar {
	background: #8D5C87;
	width: 0%;
	height: 3px;
}

.sync-content-wrapper .sync-controls-wrapper {
	background-color: white;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
	width: 100%;
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	font-size: 14px ;
	line-height: 14px;
	margin-bottom: 26px;
}

.sync-content-wrapper .sync-controls {
	padding: 1em 1em 1em 3em;
	font-size: 14px;
	line-height: 14px;
	min-height: 90px;
	position:relative;
}

.sync-content-wrapper .sync-controls .sync-controls-item {
	display: inline;
	float: left;
	margin-right: 42px;

}

.sync-content-wrapper .sync-controls p {
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	max-width: 300px;
}


.sync-content-wrapper .sync-controls .sync-controls-item .sync-controls-label{
	font-size: 13px;
	line-height: 20px;
}

.sync-content-wrapper .sync-controls #mailchimp_account_connected,
.sync-content-wrapper .sync-controls #mailchimp_list_name {
	font-size: 20px;
	line-height: 28px;
}

.sync-content-wrapper .sync-controls .mc-woocommerce-last-sync{
	display: table;
	float: right;
	min-height:90px;
	margin-right: 30px;
}

.sync-content-wrapper .sync-controls .mc-woocommerce-last-sync p{
	display: table-cell;
	vertical-align: middle;
}

.mc-woocommerce-disconnect-button {
	margin-top: 1em !important;
	border: 1px solid #b83110 !important;
	color: #b83110 !important;
	background: #F1F1F1 !important;
	box-shadow:0 1px 0 #F1F1F1 !important;
	text-shadow: 0 -1px 1px #F1F1F1,1px 0 1px #F1F1F1,0 1px 1px #F1F1F1,-1px 0 1px #F1F1F1 !important;
	-webkit-transition: background-color 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out;
	transition: background-color 0.3s ease-out;
	padding:10px !important;
}

.mc-woocommerce-disconnect-button span.dashicons{

	margin: -3px auto;
}

.mc-woocommerce-disconnect-button:hover {
	text-decoration: none !important;
	background: #f0f0f0 !important;
}

.mc-woocommerce-disconnect-button svg {
	margin-right: 2em;
	padding: 10px !important;
}


.tab-content-wrapper.overview-example {
	position: absolute;
	z-index:1;
	width:200px;
	height:200px;
	margin:50px auto;
	width:100%;
	text-align: center;
}

.tab-content-wrapper.overview-example:before {
	position:absolute;
	z-index:-1;
	top:0;
	left:0;
	width:100%;
	height:70%;
	content:"";
	background-color:white;
}

.tab-content-wrapper.overview-example img{
	width: 90%;
	margin: 0 auto;
	border: 1px solid silver;
}

.tab-content-wrapper .box {
	padding: 0.5rem 1rem;
	margin: 0;
	clear:both;
}

.sync-more-wrapper .box {
	margin: 0;
}

.sync-more-wrapper .box {
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
}

.tab-content-wrapper .box.box-half,
.sync-content-wrapper .box.box-half,
.sync-more-wrapper .box.box-half {
	float: left;
	clear: none;
	width: 50%;

}

.sync-more-wrapper .box.box-half .content{
	padding: 0 2em;
	background: white;
	min-height: 260px;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
}

.sync-more-wrapper .box.box-half.resync-container{
	width: 30%;
}

.sync-more-wrapper .box.box-half.resync-container .content{
	margin-left: 13px;
}

.sync-more-wrapper .box.box-half.support-container {
	width: 70%;
}

.sync-more-wrapper .box.box-half.support-container ul {
	padding-bottom: 1em;
}

.sync-more-wrapper .box.box-half.support-container .content{
	margin-right: 13px;
}

.sync-content-wrapper .box.box-half {
	height: 100%;
}

.tab-content-wrapper .box.box-half.margin-large {
	margin-top: 3em;
}

.tab-content-wrapper .box.box-third {
	float: left;
	clear:none;
	width: 33%;
}

.tab-content-wrapper fieldset label {
	font-weight: 500;
}

.tab-content-wrapper fieldset label p{
	font-weight: 400;
}

.tab-content-wrapper fieldset input[type="text"],
.tab-content-wrapper fieldset input[type="password"],
.tab-content-wrapper fieldset input[type="email"],
.tab-content-wrapper fieldset textarea {
	border: 1px solid #DBD9D2;
	box-sizing: border-box;
	border-radius: 4px;
	padding: 0.6em 1.5em;
	width: 100%;
	font-family: "Proxima Nova Alt Light", Arial, Helvetica, sans-serif

}

.tab-content-wrapper .mailchimp-select-wrapper {
	border: 1px solid #DBD9D2;
	padding: 6px 6px 4px 20px;
	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
	box-shadow: inset 0 1px 2px rgba(0,0,0,.07);
	background-color: white;
}

.tab-content-wrapper .mailchimp-select-wrapper select {
	padding: 3px 24px 3px 0px;
	font-size: 14px;
	font-family: "Proxima Nova Alt Light", Arial, Helvetica, sans-serif;
	border: none;
	-webkit-appearance: none;
	box-shadow: none;
	outline: none;
	width: 100% !important;
	max-width: 10000px;
	color: #32373c;
}

.tab-content-wrapper .mailchimp-select-wrapper select option{
	outline: none;
}

.tab-content-wrapper .mailchimp-select-wrapper select:disabled {
	color: #aaa;
	background: none;
}

.tab-content-wrapper fieldset select:focus {
	outline: none;
}

.tab-content-wrapper fieldset input[type='checkbox']:not(#mailchimp_woocommerce_newsletter) {
	width: 2em;
	height: 2em;
	border-radius: 4px;
	border: 1px solid #DBD9D2;
}

.tab-content-wrapper fieldset input[type='checkbox']:not(#mailchimp_woocommerce_newsletter):checked::before {
	color: #7FAD45;
	margin: 0.6em 0px 0px 0.2em;
	content: url("data:image/svg+xml;charset=UTF-8,%3csvg width='13' height='9' viewBox='0 0 13 9' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M10.75 0.5L12.25 2L5.26 9L0.75 4.5L2.25 3L5.26 6L10.75 0.5Z' fill='%237FAD45'/%3e%3c/svg%3e ");

}


.tab-content-wrapper fieldset input[type='radio'],
.sync-content-wrapper fieldset input[type='radio'] {
	width: 2em;
	height: 2em;
	border: 1px solid #DBD9D2;
	margin-right: 10px;
}

.tab-content-wrapper fieldset input[type='radio']:checked::before,
.sync-content-wrapper fieldset input[type='radio']:checked::before {
	background: url("data:image/svg+xml;charset=UTF-8,%3csvg width='13' height='9' viewBox='0 0 13 9' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M10.75 0.5L12.25 2L5.26 9L0.75 4.5L2.25 3L5.26 6L10.75 0.5Z' fill='%237FAD45'/%3e%3c/svg%3e ");
	background-repeat: none;
	width: 13px;
	height: 9px;
	margin: 8px 0 0 7px;
}

.tab-content-wrapper fieldset .radio-label,
.sync-content-wrapper fieldset .radio-label {
	margin-bottom: 10px;
}

.tab-content-wrapper fieldset textarea {
	border: 1px solid #DBD9D2;
	box-sizing: border-box;
	border-radius: 4px;
	padding: 15px 20px;
	width: 100%;

}

.tab-content-wrapper .optional-settings-label,
.tab-content-wrapper .optional-settings-button {
	margin-top: 3em;
	font-weight: 600;
}

.tab-content-wrapper .optional-settings-button:hover span {
	color: #628735;
}

.tab-content-wrapper .optional-settings-label span,
.tab-content-wrapper .optional-settings-button span {
	text-transform: uppercase;
	color: #7FAD45 ;
	font-size: 14px;
	cursor: default;
}

.tab-content-wrapper .optional-settings-button span {
	background: no-repeat left center url("data:image/svg+xml;charset=UTF-8,%3csvg width='13' height='8' viewBox='0 0 13 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M11.34 0.590027L6.75 5.17003L2.16 0.590027L0.75 2.00003L6.75 8.00003L12.75 2.00003L11.34 0.590027Z' fill='%23212121'/%3e%3c/svg%3e ");
	padding-left: 2em;
	cursor: pointer;
}

.tab-content-wrapper .optional-settings-button span.active {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg width='13' height='8' viewBox='0 0 13 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M2.16 7.40997L6.75 2.82997L11.34 7.40997L12.75 5.99997L6.75 -2.61783e-05L0.75 5.99997L2.16 7.40997Z' fill='%23212121'/%3e%3c/svg%3e ");
}

.tab-content-wrapper .optional-settings-content {
	display: block;
}

/* Old styles from tabs.php */

#sync-status-message strong,
#http-worker-deprecated-message strong {
	font-weight:inherit;
}

.view-log-select {
	width: 100%;
	display: inline-block;
}

.log-file-actions {
	display: flex;
	justify-content: space-around;
	align-items: stretch;
}

#log-actions {
	float: right;
	flex: 0 0 104px;
	margin-left: 20px;
}

.view-log-submit {
	width: 15%;
	display: inline-block;
}

#log-viewer {
	background: #fff;
	border: 1px solid #e5e5e5;
	box-shadow: 0 1px 1px rgba(0,0,0,.04);
	text-align: center;
}

#log-viewer pre {
	font-family: monospace;
	white-space: pre-wrap;
}

#log-viewer #log-header {
	border-bottom: 1px solid #e5e5e5;
	padding: 15px 20px;
}

#log-viewer #log-content {
	height: 500px;
	padding: 15px 20px;
	width: 100%;
	background-color: white;
	color: #444;
	font-family: monospace;
	white-space: pre-wrap;
	font-size: 1em;

}

#log-viewer #log-content:focus {
	outline: none;
	box-shadow: none !important;
}

#log-viewer .spinner {
	float:none;
	background-size: 16px 16px;
	width: 16px;
	height: 16px;
	margin: 30px 10px
}

/* account create modal */
#mc-woocommerce-create-account-link {
	padding-top: 20px;
}

#mc-woocommerce-create-account-go {
	float:right;
}

#mc-woocommerce-create-account-go-spinner {
	float:left;
}

.mc-woocommerce-modal {
	width: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	position: absolute;
	left: 0;
	visibility: hidden;
	display: none;
	padding-top: 20px;
	/* background: red;
	opacity: 0.5; */
}

#mc-woocommerce-support-form {
	bottom:0px;
	padding-bottom: 20px;
}

#mc-woocommerce-create-account {
	top:-235px;
}

.mc-woocommerce-modal .terms {
	padding-top: 20px;
	padding-bottom: 20px;
}

.mc-woocommerce-modal .terms a {
	color: #7FAD45 !important;
}

.mc-woocommerce-modal h3 {
	padding-bottom: 20px;
}

.mc-woocommerce-modal .notices {
	background:#fff;
	border-left: 4px solid#fff;
	border-left-color: rgb(255, 255, 255);
	box-shadow: 0 1px 1px 0 rgba(0,0,0,.1);
	margin: 5px 15px 2px;
	padding: 1px 12px;
	padding-right: 12px;
}

#mc-woocommerce-create-account:target,
#mc-woocommerce-support-form:target {
	visibility: visible;
	display: block;
}

.mc-woocommerce-modal .reveal-modal {
	position: relative;
	margin: 0 auto;
	width: 70%;
	max-width: 580px;
	background-color: #ffffff;
	box-shadow: 5px 10px 40px rgba(0, 0, 0, 0.1);
	font-family: proxima-nova, Arial, Helvetica, sans-serif;
	line-height: 17px;
}

.mc-woocommerce-modal .close-modal {
	position: absolute;
	left: 10px;
	top: 10px;
}

.mc-woocommerce-modal .modal-header {
	text-align: center;
	padding-top: 30px;
}

#mc-woocommerce-support-form .modal-header svg{
	display: inline;
}

#mc-woocommerce-support-form .modal-header h3{
	text-align: center;
	padding: 0px 0 20px 30px;
	font-size: 2em;
	display: inline-block;
}

.mc-woocommerce-modal .modal-header h3{
	text-align: center;
	padding-top: 30px;
	font-size: 2em;
}

#mc-woocommerce-support-form h3{
	padding-bottom: 0;
}

.mc-woocommerce-modal .modal-footer {
	padding: 35px;
	bottom: 0px;
	color: #B0B4BD;
	font-size: 10px;
}

.mc-woocommerce-create-account-step {
	padding: 5px 35px 10px 35px;
}

#mc-woocommerce-create-account-step-2 {
	display: none;
}

.mc-woocommerce-create-account-step .spinner{
	float:right;
	background-size: 16px 16px;
	width: 16px;
	height: 16px;
	margin: 15px 10px;
}

.mc-woocommerce-create-account-step-error p{
	display: none;

	background:#fff;
	border-left: 4px solid#fff;
	border-left-color: red;
	box-shadow: 1px 1px 1px 1px rgba(0,0,0,.1);
	margin: 5px 15px 2px;
	padding: 4px 12px;
	padding-right: 12px;
}

.mc-woocommerce-create-account-step-error #connecting,
.mc-woocommerce-create-account-step-error #success{
	border-left-color: #7FAD45;
}

.mc-woocommerce-create-account-step #username_suggestion {
	visibility: hidden;
}

.mc-woocommerce-create-account-step #username_suggestion span{
	color: #7FAD45;
	text-decoration: none;
	cursor: pointer;
}

.mc-woocommerce-create-account-step #username_suggestion span:hover{
	text-decoration: underline;
}

.mc-woocommerce-create-account-step .whitebtn{
	background: white !important;
	box-shadow: 0 1px 0 #DBD9D2 !important;
	text-shadow: 0 -1px 1px	#DBD9D2,1px 0 1px #DBD9D2,0 1px 1px #DBD9D2,-1px 0 1px #DBD9D2 !important;
}

#mc-woocommerce-create-account-next {
	float: right;
}

#mc-woocommerce-create-account-prev {
	float: none;
}

#mc-woocommerce-create-account-step-1 .tab-content-submit:hover{
	background: #F7F7F7;
}

#mc-woocommerce-create-account-step-1 ul{
	list-style: disc !important;
	margin-left: 13px;
}

.settings-sample-frame {

	border: 1px solid black;
	padding: 2em;
	position: relative;
	background: rgb(255,255,255);
}

.settings-sample-frame .mailchimp-newsletter{
	margin-top: 1em;
}

.settings-sample-frame .mailchimp-newsletter label{
	display: inline;
}

.settings-sample-frame .overlay {
	position: absolute;
	width:100%;
	height: 100%;
	top: 0;
	left: 0;
	background: rgb(255,255,255);
	background: linear-gradient(0deg, rgba(255,255,255,0) 10%, rgba(255,255,255,0.6964986678265056) 36%, rgba(255,255,255,1) 100%);
}

@media screen and (max-width: 960px) {
	.mc-woocommerce-settings-subtitles-row {
		flex-direction: column;
		align-items: flex-start;
		margin-bottom: 1.69em;
	}
}

@media screen and (max-width: 782px) {
	.tab-content-wrapper, .notices-content-wrapper {
		padding: 0 1em;
	}
	.tab-content-submit,
	.mc-woocommerce-resync-button {
		padding: 15px 35px 15px 35px !important;
	}

	.log-file-actions {
		display: block;
	}

	#log-actions {
		float: left;
	}

	.tab-content-wrapper form{
		padding: 1em;
	}

	.tab-content-wrapper .mailchimp-select-wrapper select {

		font-size: 16px;
		line-height: 32px;
	}

	.mc-woocommerce-settings-header-wrapper.wiz-header .mc-woocommerce-settings-subtitles {
		padding-left: 28px;
		margin-top: 28px;
	}

	.tab-content-wrapper .box.box-half,
	.tab-content-wrapper .box.box-third,
	.sync-more-wrapper .box.box-half,
	.sync-content-wrapper .box.box-half {
		width: 100%;
	}

	.sync-content-wrapper {
		padding: 0 1rem;
	}

	.sync-content-wrapper .sync-stats-wrapper {
		display: block;
		position:relative;
		margin-bottom: 14px;
		margin-right: 0;
	}

	.sync-content-wrapper .sync-stats-content-wrapper {
		margin-right: 0;
		width: 100%;
		margin: 0;
	}

	.sync-content-wrapper .sync-stats-wrapper .sync-stats-card-content{
		margin-right: 0;
		margin-bottom: 0;
	}

	.sync-content-wrapper .sync-controls-wrapper,
	.sync-more-wrapper .box.box-half.support-container {
		display: block;
		width: 100%;
		position:relative;
		margin-bottom: 14px;
	}

	.sync-more-wrapper .box.box-half .content {
		padding: 0 1em;
	}

	.sync-content-wrapper .sync-controls {
		min-height: 150px;
	}

	.sync-content-wrapper .sync-controls .sync-controls-item {
		display: inline;
		float: left;
		margin-right: 42px;
	}

	.sync-content-wrapper .sync-controls .spinner {
		margin: -3px 10px 0 5px;
	}

	.sync-content-wrapper .sync-stats-wrapper.sync-stats-store,
	.sync-more-wrapper .box.box-half.support-container .content {
		margin-right: 0px;
	}

	.sync-content-wrapper .sync-stats-wrapper.sync-stats-store,
	.sync-content-wrapper .sync-stats-wrapper.overview-stats-store,
	.sync-content-wrapper .sync-stats-wrapper.last-updated {
		margin-right: 0px;
		margin-bottom: 26px;
	}

	.sync-content-wrapper .sync-stats-wrapper.sync-stats-audience,
	.sync-content-wrapper .sync-stats-wrapper.last-updated,
	.sync-more-wrapper .box.box-half.resync-container .content {
		margin-left: 0;
	}

	.sync-more-wrapper .box.box-half.support-container,
	.sync-more-wrapper .box.box-half.resync-container {
		width: 100%;

	}

	.view-log-select,
	.view-log-submit {
		width: 100%;
		display: block;
		margin-bottom: 1em;
	}

	#mc-woocommerce-create-account {
		padding-top: 60px;
	}
	#mc-woocommerce-create-account .reveal-modal{
		width: 80%;
	}

}


@media screen and (max-width: 482px) {
	.nav-tab-wrapper {
		border-bottom: none !important;
	}
	.nav-tab {
		width: 100%;
		padding: 2em 0 !important;
		margin-left: 0;
		border: none;
		border-bottom: 1px solid white !important;
		-webkit-border-radius: 0 !important;
		-moz-border-radius: 0 !important;
		border-radius: 0 !important;
	}

	.connect-buttons {
		padding-left: 28px;
		width: 100%;
	}

	.nav-tab:last-child {
		border: none;
	}

	.nav-tab.nav-tab-active {
		border: 1px solid white !important;
	}
	.disconnect-button {
		margin: 0.5em 0em !important;
	}

	#mc-woocommerce-create-account .reveal-modal{
		width: 100%;
	}

	.mc-woocommerce-create-account-step {
		padding: 5px 5px 10px 5px;
	}

	.mc-woocommerce-settings-header {
		margin-top: 1em !important;
	}

	.sync-content-wrapper .sync-controls {
		min-height: 280px;
	}

	.mc-woocommerce-settings-header-wrapper.wiz-header .mc-woocommerce-settings-subtitles {
		padding-left: 28px;
	}
}
mailchimp-woocommerce-admin.css                                                                                                                                                                                                                                235           1711191352  plugins/mailchimp-for-woocommerce/admin/css                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     /**
 * All of the CSS for your admin-specific functionality should be
 * included in this file.
 */

 #http-worker-deprecated-message strong {
	font-weight:inherit;
}

.mailchimp_woocommerce_is_subscribed_field  {
    display: flex;
}
Mark Simonson - Proxima Nova Alt Light.woff                                                                                                                                                                                                                    16732         1711191352  plugins/mailchimp-for-woocommerce/admin/fonts                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   wOFFOTTO  A\     [                        CFF     2  9./GGPOS  <  @  >TGSUB  ;   I   X.OS/2  d   U   `kicmap      c0khead     3   60hhea  <      $}hmtx  9  P  
(maxp  \       P name      post          xc`d```bpڜplo<Wf@pRHߒEe $ xc`d``K,@T n   P    xc`b|ǨB3e0b21(~3@AnNq1,_yP#H1l  8   xJQF-ta6gQ$brm! uQHK1frÝin]0}&aʁejG }]9ʹr2u&\[PSަ|Vޡ̔wqWjw{+ &P9?%^RQޠVޤ(9*o|-m+pX;~)MNcS>1cBܕq^Yk]M|>7I8N&*]3gynpX&Ŝr@LB%!=qGFƔ.La%y*cL'Xste%OݕN4FJ(Ѳ74NGwlů4rhhۯEd3om1))2$[,HDe1a}:~(d3)_DJcF%  xuiPUuK,%)ɲE+-mS3Jm.j+x{]QaF&n,M+K۰s-~\^P>3o\&+ >'?   ^o'^~|nISnen}wu{߲?be߃=ȣVylx򩧟Yso^|Ǘ_yzͷACBll߱(S%M¢ӟ}y~7riqr#>1!93s]Is/\9Sf͚5svjNUE5+jŞƦZZ\8y)*Z29v8񘓣3Lmb: 7 BvvA$&5b,KeR%{˾"KZ9OW$Š+soWY*F%taڟSu)Pui.%!ZlF]֥RU%Oy#Ni_RS4A616I!L -]fUpkazlV ْl(ۼnzYMU@=5D].owmWz6B1YuI#}xO"	$>%9s+ܰ,f2Tr\vE©a7T@-u#C34^<D-e~fO8(0sG8QIǉ$A/?RDP)J8{[!  xc`f "X  % xeXW<茎a6q7. (""J/J[bcbƈAeA@A[cQ޻~<߃{}=X$I
cBB+}	ŉTӠ~4h*
Ozk_Ǫ&t$ȉgz,O]~KR"VGǤHN&D%ED$uCRbBbc"#SBRbSRcbS"BbED$ǄĆ$"bSBRcF>"6!#">*55)sFxΛpfB$uVam=CV%''u1bXndۤ䈤pb.fH^?5Hp%	ObO 6)qxD"?$IrAzXr@n'F<yJge2Za5**jZVۭ:luܪتܪM_)+JK){ʉMyP^EQjj=FeSyT!UB5QgmXiID3]j"54i5O5_jdkjNh4'5M3s-u,7[r`eG	}2}F<f0)8B4ٿ@V:8q ;giJQX14>O`7/̽}e%(=z<SekI?x9iȎhIp|+ǱYmFꔹ/jW3JO~=}U/O
2Jn+؇J?iP)`s	!R̖I,åf=7^G9tәEGiNl+8sCֺ%9юN/m@6NP^9/(WUcnWٔyKc?&'3/5-\>k9ٱ뇬l7bP/Һ>zu:,7+~&Ni<#S*=6Vq4Y6׹ VhpJ/ԢF#73әLR1krdN?aq"z
-Zn:\a?g e
^-'s%.9|e83d!̉]317~c]ːmY7E"{W+>8x]yn(smsXy	VJJdNET*2]	2Yt0-N煖v2Vi[Ze2/carSsֳh@{&,⣗Σ_ qgcy(h D=F"Bc$?4x\A\b2qQVb%_Y줣'_r0f LPә-$d?fά7sYh=Y27D'pini}
2rG<|mg,6qYMzr@`Z(i*R'&ds2ZX0
SErCY\+QJ,2zkO3CGg)q%@iP\;QjG= ơgøAykY5sIW߈<2Mq,mL(Z.ˬ5s֜BoH#H a8KObA q 	G!\8F&FbZIn#5	D)I'	"I\!K$q?q$nq$}xHD"A"$H&(A' 6VN_MH" ',E_WA!`C" &!I[("0NF1a"у $A$J+bIDAD9ADMԓh &h!zEC!#fp$	 :$.yk?2 '	P /+9d,%ϑD+GV_YjFRcb;41t
K~ukWhWmL]^=2zQ-=w<ҳg[$_Ί[ƭsy\ǽfYozejzNwxg~<W9|_އӿ[E}<}{o]ߦ>A1-h).a%Z6l6mxڄڤd9gsW^8BDtcčbc]ч..p/>
~Mo{39
`o35g~gIRqqcy\$ggO쿬`=y'h@y.vح`{дA9Atv-/`_fhksqpԡGq@+/vgPQ@)Gћ\QEaeokaMYt>jFhkLFZ>N\a蔯E~~Io~7~.P3DjP0AD<U+Dd`#Q-[qtu?{1-3P2!H+A7nX/>oQ݄C6EC7>G|iU\<{v9+8XgVVЕfV+I`Wµ1xL9欜N	k5Ģb$wfr#3iog<C629dǍ^";м4yw|Rv6i`0v`%ɪU氯qab	3,UaeVNZ)L{U
{?jarCi0A/	f[vio.L^zx)v&Z
	ZmwM7S5ܾ&VS-l&:6.FM'^(0I/+.0RlŸ+G
=P
KI(2A?;	zf	.KLbߥxWPI*QpAǠy1QCà/Pj
<:ˣ)MW@3{F:yp	}Ld_F}?v_iM^S^xKtEC4꡽
148Ci@QOm,}a*,C#v=Py
Z	&xEmISy,,G'Zp==ؖ3WLۖӫ*V~dv?1ςF0H9}u2cwͫfȫz?}g#f2w/Mԣp_/h3ܣ<8e}eel:S4Bx->(~oN
}σX=WDe-/4Pl\.q.մ\Pp>seZf֕c]/W--/+oͽxQIs%(QK]	fy
<89xzz	VΕ6c6gw5r^XAx~́ЊKCbbG]MEfGN3&VהyKw/obkPf@aF<1=P4FԣΈk@3T=
=	c@gM!
D3hz0b!ȣ5@8NQ
/6:z삞t+spG7.>Eg'R%	i5Kb%e(
@ 8¢_O
CX277z$N?zmLr/KRzQК)`>9f#77F!h>fXNlk2")@̣|BAُAȹ(_Җͤ2R-gЃ>B'{,5EE"tȄ<iٺ^
oaw
%Jw_v<z|Rcq}dSMA]&E$&e(2;qGAxw5n{ycC/O§Yq5Ry:A'-iXAi;Ce@3{\l=u0n
]ED3U隓m?.{ڏpu2D[Aϭ)(xb=
U aK)A	v0U+SaFL4MEsΣxEA xYXz+~;JU9i
2੃N.ShZͫLV(C
'=,lxi@/b]nI3
OƦLr#+FFbRѕINg\f#L:u5ؔW|%b 	fifZ ¼+0wЀ	>z=u6OޘaaFƘP:1a7a3@^mzZC=F|#EZ:כm_2B΢>[IK?rtZϻbnd!>XܑdX%Jq~wb&E	 Qt(C~8l=~uVx +`X#wáB[u<+d^8n*?U6[>o3P'X[)
%s=}+&+.* YI/~)3h0	L/',ڵ3PD/ѮwCb{"yǧMw~0	0-@8
$DІK>|=JH/]p4$HRtؓ]zKu]ԝg2~vOK/3#VAE#HȂH9DDaVxcD?Q26žwRl3n^;+OdQF-`M!u'j1XdF(ga6VBJ٩sbsb+s"i`-Lj:	@Pe4`k.+e	Zg	;4ɘHB''e%~%pqIWA\Q9CJ
=CnXHZ!_\y"O^gb6BJR~xPcf1#bʯJVW+CV=_ǮfU[,آ~Z;ߙ2؜9%eŮE_X46qFbȿmPo8fr,//|pzu1F:cࠅஈC9>9`ܸ{կ /x'2]m]tf&? #RV9-" \-mU^$$MҁTb-cS~h<NI-`)a
}7TVrZ,"(qv(N_ZhuS$kɹ*\glf_
Y에JΟ$TSbCD]ѥ0z6-zM8`Fة:t$(zJE4!Z4= ji~*R/VY.J)n$@?-fuhnn	zkn1BMyaWH(\!ݛ#M)/<U&OP_d>cw/FeFEӧKGlj7Tׁ\8mpe#8`%4CT@	+yr3
1ƅ-_:1O4OFP7*gQt3@vm
ĳ0x1nJOVx~=<<^쀮~}SYT0Ʀ0Ir3WJ):!iW-*} E4e6Bcn^1r,XV=:7$'Yn2᧼92z֨X1չgJ1X7WIpKY
58/a<v4@SnYs)^x(KYRt[>W$"멺mOq3fش/Edcu7dgLGF2+~zi%2.T4|uֶomQo,@2îjˣjג)πpF~Ufݺu>OsccXk%
[:VL,#h2BD0dwNJ<>ZdcqB+N1N(N
#1)-|e$͏V+*ޔC> Gf`@ ND>hݮ1QͿ oZmZdV!,XXwOAgXDfDØHg66۵ݾ}f/ˏ-}̓lb	LI"c9qD9vm2JbB_Yθr!zFrSÈ
2OY@);E7sմ! 18!
 Wm7"c-hG'tJ@K(=J5`S
@(pmӳ]v[Y1gI%Vz#P5gÚc^N*~p`B)ҝdEWupvZ!juYƂYaGvBס2ual{+.0]3|<,>
*|i_/JcN .dl{)C.-ds BU6z{)MͥalQ[Nx"C,0# {$UX11 bǪ3Xm;j؉ĵ0ư[^f..养^diYh٠s,NK@L&:,tO%u=6eџe?H.]cK+0<ʹ|ftptYht6e/f@l0)g΀äi3X;`w-aҫ[/OB|,18e])LR
"&Rڊ2VyTxSo"v5{/h8on0BcCbNTV(*631^6[X+:Տ7wG|bYhZHeE.+3w'N>5"GJ|sle(o/oOOJrTm3L"8k])E8xP }r	poga}K<9VMYILWqQpk`]j#vbcŘ }L__a]4ΉZ>ˍͦ'ytI좢15kΩRe5>3Ƞ:Ϳ8Eu';r~~+Nniz- bLl	]0(hOmPKKmmG=?I+%!y)hodfؔ)ÆݚlTC){27uu[o6eJ|(
5S^Hy.ہ_Z3Í]fes©UKB4b#eh!cfEAӗLؕ=%r}Y.!6\}>zӘ?nРׯO3B'~SM̱PmV{n(%LRӌ^NOyސwB#P̣:>	63g thw 0?t%3Yѫ~;}T>t<i@#p`T<(>H{.y2N!1@=`4]{ho;ţhتv8wZ0g,㟱w
mCÑ
MhpD7F;4:۵CNF}h^eY+B,`,]A+4j4!VmaI9=Sk`*B񬐍}z9].nƞi%-.]0EL-O9ʇn,5fҽGehW2~'&ѿLbDP+P>Ԉ,yŽMY	+c
fLG?޿u;9峫&LZ;o+aͩrsgJEϖQ5Oϔ9${.08Exѧ5%
np	C2ŀE@V(qT6E}#w8J
\SpM,}ȉ;+,o~u?YÞ
XS2A|sb݈EC+u긠y"0?n4\>_V]&ccϬ,S%ꍒdvVKC=09ݒ#"ASŘ~,莬Y!Oo?JC"o#͝$
e>CVS͖OiiѾce˷gw2|,IОӔ2AߩDޱV!hC=lQwnî`ꏧ]	i0%Qum̩9#bƢ|a#c{Ao'z#ܚ#5
k#Cb@ʢJ%LbZHt8~6dؼ#M].m|ʅ!3d,e*ܸY;a& &H@\R~nFY!!N^X+	K	ٹEt\I]F..+XUz-64{el^*Gc<}<<Wf͂0_MeѺ\#ڈ:ҵ*Gg_=	2mZİ$Pz4\?,sƨ7< zaғ2yqGaỤG{T97~QҰ\6&|t$ue\I*TQ1ȯJl^LpD*n 1Z>pp#;dL8!2#>W&0$6,a}noeiá}~/W?&&0gD-uL>bzARJ\.Ymb}dv\i\ 3{u^)w71r,Zp)xװ;8'ΒfI@leH3C>T$S	5@9_cf<v塦+VuKk4+	IA;W;cMVa~*YطηJ/)0O)ĬݭBʱ♄dF(z0Ȁ#F~4~iA1EwHc@c/LVD߼Q*Wg,
p[Vw8Aۉ9>CV{D	ӿ7~;myN	'hxU^!eK	eh(`D#XyOH#ƫjʒcUpP%tVBUȳO>naocS>ߒF$ ]UOVyQNA)I_ڱcqOs׹a0_m7a{`ۍ_)+8UAQ0
7.+Ё;x<i?0!@bguZ՘g!#|*{xJ#4-rAm+Dj#PR
 bWUrZ˯CP<n6kqT%&fXV;p1ùWH32ܩ@mߑ3*-Eon`X(QCG4<R^Zݖ=c>cGkKCȹ>tUb{Gbnm;_4ܟ皅NP3YUy
aHF/Ջz;"nt㲕U̓4R%'؆eQ~lQ}uiQvöO܂f=l,]̔
k!ʷUFΤA6Zt%^3}Y+5-8p~E<eTA2LSOYSQWς$,aIcI6XD"d,ceo71kJ?mo?f!y#V!9M6i$^/n)Q]/b縵%ruQYǬ{"%B?֍R+J;ARpFW0$IV"'$D(*(2rTmpLqէ\A	I,@"LUAtMʨ`;OYcmS@m;ж?Af+f)Z /Smmmm&3jm5K/oR  mĭTubJU'Vk۪j*QBT,$N
vbQKY/w1_K+KIX,E`xR9WzDf
t~b=~jWIoEGs'eޒܹI~uRsr2Miii9STR/i[4K$)D>ыt6nXmg`z&4°"dGh,oW!UB-"ńMk"'{#qģsa?h )Us؅ZoOP%)9"a KdHX7#Ȁ	|fO\u5Y4(d2
ލ h36[it=]%He^ҵ7~63țX.
X  URQFSdV*oHOǰY췼ՙlVni 4I d]8&-Gs"݄fd<߻hUQ-aN3[cW)^\֥A;[iT2w3/.{fՒ__+'C%coVYqܫtfQiW4FJ2nfbFDoo/;[?ae{Jl4,`=~w,xoiLۭE{_7|s}1	K3mrU7z+?(D xb3QH-yԒiM:d9h˲&XMZbikb*ߪª=Vo)oD&Psp*JRmNGUJS?Qר+KCk[fI3Q3GP	քk5IM!jk~hNk5745j^jM4:?HПB:c:Nn03b?h>S]L>{'5jh٢/@#Le',7F"h/XOZpQqlH>ʵ 00AV-N2̚>Dκmqf'aW^J!TSACka֑CpIw?&J~4z>wENj-W,&i:o:cXllI1L;cƉ>p4/l1h,_XD089H2|aSW/6<*zci%}j<2ZؽFSC]O#ijscp~UMtc^|ttB|1l
z9Hَ2x8x}FyUDX	]`OhaBsŪ0oٔ.wg~MrB\Ftb7匕|@ίw"qq+w9o4٢+[/AAvE,^bjwxRo??ߛUkMs*5jRN9(G3\}ʮ4f6uyz`uѳ(Ep'9?dJD5}}(%;kn%ZBj+̇o4߶_fyhaTVI,	a9loZ_TMWdRFy*LW%QG/(8Jvd
Wu938t'5sE8å)긫T5Lik%N1xwh	^9G)Ҏ+~2n17^͙fQY[OMuG%fN]WNaG(LF12.kJSFqAwbش,"Ev!c[F)M*G8iT9a$>UcqgԈu5gt>Qn\yKqT\!m~Tܑ8wrsH]aSdqϲ2gđ(-;wY/\A'ϙR0	G9T9S(NQ^hU?WA&,CiiH)b葔#TUFs[N$ڗ^^
6l'c?~u{I	xmKT_?[2f63Sf!:ݩ!Fmp (?e!DmZ6m΅E5ASdJ#49Z|xϜy<s^P
t+ߞ]QwEO^{@LhByWy(W2b"-CvFqtt1CG`Qnldi2iwr:Ol鐦·x`U*Dʿ&}J)EVR,%ܘ"#QgOIEEghrW|~(ҫ{W~#%yY"iJSL*ILr+5Qջ,=ySL:(;Ho'ߣŒxE?/4{#fj՞IYcvk.L͑[]eſE4MC3Y}Oy%뒾[t:oe2vm7z, ?!*<E^}"

ode=fwQ;o8䪮f/|FA+'ܦk-֡D>qQƩer6Ik9HN^=Y ∻Wxc`d``bca`I,c``a A2@Dc@,x (/@#> W	   x[hY79MbFSۋzb,і`-VHi)^آ"԰PBlj,F"V]oy{w2Sɷp~A	"PsZ p㯁8A\\X͏q lD/r
N򩥁-\a'ϙ|urWiQZod4,BvZ?$kCε)gY&k4>wFkS!;kW-foņ=`ol˘}ࣰ%nC3dXo/7Dtb:;m XgBI7C6g܆3H*vNkZAo7'[Hi БfW	"-6]ktgld^]Vkl-v9v츞lj'6hCސƎ'i6,;̽&GakM1Sk{va6d퉎@s~֏J tCg)Wa};wbkW;>oO*]{adPփ@URQg/D+|aWaٞ+bZEk(1حoLXig,h/v)Co$a_Բ֜2dq?^XW:HZb,7HcA_l{+>cۙ8JYr_zpGQ:Q]J]KJZ÷4D-S+X*Vl`#Mj`F 9QN9qrk\7mpZi>ty+{J/1^w|{GHBe!Y@tɖEB²29\΢RNJFrr&sL|@X(] e.rKdebtY!Y)sX%ǳZFVNNQ^Ab,b,fENa6YzrYN9]ݲ=rde5, QY	YLt".r7MF;I)wh6Y}YvO\zSbRZ֢{Ƒq(Q@ɤ(G-qe:xhoATH!\œ"EJKq_N19<QT/SxrɣJ>(]owg&c/F:Gb"<d	aY2
ѓBIЕ(!$)"L%	2B#(rindex.php                                                                                                                                                                                                                                                      27            1711191352  plugins/mailchimp-for-woocommerce/admin                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         <?php // Silence is golden
mailchimp-woocommerce-admin.js                                                                                                                                                                                                                                 22174         1711191352  plugins/mailchimp-for-woocommerce/admin/js                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      (function( $ ) {
	'use strict';

	$(window).on('load', function() {

		// show/hide optional settings
		var optionalSettings = false;
		$('.optional-settings-button').click(function () {
			if (optionalSettings) {
				$('.optional-settings-content').slideUp();
				$(this).find('span').removeClass('active');
				optionalSettings = false;
			} else {
				$('.optional-settings-content').slideDown();
				$(this).find('span').addClass('active');
				optionalSettings = true;
			}
		});

		// re-enable disable select input on audience settings submit
		$('#mailchimp_woocommerce_options').on('submit', function() {
			$('select[name="mailchimp-woocommerce[mailchimp_list]"]').prop('disabled', false);

			$('#mailchimp_submit').attr('disabled', true);
		});

		// load new log file on log select change
		$('#log_file').change(function (e) {
			e.preventDefault();
			// prevents Log Deleted notification to show up
			removeLogDeletedParamFromFormHttpRef();
			
			var data = {
				action:'mailchimp_woocommerce_load_log_file',
				log_file: $('#log_file').val()
			};
			
			$('#log-viewer #log-content').css("visibility", "hidden");
			$('#log-viewer .spinner').show().css("visibility", "visible");

			$.post(ajaxurl, data, function(response) {
				if (response.success) {
					$('#log-content').html(response.data)
				}
				else {
					$('#log-content').html('Error: ' + response.data)
				}		

				$('#log-viewer .spinner').hide().css("visibility", "hidden");
				$('#log-viewer #log-content').css("visibility", "visible");
			});
		});

		$('#mailchimp-log-pref').change(function (e) {
			e.preventDefault();
			// prevents Log Deleted notification to show up
			removeLogDeletedParamFromFormHttpRef();

			$('#mailchimp_woocommerce_options').submit();
		});

		// Remove log_deleted param from _wp_http_referer hidden input
		function removeLogDeletedParamFromFormHttpRef() {
			var currentFormRefererUrl = $('input[name="_wp_http_referer"]').val();
			$('input[name="_wp_http_referer"]').val(currentFormRefererUrl.replace('&log_removed=1', ''))
		}

		// copy log button
		$('.mc-woocommerce-copy-log-button').click(function (e) {
			e.preventDefault();
			var copyText = $('#log-content');
			var $temp = $("<textarea>");
			$("body").append($temp);
			$temp.val($(copyText).text()).select();
			/* Copy the text inside the text field */
			document.execCommand("copy");
			$temp.remove();
			$('.mc-woocommerce-copy-log-button span.clipboard').hide();
			$('.mc-woocommerce-copy-log-button span.yes').show();
		});

		$('.mc-woocommerce-copy-log-button').mouseleave(function (e) {
			$('.mc-woocommerce-copy-log-button span.clipboard').show();
			$('.mc-woocommerce-copy-log-button span.yes').hide();
		});

		// delete log button
		$('.delete-log-button').click(function (e) {
			e.preventDefault();

			Swal.fire({
				title: phpVars.l10n.are_you_sure,
				text: phpVars.l10n.log_delete_subtitle,
				type: 'warning',
				showCancelButton: true,
				confirmButtonColor: '#3085d6',
				cancelButtonColor: '#d33',
				confirmButtonText: phpVars.l10n.log_delete_confirm,
				cancelButtonText: phpVars.l10n.no_cancel,
				customClass: {
					confirmButton: 'button button-primary tab-content-submit disconnect-button',
					cancelButton: 'button button-default mc-woocommerce-resync-button disconnect-button'
				},
				buttonsStyling: false,
				reverseButtons: true,

			}).then((result) => {
				if (result.value) {
					var data = {
						action:'mailchimp_woocommerce_delete_log_file',
						log_file: $('#log_file').val()
					};

					$('#log-viewer #log-content').css("visibility", "hidden");
					$('#log-viewer .spinner').show().css("visibility", "visible");

					$.post(ajaxurl, data, function(response) {
						console.log('deleted log file', data.log_file);
						if (response.success) {
							window.location.reload();
						}
						$('#log-viewer .spinner').hide().css("visibility", "hidden");
						$('#log-viewer #log-content').css("visibility", "visible");
					});
				}
			})
		});

		$('.mc-woocommerce-resync-button').click(function(e) {
			e.preventDefault();
			Swal.fire({
				title: phpVars.l10n.resync_in_progress,
				onBeforeOpen: () => {
					Swal.showLoading()
				}
			});
			var form = $('#mailchimp_woocommerce_options');
			var data = form.serialize();
			data+="&mailchimp_woocommerce_resync=1"
			return $.ajax({type: "POST", url: form.attr('action'), data: data}).done(function(data) {
				window.location.reload();
			}).fail(function(xhr) {
				Swal.hideLoading();
				Swal.showValidationMessage(phpVars.l10n.resync_failed);
			});
		});

		/*
		* Shows dialog on store disconnect
		* Change wp_http_referer URL in case of store disconnect
		*/ 
		var mailchimp_woocommerce_disconnect_done = false;
		$('#mailchimp_woocommerce_disconnect').click(function (e){
			var me = $(this);

			// this is to trigger the event even after preventDefault() is issued.
			if (mailchimp_woocommerce_disconnect_done) {
				mailchimp_woocommerce_disconnect_done = false; // reset flag
				return; // let the event bubble away
			}

			e.preventDefault();

			const swalWithBootstrapButtons = Swal.mixin({
				customClass: {
				  confirmButton: 'button button-primary tab-content-submit disconnect-confirm',
				  cancelButton: 'button button-default mc-woocommerce-resync-button disconnect-button'
				},
				buttonsStyling: false,
			})
			
			swalWithBootstrapButtons.fire({
				title: phpVars.l10n.are_you_sure,
				text: phpVars.l10n.store_disconnect_subtitle,
				type: 'warning',
				showCancelButton: true,
				confirmButtonColor: '#3085d6',
				cancelButtonColor: '#d33',
				confirmButtonText: phpVars.l10n.store_disconnect_confirm,
				cancelButtonText: phpVars.l10n.no_cancel,
				reverseButtons: true,
			}).then((result) => {
				if (result.value) {
					var query = window.location.href.match(/^(.*)\&/);
					if (query){
						history.replaceState({}, "", query[1]);
						$('input[name=_wp_http_referer]').val(query[1]);
					}
					try {
						mailchimp_woocommerce_disconnect_done = true;
						var form = $('#mailchimp_woocommerce_options');
						var data = form.serialize();
						data+="&mailchimp_woocommerce_disconnect_store=1"

						Swal.fire({
							title: phpVars.l10n.store_disconnect_in_progress,
							onBeforeOpen: () => {
								Swal.showLoading()
							}
						});

						return $.ajax({type: "POST", url: form.attr('action'), data: data }).done(function(data) {
							window.location.reload();
						}).fail(function(xhr) {
							Swal.hideLoading();
							Swal.showValidationMessage("Could not delete store.");
						});
					} catch (e) {
						console.error('clicking event for disconnect failed', e);
					}
				} 
			})	
		});

		/* 
		* Change wp_http_referer URL in case of in-wizard tab change
		*/ 
		var mailchimp_woocommerce_submit_done = false;
		$('#mailchimp_woocommerce_options .tab-content-submit:not(.oauth-connect):not(#mc-woocommerce-support-form-submit)').click(function(e){
			// this is to trigger the event even after preventDefault() is issued.
			if (mailchimp_woocommerce_submit_done) {
				mailchimp_woocommerce_submit_done = false; // reset flag
				return; // let the event bubble away
			}
			e.preventDefault();

			if ($('input[name=mailchimp_woocommerce_wizard_on]').val() == 1) {
				var query = window.location.href.match(/^(.*)\&/);
				if (query){
					history.replaceState({}, "", query[1]);
					$('input[name=_wp_http_referer]').val(query[1]);		
				}
			}
			mailchimp_woocommerce_submit_done = true;
			e.target.click();

		});

		// Mailchimp OAuth connection (tab "connect")
		$('#mailchimp_woocommerce_options #mailchimp-oauth-connect').click(function(e){
			var token = '';
			var startData = {action:'mailchimp_woocommerce_oauth_start'};
			$('#mailchimp-oauth-api-key-valid').hide();
			$('#mailchimp-oauth-error').hide();
			$('#mailchimp-oauth-waiting').show();
			
			$.post(ajaxurl, startData, function(startResponse) {
				if (startResponse.success) {
					token = JSON.parse(startResponse.data.body).token;
					openOAuthPopup(token);
				}
				else {
					console.log("Error: start response:",startResponse);
				}		
			});
		});

		function openOAuthPopup(token) {
			var domain = 'https://woocommerce.mailchimpapp.com';
					var options = {
						path: domain+'/auth/start/'+token,
						windowName: 'Mailchimp For WooCommerce OAuth',
						height: 800,
						width: 1035,
					};
					var left = (screen.width - options.width) / 2;
					var top = (screen.height - options.height) / 4;
					var window_options = 'toolbar=no, location=no, directories=no, ' +
						'status=no, menubar=no, scrollbars=no, resizable=no, ' +
						'copyhistory=no, width=' + options.width +
						', height=' + options.height + ', top=' + top + ', left=' + left +
						', domain='+domain.replace('https://', '');

			// open Mailchimp OAuth popup
			var popup = window.open(options.path, options.windowName, window_options);
					
			if (popup == null) {
				window.clearInterval(oauthInterval);
				const swalWithBootstrapButtons = Swal.mixin({
					customClass: {
					  confirmButton: 'button button-primary tab-content-submit disconnect-button',
					  cancelButton: 'button button-default mc-woocommerce-resync-button disconnect-button'
					},
					buttonsStyling: false,
				})
				
				swalWithBootstrapButtons.fire({
					type : 'error',
					title: phpVars.l10n.login_popup_blocked,
					text: phpVars.l10n.login_popup_blocked_desc,
					footer: '<a href="https://mailchimp.com/help/enable-pop-ups-in-your-browser/">How to Enable Pop-ups in Your Browser</a>',
					showCancelButton: true,
					cancelButtonColor: '#d33',
					confirmButtonColor: '#7fad45',
					cancelButtonText: phpVars.l10n.no_cancel,
					confirmButtonText: phpVars.l10n.try_again,
					reverseButtons: true
				}).then((result) => {
					if (result.value) {
						openOAuthPopup(token);
					}
				});
			}
			else {
				var oauthInterval = window.setInterval(function(){
					if (popup.closed) {
						// clear interval
						window.clearInterval(oauthInterval);

						// hide/show messages
						$('#mailchimp-oauth-error').hide();
						$('#mailchimp-oauth-waiting').hide();
						$('#mailchimp-oauth-connecting').show();

						var checkData = {
							action:'mailchimp_woocommerce_oauth_status',
							url: domain + '/api/status/' + token,
						};

						// ping status to check if auth was accepted
						$.post(ajaxurl, checkData).done(function(statusData) {							
							if (statusData.data.status == "accepted") {
								// call for finish endpoint to retrieve access_token
								var finishData = {
									action: 'mailchimp_woocommerce_oauth_finish', 
									token: token
								}
								$.post(ajaxurl, finishData, function(finishResponse) {
									if (finishResponse.success) {
										// hide/show messages
										$('#mailchimp-oauth-error').hide();
										$('#mailchimp-oauth-connecting').hide();
										$('#mailchimp-oauth-connected').show();
										
										// get access_token from finishResponse and fill api-key field value including data_center
										var accessToken = JSON.parse(finishResponse.data.body).access_token + '-' + JSON.parse(finishResponse.data.body).data_center 
										$('#mailchimp-woocommerce-mailchimp-api-key').val(accessToken);

										// always go to next step on success, so change url of wp_http_referer
										if ($('input[name=mailchimp_woocommerce_wizard_on]').val() == 1) {
											var query = window.location.href.match(/^(.*)\&/);
											if (query){
												history.replaceState({}, "", query[1]);
												$('input[name=_wp_http_referer]').val(query[1]);		
											}
										}
										// submit api_key/access_token form 
										$('#mailchimp_woocommerce_options').submit();
									}
									else {
										console.log('Error calling OAuth finish endpoint. Data:', finishResponse);
									}
								});
							}
							else {
								$('#mailchimp-oauth-connecting').hide();
								$('#mailchimp-oauth-error').show();
								console.log('Error calling OAuth status endpoint. No credentials provided at login popup? Data:', statusData);
							}
						});
					}
				}, 250);
			}
			// While the popup is open, wait. when closed, try to get status=accepted
		}

		// Remove Initial Sync Banner oon dismiss
		$('#setting-error-mailchimp-woocommerce-initial-sync-end .notice-dismiss').click(function(e){
			$.get(phpVars.removeReviewBannerRestUrl, [], function(response){
				console.log(response);
			});
		});

		$('#tower_box_switch').change(function (e){
			var switch_button = this;
			var opt = this.checked ? 1 : 0;

			var data = {
				action: 'mailchimp_woocommerce_tower_status',
				opt: opt
			}

			$('.tower_box_status').hide();
			$('#tower_box_status_' + opt).show();

			$.post(ajaxurl, data, function(response) {
				if (response.success) {
					$('#mc-tower-save').html(response.data);
					$('#mc-tower-save').css('color', '#628735').show().fadeOut(3000);
					switch_button.checked = opt;
				}
				else {
					$('#mc-tower-save').html(response.data.error);
					$('#mc-tower-save').css('color', 'red').show().fadeOut(3000);
					switch_button.checked = 1 - opt;
					$('.tower_box_status').hide();
					$('#tower_box_status_' + (1 - opt)).show();
				}
			});
		});

		$('#comm_box_switch').change(function (e){
			var switch_button = this;
			var opt = this.checked ? 1 : 0;
			
			var data = {
				action: 'mailchimp_woocommerce_communication_status', 
				opt: opt
			}

			$('.comm_box_status').hide();
			$('#comm_box_status_' + opt).show();

			$.post(ajaxurl, data, function(response) {
				if (response.success) {
					$('#mc-comm-save').html(response.data);
					$('#mc-comm-save').css('color', '#628735').show().fadeOut(3000);
					switch_button.checked = opt;
				}
				else {
					$('#mc-comm-save').html(response.data.error);
					$('#mc-comm-save').css('color', 'red').show().fadeOut(3000);
					switch_button.checked = 1 - opt;
					$('.comm_box_status').hide();
					$('#comm_box_status_' + (1 - opt)).show();
				}
			});
		});
		// communications box radio ajax call
		$('input.comm-box-input').change(function(e){
			var data = {
				action: 'mailchimp_woocommerce_communication_status', 
				opt: this.value
			}
			var opt = this.value;
			
			$.post(ajaxurl, data, function(response) {
				if (response.success) {
					$('#mc-comm-save-'+opt).html(response.data);
					$('#mc-comm-save-'+opt).css('color', '#628735').show().fadeOut(5000);
					$('#swi').checked = true;
				}
				else {
					$('#mc-comm-save-'+opt).html(response.data.error);
					$('#mc-comm-save-'+opt).css('color', 'red').show().fadeOut(5000);
					$('#mc-comm-input-'+response.data.opt).prop('checked', true);
					$('#swi').checked = false;
				}
			});
		});

		// Account create functionality
		$('#mc-woocommerce-create-account-next').unbind().click(function (e) {
			var next_button = $(this);
			var spinner = $(this).next('.spinner');
			spinner.css('visibility', 'visible')
			
			$('.mc-woocommerce-create-account-step-error > p').hide();
			$('#username_suggestion').css('visibility', 'hidden');
			var email = $('input#email');
			var username = $('input#username');
			
			var isValid= true;
		
			if (! email[0].checkValidity()) {
				$('#email_error').show();
				isValid= false;
			}
			else {
				$('#email_error').hide();
			}
			
			if (! username[0].checkValidity()) {
				$('#username_invalid_error').show();
				spinner.css('visibility', 'hidden');
			}
			else {
				$('#username_invalid_error').hide();
				var data = {
					action:'mailchimp_woocommerce_create_account_check_username',
					username: username.val(),
				};

				$.post(ajaxurl, data, function(response) {
					if (response.success) {
						$('#username_exists_error').hide();
						if ( isValid == true) {
							spinner.css('visibility', 'hidden');
							$('.mc-woocommerce-settings').css('height', '900px');
							$('#mc-woocommerce-create-account-step-1').hide();
							$('#mc-woocommerce-create-account-step-2').show();
							$('#step_count').html('2');
						}
					}
					else {
						$('#username_exists_error').show();
						$('#username_suggestion').css('visibility', 'visible');
						$('#username_suggestion span').html(response.data.suggestion);
						spinner.css('visibility', 'hidden');
					}		
				});
			}
		});

		$('#mc-woocommerce-create-account-prev').click(function () {
			$('#mc-woocommerce-create-account-step-1').show();
			$('#mc-woocommerce-create-account-step-2').hide();
			$('#step_count').html('1');
			
		});

		$('#mc-woocommerce-create-account-go').unbind().click(function () {
			var email = $('input#email');
			var firstName = $('input#first_name');
			var lastName = $('input#last_name');
			var org = $('input#org');
			var timezone = $('select#timezone');

			var username = $('input#username');

			var address = $('input#address');
			var address2 = $('input#address2');
			var city = $('input#city');
			var state = $('input#state');
			var zip = $('input#zip');
			var country = $('select#country');
			var phone = $('input#phone');
			
			var isValid = true;
			
			var spinner = $(this).next('.spinner');
			spinner.css('visibility', 'visible');

			if (! address[0].checkValidity() || ! address2[0].checkValidity()) {
				$('#address_error').show();
				isValid= false;
			}
			else {
				$('#address_error').hide();
			}

			if (! city[0].checkValidity()) {
				$('#city_error').show();
				isValid= false;
			}
			else {
				$('#city_error').hide();
			}

			if (! state[0].checkValidity()) {
				$('#state_error').show();
				isValid= false;
			}
			else {
				$('#state_error').hide();
			}

			if (! zip[0].checkValidity()) {
				$('#zip_error').show();
				isValid= false;
			}
			else {
				$('#zip_error').hide();
			}

			if (! country[0].checkValidity()) {
				$('#country_error').show();
				isValid= false;
			}
			else {
				$('#country_error').hide();
			}

			if (! phone[0].checkValidity()) {
				$('#phone_error').show();
				isValid= false;
			}
			else {
				$('#phone_error').hide();
			}

			if (! timezone[0].checkValidity()) {
				$('#timezone_error').show();
				isValid= false;
			}
			else {
				$('#timezone_error').hide();
			}

			if (isValid) {
				var data = {
					action:'mailchimp_woocommerce_create_account_signup',
					data: {
						email: email.val(),
						first_name: firstName.val(),
						last_name: lastName.val(),
						org: org.val(),
						timezone: timezone.val(),
						username: username.val(),
						address: {
							address1: address.val(),
							city: city.val(),
							state: state.val(),
							zip: zip.val(),
							country: country.val()
						}
					},
				};

				// add optional address 2 only if it's filled out
				if (address2.val() != '') {
					data.data.address.address2 = address2.val();
				}

				$.post(ajaxurl, data, function(response) {
					if (response.success) {
						$('#connecting').show();
						spinner.css('visibility', 'hidden');
										
						// get access_token and fill api-key field value including data_center
						var accessToken = response.data.data.oauth_token + '-' + response.data.data.dc
						
						$('#mailchimp-woocommerce-mailchimp-api-key').val(accessToken);

						// always go to next step on success, so change url of wp_http_referer
						if ($('input[name=mailchimp_woocommerce_wizard_on]').val() == 1) {
							var query = window.location.href.match(/^(.*)\&/);
							if (query){
								history.replaceState({}, "", query[1]);
								$('input[name=_wp_http_referer]').val(query[1]);		
							}
						}
						// submit api_key/access_token form 
						$('#mailchimp_woocommerce_options').submit();
					}
				}).fail(function (err) {
					console.log('FAIL:' , err);
				});
			}
			else {
				spinner.css('visibility', 'hidden')
			}
		});

		$('#username_suggestion span').click(function (){
			$('input#username').val($(this).html());
		});

		$('#mc-woocommerce-create-account-step-1').keypress(function(event){
			event.stopPropagation();
			var keycode = (event.keyCode ? event.keyCode : event.which);
			if ( keycode == '13' ){
				$("#mc-woocommerce-create-account-next").click(); 				
			}
		});

		$('#mc-woocommerce-create-account-step-2').keypress(function(event){
			event.stopPropagation();
			var keycode = (event.keyCode ? event.keyCode : event.which);
			if ( keycode == '13' ){
				$("#mc-woocommerce-create-account-go").click(); 				
			}
		});

		var checkbox_label = phpVars.l10n.subscribe_newsletter;
		var label = checkbox_label;
		$('#mailchimp-woocommerce-newsletter-checkbox-label').keyup(function(event){
			event.stopPropagation();
			if ($('#mailchimp-woocommerce-newsletter-checkbox-label').val() == "") {
				label = checkbox_label;
			}
			else label = $('#mailchimp-woocommerce-newsletter-checkbox-label').val(); 
			$('#preview-label').html(label);
		});
		
		switchPreviewCheckbox(phpVars.current_optin_state)
		$('input[type="radio"]').change(function(event){
			event.stopPropagation();
			switchPreviewCheckbox(event.currentTarget.value);
		});
		
		function switchPreviewCheckbox(currentState) {
			switch (currentState) {
				case 'check':
					$('.mailchimp-newsletter').show();
					$('.mailchimp-newsletter input').prop( "checked", true );
					break;
				case 'uncheck':
					$('.mailchimp-newsletter').show();
					$('.mailchimp-newsletter input').prop( "checked", false );
					break;
				case 'hide':
					$('.mailchimp-newsletter').hide();
					break;
				default:
					break;
			}
		}
		var ongoing_subscribed = $('#ongoing_sync_subscribed');
		var ongoing_all = $('#ongoing_sync_all');
		var cart_track_all = $('#cart_track_all');

		if (ongoing_subscribed.prop('checked')) {
			cart_track_all.attr('disabled', true);
			cart_track_all.parent().css({opacity: '.5'});
		}

		ongoing_subscribed.click(function() {
			$('#cart_track_subscribed').prop('checked', true).trigger('click');
			cart_track_all.attr('disabled', true);
			cart_track_all.parent().css({opacity: '.5'});
		});

		ongoing_all.click(function() {
			cart_track_all.attr('disabled', false);
			cart_track_all.parent().css({opacity: '1'});
		});
	});
})( jQuery );

mailchimp-woocommerce-admin-tabs.php                                                                                                                                                                                                                           29110         1711191352  plugins/mailchimp-for-woocommerce/admin/partials                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <?php
/**
 * The admin-specific functionality of the plugin.
 *
 * @package    MailChimp_WooCommerce
 * @subpackage MailChimp_WooCommerce/admin
 */

/** Grab plugin admin object */

$handler = MailChimp_WooCommerce_Admin::connect();

/** Grab all options for this particular tab we're viewing. */

$options = get_option( $this->plugin_name, array() );

/** Verify that the nonce is correct for the GET and POST variables. */

$active_tab = isset( $_GET['tab'] ) ?
	esc_attr( sanitize_key( $_GET['tab'] ) ) :
	( isset( $options['active_tab'] ) ? esc_attr( wp_unslash( $options['active_tab'] ) ) : 'api_key' );

$mc_configured = mailchimp_is_configured();

if ( ! $mc_configured && in_array( $active_tab, array( 'sync', 'logs' ), true ) ) {
	$active_tab =  isset( $options['active_tab'] ) ? $options['active_tab'] : 'api_key';
}
$is_mailchimp_post = isset( $_POST['mailchimp_woocommerce_settings_hidden'] ) && check_admin_referer( 'mailchimp_woocommerce_options', 'mailchimp_woocommerce_nonce' ) && strtolower( esc_attr( sanitize_key( $_POST['mailchimp_woocommerce_settings_hidden'] ) ) ) === 'y';

$show_sync_tab = isset( $_GET['resync'] ) ? ( esc_attr( sanitize_key( $_GET['resync'] ) ) === '1' ) : false;
/**  If we have a transient set to start the sync on this page view, initiate it now that the values have been saved. */

if ( $mc_configured && ! $show_sync_tab && (bool) get_site_transient( 'mailchimp_woocommerce_start_sync' ) ) {
	$show_sync_tab = true;
	$active_tab    = 'sync';
}

$show_newsletter_settings = true;
$has_valid_api_key        = false;
$allow_new_list           = true;
$only_one_list            = false;
$show_wizard              = true;
$clicked_sync_button      = $mc_configured && $is_mailchimp_post && 'sync' === $active_tab;
$has_api_error            = isset( $options['api_ping_error'] ) && ! empty( $options['api_ping_error'] ) ? $options['api_ping_error'] : null;

if ( isset( $options['mailchimp_api_key'] ) ) {
	try {
		if ( $handler->hasValidApiKey( null, true ) ) {
			$has_valid_api_key = true;

			/**  If we don't have a valid api key we need to redirect back to the 'api_key' tab. */
			$mailchimp_lists = $handler->getMailChimpLists();

			if ( is_array( $mailchimp_lists ) ) {
				$show_newsletter_settings = true;
				$allow_new_list           = false;
				$only_one_list            = count( $mailchimp_lists ) === 1;
			}

			/** Only display this button if the data is not syncing and we have a valid api key */

			if ( (bool) $this->getData( 'sync.started_at', false ) ) {
				$show_sync_tab = true;
			}

			/** Display wizard if not all steps are complete */

			if ( $show_sync_tab && $this->getData( 'validation.store_info', false ) && $this->getData( 'validation.newsletter_settings', false ) ) {
				$show_wizard = false;
			}
		}
	} catch ( Exception $e ) {
		if (mailchimp_string_contains($e->getMessage(), array('API key', 'User Disabled'))) {
			$active_tab    = 'api_key';
			$show_sync_tab = false;
			$has_api_error = "This Mailchimp API key has been disabled, please flush any object caches you may be using and re-connect.";
		} else {
			$has_api_error = $e->getMessage() . ' on ' . $e->getLine() . ' in ' . $e->getFile();
		}
	}
} else {
	$active_tab = 'api_key';
}
?>
<div class="mc-woocommerce-settings wrap woocommerce">
	<form id="mailchimp_woocommerce_options" method="post" name="cleanup_options" action="options.php">
		<?php wp_nonce_field( 'mailchimp_woocommerce_options', 'mailchimp_woocommerce_nonce' ); ?>
		<?php if ( $show_wizard ) : ?>
			<div class="mc-woocommerce-settings-header-wrapper wiz-header">
				<div class="mc-woocommerce-settings-header">
					<svg class="mc-woocommerce-logo" width="93" height="93" viewBox="0 0 46 49" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M34.5458 23.5193C34.8988 23.4778 35.2361 23.4759 35.5457 23.5193C35.7252 23.107 35.7568 22.397 35.5951 21.6239C35.3544 20.4741 35.029 19.7778 34.3584 19.8863C33.6859 19.9948 33.6622 20.8271 33.9028 21.9769C34.037 22.6238 34.2776 23.1761 34.5458 23.5193Z" fill="black"/>
						<path d="M28.7763 24.4284C29.2575 24.6394 29.5534 24.7795 29.6678 24.6572C29.7427 24.5803 29.719 24.4363 29.6046 24.2489C29.368 23.8624 28.8788 23.4679 28.3621 23.249C27.303 22.7934 26.0407 22.9453 25.0664 23.6454C24.745 23.8801 24.4393 24.2075 24.4826 24.4047C24.4965 24.4698 24.5458 24.5172 24.6582 24.5329C24.9225 24.5625 25.8494 24.0951 26.9164 24.03C27.6718 23.9827 28.295 24.2174 28.7763 24.4284Z" fill="black"/>
						<path d="M27.8105 24.9806C27.1852 25.0793 26.8381 25.2863 26.6172 25.4777C26.4279 25.6433 26.3115 25.8267 26.3115 25.9549C26.3115 26.0161 26.3391 26.0516 26.3589 26.0693C26.3865 26.095 26.422 26.1088 26.4614 26.1088C26.6034 26.1088 26.919 25.9826 26.919 25.9826C27.7907 25.6709 28.3647 25.7084 28.9346 25.7735C29.2502 25.809 29.3981 25.8287 29.4672 25.7202C29.4869 25.6887 29.5125 25.6216 29.4494 25.521C29.3054 25.2804 28.6723 24.8781 27.8105 24.9806Z" fill="black"/>
						<path d="M32.5975 27.0061C33.0235 27.2152 33.4909 27.1324 33.6428 26.8227C33.7946 26.5131 33.5737 26.093 33.1497 25.8839C32.7237 25.6749 32.2563 25.7577 32.1044 26.0673C31.9506 26.377 32.1734 26.7971 32.5975 27.0061Z" fill="black"/>
						<path d="M35.3306 24.6177C34.9854 24.6118 34.6995 24.9905 34.6916 25.4638C34.6837 25.9372 34.9578 26.3257 35.303 26.3317C35.6481 26.3376 35.9341 25.9589 35.942 25.4855C35.9499 25.0122 35.6757 24.6237 35.3306 24.6177Z" fill="black"/>
						<path d="M12.1324 33.1577C12.0456 33.0492 11.9056 33.0827 11.7695 33.1143C11.6749 33.136 11.5664 33.1616 11.448 33.1596C11.1936 33.1557 10.9786 33.0452 10.8583 32.8598C10.7006 32.6192 10.7104 32.2583 10.884 31.8461C10.9076 31.7909 10.9353 31.7297 10.9648 31.6607C11.241 31.0394 11.7064 30 11.1857 29.008C10.7932 28.2625 10.1542 27.797 9.38702 27.7004C8.64939 27.6077 7.89006 27.8798 7.40685 28.4143C6.64358 29.2565 6.52328 30.4044 6.6712 30.8087C6.72445 30.9566 6.80925 30.998 6.87237 31.0059C7.00254 31.0237 7.19385 30.929 7.31416 30.6055C7.32205 30.5819 7.33388 30.5464 7.34769 30.501C7.40094 30.3294 7.50152 30.0099 7.66522 29.7555C7.86245 29.4478 8.17012 29.2348 8.53105 29.1579C8.89789 29.079 9.2746 29.15 9.58819 29.3551C10.1227 29.7062 10.3298 30.361 10.101 30.9862C9.98264 31.3096 9.79133 31.9289 9.83275 32.4378C9.91756 33.4673 10.5507 33.8795 11.1206 33.9249C11.6729 33.9466 12.0594 33.6349 12.1581 33.4081C12.2133 33.274 12.164 33.1932 12.1324 33.1577Z" fill="black"/>
						<path d="M44.044 31.2761C44.0223 31.2012 43.8862 30.7002 43.6969 30.0967C43.5075 29.4932 43.3142 29.0672 43.3142 29.0672C44.0696 27.9351 44.0834 26.9233 43.9828 26.3514C43.8763 25.6414 43.5805 25.0359 42.9829 24.4107C42.3873 23.7854 41.1684 23.1445 39.4545 22.6632C39.2593 22.608 38.6123 22.4305 38.5551 22.4127C38.5512 22.3753 38.5078 20.2945 38.4684 19.3991C38.4408 18.7522 38.3836 17.7444 38.0719 16.7504C37.6992 15.4053 37.0483 14.2298 36.2377 13.4764C38.4763 11.157 39.8726 8.60091 39.8707 6.40774C39.8647 2.19102 34.6855 0.914962 28.3033 3.55781C28.2974 3.55978 26.9602 4.1278 26.9503 4.13174C26.9444 4.12582 24.5066 1.73346 24.4692 1.7019C17.1954 -4.64488 -5.55475 20.6436 1.71899 26.7853L3.30864 28.1323C2.89644 29.2013 2.73471 30.4241 2.86685 31.7396C3.03647 33.4299 3.90822 35.0511 5.32234 36.3015C6.66348 37.4908 8.42669 38.2422 10.1386 38.2402C12.9688 44.7626 19.4359 48.7643 27.0193 48.9891C35.153 49.2317 41.981 45.4134 44.8428 38.5578C45.0301 38.0765 45.825 35.909 45.825 33.9939C45.825 32.0729 44.7382 31.2761 44.044 31.2761ZM10.7638 36.41C10.5173 36.4514 10.2649 36.4691 10.0104 36.4632C7.55298 36.3981 4.90027 34.1852 4.63598 31.5621C4.34409 28.6629 5.82527 26.4322 8.44839 25.9017C8.76198 25.8386 9.14066 25.8011 9.54892 25.8228C11.0183 25.9037 13.1838 27.0318 13.6789 30.2328C14.1187 33.0689 13.4225 35.9564 10.7638 36.41ZM8.02041 24.1681C6.38736 24.4856 4.9476 25.4106 4.06797 26.6886C3.54137 26.2508 2.56115 25.4007 2.38956 25.0694C0.985306 22.4009 3.92202 17.2138 5.97516 14.285C11.0478 7.04676 18.9922 1.56581 22.6705 2.55984C23.2681 2.72945 25.2482 5.02518 25.2482 5.02518C25.2482 5.02518 21.5719 7.06451 18.1618 9.90853C13.5704 13.4468 10.0992 18.5885 8.02041 24.1681ZM33.8079 35.3252C33.8611 35.3035 33.8986 35.2424 33.8927 35.1812C33.8848 35.1063 33.8177 35.0531 33.7448 35.0609C33.7448 35.0609 29.8969 35.6309 26.26 34.2996C26.6564 33.0117 27.7096 33.4772 29.3012 33.6054C32.1709 33.777 34.7408 33.3569 36.642 32.8125C38.2889 32.3392 40.4505 31.4083 42.1309 30.0829C42.6969 31.3274 42.8981 32.6962 42.8981 32.6962C42.8981 32.6962 43.3359 32.6173 43.7028 32.8441C44.0499 33.0571 44.3024 33.5009 44.1288 34.6448C43.7758 36.7847 42.8665 38.5223 41.338 40.1198C40.4071 41.1217 39.277 41.9935 37.9852 42.6266C37.2988 42.9875 36.5671 43.2991 35.7959 43.5516C30.033 45.4331 24.1339 43.3642 22.2326 38.9207C22.0807 38.5874 21.9525 38.2363 21.852 37.8714C21.0414 34.9426 21.7297 31.43 23.8795 29.2171C23.8795 29.2171 23.8795 29.2171 23.8795 29.2151C24.0116 29.0751 24.1477 28.9094 24.1477 28.7004C24.1477 28.5248 24.0372 28.3414 23.9406 28.2112C23.1892 27.1206 20.5818 25.2607 21.1045 21.6613C21.4792 19.0757 23.7414 17.2553 25.8498 17.3637C26.0273 17.3736 26.2067 17.3834 26.3842 17.3953C27.2974 17.4485 28.0942 17.5669 28.8476 17.5984C30.1059 17.6537 31.238 17.4702 32.5792 16.3519C33.0308 15.9752 33.3937 15.6478 34.0071 15.5453C34.0722 15.5335 34.2319 15.4763 34.5534 15.492C34.8808 15.5098 35.1924 15.5985 35.4725 15.7859C36.5474 16.5018 36.6992 18.2335 36.7545 19.4997C36.786 20.2235 36.8728 21.9729 36.9044 22.4759C36.9734 23.6237 37.2751 23.7874 37.8846 23.9886C38.2278 24.101 38.5473 24.1858 39.0167 24.318C40.4387 24.7183 41.2828 25.1227 41.8153 25.6433C42.1329 25.9688 42.2808 26.3139 42.3261 26.6433C42.4938 27.8661 41.3755 29.3788 38.4171 30.7515C35.1826 32.2524 31.2577 32.6331 28.5459 32.3313C28.3388 32.3076 27.5992 32.2248 27.5952 32.2248C25.4257 31.9329 24.1891 34.7355 25.4908 36.6565C26.329 37.8951 28.6149 38.6998 30.9008 38.6998C36.1431 38.6998 40.1724 36.4613 41.6713 34.5284C41.7167 34.4712 41.7206 34.4633 41.7916 34.3568C41.8646 34.2464 41.8055 34.1852 41.7128 34.2464C40.488 35.0846 35.0484 38.4099 29.2322 37.4099C29.2322 37.4099 28.5261 37.2936 27.8792 37.0431C27.3664 36.8439 26.2935 36.3508 26.1634 35.2483C30.8514 36.6979 33.8079 35.3252 33.8079 35.3252ZM26.3704 34.4476C26.3704 34.4476 26.3724 34.4476 26.3704 34.4476C26.3724 34.4495 26.3724 34.4495 26.3724 34.4515C26.3724 34.4495 26.3724 34.4476 26.3704 34.4476ZM17.3887 14.2554C19.1914 12.1707 21.4121 10.3602 23.4002 9.34249C23.4692 9.30699 23.5422 9.38193 23.5047 9.44899C23.3469 9.73497 23.0432 10.3464 22.9466 10.8118C22.9308 10.8848 23.0097 10.9381 23.0708 10.8966C24.3074 10.0525 26.4612 9.14921 28.3486 9.03284C28.4295 9.02693 28.4689 9.13146 28.4039 9.18076C28.1159 9.40166 27.8023 9.70539 27.5735 10.0131C27.5341 10.0663 27.5716 10.1413 27.6366 10.1413C28.962 10.1511 30.8317 10.6146 32.0486 11.297C32.1315 11.3424 32.0723 11.5021 31.9796 11.4824C30.1375 11.0603 27.1199 10.7389 23.986 11.5041C21.1893 12.1865 19.0533 13.2397 17.4952 14.3738C17.4203 14.4329 17.3256 14.3304 17.3887 14.2554Z" fill="black"/>
					</svg>
					<div class="mc-woocommerce-settings-subtitles">
						<?php $allowed_html = array( 'br' => array() ); ?>
						<?php if ( 'api_key' === $active_tab ) : ?>
							<span class="mc-woocommerce-header-steps">1 of 3 - Connect</span>
							<span class="mc-woocommerce-header-title"> <?php echo wp_kses( __( 'Add Mailchimp for WooCommerce', 'mailchimp-for-woocommerce' ), $allowed_html ); ?> </span>
							<span class="mc-woocommerce-header-subtitle"> <?php echo wp_kses( __( 'Build custom segments, send automations, and track purchase <br/>activity in Mailchimp. Login to authorize an account connection.', 'mailchimp-for-woocommerce' ), $allowed_html ); ?> </span>
						<?php endif; ?>
						<?php if ( 'store_info' === $active_tab && $has_valid_api_key ) : ?>
							<span class="mc-woocommerce-header-steps">2 of 3 - Store</span>    
							<span class="mc-woocommerce-header-title"> <?php echo wp_kses( __( 'Add WooCommerce store settings', 'mailchimp-for-woocommerce' ), $allowed_html ); ?> </span>
							<span class="mc-woocommerce-header-subtitle"> <?php echo wp_kses( __( 'Please provide a bit of information about your WooCommerce <br/> store and location.', 'mailchimp-for-woocommerce' ), $allowed_html ); ?> </span>
						<?php endif; ?>
						<?php if ( 'newsletter_settings' === $active_tab ) : ?>
							<span class="mc-woocommerce-header-steps">3 of 3 - Audience</span>    
							<span class="mc-woocommerce-header-title"> <?php echo wp_kses( __( 'Add WooCommerce audience settings', 'mailchimp-for-woocommerce' ), $allowed_html ); ?> </span>
							<span class="mc-woocommerce-header-subtitle">
								<?php echo wp_kses( __( 'Please provide a bit of information about your WooCommerce <br/> campaign and messaging settings.', 'mailchimp-for-woocommerce' ), $allowed_html ); ?>
								<?php
								if ( ! $only_one_list ) {
									echo wp_kses( __( 'If you don’t have an audience, <br/> you can choose to create one', 'mailchimp-for-woocommerce' ), $allowed_html );}
								?>
							</span>
						<?php endif; ?>    
					</div>
					<?php if ( 'api_key' === $active_tab ) : ?>
							<div class="box">
								<input type="hidden" name="mailchimp_woocommerce_wizard_on" value=1>
								<input type="hidden" name="mailchimp_woocommerce_settings_hidden" value="Y">
								<?php
								if ( ! $clicked_sync_button ) {
									settings_fields( $this->plugin_name );
									do_settings_sections( $this->plugin_name );
									include 'tabs/notices.php';
								}
								?>
							</div>
							<div class="connect-buttons">
								<?php include_once 'tabs/api-key.php'; ?>
							</div>
					<?php endif; ?>
					<div class="mc-woocommerce-wizard-btn">
						<?php if ( 'store_info' === $active_tab && $has_valid_api_key ) : ?>
								<?php submit_button( esc_html( __( 'Next step', 'mailchimp-for-woocommerce' ) ), 'primary tab-content-submit', 'mailchimp_submit' ); ?>
								<a href="?page=mailchimp-woocommerce&tab=api_key" class="button button-default back-step"><?php echo esc_html( __( 'Back', 'mailchimp-for-woocommerce' ) ); ?></a>
						<?php endif; ?>

						<?php if ( 'newsletter_settings' === $active_tab && $has_valid_api_key ) : ?>
								<?php submit_button( esc_html( __( 'Start sync', 'mailchimp-for-woocommerce' ) ), 'primary tab-content-submit', 'mailchimp_submit' ); ?>
								<a href="?page=mailchimp-woocommerce&tab=store_info" class="button button-default back-step"><?php echo esc_html( __( 'Back', 'mailchimp-for-woocommerce' ) ); ?></a>
						<?php endif; ?>
					</div>
				</div>
			</div>
		<?php else : ?>
			<div class="mc-woocommerce-settings-header-wrapper">
				<div class="mc-woocommerce-settings-header">
					<svg class="mailchimp-logo" width="46" height="49" viewBox="0 0 46 49" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M34.5458 23.5193C34.8988 23.4778 35.2361 23.4759 35.5457 23.5193C35.7252 23.107 35.7568 22.397 35.5951 21.6239C35.3544 20.4741 35.029 19.7778 34.3584 19.8863C33.6859 19.9948 33.6622 20.8271 33.9028 21.9769C34.037 22.6238 34.2776 23.1761 34.5458 23.5193Z" fill="black"/>
						<path d="M28.7763 24.4284C29.2575 24.6394 29.5534 24.7795 29.6678 24.6572C29.7427 24.5803 29.719 24.4363 29.6046 24.2489C29.368 23.8624 28.8788 23.4679 28.3621 23.249C27.303 22.7934 26.0407 22.9453 25.0664 23.6454C24.745 23.8801 24.4393 24.2075 24.4826 24.4047C24.4965 24.4698 24.5458 24.5172 24.6582 24.5329C24.9225 24.5625 25.8494 24.0951 26.9164 24.03C27.6718 23.9827 28.295 24.2174 28.7763 24.4284Z" fill="black"/>
						<path d="M27.8105 24.9806C27.1852 25.0793 26.8381 25.2863 26.6172 25.4777C26.4279 25.6433 26.3115 25.8267 26.3115 25.9549C26.3115 26.0161 26.3391 26.0516 26.3589 26.0693C26.3865 26.095 26.422 26.1088 26.4614 26.1088C26.6034 26.1088 26.919 25.9826 26.919 25.9826C27.7907 25.6709 28.3647 25.7084 28.9346 25.7735C29.2502 25.809 29.3981 25.8287 29.4672 25.7202C29.4869 25.6887 29.5125 25.6216 29.4494 25.521C29.3054 25.2804 28.6723 24.8781 27.8105 24.9806Z" fill="black"/>
						<path d="M32.5975 27.0061C33.0235 27.2152 33.4909 27.1324 33.6428 26.8227C33.7946 26.5131 33.5737 26.093 33.1497 25.8839C32.7237 25.6749 32.2563 25.7577 32.1044 26.0673C31.9506 26.377 32.1734 26.7971 32.5975 27.0061Z" fill="black"/>
						<path d="M35.3306 24.6177C34.9854 24.6118 34.6995 24.9905 34.6916 25.4638C34.6837 25.9372 34.9578 26.3257 35.303 26.3317C35.6481 26.3376 35.9341 25.9589 35.942 25.4855C35.9499 25.0122 35.6757 24.6237 35.3306 24.6177Z" fill="black"/>
						<path d="M12.1324 33.1577C12.0456 33.0492 11.9056 33.0827 11.7695 33.1143C11.6749 33.136 11.5664 33.1616 11.448 33.1596C11.1936 33.1557 10.9786 33.0452 10.8583 32.8598C10.7006 32.6192 10.7104 32.2583 10.884 31.8461C10.9076 31.7909 10.9353 31.7297 10.9648 31.6607C11.241 31.0394 11.7064 30 11.1857 29.008C10.7932 28.2625 10.1542 27.797 9.38702 27.7004C8.64939 27.6077 7.89006 27.8798 7.40685 28.4143C6.64358 29.2565 6.52328 30.4044 6.6712 30.8087C6.72445 30.9566 6.80925 30.998 6.87237 31.0059C7.00254 31.0237 7.19385 30.929 7.31416 30.6055C7.32205 30.5819 7.33388 30.5464 7.34769 30.501C7.40094 30.3294 7.50152 30.0099 7.66522 29.7555C7.86245 29.4478 8.17012 29.2348 8.53105 29.1579C8.89789 29.079 9.2746 29.15 9.58819 29.3551C10.1227 29.7062 10.3298 30.361 10.101 30.9862C9.98264 31.3096 9.79133 31.9289 9.83275 32.4378C9.91756 33.4673 10.5507 33.8795 11.1206 33.9249C11.6729 33.9466 12.0594 33.6349 12.1581 33.4081C12.2133 33.274 12.164 33.1932 12.1324 33.1577Z" fill="black"/>
						<path d="M44.044 31.2761C44.0223 31.2012 43.8862 30.7002 43.6969 30.0967C43.5075 29.4932 43.3142 29.0672 43.3142 29.0672C44.0696 27.9351 44.0834 26.9233 43.9828 26.3514C43.8763 25.6414 43.5805 25.0359 42.9829 24.4107C42.3873 23.7854 41.1684 23.1445 39.4545 22.6632C39.2593 22.608 38.6123 22.4305 38.5551 22.4127C38.5512 22.3753 38.5078 20.2945 38.4684 19.3991C38.4408 18.7522 38.3836 17.7444 38.0719 16.7504C37.6992 15.4053 37.0483 14.2298 36.2377 13.4764C38.4763 11.157 39.8726 8.60091 39.8707 6.40774C39.8647 2.19102 34.6855 0.914962 28.3033 3.55781C28.2974 3.55978 26.9602 4.1278 26.9503 4.13174C26.9444 4.12582 24.5066 1.73346 24.4692 1.7019C17.1954 -4.64488 -5.55475 20.6436 1.71899 26.7853L3.30864 28.1323C2.89644 29.2013 2.73471 30.4241 2.86685 31.7396C3.03647 33.4299 3.90822 35.0511 5.32234 36.3015C6.66348 37.4908 8.42669 38.2422 10.1386 38.2402C12.9688 44.7626 19.4359 48.7643 27.0193 48.9891C35.153 49.2317 41.981 45.4134 44.8428 38.5578C45.0301 38.0765 45.825 35.909 45.825 33.9939C45.825 32.0729 44.7382 31.2761 44.044 31.2761ZM10.7638 36.41C10.5173 36.4514 10.2649 36.4691 10.0104 36.4632C7.55298 36.3981 4.90027 34.1852 4.63598 31.5621C4.34409 28.6629 5.82527 26.4322 8.44839 25.9017C8.76198 25.8386 9.14066 25.8011 9.54892 25.8228C11.0183 25.9037 13.1838 27.0318 13.6789 30.2328C14.1187 33.0689 13.4225 35.9564 10.7638 36.41ZM8.02041 24.1681C6.38736 24.4856 4.9476 25.4106 4.06797 26.6886C3.54137 26.2508 2.56115 25.4007 2.38956 25.0694C0.985306 22.4009 3.92202 17.2138 5.97516 14.285C11.0478 7.04676 18.9922 1.56581 22.6705 2.55984C23.2681 2.72945 25.2482 5.02518 25.2482 5.02518C25.2482 5.02518 21.5719 7.06451 18.1618 9.90853C13.5704 13.4468 10.0992 18.5885 8.02041 24.1681ZM33.8079 35.3252C33.8611 35.3035 33.8986 35.2424 33.8927 35.1812C33.8848 35.1063 33.8177 35.0531 33.7448 35.0609C33.7448 35.0609 29.8969 35.6309 26.26 34.2996C26.6564 33.0117 27.7096 33.4772 29.3012 33.6054C32.1709 33.777 34.7408 33.3569 36.642 32.8125C38.2889 32.3392 40.4505 31.4083 42.1309 30.0829C42.6969 31.3274 42.8981 32.6962 42.8981 32.6962C42.8981 32.6962 43.3359 32.6173 43.7028 32.8441C44.0499 33.0571 44.3024 33.5009 44.1288 34.6448C43.7758 36.7847 42.8665 38.5223 41.338 40.1198C40.4071 41.1217 39.277 41.9935 37.9852 42.6266C37.2988 42.9875 36.5671 43.2991 35.7959 43.5516C30.033 45.4331 24.1339 43.3642 22.2326 38.9207C22.0807 38.5874 21.9525 38.2363 21.852 37.8714C21.0414 34.9426 21.7297 31.43 23.8795 29.2171C23.8795 29.2171 23.8795 29.2171 23.8795 29.2151C24.0116 29.0751 24.1477 28.9094 24.1477 28.7004C24.1477 28.5248 24.0372 28.3414 23.9406 28.2112C23.1892 27.1206 20.5818 25.2607 21.1045 21.6613C21.4792 19.0757 23.7414 17.2553 25.8498 17.3637C26.0273 17.3736 26.2067 17.3834 26.3842 17.3953C27.2974 17.4485 28.0942 17.5669 28.8476 17.5984C30.1059 17.6537 31.238 17.4702 32.5792 16.3519C33.0308 15.9752 33.3937 15.6478 34.0071 15.5453C34.0722 15.5335 34.2319 15.4763 34.5534 15.492C34.8808 15.5098 35.1924 15.5985 35.4725 15.7859C36.5474 16.5018 36.6992 18.2335 36.7545 19.4997C36.786 20.2235 36.8728 21.9729 36.9044 22.4759C36.9734 23.6237 37.2751 23.7874 37.8846 23.9886C38.2278 24.101 38.5473 24.1858 39.0167 24.318C40.4387 24.7183 41.2828 25.1227 41.8153 25.6433C42.1329 25.9688 42.2808 26.3139 42.3261 26.6433C42.4938 27.8661 41.3755 29.3788 38.4171 30.7515C35.1826 32.2524 31.2577 32.6331 28.5459 32.3313C28.3388 32.3076 27.5992 32.2248 27.5952 32.2248C25.4257 31.9329 24.1891 34.7355 25.4908 36.6565C26.329 37.8951 28.6149 38.6998 30.9008 38.6998C36.1431 38.6998 40.1724 36.4613 41.6713 34.5284C41.7167 34.4712 41.7206 34.4633 41.7916 34.3568C41.8646 34.2464 41.8055 34.1852 41.7128 34.2464C40.488 35.0846 35.0484 38.4099 29.2322 37.4099C29.2322 37.4099 28.5261 37.2936 27.8792 37.0431C27.3664 36.8439 26.2935 36.3508 26.1634 35.2483C30.8514 36.6979 33.8079 35.3252 33.8079 35.3252ZM26.3704 34.4476C26.3704 34.4476 26.3724 34.4476 26.3704 34.4476C26.3724 34.4495 26.3724 34.4495 26.3724 34.4515C26.3724 34.4495 26.3724 34.4476 26.3704 34.4476ZM17.3887 14.2554C19.1914 12.1707 21.4121 10.3602 23.4002 9.34249C23.4692 9.30699 23.5422 9.38193 23.5047 9.44899C23.3469 9.73497 23.0432 10.3464 22.9466 10.8118C22.9308 10.8848 23.0097 10.9381 23.0708 10.8966C24.3074 10.0525 26.4612 9.14921 28.3486 9.03284C28.4295 9.02693 28.4689 9.13146 28.4039 9.18076C28.1159 9.40166 27.8023 9.70539 27.5735 10.0131C27.5341 10.0663 27.5716 10.1413 27.6366 10.1413C28.962 10.1511 30.8317 10.6146 32.0486 11.297C32.1315 11.3424 32.0723 11.5021 31.9796 11.4824C30.1375 11.0603 27.1199 10.7389 23.986 11.5041C21.1893 12.1865 19.0533 13.2397 17.4952 14.3738C17.4203 14.4329 17.3256 14.3304 17.3887 14.2554Z" fill="black"/>
					</svg>
					<div class="mc-woocommerce-settings-subtitles-row">
						<p class="mc-woocommerce-settings-subtitles">
							<?php

							$allowed_html = array(
								'br' => array(),
							);

							if ( 'api_key' === $active_tab ) {
								echo wp_kses( __( 'Add Mailchimp for WooCommerce to build custom segments, send automations, and track purchase activity in Mailchimp', 'mailchimp-for-woocommerce' ), $allowed_html );
							}

							if ( 'store_info' === $active_tab && $has_valid_api_key ) {
								if ( $show_sync_tab ) {
									echo wp_kses( __( 'WooCommerce store and location', 'mailchimp-for-woocommerce' ), $allowed_html );
								} else {
									echo wp_kses( __( 'Please provide a bit of information about your WooCommerce store', 'mailchimp-for-woocommerce' ), $allowed_html );
								}
							}

							if ( 'newsletter_settings' === $active_tab ) {
								if ( $show_sync_tab ) {
									echo wp_kses( __( 'Campaign and messaging settings', 'mailchimp-for-woocommerce' ), $allowed_html );
								} else {
									if ( $only_one_list ) {
										echo wp_kses( __( 'Please apply your audience settings.', 'mailchimp-for-woocommerce' ), $allowed_html );
									} else {
										echo wp_kses( __( 'Please apply your audience settings. ', 'mailchimp-for-woocommerce' ), $allowed_html );
										echo wp_kses( __( 'If you don’t have an audience, you can choose to create one', 'mailchimp-for-woocommerce' ), $allowed_html );
									}
								}
							}

							if ( 'sync' === $active_tab && $show_sync_tab ) {
								if ( mailchimp_is_done_syncing() ) {
									echo wp_kses( __( 'Success! You are connected to Mailchimp', 'mailchimp-for-woocommerce' ), $allowed_html );
								} else {
									echo wp_kses( __( 'Your WooCommerce store is syncing to Mailchimp', 'mailchimp-for-woocommerce' ), $allowed_html );
								}
							}

							if ( 'logs' === $active_tab && $show_sync_tab ) {
								echo wp_kses( __( 'Log events from the Mailchimp plugin', 'mailchimp-for-woocommerce' ), $allowed_html );
							}

							if ( 'plugin_settings' === $active_tab && $show_sync_tab ) {
								echo wp_kses( __( 'Connection settings', 'mailchimp-for-woocommerce' ), $allowed_html );
							}
							?>
						</p>
						<?php if ( 'sync' === $active_tab && $show_sync_tab ): ?>
							<a href="http://admin.mailchimp.com/integrations/manage?name=woocommerce&source=partner" target="_blank" class="button button-primary tab-content-submit mc-woocommerce-settings-subtitles-cta">Continue to Mailchimp</a>
						<?php endif; ?>
					</div>
					<div class="nav-tab-wrapper">
						<?php if ( $has_valid_api_key ) : ?>
							<?php if ( 'api_key' === $active_tab ) : ?>
								<a href="?page=mailchimp-woocommerce&tab=api_key" class="nav-tab <?php echo 'api_key' === $active_tab ? 'nav-tab-active' : ''; ?>"><?php esc_html_e( 'Connect', 'mailchimp-for-woocommerce' ); ?></a>
							<?php endif; ?>
							<a href="?page=mailchimp-woocommerce&tab=sync" class="nav-tab <?php echo 'sync' === $active_tab ? 'nav-tab-active' : ''; ?>"><?php esc_html_e( 'Overview', 'mailchimp-for-woocommerce' ); ?></a>
							<a href="?page=mailchimp-woocommerce&tab=store_info" class="nav-tab <?php echo 'store_info' === $active_tab ? 'nav-tab-active' : ''; ?>"><?php esc_html_e( 'Store', 'mailchimp-for-woocommerce' ); ?></a>
							<?php if ( $handler->hasValidStoreInfo() ) : ?>
									<a href="?page=mailchimp-woocommerce&tab=newsletter_settings" class="nav-tab <?php echo 'newsletter_settings' === $active_tab ? 'nav-tab-active' : ''; ?>"><?php esc_html_e( 'Audience', 'mailchimp-for-woocommerce' ); ?></a>
							<?php endif; ?>
							<a href="?page=mailchimp-woocommerce&tab=logs" class="nav-tab <?php echo 'logs' === $active_tab ? 'nav-tab-active' : ''; ?>"><?php esc_html_e( 'Logs', 'mailchimp-for-woocommerce' ); ?></a>
							<a href="?page=mailchimp-woocommerce&tab=plugin_settings" class="nav-tab <?php echo 'plugin_settings' === $active_tab ? 'nav-tab-active' : ''; ?>"><?php esc_html_e( 'Settings', 'mailchimp-for-woocommerce' ); ?></a>
						<?php endif; ?>
					</div>
				</div>
			</div>
		<?php endif; ?>
		<div class="notices-content-wrapper <?php echo 'sync' === $active_tab ? 'sync-notices' : ''; ?>">
		<?php
			$settings_errors = get_settings_errors();
		if ( ! $show_wizard || ( isset( $settings_errors[0] ) && 'success' !== $settings_errors[0]['type'] ) ) {
			echo wp_kses_post( mailchimp_settings_errors() );
		}
		?>
		</div>
		<?php if ( 'sync' !== $active_tab ) : ?>
		<div class="tab-content-wrapper">
		<?php endif; ?>
				<?php if ( ! defined( 'PHP_VERSION_ID' ) || ( PHP_VERSION_ID < 70000 ) ) : ?>
					<div data-dismissible="notice-php-version" class="error notice notice-error">
						<p><?php esc_html_e( 'Mailchimp says: Please upgrade your PHP version to a minimum of 7.0', 'mailchimp-for-woocommerce' ); ?></p>
					</div>
				<?php endif; ?>
				<?php if ( ! empty( $has_api_error ) ) : ?>
					<div data-dismissible="notice-api-error" class="error notice notice-error is-dismissible">
						<p>
							<?php esc_html_e( 'Mailchimp says: API Request Error', 'mailchimp-for-woocommerce' ); ?>
							<?php echo ' ' . esc_html( $has_api_error ); ?>
						</p>
					</div>
				<?php endif; ?>
				<div class="box">
					<?php if ( $show_wizard ) : ?>
						<input type="hidden" name="mailchimp_woocommerce_wizard_on" value=1>
					<?php endif; ?>
					<input type="hidden" name="mailchimp_woocommerce_settings_hidden" value="Y">
					<?php
					if ( ! $clicked_sync_button ) {
						settings_fields( $this->plugin_name );
						do_settings_sections( $this->plugin_name );
						include 'tabs/notices.php';
					}
					?>
				</div>
				<input type="hidden" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_active_tab]" value="<?php echo esc_attr( $active_tab ); ?>"/>
				<?php if ( 'store_info' === $active_tab && $has_valid_api_key ) : ?>
					<?php include_once 'tabs/store-info.php'; ?>
				<?php endif; ?>
				<?php if ( 'newsletter_settings' === $active_tab ) : ?>
					<?php include_once 'tabs/newsletter-settings.php'; ?>
				<?php endif; ?>
				<?php if ( 'sync' === $active_tab && $show_sync_tab ) : ?>
					<?php include_once 'tabs/store-sync.php'; ?>
				<?php endif; ?>
				<?php if ( 'logs' === $active_tab && $show_sync_tab ) : ?>
					<?php include_once 'tabs/logs.php'; ?>
				<?php endif; ?>
				<?php if ( 'plugin_settings' === $active_tab && $show_sync_tab ) : ?>
					<?php include_once 'tabs/plugin-settings.php'; ?>
				<?php endif; ?>
				<?php if ( mailchimp_is_configured() ) : ?>
					<div class="box"> 
						<?php
						if ( ! in_array( $active_tab, array( 'api_key', 'sync', 'logs', 'plugin_settings' ), true ) ) {
							submit_button( __( 'Save all changes' ), 'primary tab-content-submit', 'mailchimp_submit' );
						}
						?>
					</div>
				<?php endif; ?>
		<?php if ( 'sync' !== $active_tab ) : ?>
		</div>
		<?php endif; ?>
	</form>
</div><!-- /.wrap -->
api-key.php                                                                                                                                                                                                                                                    17958         1711191352  plugins/mailchimp-for-woocommerce/admin/partials/tabs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <?php
/**
 * Api key page
 *
 * @package    MailChimp_WooCommerce
 * @subpackage MailChimp_WooCommerce/admin
 */

?>
<fieldset class="full connect-button">
	<input type="hidden" name="mailchimp_active_settings_tab" value="api_key"/>
	<legend class="screen-reader-text">
		<span><?php esc_html_e( 'Connect your store to Mailchimp', 'mailchimp-for-woocommerce' ); ?></span>
	</legend>
	<a id="mailchimp-oauth-connect" class="button button-primary tab-content-submit oauth-connect"><?php isset( $has_valid_api_key ) && $has_valid_api_key ? esc_html_e( 'Reconnect account', 'mailchimp-for-woocommerce' ) : esc_html_e( 'Connect account', 'mailchimp-for-woocommerce' ); ?></a>
	<a class="button create-account" href='#mc-woocommerce-create-account'>Create account</a>
	<input type="hidden" id="<?php echo esc_attr( $this->plugin_name ); ?>-mailchimp-api-key" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_api_key]" value="<?php echo isset( $options['mailchimp_api_key'] ) ? esc_html( $options['mailchimp_api_key'] ) : ''; ?>" required/>
	<?php if ( isset( $has_valid_api_key ) && $has_valid_api_key ) : ?>
		<p id="mailchimp-oauth-api-key-valid"><?php esc_html_e( 'Already connected. You can reconnect with another Mailchimp account if you want.', 'mailchimp-for-woocommerce' ); ?></p>
	<?php endif; ?>
	<p id="mailchimp-oauth-waiting" class="oauth-description"><?php esc_html_e( 'Connecting. A new window will open with Mailchimp\'s OAuth service. Please log-in and we will take care of the rest.', 'mailchimp-for-woocommerce' ); ?></p>
	<p id="mailchimp-oauth-error" class="oauth-description"><?php esc_html_e( 'Error, can\'t login.', 'mailchimp-for-woocommerce' ); ?></p>
	<p id="mailchimp-oauth-connecting" class="oauth-description"><?php esc_html_e( 'Connection in progress', 'mailchimp-for-woocommerce' ); ?><span class="spinner" style="visibility:visible; margin: 0 10px;"></span></p>
	<p id="mailchimp-oauth-connected" class="oauth-description "><?php esc_html_e( 'Connected! Please wait while loading next step', 'mailchimp-for-woocommerce' ); ?></p>
</fieldset>
<div class="tab-content-wrapper">
	<div id="mc-woocommerce-create-account" class="mc-woocommerce-modal">
		<div id="exampleModal" class="reveal-modal">
			<a href="#" class="close-modal"><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z" fill="black"/>
				</svg>
			</a>    
			<div class="modal-header">
				<svg width="100px" height="100px" viewBox="0 0 46 49" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M34.5458 23.5193C34.8988 23.4778 35.2361 23.4759 35.5457 23.5193C35.7252 23.107 35.7568 22.397 35.5951 21.6239C35.3544 20.4741 35.029 19.7778 34.3584 19.8863C33.6859 19.9948 33.6622 20.8271 33.9028 21.9769C34.037 22.6238 34.2776 23.1761 34.5458 23.5193Z" fill="black"/>
					<path d="M28.7763 24.4284C29.2575 24.6394 29.5534 24.7795 29.6678 24.6572C29.7427 24.5803 29.719 24.4363 29.6046 24.2489C29.368 23.8624 28.8788 23.4679 28.3621 23.249C27.303 22.7934 26.0407 22.9453 25.0664 23.6454C24.745 23.8801 24.4393 24.2075 24.4826 24.4047C24.4965 24.4698 24.5458 24.5172 24.6582 24.5329C24.9225 24.5625 25.8494 24.0951 26.9164 24.03C27.6718 23.9827 28.295 24.2174 28.7763 24.4284Z" fill="black"/>
					<path d="M27.8105 24.9806C27.1852 25.0793 26.8381 25.2863 26.6172 25.4777C26.4279 25.6433 26.3115 25.8267 26.3115 25.9549C26.3115 26.0161 26.3391 26.0516 26.3589 26.0693C26.3865 26.095 26.422 26.1088 26.4614 26.1088C26.6034 26.1088 26.919 25.9826 26.919 25.9826C27.7907 25.6709 28.3647 25.7084 28.9346 25.7735C29.2502 25.809 29.3981 25.8287 29.4672 25.7202C29.4869 25.6887 29.5125 25.6216 29.4494 25.521C29.3054 25.2804 28.6723 24.8781 27.8105 24.9806Z" fill="black"/>
					<path d="M32.5975 27.0061C33.0235 27.2152 33.4909 27.1324 33.6428 26.8227C33.7946 26.5131 33.5737 26.093 33.1497 25.8839C32.7237 25.6749 32.2563 25.7577 32.1044 26.0673C31.9506 26.377 32.1734 26.7971 32.5975 27.0061Z" fill="black"/>
					<path d="M35.3306 24.6177C34.9854 24.6118 34.6995 24.9905 34.6916 25.4638C34.6837 25.9372 34.9578 26.3257 35.303 26.3317C35.6481 26.3376 35.9341 25.9589 35.942 25.4855C35.9499 25.0122 35.6757 24.6237 35.3306 24.6177Z" fill="black"/>
					<path d="M12.1324 33.1577C12.0456 33.0492 11.9056 33.0827 11.7695 33.1143C11.6749 33.136 11.5664 33.1616 11.448 33.1596C11.1936 33.1557 10.9786 33.0452 10.8583 32.8598C10.7006 32.6192 10.7104 32.2583 10.884 31.8461C10.9076 31.7909 10.9353 31.7297 10.9648 31.6607C11.241 31.0394 11.7064 30 11.1857 29.008C10.7932 28.2625 10.1542 27.797 9.38702 27.7004C8.64939 27.6077 7.89006 27.8798 7.40685 28.4143C6.64358 29.2565 6.52328 30.4044 6.6712 30.8087C6.72445 30.9566 6.80925 30.998 6.87237 31.0059C7.00254 31.0237 7.19385 30.929 7.31416 30.6055C7.32205 30.5819 7.33388 30.5464 7.34769 30.501C7.40094 30.3294 7.50152 30.0099 7.66522 29.7555C7.86245 29.4478 8.17012 29.2348 8.53105 29.1579C8.89789 29.079 9.2746 29.15 9.58819 29.3551C10.1227 29.7062 10.3298 30.361 10.101 30.9862C9.98264 31.3096 9.79133 31.9289 9.83275 32.4378C9.91756 33.4673 10.5507 33.8795 11.1206 33.9249C11.6729 33.9466 12.0594 33.6349 12.1581 33.4081C12.2133 33.274 12.164 33.1932 12.1324 33.1577Z" fill="black"/>
					<path d="M44.044 31.2761C44.0223 31.2012 43.8862 30.7002 43.6969 30.0967C43.5075 29.4932 43.3142 29.0672 43.3142 29.0672C44.0696 27.9351 44.0834 26.9233 43.9828 26.3514C43.8763 25.6414 43.5805 25.0359 42.9829 24.4107C42.3873 23.7854 41.1684 23.1445 39.4545 22.6632C39.2593 22.608 38.6123 22.4305 38.5551 22.4127C38.5512 22.3753 38.5078 20.2945 38.4684 19.3991C38.4408 18.7522 38.3836 17.7444 38.0719 16.7504C37.6992 15.4053 37.0483 14.2298 36.2377 13.4764C38.4763 11.157 39.8726 8.60091 39.8707 6.40774C39.8647 2.19102 34.6855 0.914962 28.3033 3.55781C28.2974 3.55978 26.9602 4.1278 26.9503 4.13174C26.9444 4.12582 24.5066 1.73346 24.4692 1.7019C17.1954 -4.64488 -5.55475 20.6436 1.71899 26.7853L3.30864 28.1323C2.89644 29.2013 2.73471 30.4241 2.86685 31.7396C3.03647 33.4299 3.90822 35.0511 5.32234 36.3015C6.66348 37.4908 8.42669 38.2422 10.1386 38.2402C12.9688 44.7626 19.4359 48.7643 27.0193 48.9891C35.153 49.2317 41.981 45.4134 44.8428 38.5578C45.0301 38.0765 45.825 35.909 45.825 33.9939C45.825 32.0729 44.7382 31.2761 44.044 31.2761ZM10.7638 36.41C10.5173 36.4514 10.2649 36.4691 10.0104 36.4632C7.55298 36.3981 4.90027 34.1852 4.63598 31.5621C4.34409 28.6629 5.82527 26.4322 8.44839 25.9017C8.76198 25.8386 9.14066 25.8011 9.54892 25.8228C11.0183 25.9037 13.1838 27.0318 13.6789 30.2328C14.1187 33.0689 13.4225 35.9564 10.7638 36.41ZM8.02041 24.1681C6.38736 24.4856 4.9476 25.4106 4.06797 26.6886C3.54137 26.2508 2.56115 25.4007 2.38956 25.0694C0.985306 22.4009 3.92202 17.2138 5.97516 14.285C11.0478 7.04676 18.9922 1.56581 22.6705 2.55984C23.2681 2.72945 25.2482 5.02518 25.2482 5.02518C25.2482 5.02518 21.5719 7.06451 18.1618 9.90853C13.5704 13.4468 10.0992 18.5885 8.02041 24.1681ZM33.8079 35.3252C33.8611 35.3035 33.8986 35.2424 33.8927 35.1812C33.8848 35.1063 33.8177 35.0531 33.7448 35.0609C33.7448 35.0609 29.8969 35.6309 26.26 34.2996C26.6564 33.0117 27.7096 33.4772 29.3012 33.6054C32.1709 33.777 34.7408 33.3569 36.642 32.8125C38.2889 32.3392 40.4505 31.4083 42.1309 30.0829C42.6969 31.3274 42.8981 32.6962 42.8981 32.6962C42.8981 32.6962 43.3359 32.6173 43.7028 32.8441C44.0499 33.0571 44.3024 33.5009 44.1288 34.6448C43.7758 36.7847 42.8665 38.5223 41.338 40.1198C40.4071 41.1217 39.277 41.9935 37.9852 42.6266C37.2988 42.9875 36.5671 43.2991 35.7959 43.5516C30.033 45.4331 24.1339 43.3642 22.2326 38.9207C22.0807 38.5874 21.9525 38.2363 21.852 37.8714C21.0414 34.9426 21.7297 31.43 23.8795 29.2171C23.8795 29.2171 23.8795 29.2171 23.8795 29.2151C24.0116 29.0751 24.1477 28.9094 24.1477 28.7004C24.1477 28.5248 24.0372 28.3414 23.9406 28.2112C23.1892 27.1206 20.5818 25.2607 21.1045 21.6613C21.4792 19.0757 23.7414 17.2553 25.8498 17.3637C26.0273 17.3736 26.2067 17.3834 26.3842 17.3953C27.2974 17.4485 28.0942 17.5669 28.8476 17.5984C30.1059 17.6537 31.238 17.4702 32.5792 16.3519C33.0308 15.9752 33.3937 15.6478 34.0071 15.5453C34.0722 15.5335 34.2319 15.4763 34.5534 15.492C34.8808 15.5098 35.1924 15.5985 35.4725 15.7859C36.5474 16.5018 36.6992 18.2335 36.7545 19.4997C36.786 20.2235 36.8728 21.9729 36.9044 22.4759C36.9734 23.6237 37.2751 23.7874 37.8846 23.9886C38.2278 24.101 38.5473 24.1858 39.0167 24.318C40.4387 24.7183 41.2828 25.1227 41.8153 25.6433C42.1329 25.9688 42.2808 26.3139 42.3261 26.6433C42.4938 27.8661 41.3755 29.3788 38.4171 30.7515C35.1826 32.2524 31.2577 32.6331 28.5459 32.3313C28.3388 32.3076 27.5992 32.2248 27.5952 32.2248C25.4257 31.9329 24.1891 34.7355 25.4908 36.6565C26.329 37.8951 28.6149 38.6998 30.9008 38.6998C36.1431 38.6998 40.1724 36.4613 41.6713 34.5284C41.7167 34.4712 41.7206 34.4633 41.7916 34.3568C41.8646 34.2464 41.8055 34.1852 41.7128 34.2464C40.488 35.0846 35.0484 38.4099 29.2322 37.4099C29.2322 37.4099 28.5261 37.2936 27.8792 37.0431C27.3664 36.8439 26.2935 36.3508 26.1634 35.2483C30.8514 36.6979 33.8079 35.3252 33.8079 35.3252ZM26.3704 34.4476C26.3704 34.4476 26.3724 34.4476 26.3704 34.4476C26.3724 34.4495 26.3724 34.4495 26.3724 34.4515C26.3724 34.4495 26.3724 34.4476 26.3704 34.4476ZM17.3887 14.2554C19.1914 12.1707 21.4121 10.3602 23.4002 9.34249C23.4692 9.30699 23.5422 9.38193 23.5047 9.44899C23.3469 9.73497 23.0432 10.3464 22.9466 10.8118C22.9308 10.8848 23.0097 10.9381 23.0708 10.8966C24.3074 10.0525 26.4612 9.14921 28.3486 9.03284C28.4295 9.02693 28.4689 9.13146 28.4039 9.18076C28.1159 9.40166 27.8023 9.70539 27.5735 10.0131C27.5341 10.0663 27.5716 10.1413 27.6366 10.1413C28.962 10.1511 30.8317 10.6146 32.0486 11.297C32.1315 11.3424 32.0723 11.5021 31.9796 11.4824C30.1375 11.0603 27.1199 10.7389 23.986 11.5041C21.1893 12.1865 19.0533 13.2397 17.4952 14.3738C17.4203 14.4329 17.3256 14.3304 17.3887 14.2554Z" fill="black"/>
				</svg>
				<h3>Create your mailchimp account (<span id="step_count">1</span> of 2)</h3>
			</div>
			<div id="mc-woocommerce-create-account-step-1" class="mc-woocommerce-create-account-step">
				<fieldset>
					<?php $user_id = get_current_user_id(); ?>
					<input id="org" name="org" type="hidden" value="<?php echo esc_html( get_bloginfo( 'name' ) ); ?>">
					<div class="box">
						<label for="first_name">
							<span> <?php esc_html_e( 'First name', 'mailchimp-for-woocommerce' ); ?></span>
						</label>
						<input required type="text" id="first_name" name="first_name" value="<?php echo esc_html( get_user_meta( $user_id, 'first_name', true ) ); ?>"/>
					</div>
					<div class="box">
						<label for="last_name">
							<span> <?php esc_html_e( 'Last name', 'mailchimp-for-woocommerce' ); ?></span>
						</label>
						<input required type="text" id="last_name" name="last_name" value="<?php echo esc_html( get_user_meta( $user_id, 'last_name', true ) ); ?>"/>
					</div>
					<div class="box">
						<label for="email">
							<span> <?php esc_html_e( 'Email', 'mailchimp-for-woocommerce' ); ?></span>
						</label>
						<input required type="email" id="email" name="email"/>
					</div>
					<div class="box">
						<label for="username">
							<span> <?php esc_html_e( 'Username', 'mailchimp-for-woocommerce' ); ?></span>
						</label>
						<input required type="text" id="username" name="username"/>
						<p class="description" id ="username_suggestion"><?php echo esc_html__( 'Suggested username: ', 'mailchimp-for-woocommerce' ); ?><span></span></p>
					</div>
					<div class="box">
						<a id="mc-woocommerce-create-account-next" class="button button-primary whitebtn tab-content-submit"><?php esc_html_e( 'Next Step', 'mailchimp-for-woocommerce' ); ?></a>
						<span class="mc-woocommerce-create-account-go-spinner spinner"></span>
					</div>
					<div class="box mc-woocommerce-create-account-step-error alignright" >
						<p id ="email_error"><?php echo esc_html__( 'Invalid Email. Please double check.', 'mailchimp-for-woocommerce' ); ?></p>
						<p id ="username_invalid_error">Username Invalid or already exists</p>
						<p id ="username_exists_error">Username already exists</p>
					</div>
				</fieldset>
			</div>
			<div id="mc-woocommerce-create-account-step-2" class="mc-woocommerce-create-account-step">
				<fieldset>
					<div class="box">
						<label for="address">
							<span> <?php esc_html_e( 'Address Line 1', 'mailchimp-for-woocommerce' ); ?></span>
						</label>
						<input required type="text" id="address" name="address"/>
					</div>
					<div class="box">
						<label for="address2">
							<span> <?php esc_html_e( 'Address Line 2', 'mailchimp-for-woocommerce' ); ?></span>
						</label>
						<input type="text" id="address2" name="address2"/>
					</div>
					<div class="box">
						<label for="city">
							<span> <?php esc_html_e( 'City', 'mailchimp-for-woocommerce' ); ?></span>
						</label>
						<input required type="text" id="city" name="city"/>
					</div>
					<div class="box box-half">
						<label for="state">
							<span> <?php esc_html_e( 'State', 'mailchimp-for-woocommerce' ); ?></span>
						</label>
						<input required type="text" id="state" name="state"/>
					</div>
					<div class="box box-half">
						<label for="zip">
							<span> <?php esc_html_e( 'Zip', 'mailchimp-for-woocommerce' ); ?></span>
						</label>
						<input required type="text" id="zip" name="zip"/>
					</div>
					<div class="box box-half">
						<label for="<?php echo esc_attr( $this->plugin_name ); ?>[store_country]">
							<span> <?php esc_html_e( 'Country', 'mailchimp-for-woocommerce' ); ?></span>
						</label>
						<?php
						global $woocommerce;
							$countries_obj = new WC_Countries();
							$countries     = $countries_obj->__get( 'countries' );
						?>
						<div class="mailchimp-select-wrapper">
							<?php
							woocommerce_form_field(
								$this->plugin_name . '[store_country]',
								array(
									'type'        => 'select',
									'id'          => 'country',
									'placeholder' => __( 'Select a Country' ),
									'options'     => $countries,
									'required'    => true,
								),
								isset( $options['store_country'] ) ? $options['store_country'] : WC()->countries->get_base_country()
							);
							?>
						</div>
					</div>
					<div class="box box-half">
						<label for="phone">
							<span> <?php esc_html_e( 'Phone', 'mailchimp-for-woocommerce' ); ?></span>
						</label>
						<input required type="text" id="phone" name="phone"/>
					</div>
					<div class="box">
						<label for="<?php echo esc_attr( $this->plugin_name ); ?>-store-timezone-label">
							<span><?php esc_html_e( 'Timezone', 'mailchimp-for-woocommerce' ); ?></span>
						</label>
						<div class="mailchimp-select-wrapper">
							<select id="timezone" name="timezone" required>
								<?php $selected_timezone = isset( $options['store_timezone'] ) && ! empty( $options['store_timezone'] ) ? $options['store_timezone'] : get_option( 'timezone_string' ); ?>
								<?php
								foreach ( mailchimp_get_timezone_list() as $t ) {
									echo '<option value="' . esc_attr( $t['zone'] ) . '" ' . selected( $t['zone'] === $selected_timezone, true, false ) . '>' . esc_html( $t['diff_from_GMT'] . ' - ' . $t['zone'] ) . '</option>';
								}
								?>
							</select>
						</div>
					</div>
					<div class="box terms">
						<p>
							<?php
								$allowed_html = array(
									'a'  => array(
										'href'   => array(),
										'title'  => array(),
										'target' => array(),
									),
									'br' => array(),
								);
								?>
							<?php
							echo sprintf(
								/* translators: %s - Mailchimp legal pages */                                wp_kses(
									__( 'By clicking the "Get Started!" button, you are creating a Mailchimp account, and you agree to Mailchimp\'s <a href=%1$s target=_blank>Terms of Use</a> and <a href=%2$s target=_blank>Privacy Policy</a>.', 'mailchimp-for-woocommerce' ),
									array(
										'a' => array(
											'href'   => array(),
											'target' => '_blank',
										),
									)
								),
								esc_url( 'https://mailchimp.com/legal/terms' ),
								esc_url( 'https://mailchimp.com/legal/privacy' )
							);
							?>
						</p>
					</div>
					<div class="box box-half">
						<a id="mc-woocommerce-create-account-prev" class="button button-primary whitebtn tab-content-submit"><?php esc_html_e( 'Go Back', 'mailchimp-for-woocommerce' ); ?></a>
					</div>
					<div class="box box-half">
						<a id="mc-woocommerce-create-account-go" class="button button-primary tab-content-submit"><?php esc_html_e( 'Get Started!', 'mailchimp-for-woocommerce' ); ?></a>
						<span class="spinner"></span>
					</div>
					<div class="box mc-woocommerce-create-account-step-error alignright">
						<p id ="address_error"><?php echo esc_html__( 'Invalid Address', 'mailchimp-for-woocommerce' ); ?></p>
						<p id ="city_error"><?php echo esc_html__( 'Invalid City', 'mailchimp-for-woocommerce' ); ?></p>
						<p id ="state_error"><?php echo esc_html__( 'Invalid State', 'mailchimp-for-woocommerce' ); ?></p>
						<p id ="zip_error"><?php echo esc_html__( 'Invalid Zip', 'mailchimp-for-woocommerce' ); ?></p>
						<p id ="country_error"><?php echo esc_html__( 'Invalid Country', 'mailchimp-for-woocommerce' ); ?></p>
						<p id ="phone_error"><?php echo esc_html__( 'Invalid Phone', 'mailchimp-for-woocommerce' ); ?></p>
						<p id ="timezone_error"><?php echo esc_html__( 'Invalid Timezone', 'mailchimp-for-woocommerce' ); ?></p>
						<p id ="connecting"><?php echo esc_html__( 'Connecting...', 'mailchimp-for-woocommerce' ); ?></p>
					</div>
				</fieldset>
			</div>
			<div class="modal-footer">
				©2001–<?php echo esc_html( gmdate( 'Y' ) ); ?> All Rights Reserved. Mailchimp® is a registered trademark of The Rocket Science Group. Cookie Preferences, Privacy, and Terms.
			</div>
		</div>
	</div>
</div>
3dotpurple.gif                                                                                                                                                                                                                                                 4526          1711191352  plugins/mailchimp-for-woocommerce/admin/partials/tabs/images                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    GIF89a    !NETSCAPE2.0   !   ,       
 !   ,         8@e0jy[fuYI)j	 !   ,                     #DQ8  pFl+Kz 12x !   ,      ԢԪԦܮ             PqY8`pvgP+bLJe !   ,      ~ĢļԺԴԾ      #pAj88_RpF|@+Kz @2'Օs !   ,      ^ܬjfĦbnĮ         !pa8@rpV_P'#Su\ !   ,      ^ܬjfĦbnĮ7pxx5` $qF%<*L1*6CT.̍F  !   ,      ^쬊jfĦbnĮ                                       > HDp 4A- 9;CD#`6gS5aQr\_T !   ,      ^ܺܬjĦĮĔfbnԢԪ                                       ?r0H9Pp\ 4hN-!ax,($yGR)8JD2D ,5 !   ,      ^ܬ~jĢĮĔfbnĦ̮                                       A PH)Jtp 4мcD8Ȥǝ dJf5ΐIqB9"g !   ,      ^ܬjĦfbnĮ                                             ;`@@ p| 4мPC#;@ B>p7dIȬVj(DDPBBB !   ,      ^ܬjĦfbnĮ                                 J`20P((s, @D/U*A+J@@2HH.NtNJFᄒ8&I! !   ,      ^쬊jĦfb켚nĮ                     NS `!-4D J$@P/Vʁ `L@@K32GNwtBZ j"@\0 !   ,      ^ܬĦԢ̜jԪԔfbĮԦ̜nܮ               OB!0hh!5TX@\f 8&q42*,V鄚J!6J'CH0 !   ,      ^ԺԬ~ĢjܼfĮbԾԴĦn伎         P0p0bVDʹT@\/ ʒA s<"6J`SR	FB;~:°& #洖H\A@B !   ,      ^ܬjĦfbnĮ                                             H`@@ !(œ@4/4 @@ 0 	\2(Pz?"4\(. !   ,      ^ԺԬ~ĢjܼfĮbԾԴĦn伎         L25Qq0b HǳB"  \Jd#`b)l&
Vq9
	E PL0B"qd4v !   ,      ^ܬĦԢ̜jԪԔfbĮԦ̜nܮ               M1Vhh!5T D`G~0j @UNar#+	5đ "`I$"9d4# !   ,      ^쬊jĦfb켚nĮ                     Oc]1a!-t  B:hjBD& 讈 
R[a|@!f0&l:@ .zl !   ,      ^ܬjĦfbnĮ                                 H`-P(( 4ƔHdT@r#\6~A@DH&h8$0 !   ,      ^ܬjĦfbnĮ                                             ; $ ⌄OB`47p̬	@C {$vAOX(*pH  !   ,      ^ܬ~jĢĮĔfbnĦ̮                                       B$)JtD30!1(Ϸ6A\6q8z?+QkP  !   ,      ^ܺܬjĦĮĔfbnԢԪ                                       <$9P􌃰B΁c;h4@vcH"( 6#2dJjĀH&"! !   ,      ^쬊jfĦbnĮ                                       @$DJFx4@$сIcE"JH.Χ&I&PkBXB !   ,      ^ܬjfĦbnĮ59WS9D*FQ ,inA&p*cS۸ܣdB=Kh9 !   ,      ^ܬjfĦbnĮ         !I$G9"痪lkjG !   ,      ~ĢļԺԴԾ      $IDEr 9$^A#`F !   ,      ԢԪԦܮ            "pI$⌤ @pغV&ma !   ,                     $PI,H k!M !   ,         h[0e#J /]A(`vI  ;glkTguAJg+lqI9o8IC7+Z8NO0h0l8/amXRUvrZ7L/15dNnobol60ySfUO2sAXX6lScreenshot_sync.png                                                                                                                                                                                                                                            64208         1711191352  plugins/mailchimp-for-woocommerce/admin/partials/tabs/images                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    PNG

   IHDR       U+	   gAMA  a    cHRM  z&         u0  `  :  pQ<   PeXIfMM *           i       &                            3  3iTXtXML:com.adobe.xmp     <x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="XMP Core 5.4.0">
   <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
      <rdf:Description rdf:about=""
            xmlns:tiff="http://ns.adobe.com/tiff/1.0/"
            xmlns:exif="http://ns.adobe.com/exif/1.0/">
         <tiff:Orientation>1</tiff:Orientation>
         <exif:ColorSpace>1</exif:ColorSpace>
         <exif:PixelXDimension>1202</exif:PixelXDimension>
         <exif:PixelYDimension>840</exif:PixelYDimension>
      </rdf:Description>
   </rdf:RDF>
</x:xmpmeta>
7\F  @ IDATx,Ew%DT"9
((Q$((`V@@䜳H(9	H9~}ݙݙov:VW
jƼ+I@$ 	H@$ 	HCP+	H@$ 	H@$ H@ʂ 	H@$ 	H@$Q
Pk$ 	H@$ 	H@
P	H@$ 	H@$ P(^$ 	H@$ 	H@PH@$ 	H@$ 	tTG$ 	H@$ 	H@e@$ 	H@$ 	H:% 	H@$ 	H@,$ 	H@$ 	H@% Q.	H@$ 	H@$ e$ 	H@$ 	H@(5p	H@$ 	H@$ (ˀ$ 	H@$ 	H@@G	(@uK@$ 	H@$ 	(@Y$ 	H@$ 	H@:J@x\$ 	H@$ 	H`Ԙ1cBVq.))͘eJwL?5YRwٺNSY?Vy;::<x$ 	H@(#0lg>d>0v0Ds?o> 7x"d*+|ic?Ժ'%Cfą|=Rm@{CRݓĿ<~wOu"&,X/;A0% 	H@h<4d)>5KCx|;eIHu9)=aq_z)e_;mG}y҉Q?o'i$ 	H  E O<q
QJ fLJ#wLY$3G.ʭ+vC=<+?KS"	H@5CxE&`ߨAaiDfm/+kF}F.UW1#{NU2,	H@$P$0$$ 	H@$ 	H@(P*q]$ 	H@$ 	Hڊ$ 	H@$ 	H@D\$ 	H@$ 	H@h+40	H@$ 	H@$ ""% 	H@$ 	H@J@8L$ 	H@$ 	HH@Hu	H@$ 	H@$ Pj+N$ 	H@$ 	H@(P*q]$ 	H@$ 	Hڊ$ 	H@$ 	H@D\$ 	H@$ 	H@h+40	H@$ 	H@$ ""% 	H@$ 	H@J@8L$ 	H@$ 	HH@Hu	H@$ 	H@$ Pj+N$ 	H@$ 	H@(P*q]$ 	H@$ 	Hڊ$ 	H@$ 	H@D\$ 	H@$ 	H@h+l|x{$ 	H@$ 	H@@KVK.$aG}tG,O:0|5	H@$ 	H@$0?3vvyw1lۇk駟{^Gh#<6hP@7q݀8H@$ c^y rAչSZkp|s5W?⊸m]v	[ne"P'{/gر}uRݛ>p[o5K_B{;1c4jaG(N8afmJQ~8ya
+rO~駟>jFn^ |_g=m_zV9ñguVfeX'W\qŶGꪫfL0kRhd$ 	H@@_ꪫħO<1[V8#o3CW_}uXr%&l2O<DܶJy䑰FQs{@Hck6ؠ4O>9<ct;xb?pm}t	k$7,L<''_Ko|1_=&:C<BФ\iKyP[nRd|8lsΉ<6BMoʇuw+Z?c(qZl&C9$n??oV:o	H@$ +
OlK,8va/Yg5pz5ׄx n?s=>O7x#|+_	7xcc9L3ؿcy`X%Kx~߇8 1DBtB"4l0㎋viG.p=Đb |ӟizӺ p=@;N~/4G[if;kXxSM:3=i$ 	H@@+^Y`T'|`SnbK<N8ᄸƛ_<0uD-= r!bWR8![Zth:*7r).$an_|z<D:4eS7z;<aqc=#|O=T1sVCxS??|O﵈fg}vg]wߗ_~yJʓv)O7tS܆Fm]tѸ!y;pwͩN;-{ se@Qĳcߚkェ#yZ	d喋-J4 ?Oo_&_Wc[B@zabET	׿5
Gܨ.2fMw+C0wg/aX"I@$ JZjb"bfxO $(ibF!y|phH:&$>e*N=mMmȮ*qG`e'kF4I,:td]wp-<\׾@G7tO|c38c8Sæn:{8萒SM5U6lq>j2|"og&o8aV+9!:UW#"!t#p^{ );[ou |PeNq[!OS\_g91P#>#F/tyx`hΤBe9G#v믿~.yeډ|Na$$V_w9=a]tQ\'>$ 	H!K	CLm6yc>agCYdiH4px%X$z?GamK6sUax`I/Ͱ<,v<-73O</^m+R܇
^0Bb!%k;!)SL1E|9-qB CT1ⰼ?"$`xF$AM'2e$y9}ףPAqn=(Є7>"`ᕡu@W)/#JQxPUE	^JP&ݯ?8o`GEem+CRA&~FoCu5ih<m8b,$ 	H>׿uL)bNRK/t*`@$8fC0NYm'"3!xKKLtq/4t0tIߟ:I#asBa
M60;(!"rbi[L\a	๐wAerGxJ^eWH/W89Yɯobx3&2&OS6h17픮xJ90ؔ'_/Mîdєg_rO!'6$bPB$l.&o*;oq`h{$ 	H@~K,oGawtR1Rm9c:Pt>xWÇ	,|qKǥo yS/3ais{[<g,0<&)@ECGr-O8x.9PH	'X)aV\\:xi'p8lIbo8odۑ!9}W|W'd;<D0<>ڰх Eۓ<w_xQwu<q1 5zRƘ%Hrr<oyYXu sq-jGb w>7Z&(H/8ǲЈ% 	H@	 EpCGUMeإ <ѩ@#$a{W<0'{ߚU$9ض_ecY:/!M7t3\0uA~CG9)oʹ1
aYxI^Mdb|^i-gmF
[mU/"&FdwgD)F6	9CΡ'gC7N\R֓L2I(ĳGHQB<!.2}y} \^P+I^c]n mF|\{*mG<0H2 x$bm]\>nh[RnY&	H@*؞ۃI=ʜKI|jf#^//>5s ?񝼞@_CSC,Ɲ(_K-7bn{
n!vr(x=7Xұa!Px7!Hz ѹl~@>cbq!v vS~ǐ#ȡ]_	9a5"_>3'g)uBb;:eS.<񫉍"+%0XDZ}&_ho?̷XUhN?i^WL/FQ `B#_$ 	H!1ٛZýM`%MeÖBnx,Љo1D*oáe5Zˆ/wp?ӰF׭nN~5[=cqtNP'_	Ó&ylr#&Wa	OV%4oy.ӆK(<:\Ϫ;gaJL3M˖E4Ğ b}^pZ*n;o~x9Ĩn/w)$M$ 	Hc:vtʩƩ7=]x_$E@xޙxv{ЋT7ŋ
Y,_{QG"eAJq$ 	.
P+;ZQ/$a$@gxݕW^!` WL}9p>c,UŰL&$S\2$ % տy;)SVXT#2P	H`oPꛬ4!$ $דdi	H@$ 	H@$g,CM$ 	H@$ 	H@6
Pݖ#G$ 	H@$ 	>P#	H@$ 	H@T$ 	H@$ 	H@}F@2H@$ 	H@$ n# m9b|$ 	H@$ 	H@@P59$ 	H@$ 	H(@u[	H@$ 	H@$g,CM$ 	H@$ 	H@6
Pݖ#G$ 	H@$ 	>P#	H@$ 	H@T$ 	H@$ 	H@}F@2H@$ 	H@$ n# m9b|$ 	H@$ 	H@@P59$ 	H@$ 	H(@u[	H@$ 	H@$g,CM$ 	H@$ 	H@6
Pݖ#G$ 	H@$ 	>P#	H@$ 	H@T$ 	H@$ 	H@}F@2H@$ 	H@$ n# m9b|$ 	H@$ 	H@@;L9C9se2ӤH@$ 	H@r^}7ϒ$ 	H@$ 	H@h<ڡ5O$ 	H@$ 	H@Qz@hm	H@$ 	H@$+z%$ 	H@$ 	H@Q
P=qF[$ 	H@$ 	
^))	H@$ 	H@zTfі$ 	H@$ 	H@B@WrxJ@$ 	H@$ % գg% 	H@$ 	H@@Pꕜ2$ 	H@$ 	HG	(@hm	H@$ 	H@$+z%$ 	H@$ 	H@Q
P=qF[$ 	H@$ 	
^))	H@$ 	H@zTfі$ 	H@$ 	H@B@WrxJ@$ 	H@$ % գg% 	H@$ 	H@@Pꕜ2$ 	H@$ 	HG	(@hm	H@$ 	H@$+z%$ 	H@$ 	H@Q
P=qF[$ 	H@$ 	
^))	H@$ 	H@zTfі$ 	H@$ 	H@B@WrxJ@$ 	H@$ % գg% 	H@$ 	H@@Pꕜ2$ 	H@$ 	HG	(@hm	H@$ 	H@$+z%$ 	H@$ 	H@Q
P=qF[$ 	H@$ 	
^))	H@$ 	H@zTfі$ 	H@$ 	H@B@WrxJ@$ 	H@$ % գg% 	H@$ 	H@@Pꕜ2$ 	H@$ 	HG	(@hm	H@$ 	H@$+z%$ 	H@$ 	H@Q
P=qF[$ 	H@$ 	
^))	H@$ 	H@zTfі$ 	H@$ 	H@B@WrxJ@$ 	H@$ % գg% 	H@$ 	H@@;RX =\ao#+	H@$ 	H@|s}lD7"TVϾ\\ .Z% 	H@$ 	H@@?嶻Z̘1cF,y#2Dk$ 	H@$ 	H@P$ 	H@$ 	H@@$ 	H@$ 	H:% 	H@$ 	H@,$ 	H@$ 	H@% Q.	H@$ 	H@$ e$ 	H@$ 	H@(5p	H@$ 	H@$ (ˀ$ 	H@$ 	H@@G	(@uK@$ 	H@$ 	(@Y$ 	H@$ 	H@:J`lGC7p	H@$ 	H@$ JZ-<S_N?taYg	cƌ<P\2$ 	H@$ 	- q'3L?}X{U7^\q^/q$ 	H@$ 	H/}}ሣD1n}#@?яl6tpQG7|o>azhI@$ 	H@$|:OfagHlcpl/[_P?î0쳇_=wqQzgcpW:?O1*lFQtN|뭷[oqg>$ 	H@$ 	H@O9vMAoXf8c9Wzwr!aߌ>/裏z*'Lf'n<}%ÄN8Jyc=7&֝$ 	H@$ QH	ӜOgs~&l_>c9gfN\odlUV{w{	zO8#I'{c)6[Xfe¢.>3τ^z)$ma=M>a}lI4,o
tP`	O<~&(?aI''xbvx衇;`^;?ð?1|к{q|o0S'?	w_<x|:sb_?c=6믏yWcZ&dۆ|+.(xroV!I<(8z0Xlf<sp	'n)^ᔈo¯peEgqƸo?ǱcǆVX!)G)t#8"GOUx<8^zދa"y'^$ 	H@$ f	_~&|ؑ"ƾdӫWoRjz`WB~|'\~Q )K/t/A.p'c9&
2!N·ԺN??|3FsE*ršrxL1!c/bXk"/b[{8|p'yN8㌀ЄDguV]&i?Odq%5\3mw>+e]6p,i{>SSI?qb9(0Go"Ec..k&7ɩ*^{9n1|w;c~?W_}uL?C|4o8D1#>5,]"C,[pwx[o\w)\pAI=$ 	H@$ 	H@O=HB^Mx_ף0QLr_~0묳Ϫ΁CC1,p7D*#j̃*y*O$<wӼQmCDCP*)Dp
iE	.`/6DDZ*ƋpkdN;mi4Lfe(>%
AӟtҗuVZi(""]yQ
ϴėa+'=BDML#)I@$ 	H@C`8-ݱ#{A8Gz*q3߈|h1`id|k m#08.ħvc>`LiZmբp7!4m_[ơq]fc
G94[	vkyfadg97|s/t\Gy$s1G%Q;4	H@$ 	H@@fu0C6o5ć!xP8sz
QK)bTј9n})Ő7Ү}Sa"0Jb?C0A;s#13Dh0wlo喰Kn(4`,)/~򓟌\ð41}f9vaQb%^5X#~j<e\$ 	H@$ 	T#>.{Ip<>Le:|@{@]uUq#&Ff7s1|BH31|ZedٍQ!a?g}v<a8)b(f+~90l_U4Nb"s?!1B/eJąaom^xa
sU_RF\ؿoQlb~8CMx1Q8P9@B 0)x.aI9 	n	Cu<*^Ȝ^%Cf\+r62ui$ 	H@$ </lFٔ/C2)O21P_3ubhDR[o8AkLiEGAI3O)~!	7l!uSxZn4S=o(y! ^07lP7l6xk0lhx1A82|ju։|V\qozL8ί!zï3½\Ng}7~YI@D*҉i<<YPe'[E\bb{&&GPGyz?qblC(C"nk$ 	H@$ <O,@8\8awx>DZdL4~6f\UrMf)η1ɷڕ&婧lċt|o&ISF0&ǣu#?4f!1sNqa#z86liģ9Q*D0ᑅTex<((x{y+9M><C|,aěV*<)"zGFR;'	H@$ 	H@oēOeJBʄ6rxmwy眽-at=KKAڟĂ7fA"͓9o~QӈKMM̵ZIS=
)K%;/'&NiW^G""U+3Ҩ,pR'<y`;BlJ_FxI@$ 	H@з}Y^WT7gA]y1#믿~X~*	(b(2<pvFoz`;cX$ 	H@$ 	,7($ 	H@$ 	H@>0ob$ 	H@$ 	H@T?i$ 	H@$ 	H@]H@3(I@$ 	H@$ ~" OiZ$ 	H@$ 	H@@PL1J$ 	H@$ 	H(@Sn	H@$ 	H@$Ѕ0S$ 	H@$ 	H@'
PE$ 	H@$ 	t!.$	H@$ 	H@T?i$ 	H@$ 	H@]H@3(I@$ 	H@$ ~" OiZ$ 	H@$ 	H@@PL1J$ 	H@$ 	H(@Sn	H@$ 	H@$Ѕ0S$ 	H@$ 	H@'
PE$ 	H@$ 	t!.$	H@$ 	H@T?i$ 	H@$ 	H@]H.(򗿬k#C=tзZo}i~PI7pC馛JH|{ｺ+W<ozkqsϭ7*O?t83{.=?OM%_fSAȳVo>l+1nkgXkv2:~)gyAwM3F0_ڙ/r8&l5j9]u]]$r*Su/ʗnO)f۵"^lچ@PSO=uan=dMg]zk^Ky|ɖk	~x+[o|Na/0o$젃)BS7
niLB1s9oO'&g]7	ż뇲Y7ø1yj%9|[F'Qa+:aW]yn 5灡-<S㐯{{7|k_//K!/vѩ<t"N3n'0jU3U2X~
Ȭ۹jb'0v0,䒁裏f)lfCΞb)G&|.MkQ vNGy$?pVvxcxOo~_؍QNH#f?pp+F/娬D޾>%kr5{'Zh| _?<sõPg.++hkWGW??5:;\G:=/@5㏏Cy({{LO}0Gk5֨&l/G/ }sa]v+p	aرdoq8cØ1cO<v}1:82W:/x!cDnL3Mc=¼mү~^W_=u]aW?"9[O戫TSM~ӟ;.zp}g%߬㳟lm[lҹRKE[,\s5[/	q*<p82,af38c\?e`-_G|4g_|qdAy_b7yrSL'?ɘ6/3(/)Od{n=;NM,䁝}ԋ|+a}jZr)Þ{(yXf)~kvҗÍOW\1ooyq{Ƴą QW.)oHvmXWU_	ռիxeso_aƋk+y,rG?QlGq\V~H/?&p~77aۨ&h,-W/}ٰ6¦6Fi]{^EKe<;c[[Vd@:hh|ܧ?0W_}5"937ueq+W#oE
+^,P7m_@Fmi-'+?$cz=t{Cj;m/_|q
v!+8q*gN#+oɇw9,2)
K-JNn*)83nQpS~ں*{g>xOq/~=3P7iIk2W^ypy煪2sė%X"G<KaeM\QxEo=ty'&,~zl}I}'Tuxꩧb[}<_ǽ2Gҳ\{
ex*VSv=<U{;~M],Ƈeϸe7,Cce+}ڔܿu굫<WM,_9黬s#^eφ2⑾[)ݨPfRY߱*NVNih]Vދ4ӎ/qϘT9=7Q߀r3ؼ_$uhj"j+8;d:3!#dZve[-{h}ߨe~<.`V]uc=׳Z&㎏&jYg7^:8{JlXU:gu׭3143>p|>|2A ^K.86yղY-q/~l졻ujp׳V׉OэnPLXOrKm6<vW.¸;j:Yhղ1c/,ﾸ5V[m<"/9;٧ ZkZ@Vc\U>ͳ|k;@|Җ?v -e>5k<3>"EY5+3X67E-j9䐸ukCJܔIo?pe4dԸ^*żoTEďZ&HSd^% OC1?xL3FC}:QL\3~2.QYr6*b36m%g]Zm!gdخs<3c|&I~Wɾo66	'eqkT2)S*كa<=ZIq,e)ϗ2'z
i=)/ԑTmsR3A1|r,8'e+,GnYg*^<"^_}\/Dˁ|zKro:=s[-ϷUyߓ3a{rU=3D:/{YQ+jy2G(sx^zzjVLG٢x<FQ˞N3نu5JUyAǲMT*+fe9xYG=7%+S|Sj:Un<#dBA9,n+Ƈ5z47{o)Cn+uQ")UQʋz5X.̈́YU]UOǷ3Y95=lJj|VUoRU߱*NSm3"e=ρf|A;Z|ڊw(yQh\_wֲî7K}y&wmq`8iYgs/eu|r 4*CmaV𖍷U7?si>^$M 8ˤ''y[xK駟>+?@*5̙y(LUV/zG -ƣ/<'JMH~_UzꩁƛzoalZ>LMCI[y}ց9#~. d!ņg9PTxAxCk^d7/|xG֋qkBցqU\$qC=j4Q1<oySVC3`7hx#Mن3F=//F#͔\px.פ]Nkڨ\<ېI¦}3 ?V[m=(r@0:q~tle8q<Df'Fіø*nle6O9G+xeԁβx*z+gqKs4$6Sw	t||YȗFj9»yG9quQ1o71gf>Liz =?<zV8lgV]'g/e>rONV=3n.P&ޡk+޳Exb`ٳYtfp:ыvkA*w˜tcCp~שzv㾉m29kTYgܪPШڔšxz3as5*_jH?6lj*n>  @ IDATȧޔ%dcU-Oni/.7ӎ(ݻﾻL|6k湩xP#C`\vdʍ.7w:B4ɲAi[o:BW@AY<b2itEt^1MFZqSodb8_Ҙ&IK`yam08|(ĳ욄R##;(V|J󆒶f2]&#!eǳ YΣǰ҃pp)ܪ!$.70DZ4|}ޠGeo"[F6=6^R\s2O@{RetF{Y|]f9ӯc"M:>UŭQ"4s1qhgR΋ư"\93 mm֛	?:jбm3e
񉺛	ϯVOVU3A+{PU_!4CzK e1UUK7{ONW=3n*th50iSN{k-<Q>Pfq㘪{J>T=Q28!jK/Sϸ	qIu|86=JaS-7v*_k幱gVG>-U;2yލګ|V-.w(Z+MsۙpG2ei:a/Ƥ{0Fb<K=Ɗam<\72vaOD%:m:(|x^<FN-WCjU]+7%n0 :w*h#yx:;tv,4N9a˒5iw3G:xKใ0ܪ6j0*ԧ⍏=+6'hMW3uXs/^VQS6L|?O<jxrHm3WCfp%nٰ8!髚&ۉfxŪK|,7cv5)r,m`{r3qhLV\t|QoGǼZ\$4saPlP)M?pHϖӇb OEY7@%	eq({(B|6jT|צTGŰZYo&FYUj=sc#zSVLJ}GGxi<T:|qv84ܔo;"Gcz]w% &==2<j2&rS2W4(b4ѹL}~cH1`PMd4.G}tZ$s`CaAa<b"ce$⇂ߌU]0!)cVvnY^2<3S"^^i;U:ԃzƐ7:gyUeJ1JՇbUţx0	c=*?IRE{D)ӶJ!!-hidx&]9ONE;Gt}&kNFY Q+m8FC5zD{ɰ^傉ɳzV,G{Mf} cS#LnW|fw1u2}jrU}~@9I0qtҰz\/PլrOzfͤi,<c$+>̥U(^;xL{z}$}͐;MHD&Xn{J1Mhf[mOzB|h'mvYʞ'Sꕯq,)UQ1bL؍ڳ|-ƣox~q=_~Rޔ׳zSVUqJSU[M{җz+]xM; +(*KyPւ7S#wy/v%[zϛN~<Qc^󠖏{U'W#8pyk~ټKx++$B\v~5/.r cHs9'r׺8ftg$)~:\)<7CCQama	CcjyJZ>rɨ@zU_oW	ۓȲ',;R)?"ףwjnCKܥ:?g).}eb
_|#x-ōZV~>*pY=Bc(N:5<7tOy*?cr-3M(zyaqMN?>LAB:2!mѡ#=iOImX6~<,ne6t8Sb!p2OU=oҰ
sճb]k
lxNWSqz!ޔlC[݊BN#/9B>XU}cDGŃht<	Ž:0
}:*֫/I@I5bJ}ܓ(7q2w^y`0e.ؤt㻬W{3B8SPhWϒm^˯DQH;lxhNJmyU=ˬuʞhK</3/)mEOyΧ*eprqYJ]֦TGpr>iv5\l5ʹ\UOqt_wpF.*7Ue:Rw,jT%jX`N_g"V`|MqK3MKsqU^k=d~s	1<|mpfxѪ$qW\xUoHG
ۆz<hX'-1dp$4E<ğWT
tp`8S(ADpJFX灹`x$# X/OR默Gi{k7:tpgeiCTaoW2=xqqhЙl8x5û09^7{~3颳9SfШ>ߪxԻv$_Nx'ߒRＲS6<؆L7:[!o>ۜFҎ WoY+7J{C86X[m]A`rUmT9Jץ_VU_x^@\wIAGѐU*K<_Vwn\@$>YQy&e׽|,ރx\:ɳQ#|LhΗ7]xOa{{ceO<?^ڞ4t4C1/TVq(kSڣ|8eˤ\=^<i۹-_GSm2xi57R3}G(N)͔r5ay.)jǛynW~ICy9n05t>
P-RNH=FaH|p7"@_$7J`hyKˇq[`دbqe7jy_h m졇:#3x>Do^d2|,ZC)b(Ch?2ԫ8Ը;^JnSH{@RȰ%´x&]2b;gH%&<ċ!ͺ׭_2Px饗7kzI E:6xA1aWil),<
f|js1GR|8jĨ'}NE)T.OzEEE	H@$ 	H@$AjnGi% 	H@$ 	H@T$ 	H@$ 	H@}B@O2dH@$ 	H@$ n% խ9c$ 	H@$ 	H@@P꓌4$ 	H@$ 	H[	(@uk/	H@$ 	H@$'$#M$ 	H@$ 	H@VJzáp_qG+mcp駷3؁npM7Bx_p3$<Vyl괲T -t嗇]v%l<>^wFb;?>?/駟ԋF6Q<eiʽ5NËe;z5tO$ 	t#Q#@ka5żtb:Ōkطz+|{+іGaXo7|sak֋>Ov"@wyC!sPe]uUaM7ҵZ9
tPXn,ʩu&=/[zuׅ?O;K:%\/zXc_<3six7< j%@[FVϊV+gŰ۱>mi;l$ 	HYc=׏b)G&|򘔇~8OxG~Hˆn-@:'Jo-iyGôN[zL+;[r%JpC:?*Nd)o;L<ą[};.69k"'p[+Dg}ؓ+ޗb8ez67miY\'	H@M7΋,HdꫯqO	:rHqǆ78zBm_z׾exo`{o~0T2{¾E`&l;p_oy1cƄ/amv-|s^-=dM6t@O}ӟ{@zk,,b#WlfqƁp/pw}7?a6kFϰZ*॰Gap`;oO [WUz뮻"/6E[o|+_	m@Uf2,go?M7]vJg1w	'^|g}6r1w~Oӿ
+]o+mʱ,{ja){g'C`c>~_k6*?3O
{'PS<?}8Q3q;vlg?bpG1O?ΒQX碧L:p֨Ә;_W
<pn3>ΧDZ_xFxQN\,iN8zʱ'xb,å^PN~򓟄^8%kFiM!w@ziiKLru}^CkΊqX¢Jvm$y;1G@>c۴Cԕ{.,6^
.lkK./X`Ȑz$tSHmƛoyQ~;]6}u8R>/rt}EvyeL,'Ue;ŗ,MH;%~8xlF:s_fi⽀(27_=')b~{:#ճ2x7x#_u6<P'FxuEtOfafRfmivvx|!@4	H@$36ܟAҹkXekYGuu]jgZQY}`ZkU::Yu j<#L}ߨ]tEpbZVZ=CZ \:!q=ƉO>pl6hY:U[oҕ q[neP\gW-~7wvex:i%:3q=hV]uc=9.X8#.:Eq|̿\ĨuLk+eH/u#LTكu17e7xf|8VLGܘGr|q[E_<?ŷQh&EFֱ]yq5IcyKφo25Z&eK&Ʋ͆e"@=ȇW<|Jl6ukYujhX9n^:gb@׳bk0mE&U'쩧?(bzR}#oǊsw2X6Ki+ZUh2a S[qk6̷Z&J@^`Re\?y=7Rΰ.dBHmUu2Aݧzz&nzMY~]l)"vXk)])yU\UOv>21q`q"_SON&y	-_5w|/Ws;n>TqOǦo!}?bf{z.sL	^BqX"|z!_S[X/i'yi'$ 	H@_wxfYb>5|SrU=~h9(GTO335o/x	z*gx3Ie|H,3=؇G2ޘMypr]4Fc̑u¬ow!Zq̩AJo]07|A?9q9ݱKO?}a򇄏tB~xgbCKo۳{̟1FF9IOGږƣe7Wfҟ­wW։ ϾQ~`Rxt81
o&(zazF&?V[mpKZmK<a8v1bI&I7^D3׋܏XEizUiKLd𸢌e"N{G>bo(q;cX~M용۔>`]bKxpiƊm\s2pSI'=i[`C-zv	TW?<gixjAY>7SOv+x̒xўd[MsceIs({x>axUY307^<wllG]U<<gŲeBrKd&5l'6	H@$0}=D]xEPA>0UKaqycq/,ҼГG@ނD*E|Xӂ 1 @}Ѡ0AfC21!kBq,a2#-A*tZQ⋏s9:X>`}kUc0OIacQ&2y:;dZU8o6	m\0̔2LqT!!G^@`.zE.תrO1:BHy6o4"igUhFHF|Hm?@yKFAaڭ|煀Tv>|=e;qQfF;sDFKr?b"|@QLS<|&oZ'.aD Gd>BGd(`=Ka}msfza])Vv>L75cG'?5	H@$+E)pA)s<ev$޼;oIyN'/o@̣!UE:0q-֙p`|G2	y(sOUT1x`qL=tLNn?t;H{&K\ҾfMuM:7[2Q1e0qU壙w,W,[v>P̩nk6DFIueqԧ>FJ]+ƫ*?"uQQX᱇WIrYUN.2N_J^xN"> B#>ɼP]묳N9nh$煒t[Bv5ه8:xٰrxnstqkƪA|l=)(gxu"V95ވ{~\/fzce<GdOV0$ 	H@@'	+l:	a2VxSwI'x0I_c	>SǑ'ddÃ: ඏ̓= 	?#5taDt(y1Y,~^0vb盡I%ZY+bdx\#Ԡ5kKK@gU*#<@!%S""=3DgI1xc8W\3܈	VY>c8igrdL)x$#M_g:9V*?9>fsC}L͵4ΰ޲rO 1e)'x<MbaZdͤ?7L6OP1&L͡HTVF{0":լO(kG.9:Iks>	qdt~TzRNnqjK s0z_j=VeD¨kLn?|&ƃ1u2=om~K@$ $P-&Fa8@uNWP0o'9+ !s(+{Ãh+,ӡf[^(i?bC!Cp!<3~̏gQ/֘37I#32qG<AHMq1y`DV:7ū,tË8 H:I^	ͼNN_Q/c7GU#l2_PRaGz([7~c!Ar/DO=3/R.A-k6)D8jėz\]).\.1`gDZ4o'_'6TU׸FT'ap^NX(/Q蘧y8ܳ2/Q,	s1K
\yk&xq!9E{P<H;?ԍ|\8緥R|Y=+E[{ׇSN9%1~	he0k_h(*[')bihCD<Y+[[W{|xu=Q_Xq~>7b¾w1,vz{n2DڀM4	H@$duЙƹEW(gcW5Vu<I Ƽyfn0:#HJ`0p|-\#PZv^7x7iVeN!Rq,p]v|q_x3P4:tx|ZG!~LM|;.+W~:bxKg0(!_<Pƈ_:&_1}8pgīQq雰褧wNu-h8+(ǈ݈ވHHȯ2x1ێ4GH}"L's[WlO?bLw}{*')n]='ŵN^^<>N=ɟTh[?Wl=4,	H@-c~@'c;N5$30\`@a_=a7uq̜p|+4wW5I=G/)vp]<5	H@$P$ #2P˻(\uU8~P@'	0|yeb()Êh:N/2grbH_I;qmÔ@k;*^O$ 	H`prr0\$ 	H@$ 	H@m"gnSF$ 	H@$ 	H@E
PE"K@$ 	H@$ 	T[q$ 	H@$ 	H@@T$ 	H@$ 	H@m% V&	H@$ 	H@$P$ U$$ 	H@$ 	H@@[	(@I@$ 	H@$ 		(@.	H@$ 	H@$V
Pmi`$ 	H@$ 	H@E
PE"K@$ 	H@$ 	T[q$ 	H@$ 	H@@T$ 	H@$ 	H@m% V&	H@$ 	H@$P$ U$$ 	H@$ 	H@@[	(@I@$ 	H@$ 		(@.	H@$ 	H@$V
Pmi`$ 	H@$ 	H@E
PE"K@$ 	H@$ 	T[q$ 	H@$ 	H@@T$ 	H@$ 	H@m% V&	H@$ 	H@$P$ U$$ 	H@$ 	H@@[	(@I@$ 	H@$ 		-n&7,5a	~8Y嶻^G$ 	H@$ 	H`	yWjxxZ&	H@z/[U$ 7xaرa̘1#dD<H0	$ 	H@@P3$ 	ÌD
4	I@$ f0<G$ NIG{	0$ 	H@$ 	H:% 	H@$ 	H@h' 5K闀$ 	H@$ 	H@& a/	H@$ 	H@F;^L$ 	H@$ 	H@06x	H@$ 	H@$0	(@`% 	H@$ 	H@@	(@uK@$ 	H@$ N@j /	H@$ 	H@:L@À^$ 	H@$ 	v
P~	H@$ 	H@$a
Pl$ 	H@$ 	H`P%K@$ 	H@$ P0`$ 	H@$ 	H@h/_$ 	H@$ 	tT$ 	H@$ 	H@F{	0$ 	H@$ 	H:% 	H@$ 	H@h' 5K闀$ 	H@$ 	H@& a/	H@$ 	H@F;^L$ 	H@$ 	H@06x	H@$ 	H@$0	(@`% 	H@$ 	H@@	(@uK@$ 	H@$ N@j /	H@$ 	H@:L`lï~̘1aI&	?~`Y$ 	H@$ 	H@<ZoF
i&cǎU|`$ 	H@$ 	H@y-L0A\gD&(7ވF	$ 	H@$ 	H@tI@$ 	H@$ 	t@h/#*@uXgP% 	H@$ 	H@eD.	H@$ 	H@$0א$ 	H@$ 	H@(|.	H@$ 	H@pP$ 	H@$ 	H`Přo% 	H@$ 	H@pP^C$ 	H@$ 	b
P8M$ 	H@$ 	H@
PAkH@$ 	H@$ QL@jgI$ 	H@$ 	H@A`p\kH@$ 	H@$ V7_oFx;|5ǎ?aI&t0DwM܆3"
PIkI@$ 	H@$А^y/q_=va)	SM=m\%
PC88Y͖;LhLh@$B'k5@ $ޫP.˽ʶ%YǬ|:I;tM>~o}f@ @ @ BTWWK4+L
js]~{X>([J#       @+YlX=3cukL?=JJoAa≠9@ @ @ 2R@s<-Z0jaw]( W]Ui9x
^W9@ @ @ Yf|pW N&WG,͜2L@ @ @ H{̟m6tΧڥX&e32E *Wu#      @|ZpFolA\U&Pir.      @CC7<cΧYPIr      %2[^MӤ2˔B *S>I@ @ @ 4Pb4m]6Kf2)9h      !b88bG #      @Zgk&4׭Ɂ G @ @ @ *VLuZs44N+	@a      ]`Æz[fu+;~lݺu	6Vdjag"L:9/@ @ @ :Xlhu+6mt/t{ n[퓩E	2<#@ @ @ TU&`
j:݆beecѶ'K[-$k())Ivz{-+l%=[_6^497/Ϻ4=pm/mCβBv֫߀۶o^hأgys7vi>O?j6z;jla87Ed|Bk`ԳW~ͯvl\ܿ8x照?4VB @ @ 5MݖL7femذvbWUtn\זcu}ؠ#Ԋ}m:XȀx/niS6ie+-_M%7;o,ڐccNo|ɶ?Z m\PWW>>U5hkgZjUUWZmzՆkfy7Xaqw*$l6cm۝wMm/M~3	Gh{ժq     @jj״ 
6)	OBc!;&jΗ_X^^7Ew2zm颍 E%wc[zM[ima&0sAo{Y7/[m#;竩^IW*K]T0Gmn{oZmz/+Ƭ[|?d*׮V}nYaQB@Amx'(R7p0q;}ُlN{gE,_~n-/w߶Xպ/
o9}J/eyPS?~Fmm>{mϙ!¯#nA'g)֫O([vN^ٸ@`g=j{qi+ta}.+Ln9ag6fs,礠i7[7;#ayזY^^>q֣ԭ4|[Pӏ~͖-.³]=mp?}-X*>Q[ͷb]gcgIyY!#FboY߀΂\j_U˗kN@ @ @ e0BVP_S}ל/:x~~~G]l^
wwAQ/3~f ˠa#=ܗ)!Vr``W;ϟ;ʽ`"/,%mjL_5j.fk}aRu뭯<0nwڠ`ڸ~ac
D)PDAO5|+)m8Ϛ\<r,{o6dJ/0ʦy]@OF={K*/%X>zg{3_Q R6^Rk`@:>ntރGypJK.Xխ`%^+4LSBu߃\Iטڡ-TSqFۺw~[c㊯S1y<U2377?{׳2LРljHo[~5
600X:j3/X͟=]Ɍo*|@ @ 'bЕung_xN|ڈ`/х~3~vFA)be(C(ekhbo+eGE	lyYQlՊe^>?4RGE^JE2iR~ײ&
jCA=]SUIڰkjʼ!
tlEyA:s3t|٣GAg{T+,KD /(tY?
vu`,+>#ܹ*.VQ$y/]8߲t1e{]UUl6sRSw)Д6&(MmwzWWVv,e{״~b]O[e=u׿
n)[l+JyS_c]g9DGȠ'e\-`>GpA @ @ !7}h}o%\(ї[M>|UzFl:+ vZ`+R՗vQvHkS<G&p}QW&mx6h(D6`Q !.@Wexe{6;l/`L2fm\&2꼀TWg-ʌSfPS.`άz[IrnE=zXI^@r}5ƺ#?'3^s)0 Rv
ϙaXɄ.Ut<\sW)oue=E#*[@ @ @ aJO91yct}ЙKBg>zinCGof{v}#m	ֳO?7[4/2RV2<٤-Ӱ8e<=El7IAyP+aU#tA[Se-PDMQ̕"=ʴq.qjG3^(v/z /KJ;27v),,^p:KTLs@i]ʧ`xk^6pEy(2ytQ̨Rt?YMG۷9eiؘS>떜woo01&Tڻ_ܬCg}4Z5QO#ޣVn7P[rϝI|ފe>&;`WG-<
3W`rikoFeXk׬ı%Mb@ @ !?aJtI&&sβo׉,dh/fVPP侜k|l͗ 2[4tҜL%zyLkٸvt4Ϗ[P%/
sgxOiMa}ʘ<lkݒ.dސw݄{A`}Ț1w7Ѥ
X(+'9XZC4o)(*@Hi.yzùԖGl>vwޚX]ݾ}ƙ}szO0d nT,TFEM?̽؈TT@GYi>%}џ<[/.\>ўA+)4W< U`(sߚ}NpR=9QCm6f7iHS4)_tzR
ѰwY6kMsHixo.W
RH-E  @ IDATu6fm3i}Q{Ld7Pne&Lu6:|bޟs@2    Hrm"(IɣlTyo=FgھK%PYWuL)GʤCMGZ-\킶҂m+VoQWw<SQ$#K-=Xn~=^c|N'V^oֈ'ѿ{ڿ[     ˗X[&"|<FOǛ_nÆL׻π6OB;da/AA&-SP%:mZmvjCZ|mD/cOry[zޱzZUO6{UO2JD?wok2΁:@ @ @6N;)9Odrqt$ Չ?<      @:hࠇ[%j	m[l1hU >Zd(\י?=ڎ      @,^4TLVwzk3;"      @g=yNgipK&       zz[g>֑Mq+((&$H%       K߀V<@l9VD @ @ @
tV`=KtwTK{n;I=.rR      	7V,@@2%IG *Cf      $W ++eyyݒ[q&ACF2ʔO@ @ @ @ rrr]*;;'[qqFʤB *>M@ @ @ 4Pv2B5d2xHffjy@ @ @ R(PPPhCf8^s2M&PrN      @7oBa#Z4oi'Y$SLd9/@ @ r?͜9E]]]sxw(m~oyMXCma6t+*ެ{;w"Kf]&r     %sϵ( f;#lڵs=ז/_G:D_J^}tm(((>i#Gmazܼ6'7םlސ:gYS8I#     lѣs=ֽ{wpVWWG۴W{w7СC;_ûpsy~jjrUUj茶SxO+(,Buf" Ou     @'xmŊ[n8 wF_|=vI'L'}ώ=Xiro~c/25
c'x&MP[nwyzi^z3Զ\/DuEP{tA*ei;n&oY1ӧOV\c=LY\7yvic&L`O=sׯ]ven]>z}GdS Ϸ'MU7M{mvǘ:u]s5zjq#]su]gӦMs{'?K/䂃%%%_ڶzkWO?YYY\N?tmj72Of6~Uͤm-  B(6C @ @ :3>z7^uZl;vGڟ'0`[S䗿uY^&Jn((x@Mo͘1|Զ`?P.ZmSNqW~󟻀iku"~4[nUqwX^췿(]Ծ? SK.]w,Sh7UVgT;gaΨ}W.b555Nz-뮻?tmTwߵ.jkk]p7>HT;d W @G
0TGsl@ @ @ r{(Ң|]RXX財GA)>e#)`&M^{Z*=۷.g|:|R9/W5{UO*CqD/rv
F)Q)..v_|O*jPeذa9d}^_Çw*ko2>ezsawt+  Ձ@ @ hO>eNoi-
\}ݦ`)S-EA?p6o<iRM}T,nf~i&iwu:vء_"z4SIYZ(3LCXҺzˎ:(ShJh'x=3чw:D!xA@ @ @ МI
h( ii˕eb4LNs$i$e괥h|'9ojʔ)LPm	--
)tE*oG&EyJ`_~Egb+K@G
Ց@ @ Heh2ҿ7L!Gm9,}n&)CNA$󋆛OzPBMghomήu3dt;MsukLƬ(!5ki*rPePi&L>wJ]z[VcPO7?KkⵏuV֊=     b0M69%W^i\OpS6hfmfG}s9bt$z 
h"n=MC=e(*^v͟$[ݣ	[[ӟ=5OF|!&e]xᅮM|\5i(R,%irp#TP*VѐEm	5ҥKMh(4yd{G|RKO8T4h{"9rۏH,-.-c$)      /!
h"mRl{QzZ\0f;D-JT\u$(H3<,XH-9@7KNYLK,qI&4S')zCm\Qz"a:yF#窊we]џ G @ @ @ ^I=zt`I,ӧO^{eFiX=#

Z))z{K/-Jt|eΠl-|R}
:iOtYߞd@6B @ @ pC<P
xn~ȡ}oIkڲeLs`tA1'OA! #       b^_`       S       @SC @ @ @ A T:|
@ @ @ `>믿n/B:Ge7So]wݵٱYϷY#go\l$-x7ް.JJJ֪s̞=~ݎ      D(yL2}[paϼyGs9׿mk_|Ѻ:-.]r림^~ek3ΰvkk޽]{t+vh(ӧOw矊@ @ @ =Ȁjl{ｷuuuvuC=d#Fۯz~A.q5xg[ouW_d]~i{SO٩0?544I's0+SF!Ua@ @ \d@rss|{Wk0eK}rJSJKKuuuফV2|M0>:Gq[eBĉmdɒvk;Qٰa-Zjkkmz@ @ @ v *	ʌҼ>fjRۤILs<;cOn~v0~_7Ns
u~ق'B*?eee5'0fRe
]y啦	'`^xww4i{ӐG}gn6׿es{qvy&5Un:]_?>}Yg~T=ܼWԩSγ;4: ɱ~ZUءq4Wڧ1]4\f]\;\@Ls/?zigyﾍx      о`-6|eYQGy)ۥ}˗/wy./'oo/eeen_|avf)E|>yU//:5suׁ[?T\\x2/|ᇦk/M^ܢo|mh*--7sVT?xL,ve쪫rԞ{^
U`_V\OETLmկ~e ~ZnViK.yRp޲֯_oGpA*N?tklٲe. w7~#Glܖ7      '_3vZSG!nR]IYGuT}7h<xF=.kmV%=]OE*eG_>#|~˷v[Sf9裛Eok	5_6sSP2:vm&ׁ
@+.Ш+H?SFuuʞA
@i޲'b7S˷fMj=~f)~ofS JmoJOnu*w`X
|)  M߾}/Bo&SfƀرcMTv{UFڡL/y(      Ю
ne(ѐ!6m6e)%2FC4,N7R@B_棋6(%2OPxћ _u,H2}ӏe< TZs(_|
0*0c(c/~rȔA!tYtZT/>]
z}榡[nˎRFxW6nʀUʾl)8pj) ,B)R     @Jyd4Ͱa\2cm%ܹnsm/
()sqASax?~hHcRpRC
@>c?thH	Ss=粇0IF˰R;|IʺRu Xײgʴ󋆻i'Evᇻ']k_+KdP9c&p>U{oo_!     N T+l~p9ҶD/Q	#k{|dϔ/}4I:^!to|R&2t͍1e7) 4'XtQPFkbre)i.V(eźUQ]ܫjn&͍Gg?ŪsС#|{Lx?ڗ        AuëbnM.ynZtӧ̛ŋ^sFnh%=M)@O@w^pYK<oys7) SEYq
<)sJs<iqB#~ӱZr-֔TTTd?OMO{F)wT4ZZu鉑:@ @ @ yk%.[&|VFx'Nt]4H1-)zꝎ?>rTρ  "M^\
(*IAȡx[pL+xzռJ*{G+pYc؊..x믷K!ʎR0LvPpϰ?_	ȣ'BFeJ̙3#7=     @;
J6ţaNGG+SO.SDl=LYzZ/^GG\}cov7HT]GGOtcg
÷:PfM
<FN2^RRbC1:ZCt\]{4xtѐSեl&Mz^SSc
<sCireuY6zhWy;M#է5XEO?ݖ,YU L-j2اrR6ּyꫯv秧Q@ @ @ :F!x)r袋ܐo.F_骫ke/if*i"m5N{wl?cD_5_PS6'|n"p	ҵ:P5$M68=.(HEnuh&.{.Ӑ:]Wz:ޥ^~\Ogw6e Eת2d=mSQpKD^nAA6ej)xzu/LKL/'W      ~Ygnc6I](kMDsWfO[b4IG++J_)G YAX8QpTNaiӦI5qxKLn)@y@A @ @ b]@u'@ @ @ @ 
C 9RS5       7
        R T*u@ @ @ @(@ @ @ @ 
Z_jG @ @ @  .	        V Tj}@ @ @ %         ZPv@ @ @ @         @j@֗@ @ @ @ ./@ _           Z_jG @ @ @  .	        V Tj}@ @ @ %         ZPv@ @ @ @         @j@֗@ @ @ @ ./@ _           Z_jG @ @ @  .	        V Tj}@ @ @ %         ZPv@ @ @ @         @j@֗@ @ @ @ ./С.        J ]b/K/"       ]^6-:4 USSc6lH       db.C  ֭[gƥKJX:|(@ @ @ hb,uK[rz2OUUUɪz@ @ @ @ LC3̂        @ T
P@ @ @ @` MC @ @ @ H R%       &P,x        P)@J@ @ @ @ M6Y@ @ @ @ RJ        @m       @
@ *@ @ @ @ 6	d;@ @ @ @ J*U"       l  ɂw        )  TD @ @ @ $@ j@ @ @ @ R @ *T        I &!       @ T
P@ @ @ @` MC @ @ @ H R%       &P,x        P)@J@ @ @ @ M6Y@ @ @ @ RJ        @m       @
rSPgʲB1    hhh:6oB=9  ][#<;4Jb%b9  $M@}<h_yR  @<֡|&ĳa  dꇴW^@ "ڻyH
   icu%D @ H~H3=}/Z   !О<VGXrL@ H_tth *}?Z        ,Pɒ@ @ @ @ @P,,D @ @ @ H dIR       @ @"       $K T$@ @ @ @ P T @ @ @ @ %@ *Yԃ        (@ *          ,IA @ @ @   B@ @ @ @ d	J$        

da!       @@%Kz@ @ @ @ @@ @ @ @ Y%I=        YX        ,Pɒ@ @ @ @ @P,,D @ @ @ H dIR       @ @"       $K T$@ @ @ @ P T @ @ @ @ %@ *Yԃ        (@ *          ,IA @ @ @   B@ @ @ @ d	J$        

da!       @@%Kz@ @ @ @ @@ @ @ @ Y%I=        YX  @	444Quu>-'f@ @ @ܞ@ @-gkTxGmܼ<4hly3wVҳWme UVVuQjm     
2RJ  $I`^im~Lkhx`Qҳ:+/e996hH+TeK6َ_@ @ H TR'  IXTiz%6x/`V.</,,ve= +^W
'r_#    V TXAG @ EfR),x|7|qY5zmm99Fy*(
      J]F @ ?x^^&(4infū,7i=9p<87    A T@ PIe}Mu)`d~XeKi蒝c~Fv{@ @ d
J&u!  D4xeZk7+(,j\qJ>_5ܮ˒U&&     JPԥn@ B
uk`Z`˩g&5+KJs9iҳ;jA[f-]*ڜetz\7l~Zd?9N @ N(i&Ntjruu={56f;c_~Lڂ  hu^`iSLAYXj4N+j1|-^XQ= GAk׮I&ӽ-fmfzy]ﭷ/0zUR>}Q^'ncQ  L k-4[$>.{Цajr-6~hD 4.t^uuZ2NY!RAuuerY`zꩦNdѵt8⋁듵Ҿc) ?x'0ԃ  @h>O<2`ݪUK.q\SJiKVUUe\p=C	p	 @
MJk[OdXOw][n]cgĈvmuEEE?@ @P,-_΍3[2?뮻Ύ?x|<w}=.0ս{w;*կ/+Ҷ~{+//3<ӆjlv-;Vy睶rJϷ.r֭=g	6o<]̂;묳@xes_kv>-`K@ Xŋs+--uU7n[ao)H婧reGn^}U)R)SSNu7:lرO}ӧ?}Sgynv袋EǞ5kk=]{6rH׬9sW_meeewMF~;б/RNN@ h@[-ۿoʷ~Woo|n6{G\ISYd[)u~wo8l>p?m{5\Op@~WX{wmٲe^A.Sim˗s=   ;KQGe't6hРF+3/]?x/2ݠSꪫ9D5j͜9>3X﨏*wubM_WmQ%_}TJROw+'?I>\qqQo+N+  - eN1RFe1QguդN?o7t{=sbOO<u~ӟ&=W&2Zhr)ɴ~-.P;
T)oAjrQ
a4A?_@Y	視0+ MJoAZZ򗿸 ?OM0N8>|}.u(WfniRȉe]Y`A(`J
tinaÆy=՟-6ߋWH@}CM~|M{ߜF^'e}i<N}m*joz=wi܆7%@Tcr5(<#;l
BqU0TQ*(Iw#U;0woȐ!e:N*zZm~*]*elQ@ @ _@74NA>eԏ{MZg4QP7\Nu(CJC4NYO
h؜̩fYRJS4Nԏ2T}`-}'_W@ '^UkWyj3e=~$N~Qm_W/eӸ!vo	@HcWGx~QCqV?~6~Pjnw*r鎝:i*C9|~5?[o=cn*MTQJD/@ @ TKr77epAK"2T~K:WPQ@Iך\>eHFn?s4ܮ5;i?[V
,_~ե*MT;H'}Ҭ"fΔ9nQz
jY UZXБLɓ'mp(?p	1u]\R!M*nkqu{W^i<MΝVi>)uΜکӦt
(M6-&wmΗl/BS܊]@ ԧм=DA#??<
(S_~6{39\_[2z4
x)I+Me*M(p_ПIanjs_ko;7	;Ұh?E4^Pr$2ڢ4w1Ǹ?|ͮm"?6۸:uE]kܘ1cWSgMA4Yr4tuiZ@N_Y^X￿ix	w.zꌿ   Կ|Q
>{7>ERZ n[PP8?@e]3,M'|Ҕ5~/~W>q4$O-XʜO[S-G7RtCO[
  )ׄfuv/G99VPuD
i%=nWRRGM!:299/|+I@,h͋<ğ+t:FN]yyٳqc{kMς=@ DR}QA}=
LiK%y2{h*Ȣy()(V+)V?(
`ioi{PN]}h~G #	'?ݲI5|bx<.2 *
  hXS  @{ys@Iu SdB4j6MA @ @ @ Ȁ@ @ +^wɀg  @:W'޹2	y<!         
@ @ @ @ 	:@ @ @ @ BR       @<PtX        Z ThB*@ @ @ @ '@ *@ @ @ @ B
MH        @a       @hP	 @ @ @ @  x:C @ @ @ -@ *4!          Ou        @&@ @ @ @ x@ @ @ @  ЄT        O T<!         
@ @ @ @ 	:@ @ @ @ BR       @<PtX        Z ThB*@ @ @ @ '@ *@ @ @ @ B
MH        @a       @hP	 @ @ @ @  x:C @ @ @ -@ *4!          Ou        rC	*(/	ZI@ @2lVi"  ]%P]M   $@9,  $`^B"6@ @ @ @ #@ *"       $  @ @ @ @ 
Ǿ        	@%$b@ @ @ @ 0/       @BP	 @ @ @ @  0z        P TB"6@ @ @ @ #@ *"       $  @ @ @ @ 
Ǿ        	@%$b@ @ @ @ 0/       @BP	 @ @ @ @  0z        P TB"6@ @ @ @ #@ *"       $  @ @ @ @ 
Ǿ        	@%$b@ @ @ @ 0/       @BP	 @ @ @ @  0z        P TB"6@ @ @ @ #@ *"       $  @ @ @ @ 
Ǿ        	@%$b@ @ @ @ 0/       @BP	 @ @ @ @  0z        P TB"6@ @ =6!ڮv}m[ZO
X    @+r[=#  @;\aCegXgiXd8hxm/[dWpdeeYqf4ف_@ @ H PI@ R!vjSਨ2
MukbNj~
/J{!CG[M۩.
     *ԏ  @+ZNNncRQq5sr.UU묡:e;mȪXª*@ @ T	*YE @ 	kIMEAbJ7.h]:żG @ @ %RJ  $O /[ʔU__d~׳kn>~܆    $K T$@ hl'=.77Ѫ*׺eEEݛhx^ܯljoX0ʢ+    :J-5#  Z@SSSe%MޣrC?o)5hfD    @lQC @ zmue$Z]֮m;eQ͙>()uuh^@Қ!  Оd@_lRKiin6~5٠_n6wuYm]@ :@7_|bg996`fWwY탊74lpT2t/Os+nn"[or!ы;=܁  7IDATSO=Վ?yѢE݆f'pBJE   '|, *y;Oy+ @WvvvRP?lɒ%v]wY>}F*A H@>}96h[Vګ釂@[w Tthf̘b?׿PB@ N#@ *IU~~~#7ް˗o{5(6Ims5sbԶvD h_X'B벳>-}[2];7yz+++>̝^jNs}3<vea:9P@ : $}j={O?զҪ!u~a/l7|Ӿ=駟*޽z.[[.R2ex-c&-}M?Gyr)nI'dk׮umvڼy\[Fa\r{.N;4εgԩxγccMo ~A @  x뭷\FAs9ǝi܍[=쫯{WO_~RL0U,X`.+Wڭj}|[g3gwYfG}ٶ{vEL,F2>]{o?{\jm-/N@ 8yqv`U*u[?O)ZCdzg\H+azZ)u&MdrW3W_}NYbWV~{uNga˧Εkށȉ65CmWIA2uGe3gl+   $~2iԹ;]~_wߵe˖YVV;p?)ۺ{έӧOw^zc\s5nv}*}|yhW\a;vEE;ΓO>nil>l¶@ .*@T>UVR#[laCm\4u)TPIwTQGeWA{s_af~Hr[Y
..<:u򊛟A<թ!x{ժ|Rgo-8 _@_@7G(M3ML(.֬Y#&]FSqrKn)RTTdt]po/Дխ[7RֶE
ZK@l^4Q=q
l)]YR~ѣGo֏9昸m+))Ѯ@ 66OցF^'e}ml]{JuYܬrr  $ye&&*ʈRJ#p
H|ͮäTss+Ӛo=OOS΢_~|9h?!   FOyvW7yMҾF't
Xi87vSQE]dQ2vi+r{o
vF /0yk6ɍ͙2a|SuiFU{?NR[n۸3oF!xI(1;eP!i~Vk'G4^ڽFߥB˸q[JU<K4.S@ @ hLmԯQ6ߪj&W^yM8CҥK]杂TʒKk@~z?~UP0KE Ut1QQF2Tږh# lMc})sܯUOo.BU)+LepvuWwLNIPSdԉR:]@HO,]7k=82 NRhaSKwtOjF)Cqs4Σ&ݻ\i
0' # S@
stCMsehPS4_RFUp;8*曻5lPzFeD"ږh# R@T+_7MȀ
h>m5ɸ7>	*zjS#$aÆ~Vyr4٧w)NN;6;Q]D=eOs'hBMeei?EA @ ""3rO6CVI}}ʜR IzO<an>LgN<D$ʴ3Ugk@?z}:tcOmrmrJT'@ (0a	N{?-0ү%u5s[O:	dyC6NFbX_onRgIs1E绔ou2Ο)h=T'ʿ{oFMޫ>e>+  zY{Q6#3Zj W)~M:?x]oK@w=O7t0VAiYKk_# xߓ	'?ݲIȫm
>1	y쫧<[`F *@ @ ګ3֕P}qr  t`^<!         
@ @ @ @ 	:@ @ @ @ BR       @<PtX        Z ThB*@ @ @ @ '@ *@ @ @ @ B
MH        @a       @hP	 @ @ @ @  x:C @ @ @ -@ *4!          Ou        @&@ @ @ @ x@ @ @ @  ЄT        O T<!         
@ @ @ @ 	:@ @ @ @ BR       @<PtX        Z ThB*@ @ @ @ '@ *@ @ @ @ B
MH        @a       @hP	 @ @ @ @  x:C @ @ @ -@ *4!          Ou        @&@ @ @ @ x@ @ @ @ @n:Ae:A+i"  C
<bS@ @+yD +}iC@ @t<E @ KH        a@c_@ @ @ @        @Pa@ @ @ @  Dl        F T=E @ @ @ H(@ *!          F}@ @ @ @ 
JH        a@c_@ @ @ @        @Pa@ @ @ @  Dl        F T=E @ @ @ H(@ *!          F}@ @ @ @ 
JH        a@c_@ @ @ @        @Pa@ @ @ @  Dl        F T=E @ @ @ H(@ *!          F}@ @ @ @ 
JH        a@c_@ @ @ @        @Pa@ @ @ @  Dl        F T=E @ @ @ H(@ *!          F}@ @ @ @ 
JH  @CCCRWWkcnzbV
@ @ Z)@ Y`yvMw˳AFX~AaV̟7z`%={5٦j-^Xf
PeeeY6`&     *ԉ  @,V[m^(ʹGq%=Yc^lMJ[ta@ @ TJ*u"  $+L֫w+^bOj#hb~QV\h"uz"=    a@d@ R$l&¢Gwjj{.EuqP"bEbEhDǆFc7bbX%cƈ
6%!*XT{sν.=2gf><fL0;~Cߍo[/aQ6P@P@楀ԼԵoP@*Hs/Ēuz!H*6cnz-Ӣf8mV΄	P@P@B j.|
(M!@D>mjlDx0aױZ	[-BJf̘TEe*
(
(PMjjڗ
(U dbɓ':mCZi[\ߵwi3nFMTjKP@P@PR׾P@P}a70Q˩ݲLs91aylqџ'_~1:L2/)@S(
(P=_UV`^o	w_뮻?Ə[nMۘݟ>}zK믿fƼuP@aK-]3tnFI$⫯N9cLJT@1,o	X'	:"M]EXk9kn0rХKZɓ'.,<sa-K,QxhW_F6t
{w\rɰ&c|gB_ȥ^W_}:wW
(s'T<y{O\_|1Nb_z׿5?lv.$"bޏ?>
(J+oΜqH^1*kZ	0̞=;&o])P(1QֻwSL!ڴiSwƌ+<?	h>hzǕywٳ|
(ToرcgO뮻rr6nܸp. tڵ-rP@]JbZ7Mn^j+@{lvmV[m%
(
TA BkJڷ8x/wqG<ov)P½;XoVvvGC	W^yeZl;ЫW^>7lpuׅwy'ZkSN9%	P@P#FT	q*7|3vN:)fq+c=Spӟ4~q݃>8L4)>;.PN;-㎹}3>TW]uU͐ձ
p-sNxbM|Aرc<w+6pz*VCp#1oA9UTmy(
(Tx<w޹6|1Aѡ/'$<H<jݺuČ*861|Z}"`Z>HEk?"(
(H8x7b@İχz(|\g̙1~̋kS8qbP)8Wzs~z)|b^yJ>aѡm۶E?_扺Kn]qԩSÚk >}4m
(PۜVXaz=qvmp')扢qEp='jT+F}O`N8!<䓱^m>>#,D(M)M|. Z*Hw\crΉ8qc[SO=5PI,LX^{m\6	ͩv(7=dnpM7CkQEC.0 k׬j/K{sQ@+0kά0aaĠ'VްSqpqocBY]c\SkQ}kZ4kQ3-0V@UVlFÇ:i	QmuIO[ј裏sō\K-IU+tgqF|Wl
(
(
i_R#Iʡڵk'*n3l!hÅ:(\tEudt4B9^{( *:§FDc'w^<"|Qr+'wԉ
(@aPøIj¥a[#ԄN75L_zPs[D^Έ,pwic~0lذxrU,h/r:$+beƬILqƯl6q>͚5+8+4sKuQ駟Wݘs,N!U
(
('O>17U֓'O7|s|5;
GE7s&dQD<vyr͚5\<϶NTy\v8\TZ4a5ֈsJqlQ\EDB	&u
(P_sd#_#nN\2O5PkBm-(*|'ve|PR3?WҰ#N0~+mh/ss"mLyǓ1	4[g'J)©ݻ:I/	l
$Ϗ}r
(PT`3[nٳQr^3hРxJz@S%8sL3X ?V=zsR}39sh>cW_ 	ߨN+C0Y\u9rxr\c;7xc|du9l
(
h<45n˗W,
	.V>k'DO<ߵkx0[XYgU+(p~" 5TIqR>M}rrr((r53x_P@(Gh6/I%G#0q!M
w-VQAt=uoxBJ+#al?0
>u{y}3EH#|b[뭷^6Jmܩ?'9hYTƳ_\,d/.5,
JQ@ؼDۇNtSԺW?<քQ5Y?j ͙_{ʑv)?Ә +ͯPraVw>OVde
(wM5jQ;硺g̘11HN 1esΉ<Z/ouO^$VvW	Fϲ#Gc
(N0>MB<P)|rҟ:)5x\
(@S-jԢP@X'!xy:.S@P@P@P@X bB;P@P@P@P@0q
(
(
(
(@Pځ
(
(
(
(@TP@P@P@P@*0P@P@P@P@t\
(
(
(
(PTńv
(
(
(
('` 2P@P@P@P@*&P@P@P@P@<<)
(
(
(
T,` U1(
(
(
(
	@LP@P@P@Pb	@P@P@P@P O *Oe
(
(
(
(@ULh
(
(
(
(yPy:.S@P@P@P@X bB;P@P@P@P@0q
(
(
(
(@Pځ
(
(
(
(@TP@P@P@P@*0P@P@P@P@t\
(
(
(
(PTńv
(
(
(
('` 2P@P@P@P@*&P@P@P@P@<<)
(
(
(
T,0_9sT| v
(
̍@S4(
(+ j̙;)
(-0cƌ&?y)
(@@Sl@M6-̞=@P@pTsv;
(
(hs7?~|׬Yкuвe}
(
(0(A5kV2eJhrtyջj
(
(P(0?y
%=ToP@P@P@P@M:o$P@P@P@P@PY+
(
(
(
T] v
(
(
(
(0jx_P@P@P@PPU'CP@P@P@P@TV
(
(
(
(U0:*
(
(
(
dW@P@P@P@TIPP@P@P@P +` 
(
(
(
(@Nj
(
(
(
(YP@P@P@P@.` UuR;T@P@P@P@
@e5
(
(
(
(Puڡ
(
(
(
(@V *}P@P@P@P@@UP@P@P@P@PY+
(
(
(
T]e{CP@P@:&M
8<?/<#{^Xkl?C	p@>/rc=+w{oF<_UVu=k֬puׅ6,t֭βyÇcƌ	;w?kYM>=4(͛7;Sr-7߄<1oL'N}a{gXfej/<aĈaUV	K믿y0eʔ0lV/Ә}ʾ_Wܟ.]n!~^+X;?û[J+vqmZ>vp֮y^{U9
(X
(
,|Q'fgQKgD	{[`h45飜}>zB_~ee~~{Xn;>p)O>Q뮻?uQ_lAXj\Ü=[o`g3qy1}92{b@vgvKӧO0z/";TjW^yeVXaбc?!eiy1֟3gNK5\̙3cxD:th,{hݺu\we!ǂ[osOZ?g|
,V@-o
( !Bcuc	*c:zxm};gώ8T#Dd9F5N;->>@rK8b%VziӦf͚%\iJbm饗\Qiv$L-K6:+yaw}p{衇ڊ(U?<({aW_}uhӦMQT''x>yx	?l 7m;mp>:=9䐰BUW]5PE߄iKj_ʻti
(!@)P@P@ U2҅/'|%[\3/{n:ujR&suT'Îo7'xb?^
T̘1#0m	;rps9>%/A)m]heOo1݇t@d+.8'Eӟe_.xK9Tl20 t!m-"+lV14ЩSpꩧ_Ws]vY/w^+_j/ţ*a
zz[򶡾oЮ]U?T@$! [c5q/Yg{\5O_}xע%K,V^yzQ'[_TPcj(5qvcP@/Ȥ
(
(0r!|Km+/Iҗ+"ޱr!ET_j1bA܆O_p׆;3zFhpEN8!%#XyRw^GBpGSBU@;_TӪؼ;i裏q\E4}=z}!an$Cxaި>'Ҏ8∢kbGtIq0!0
 <W>go1$ J{A%:s
fcXhM5 	vZgw&Lyă}b+7g!.xy?Og~3BXD|.Kq,J{
,P1+
(#C/Rc6
?яjW^y%VUPU\!!`Js0*UPE'-?<cA<PlalZ
[oXzFs^QmCL
"`hXjTĤ^x!Vd3 %:*yJ) `{AE5ly]vw!qT1/{\1,wf	il'U/z̃B¡b|c}b;^}zUX;A#Ճ!Rq!xd$%S˩rZ{kcOP@|w	2Q@P@V
xmDHė{?.jw(l<)\zs	Fx!ZQr}*&O'fb;,o߾N8@`BWQlzI!xT54pR_Hu];~9XcJg,bB50ВF%i㏋soufh#A_cNBllڧl?>'|rz~
إN=vª**݆QHG5CUmx
,P+
(|`sddw/;&lR׻ʈ_"Nr$(|f7޸vl~Cz閹U4&./G6ye"Ȇ^*%*ue3*gVĕJʮB ~:۵Fv/WE0ɱFF''aXgKA]QYĜ[iˆ^z={fWaeM7+JUS/Fc

=d_p
r^CCW>GUl_vW@g-Ǯ
(]9{7)U<쳵\7
4B** TѣG{g(5~!+;_{*GaU+o}.Ұ-BBZ^ݺuèI|50Z6`9s>:4/NJ6`4z!c#?Q	l}ibm&kf[b]QDCbN47pCIn=ڈ_c8$O6|b]2,0aJcr~$T׿tP|7q^/0|b4<W]ʯ5fL#B@jpZ'pTqR}
(8X8
(
4 A! FRƗx!2Iy_	&Кa=|eChbΦvۭ^E@i(B.*@LAo[|gpBQڶm'*Mr*

.*wX%>Ux5ߠA99UdQDC>|x*u%>ƝjΝ;U-A~V~O>AbEpS3+&3OUWT0܌i_<c1	ol%y|g7o&{FGin.>+#VD1F{8
[CKxS@p;<fbuXpr4JR*՜@)gP@P@JP//T,G:8̧0FSvYv]B )qm P'}>2?CĲJTEPS8uz]\!<À{ʱ?&0Ia>ZFcT//w% |Z	)
yj
(
(B!bg|cG_gP@o'AP@XxYՂ¾{
(PP効
(
(
(
(@Y
^Y\
(
(
(
(PTb
(
(
(
(PTY\
(
(
(
(PTb
(
(
(
(PTY\
(
(
(
(PTb
(
(
(
(PTY\
(
(
(
(PTb
(
(
(
(PTY\
(
(
(
(PTb
(
(
(
(PTY\
(
(
(
(PTb
(
(
(
(PTY\
(
(
(
(PTb
(
(
(
(PTY\
(
(
(
(PTb
(
(
(
(PTY\
(
(
(
(PTb
(
(
(
(PTY\
(
(
(
(PTb
(
(
(
(PTY\
(
(
(
(PY<
~    IENDB`logs.php                                                                                                                                                                                                                                                       5263          1711191352  plugins/mailchimp-for-woocommerce/admin/partials/tabs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <?php
/**
 * Logs page
 *
 * @package    MailChimp_WooCommerce
 * @subpackage MailChimp_WooCommerce/admin
 */

$files          = defined( 'WC_LOG_DIR' ) && is_dir( WC_LOG_DIR ) ? scandir( WC_LOG_DIR ) : array();
$logs           = array();
if ( ! empty( $files ) ) {
	foreach ( array_reverse( $files ) as $key => $value ) {
		if ( ! in_array( $value, array( '.', '..' ), true ) ) {
			if ( ! is_dir( $value ) && mailchimp_string_contains( $value, 'mailchimp_woocommerce' ) ) {
				$logs[ sanitize_title( $value ) ] = $value;
			}
		}
	}
}

$requested_log_file = get_site_transient( 'mailchimp-woocommerce-view-log-file' );
delete_site_transient( 'mailchimp-woocommerce-view-log-file' );

if ( empty( $requested_log_file ) ) {
	$requested_log_file = ! empty( $_REQUEST['log_file'] ) && check_admin_referer( 'mailchimp_woocommerce_options', 'mailchimp_woocommerce_nonce' ) ? esc_attr( sanitize_text_field( wp_unslash( $_REQUEST['log_file'] ) ) ) : false;
}
if ( ! empty( $requested_log_file ) && isset( $logs[ sanitize_title( $requested_log_file ) ] ) ) {
	$viewed_log = $logs[ sanitize_title( $requested_log_file ) ];
} elseif ( ! empty( $logs ) ) {
	$viewed_log = current( $logs );
} else {
	$viewed_log = null;
}
$handle = ! empty( $viewed_log ) ? substr( $viewed_log, 0, strlen( $viewed_log ) > 37 ? strlen( $viewed_log ) - 37 : strlen( $viewed_log ) - 4 ) : '';
?>


<fieldset>
	<legend class="screen-reader-text">
		<span><?php esc_html_e( 'Logging Preferences', 'mailchimp-for-woocommerce' ); ?></span>
	</legend>
	<div class="box" >
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-logging"><h3>
				<?php esc_html_e( 'Logging Preferences', 'mailchimp-for-woocommerce' ); ?>
			</h3>
		</label>
	</div>
	<div class="box box-half">
		<p>
			<?php
			esc_html_e(
				'Advanced troubleshooting can be conducted with the logging capability turned on.
            By default, it’s set to “standard” and you may toggle to either “debug” or “none” as needed.
            With standard logging, you can see basic information about the data submission to Mailchimp including any errors.
            “Debug” gives a much deeper insight that is useful to share with support if problems arise.',
				'mailchimp-for-woocommerce'
			);
			?>
		</p>
	</div>
	<div class="box box-half">
		<div class="log-select mailchimp-select-wrapper">
			<select id="mailchimp-log-pref" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_logging]" required>
				<?php $logging_preference = mailchimp_environment_variables()->logging; ?>
				<?php
				foreach ( array(
					'none'     => esc_html__( 'None', 'mailchimp-for-woocommerce' ),
					'debug'    => esc_html__( 'Debug', 'mailchimp-for-woocommerce' ),
					'standard' => esc_html__( 'Standard', 'mailchimp-for-woocommerce' ),
				) as $log_value => $log_label ) {
					echo '<option value="' . esc_attr( $log_value ) . '" ' . selected( $log_value === $logging_preference, true, false ) . '>' . esc_html( $log_label ) . '</option>';
				}
				?>
			</select>
		</div>
	</div>
</fieldset>
<fieldset>
	<div class="box fieldset-header" >
		<h3>
			<?php esc_html_e( 'Recent Logs', 'mailchimp-for-woocommerce' ); ?>
		</h3>
	</div>
	<div class="box log-file-actions">
		<input type="hidden" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_active_tab]" value="logs"/>
		<div class="mailchimp-select-wrapper view-log-select">
			<select id="log_file" name="log_file">
				<?php foreach ( $logs as $log_key => $log_file ) : ?>
					<option value="<?php echo esc_attr( $log_key ); ?>" <?php selected( sanitize_title( $viewed_log ), $log_key ); ?>>
						<?php echo esc_html( date_i18n( get_option( 'date_format' ) . ' ' . get_option( 'time_format' ), filemtime( WC_LOG_DIR . $log_file ) ) ); ?> -
						<?php echo esc_html( $log_file ); ?>
					</option>
				<?php endforeach; ?>
			</select>
		</div>
		<div id="log-actions">
			<?php if ( ! empty( $handle ) ) : ?>
				<a class="mc-woocommerce-log-button mc-woocommerce-copy-log-button" title="<?php esc_html_e( 'Copy Log to clipboard', 'mailchimp-for-woocommerce' ); ?>" href="#">
					<span class="dashicons dashicons-clipboard clipboard" style="transform: rotate(-45deg) translateY(2px) translateX(-2px);"></span>
					<span class="dashicons dashicons-yes yes"></span>
				</a>
				<a class="mc-woocommerce-log-button delete-log-button" title="<?php esc_html_e( 'Delete Log', 'mailchimp-for-woocommerce' ); ?>" href="<?php echo esc_url( wp_nonce_url( add_query_arg( array( 'handle' => sanitize_title( $viewed_log ) ), admin_url( 'admin.php?page=mailchimp-woocommerce&tab=logs&mc_action=remove_log' ) ), 'remove_log' ) ); ?>">
					<span class="dashicons dashicons-trash"></span>
				</a>
			<?php endif; ?>
		</div>
	</div>
</fieldset>
<div class="box">
	<?php if ( isset( $logs ) && isset( $viewed_log ) ) : ?>
		<div id="log-viewer">
			<span class="spinner" style="display:none;"></span>
			<textarea id="log-content" readonly>
				<?php echo esc_html( file_get_contents( WC_LOG_DIR . $viewed_log ) ); ?>
			</textarea>
		</div>
	<?php else : ?>
		<div class="updated woocommerce-message inline">
			<p>
				<?php esc_html_e( 'There are currently no logs to view.', 'woocommerce' ); ?>
			</p>
		</div>
	<?php endif; ?>
</div>
newsletter-settings.php                                                                                                                                                                                                                                        21553         1711191352  plugins/mailchimp-for-woocommerce/admin/partials/tabs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <?php
/**
 * Audience settings page
 *
 * @package    MailChimp_WooCommerce
 * @subpackage MailChimp_WooCommerce/admin
 */

if ( ! isset( $handler ) ) {
	$handler = MailChimp_WooCommerce_Admin::instance();
}
// if we don't have a valid api key we need to redirect back to the 'api_key' tab.
if ( ! $handler->validateApiKey() || ( ! isset( $mailchimp_lists ) ) ) {
	$mailchimp_lists = $handler->getMailChimpLists();
	if ( false === $mailchimp_lists ) {
		wp_safe_redirect( 'admin.php?page=mailchimp-woocommerce&tab=api_key&error_notice=missing_api_key' );
		exit;
	}
}

// if we don't have valid store information, we need to redirect back to the 'store_info' tab.
if ( ! $handler->hasValidStoreInfo() ) {
	wp_safe_redirect( 'admin.php?page=mailchimp-woocommerce&tab=store_info&error_notice=missing_store' );
	exit;
}

$list_is_configured = isset( $options['mailchimp_list'] ) && ( ! empty( $options['mailchimp_list'] ) ) && array_key_exists( $options['mailchimp_list'], ( isset( $mailchimp_lists ) ? $mailchimp_lists : array() ) );

if ( ! isset( $options ) ) {
	$options = array();
}
$newsletter_settings_error = $this->getData( 'errors.mailchimp_list', false );

$checkout_page_id = get_option('woocommerce_checkout_page_id');
?>

<?php if ( $newsletter_settings_error ) : ?>
	<div class="error notice is-dismissable">
		<p><?php echo wp_kses_post( $newsletter_settings_error ); ?></p>
	</div>
<?php endif; ?>

<input type="hidden" name="mailchimp_active_settings_tab" value="newsletter_settings"/>
<fieldset>
	<legend class="screen-reader-text">
		<span><?php esc_html_e( 'Audience Settings', 'mailchimp-for-woocommerce' ); ?></span>
	</legend>
	<?php if ( ! $list_is_configured ) : ?>
		<div class="box fieldset-header no-padding" >
			<h3><?php esc_html_e( 'Connect your store with an audience', 'mailchimp-for-woocommerce' ); ?></h3>
		</div>
		<div class="box" >
			<label for="<?php echo esc_attr( $this->plugin_name ); ?>-mailchimp-list-label">
				<strong><?php esc_html_e( 'Audience name', 'mailchimp-for-woocommerce' ); ?></strong>
			</label>
			<div class="mailchimp-select-wrapper">
				<select name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_list]" required <?php echo ( isset( $only_one_list ) && $only_one_list ) ? 'disabled' : ''; ?>>
					<?php if ( ! isset( $allow_new_list ) || true === $allow_new_list ) : ?>
						<option value="create_new"><?php esc_html_e( 'Create New Audience', 'mailchimp-for-woocommerce' ); ?></option>
					<?php endif ?>
					<?php if ( isset( $allow_new_list ) && false === $allow_new_list ) : ?>
						<option value="">-- <?php esc_html_e( 'Select Audience', 'mailchimp-for-woocommerce' ); ?> --</option>
					<?php endif; ?>
					<?php
					if ( isset( $mailchimp_lists ) && is_array( $mailchimp_lists ) ) {
						$selected_list = isset( $options['mailchimp_list'] ) ? $options['mailchimp_list'] : null;
						foreach ( $mailchimp_lists as $key => $value ) {
							echo '<option value="' . esc_attr( $key ) . '" ' . selected( ( (string) $key === (string) $selected_list || $only_one_list ), true, false ) . '>' . esc_html( $value ) . '</option>';
						}
					}
					?>
				</select>
			</div>
		</div>
	<?php else : ?>
		<div class="box fieldset-header no-padding" >
			<h3><?php esc_html_e( 'Your store is currently connected to:', 'mailchimp-for-woocommerce' ); ?> <?php echo esc_html( $handler->getListName() ); ?> </h3>
		</div>
		<div class="box" >
			<p><?php esc_html_e( 'To select another audience, you must first disconnect your store on the Settings tab.', 'mailchimp-for-woocommerce' ); ?></p>
		</div>
	<?php endif; ?>
	<div class="box fieldset-header" >
		<h3><?php esc_html_e( 'Audience Defaults', 'mailchimp-for-woocommerce' ); ?></h3>
	</div>
	<div class="box box-half">
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-campaign-from-name-label">
			<?php esc_html_e( 'From Name', 'mailchimp-for-woocommerce' ); ?>
			<span class="required-field-mark">*</span>
		</label>
		<input type="text" id="<?php echo esc_attr( $this->plugin_name ); ?>-campaign-from-name-label" name="<?php echo esc_attr( $this->plugin_name ); ?>[campaign_from_name]" value="<?php echo esc_html( ( isset( $options['campaign_from_name'] ) ? $options['campaign_from_name'] : get_option( 'blogname' ) ) ); ?>" required/>
	</div>
	<div class="box box-half">
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-campaign-from-email-label">
			<?php esc_html_e( 'From Email', 'mailchimp-for-woocommerce' ); ?>
			<span class="required-field-mark">*</span>
		</label>
		<input type="email" id="<?php echo esc_attr( $this->plugin_name ); ?>-campaign-from-email-label" name="<?php echo esc_attr( $this->plugin_name ); ?>[campaign_from_email]" value="<?php echo esc_html( ( isset( $options['campaign_from_email'] ) ? $options['campaign_from_email'] : get_option( 'admin_email' ) ) ); ?>" required/>
	</div>
	<div class="box box-half">
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-campaign-subject-label">
			<?php esc_html_e( 'Subject', 'mailchimp-for-woocommerce' ); ?>
			<span class="required-field-mark">*</span>
		</label>
		<input type="text" id="<?php echo esc_attr( $this->plugin_name ); ?>-campaign-subject-label" name="<?php echo esc_attr( $this->plugin_name ); ?>[campaign_subject]" value="<?php echo isset( $options['campaign_subject'] ) ? esc_html( $options['campaign_subject'] ) : esc_html__( 'Store Newsletter', 'mailchimp-for-woocommerce' ); ?>" required/>
	</div>
	<div class="box box-half">
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-campaign-language-label">
			<?php esc_html_e( 'Language', 'mailchimp-for-woocommerce' ); ?>
			<span class="required-field-mark">*</span>
		</label>
		<div class="mailchimp-select-wrapper">
			<select id="<?php echo esc_attr( $this->plugin_name ); ?>-campaign-language-label" name="<?php echo esc_attr( $this->plugin_name ); ?>[campaign_language]" required>
				<?php $selected_locale = isset( $options['store_locale'] ) && ! empty( $options['store_locale'] ) ? esc_html( $options['store_locale'] ) : get_locale(); ?> ?>
				<?php
				foreach ( MailChimp_Api_Locales::all() as $locale_key => $local_value ) {
					echo '<option value="' . esc_attr( $locale_key ) . '" ' . selected( $locale_key === $selected_locale, true, false ) . '>' . esc_html( $local_value ) . '</option>';
				}
				?>
			</select>    
		</div>
	</div>
	<div class="box">
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-campaign-permission-reminder-label">
			<?php esc_html_e( 'Permission reminder message', 'mailchimp-for-woocommerce' ); ?>
			<span class="required-field-mark">*</span>
		</label>
		<textarea
			rows="4"
			id="<?php echo esc_attr( $this->plugin_name ); ?>-campaign-permission-reminder-label"
			name="<?php echo esc_attr( $this->plugin_name ); ?>[campaign_permission_reminder]"
			required><?php echo isset( $options['campaign_permission_reminder'] ) ? esc_html( $options['campaign_permission_reminder'] ) : sprintf( /* translators: %s - plugin name. */esc_html__( 'You were subscribed to the newsletter from %s', 'mailchimp-for-woocommerce' ), esc_html( get_option( 'blogname' ) ) ); ?>
		</textarea>
	</div>
	<div class="optional-settings-content">
		<div class="box fieldset-header" >
			<h3><?php esc_html_e( 'Sync Settings', 'mailchimp-for-woocommerce' ); ?></h3>
		</div>
		<?php $enable_auto_subscribe = ( array_key_exists( 'mailchimp_auto_subscribe', $options ) && ! is_null( $options['mailchimp_auto_subscribe'] ) ) ? $options['mailchimp_auto_subscribe'] : '1'; ?>
		<?php if ( ! $list_is_configured ) : ?>
		<div class="box" >
			<label>
				<h4><?php esc_html_e( 'Initial Sync', 'mailchimp-for-woocommerce' ); ?></h4>
				<p><?php esc_html_e( 'WooCommerce does not keep a historical record of a customer\'s opt-in preferences. This plugin will add this functionality moving forward. Do you want to subscribe all customers to your Mailchimp Audience or only those moving forward?', 'mailchimp-for-woocommerce' ); ?></p>
			</label>
			<div class="box margin-large"></div>
			<label class="radio-label">
				<input type="radio" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_auto_subscribe]" value="1"<?php echo (bool) $enable_auto_subscribe ? ' checked="checked" ' : ''; ?>>
				<?php esc_html_e( 'Auto-subscribe all customers on the initial sync', 'mailchimp-for-woocommerce' ); ?>
				<br>
			</label>
			<label class="radio-label">
				<input type="radio" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_auto_subscribe]" value="0"<?php echo ! (bool) $enable_auto_subscribe ? ' checked="checked" ' : ''; ?>>
				<?php esc_html_e( 'Only sync customers in this store who are subscribed in my Mailchimp Audience', 'mailchimp-for-woocommerce' ); ?>
				<br/>
			</label>
		</div>
		<?php endif; ?>
		<div class="box" >
			<?php $ongoing_sync_subscribe = ( array_key_exists( 'mailchimp_ongoing_sync_status', $options ) && ! is_null( $options['mailchimp_ongoing_sync_status'] ) ) ? $options['mailchimp_ongoing_sync_status'] : '1'; ?>
			<label>
				<h4><?php esc_html_e( 'Ongoing Sync', 'mailchimp-for-woocommerce' ); ?></h4>
				<p><?php esc_html_e( 'To maximize your marketing efforts, we recommend syncing all customer data with Mailchimp. This way, you can send both marketing and transactional campaigns to your clients. You also have the option to only sync those who subscribe to your Audience at checkout or create an account on your store. Transactional messages like abandoned carts, order confirmations, etc., will not trigger if you decide to only send to subscribers.', 'mailchimp-for-woocommerce' ); ?></p>
			</label>
			<div class="box margin-large"></div>
			<label class="radio-label">
				<input type="radio" id="ongoing_sync_all" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_ongoing_sync_status]" value="1"<?php echo (bool) $ongoing_sync_subscribe ? ' checked="checked" ' : ''; ?>>
				<?php esc_html_e( 'Send all data to your Mailchimp Audience, including subscribers and transactional customers', 'mailchimp-for-woocommerce' ); ?>
				<br>
			</label>
			<label class="radio-label">
				<input type="radio" id="ongoing_sync_subscribed" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_ongoing_sync_status]" value="0"<?php echo ! (bool) $ongoing_sync_subscribe ? ' checked="checked" ' : ''; ?>>
				<?php esc_html_e( 'Only sync subscribers. No transactional customers will be sent to your Mailchimp Audience', 'mailchimp-for-woocommerce' ); ?>
				<br/>
			</label>
		</div>
		<div class="box" >
			<?php $mailchimp_cart_tracking = ( array_key_exists( 'mailchimp_cart_tracking', $options ) && ! is_null( $options['mailchimp_cart_tracking'] ) ) ? $options['mailchimp_cart_tracking'] : 'all'; ?>
			<label>
				<h4><?php esc_html_e( 'Cart Tracking', 'mailchimp-for-woocommerce' ); ?></h4>
				<p><?php esc_html_e( 'You may disable this if you are not using Abandoned Cart Automations.', 'mailchimp-for-woocommerce' ); ?></p>
			</label>
			<div class="box margin-large"></div>
			<label class="radio-label">
				<input type="radio" id="cart_track_all" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_cart_tracking]" value="all"<?php echo 'all' === $mailchimp_cart_tracking ? ' checked="checked" ' : ''; ?>>
				<?php esc_html_e( 'Track carts for all customers', 'mailchimp-for-woocommerce' ); ?>
				<br>
			</label>
			<label class="radio-label">
				<input type="radio" id="cart_track_subscribed" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_cart_tracking]" value="subscribed"<?php echo 'subscribed' === $mailchimp_cart_tracking ? ' checked="checked" ' : ''; ?>>
				<?php esc_html_e( 'Only track carts for subscribed customers', 'mailchimp-for-woocommerce' ); ?>
				<br/>
			</label>
			<label class="radio-label">
				<input type="radio" id="cart_track_none" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_cart_tracking]" value="disabled"<?php echo 'disabled' === $mailchimp_cart_tracking ? ' checked="checked" ' : ''; ?>>
				<?php esc_html_e( 'Disable cart tracking', 'mailchimp-for-woocommerce' ); ?>
				<br/>
			</label>
		</div>
		<div class="box fieldset-header margin-large" >
			<h3><?php esc_html_e( 'Opt-In Checkbox Settings', 'mailchimp-for-woocommerce' ); ?></h3>
		</div>        
								<?php if ( has_block( 'woocommerce/checkout', get_post($checkout_page_id ) ) ) : ?>								
        <div class="box">
            <h4><?= sprintf(__('Checkout page is using Woocommerce blocks. Settings are available within the block options while editing the <a href="%s">checkout page</a>.', 'mailchimp-for-woocommerce'), get_the_permalink($checkout_page_id) ) ?></h4>
        </div>
        <?php else: ?>
		<div class="box box-half">
			<label>
				<h4><?php esc_html_e( 'Checkbox display options', 'mailchimp-for-woocommerce' ); ?></h4>
				<p><?php esc_html_e( 'Choose how you want the opt-in to your newsletter checkbox to render at checkout', 'mailchimp-for-woocommerce' ); ?> </p>
			</label>
			<?php $checkbox_default_settings = ( array_key_exists( 'mailchimp_checkbox_defaults', $options ) && ! is_null( $options['mailchimp_checkbox_defaults'] ) ) ? $options['mailchimp_checkbox_defaults'] : 'check'; ?>
			<div class="box margin-large"></div>
			<label class="radio-label">
				<input type="radio" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_checkbox_defaults]" value="check"<?php echo 'check' === $checkbox_default_settings ? ' checked="checked" ' : ''; ?>>
				<?php esc_html_e( 'Visible, checked by default', 'mailchimp-for-woocommerce' ); ?>
				<br>
			</label>
			<label class="radio-label">
				<input type="radio" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_checkbox_defaults]" value="uncheck"<?php echo 'uncheck' === $checkbox_default_settings ? ' checked="checked" ' : ''; ?>>
				<?php esc_html_e( 'Visible, unchecked by default', 'mailchimp-for-woocommerce' ); ?>
				<br/>
			</label>
			<label class="radio-label">
				<input type="radio" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_checkbox_defaults]" value="hide"<?php echo 'hide' === $checkbox_default_settings ? ' checked="checked" ' : ''; ?>>
				<?php esc_html_e( 'Hidden, unchecked by default', 'mailchimp-for-woocommerce' ); ?>
				<br/>
			</label>
			<div class="box margin-large"></div>
			<label for="<?php echo esc_attr( $this->plugin_name ); ?>-newsletter-checkbox-label">
				<h4><?php esc_html_e( 'Message for the opt-in checkbox', 'mailchimp-for-woocommerce' ); ?></h4>
				<p><?php esc_html_e( 'The call-to-action text that prompts customers to subscribe to your newsletter at checkout.', 'mailchimp-for-woocommerce' ); ?> </p>
			</label>
			<div class="box"></div>
			<textarea rows="3" id="<?php echo esc_attr( $this->plugin_name ); ?>-newsletter-checkbox-label" name="<?php echo esc_attr( $this->plugin_name ); ?>[newsletter_label]"><?php echo isset( $options['newsletter_label'] ) ? esc_html( $options['newsletter_label'] ) : ''; ?></textarea>
			<p class="description"><?php echo esc_html( __( 'HTML tags allowed: <a href="" target="" title=""></a> and <br>', 'mailchimp-for-woocommerce' ) ); ?><br/><?php echo esc_html( __( 'Leave it blank to use language translation files (.po / .mo), translating the string: "Subscribe to our newsletter".', 'mailchimp-for-woocommerce' ) ); ?></p>
		</div>
		<div class="box box-half">
			<h4><?php esc_html_e( 'Shop checkout preview', 'mailchimp-for-woocommerce' ); ?></h4>
			<p><?php echo esc_html( __( 'The box below is a preview of your checkout page. Styles and fields may not be exact.', 'mailchimp-for-woocommerce' ) ); ?></p>
			<div class="box margin-large"></div>
			<div class="settings-sample-frame">
				<div class="woocommerce-billing-fields__field-wrapper">
					<p class="form-row address-field validate-required validate-postcode form-row-wide" id="billing_postcode_field" data-priority="65" data-o_class="form-row form-row-wide address-field validate-required validate-postcode">
						<label for="billing_postcode" class="">Postcode / ZIP&nbsp;</label><span class="woocommerce-input-wrapper"><input type="text" class="input-text " name="billing_postcode" id="billing_postcode" placeholder="" value="" autocomplete="postal-code"></span>
					</p>
					<p class="form-row address-field validate-required form-row-wide" id="billing_city_field" data-priority="70" data-o_class="form-row form-row-wide address-field validate-required">
						<label for="billing_city" class="">Town / City&nbsp;</label><span class="woocommerce-input-wrapper"><input type="text" class="input-text " name="billing_city" id="billing_city" placeholder="" value="" autocomplete="address-level2"></span>
					</p>
					<p class="form-row address-field validate-state form-row-wide" id="billing_state_field" style="display: none" data-o_class="form-row form-row-wide address-field validate-state">
						<label for="billing_state" class="">State / County&nbsp;<span class="optional">(optional)</span></label><span class="woocommerce-input-wrapper"><input type="hidden" id="billing_state" name="billing_state" placeholder="" data-input-classes="" class="hidden"></span>
					</p>
					<p class="form-row form-row-wide validate-required validate-email" id="billing_email_field" data-priority="110">
						<label for="billing_email" class="">Email address&nbsp;</label><span class="woocommerce-input-wrapper"><input type="email" class="input-text " name="billing_email" id="billing_email" placeholder="" value="" autocomplete="email"></span>
					</p>
				</div>
				<?php
					$label = $this->getOption( 'newsletter_label' );
				if ( '' === $label || is_null($label) ) {
					$label = __( 'Subscribe to our newsletter', 'mailchimp-for-woocommerce' );
                }
				?>
				<fieldset>
					<p class="form-row form-row-wide mailchimp-newsletter">
						<input class="woocommerce-form__input woocommerce-form__input-checkbox input-checkbox" id="mailchimp_woocommerce_newsletter" type="checkbox" name="mailchimp_woocommerce_newsletter" value="1" checked="checked">
						<label id="preview-label" for="mailchimp_woocommerce_newsletter" class="inline"><?php echo wp_kses_post( $label ); ?> </label>
					</p>
				</fieldset>
				<div class="overlay"></div>
			</div>
		</div>
        <?php endif; // checkout page is using blocks ?>
		<div class="box fieldset-header" >
			<h3><?php esc_html_e( 'Opt-In checkbox position', 'mailchimp-for-woocommerce' ); ?></h3>
		</div>
		<div class="box box-half">
			<label for="<?php echo esc_attr( $this->plugin_name ); ?>-newsletter-checkbox-action">
				<p>
				<?php
				echo sprintf(
					/* translators: %s - Woocommerce Actions documentation URL. */                    wp_kses(
						__( 'To change the position of the opt-in <br/>checkbox at checkout, input one of the <a href=%s target=_blank>available WooCommerce form actions</a>.', 'mailchimp-for-woocommerce' ),
						array(
							'a' => array(
								'href'   => array(),
								'target' => '_blank',
							),
						)
					),
					esc_url( 'https://woocommerce.com/document/tutorial-customising-checkout-fields-using-actions-and-filters/' )
				);
				?>
				</p>
			</label>
		</div>
		<div class="box box-half">
			<input type="text" id="<?php echo esc_attr( $this->plugin_name ); ?>-newsletter-checkbox-action" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_checkbox_action]" value="<?php echo isset( $options['mailchimp_checkbox_action'] ) ? esc_html( $options['mailchimp_checkbox_action'] ) : 'woocommerce_after_checkout_billing_form'; ?>" />
			<p class="description"><?php esc_html_e( 'Enter a WooCommerce form action', 'mailchimp-for-woocommerce' ); ?></p>
		</div>
		<div class="box fieldset-header" >
			<h3><?php esc_html_e( 'Tags', 'mailchimp-for-woocommerce' ); ?></h3>
		</div>
		<div class="box box-half" >
			<label for="<?php echo esc_attr( $this->plugin_name ); ?>-user-tags">
				<p><?php esc_html_e( 'Add a comma-separated list of tags to apply to a subscriber in Mailchimp after a transaction occurs', 'mailchimp-for-woocommerce' ); ?></p>
			</label>
		</div>
		<div class="box box-half" >
			<input type="text" id="<?php echo esc_attr( $this->plugin_name ); ?>-user-tags" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_user_tags]" value="<?php echo isset( $options['mailchimp_user_tags'] ) ? esc_html( str_replace( ',', ', ', $options['mailchimp_user_tags'] ) ) : ''; ?>" />
		</div>
		<div class="box fieldset-header" >
			<h3><?php esc_html_e( 'Product Image Size', 'mailchimp-for-woocommerce' ); ?></h3>
		</div>
		<div class="box box-half">
			<label for="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_product_image_key]">
				<p><?php esc_html_e( 'Define the product image size used by abandoned carts, order notifications, and product recommendations.', 'mailchimp-for-woocommerce' ); ?></p>
			</label>
		</div>
		<div class="box box-half" >
			<div class="mailchimp-select-wrapper">
				<select name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_product_image_key]">
					<?php
					$enable_auto_subscribe = ( array_key_exists( 'mailchimp_product_image_key', $options ) && ! is_null( $options['mailchimp_product_image_key'] ) ) ? $options['mailchimp_product_image_key'] : 'medium';
					foreach ( mailchimp_woocommerce_get_all_image_sizes_list() as $key => $value ) {
						echo '<option value="' . esc_attr( $key ) . '" ' . selected( $key === $enable_auto_subscribe, true, false ) . '>' . esc_html( $value ) . '</option>';
					}
					?>
				</select>
			</div>
		</div>
	</div>
</fieldset>notices.php                                                                                                                                                                                                                                                    1231          1711191352  plugins/mailchimp-for-woocommerce/admin/partials/tabs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <?php
/**
 * Notices
 *
 * @package    MailChimp_WooCommerce
 * @subpackage MailChimp_WooCommerce/admin
 */

?>
<?php if ( isset( $_GET['error_notice'] ) ) : ?>
<div class="error notice is-dismissable">
	<?php
	switch ( $_GET['error_notice'] ) {
		case 'missing_api_key':
			esc_html_e( 'Mailchimp says: You must enter in a valid API key.', 'mailchimp-for-woocommerce' );
			break;
		case 'missing_list':
			esc_html_e( 'Mailchimp says: You must select a marketing audience.', 'mailchimp-for-woocommerce' );
			break;
		case 'missing_store':
			esc_html_e( 'Mailchimp says: Sorry you must set up your store before you proceed!', 'mailchimp-for-woocommerce' );
			break;
		case 'not_ready_for_sync':
			esc_html_e( 'Mailchimp says: You are not fully ready to run the Store Sync, please verify your settings before proceeding.', 'mailchimp-for-woocommerce' );
			break;
		default:
	}
	?>
</div>
<?php endif; ?>

<?php if ( isset( $_GET['success_notice'] ) ) : ?>
	<div class="success notice is-dismissable">
		<?php
		switch ( $_GET['error_notice'] ) {
			case 're-sync-started':
				esc_html_e( 'Mailchimp says: Your re-sync has been started!', 'mailchimp-for-woocommerce' );
				break;
			default:
		}
		?>
	</div>
<?php endif; ?>
plugin-settings.php                                                                                                                                                                                                                                            3708          1711191352  plugins/mailchimp-for-woocommerce/admin/partials/tabs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <?php
/**
 * Plugin settings page
 *
 * @package    MailChimp_WooCommerce
 * @subpackage MailChimp_WooCommerce/admin
 */

?>
<input type="hidden" name="mailchimp_active_settings_tab" value="plugin_settings"/>

<?php
$store_id = mailchimp_get_store_id();

$opt           = get_option( 'mailchimp-woocommerce-comm.opt' );
$tower_opt     = get_option( 'mailchimp-woocommerce-tower.opt' );
$admin_email   = mailchimp_get_option( 'admin_email', get_option( 'admin_email' ) );
$comm_enabled  = null !== $opt ? $opt : '0';
$tower_enabled = null !== $tower_opt ? $tower_opt : '0';
?>
<fieldset>
	<legend class="screen-reader-text">
		<span><?php esc_html_e( 'Plugin Settings', 'mailchimp-for-woocommerce' ); ?></span>
	</legend>
	<div class="box ">
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-tower-support-checkbox-label">
			<h4><?php esc_html_e( 'Remote Diagnostics', 'mailchimp-for-woocommerce' ); ?></h4>
			<p>
				<?php
				/* translators: Placeholders %1$s - admin email address */
				$remote_diagnostics = sprintf(
					__( 'Remote diagnostics for the Mailchimp for WooCommerce plugin allows our development team to troubleshoot syncing issues.', 'mailchimp-for-woocommerce' ),
					esc_html( $admin_email )
				);
				esc_html_e( $remote_diagnostics );
				?>
			</p>
		</label>
		<br/>
		<fieldset>
			<p id="mc-comm-wrapper">
				<label class="el-switch el-checkbox-green">
					<input id="tower_box_switch" type="checkbox" name="switch" value="1"<?php echo '1' === $tower_enabled ? ' checked="checked" ' : ''; ?>>
					<span><?php esc_html_e( 'Enable support', 'mailchimp-for-woocommerce' ); ?></span>
					<br/>
					<span class="mc-tower-save" id="mc-tower-save">Saved</span>
				</label>
			</p>
		</fieldset>
	</div>
	<div class="box ">
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-newsletter-checkbox-label">
			<h4><?php esc_html_e( 'Communication', 'mailchimp-for-woocommerce' ); ?></h4>
			<p>
				<?php
				/* translators: Placeholders %1$s - admin email address */
				$comms = sprintf(
					__( 'Occasionally we may send you information about how-to\'s, updates, and other news to the store\'s admin email address. Choose whether or not you want to receive these messages at %1$s ', 'mailchimp-for-woocommerce' ),
					$admin_email
				);
				esc_html_e( $comms );
				?>
			</p>
		</label>
		<br/>
		<fieldset>    
			<p id="mc-comm-wrapper">
				<label class="el-switch el-checkbox-green">
					<input id="comm_box_switch" type="checkbox" name="switch" value="1"<?php echo '1' === $comm_enabled ? ' checked="checked" ' : ''; ?>>
					<span><?php esc_html_e( 'Opt-in to our newsletter', 'mailchimp-for-woocommerce' ); ?></span>
					<br/>
					<span class="mc-comm-save" id="mc-comm-save">Saved</span>
				</label>
			</p>
		</fieldset>
	</div>
	<div class="box"></div>
	<div class="box">
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-newsletter-checkbox-label">
			<h4><?php esc_html_e( 'Disconnect Store', 'mailchimp-for-woocommerce' ); ?></h4>
			<p>
				<?php
				$disconnect_store = sprintf(
					__( 'Disconnect your store from Mailchimp. This action will remove all entries from the database but you will be able to reconnect anytime.', 'mailchimp-for-woocommerce' ),
					$admin_email
				);
				esc_html_e( $disconnect_store );
				?>
			</p>
		</label>
		<p>
			<?php wp_nonce_field( '_disconnect-nonce-' . $store_id, '_disconnect-nonce' ); ?>
			<a id="mailchimp_woocommerce_disconnect" class="mc-woocommerce-disconnect-button button button-default tab-content-submit">
				<?php esc_html_e( 'Disconnect Store', 'mailchimp-for-woocommerce' ); ?>
			</a>
		</p>
	</div>
	<div class="box box-half comm_box_wrapper">
	</div>
</fieldset>
store-info.php                                                                                                                                                                                                                                                 9956          1711191352  plugins/mailchimp-for-woocommerce/admin/partials/tabs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <?php
/**
 * Store info page
 *
 * @package    MailChimp_WooCommerce
 * @subpackage MailChimp_WooCommerce/admin
 */

?>
<?php

$allowed_html = array( 'br' => array() );
$handler = MailChimp_WooCommerce_Admin::connect();

// if we don't have a valid api key we need to redirect back to the 'api_key' tab.
if ( ! $handler->validateApiKey() ) {
	wp_safe_redirect( 'admin.php?page=mailchimp-woocommerce&tab=api_key&error_notice=missing_api_key' );
	exit;
}
if ( ! isset( $options ) ) {
	$options = array();
}
?>
<fieldset class="">  
	<input type="hidden" name="mailchimp_active_settings_tab" value="store_info"/>
	<?php
		$current_currency      = isset( $options['store_currency_code'] ) ? $options['store_currency_code'] : get_woocommerce_currency();
		$current_currency_data = MailChimp_WooCommerce_CurrencyCodes::getCurrency( $current_currency );
	?>
	<input type="hidden" value="<?php echo ( esc_html( isset( $current_currency_data ) ? $current_currency . ' | ' . $current_currency_data['name'] : $current_currency ) ); ?>" disabled/>
	<input type="hidden" value="<?php echo esc_attr( mailchimp_get_timezone( true ) ); ?>" disabled/>
	<legend class="screen-reader-text">
		<span><?php esc_html_e( 'Store Settings', 'mailchimp-for-woocommerce' ); ?></span>
	</legend>
	<div class="box box-half" >
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-store-name-label">
			<span> <?php esc_html_e( 'Name', 'mailchimp-for-woocommerce' ); ?></span>
			<span class="required-field-mark">*</span>
		</label>
		<input required type="text" id="<?php echo esc_attr( $this->plugin_name ); ?>-store-name-label" name="<?php echo esc_attr( $this->plugin_name ); ?>[store_name]" value="<?php echo esc_html( ( isset( $options['store_name'] ) ? $options['store_name'] : get_option( 'blogname' ) ) ); ?>" />
	</div>
	<div class="box box-half" >
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-admin-email-label">
				<span> <?php esc_html_e( 'Email', 'mailchimp-for-woocommerce' ); ?></span>
				<span class="required-field-mark">*</span>
		</label>
		<input required type="email" id="<?php echo esc_attr( $this->plugin_name ); ?>-admin-email-label" name="<?php echo esc_attr( $this->plugin_name ); ?>[admin_email]" value="<?php echo esc_html( ( isset( $options['admin_email'] ) ? $options['admin_email'] : get_option( 'admin_email' ) ) ); ?>" />
	</div>
	<div class="box box-half" >
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-store-address-label">
				<span> <?php esc_html_e( 'Street address', 'mailchimp-for-woocommerce' ); ?></span>
				<span class="required-field-mark">*</span>
		</label>
		<input required type="text" id="<?php echo esc_attr( $this->plugin_name ); ?>-store-address-label" name="<?php echo esc_attr( $this->plugin_name ); ?>[store_street]" value="<?php echo esc_html( ( isset( $options['store_street'] ) ? $options['store_street'] : WC()->countries->get_base_address() ) ); ?>" />
	</div>
	<div class="box box-half" >
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-store-city-label">
				<span> <?php esc_html_e( 'City', 'mailchimp-for-woocommerce' ); ?></span>
				<span class="required-field-mark">*</span>
		</label>
		<input required type="text" id="<?php echo esc_attr( $this->plugin_name ); ?>-store-city-label" name="<?php echo esc_attr( $this->plugin_name ); ?>[store_city]" value="<?php echo esc_html( ( isset( $options['store_city'] ) ? $options['store_city'] : WC()->countries->get_base_city() ) ); ?>" />
	</div>
	<div class="box box-half" >
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-store-state-label">
				<span> <?php esc_html_e( 'State', 'mailchimp-for-woocommerce' ); ?></span>
				<span class="required-field-mark">*</span>
		</label>
		<input required type="text" id="<?php echo esc_attr( $this->plugin_name ); ?>-store-state-label" name="<?php echo esc_attr( $this->plugin_name ); ?>[store_state]" value="<?php echo esc_html( ( isset( $options['store_state'] ) ? $options['store_state'] : WC()->countries->get_base_state() ) ); ?>" />
	</div>
	<div class="box box-half" >
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-store-postal-code-label">
				<span> <?php esc_html_e( 'Postal Code', 'mailchimp-for-woocommerce' ); ?></span>
				<span class="required-field-mark">*</span>
		</label>
		<input required type="text" id="<?php echo esc_attr( $this->plugin_name ); ?>-store-postal-code-label" name="<?php echo esc_attr( $this->plugin_name ); ?>[store_postal_code]" value="<?php echo esc_html( ( isset( $options['store_postal_code'] ) ? $options['store_postal_code'] : WC()->countries->get_base_postcode() ) ); ?>" />
	</div>
	<div class="box box-half" >
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-store-country-label">
				<span> <?php esc_html_e( 'Country', 'mailchimp-for-woocommerce' ); ?></span>
				<span class="required-field-mark">*</span>
		</label>
		<?php
		global $woocommerce;
			$countries_obj = new WC_Countries();
			$countries     = $countries_obj->__get( 'countries' );
		?>
		<div class="mailchimp-select-wrapper">
			<?php
			woocommerce_form_field(
				$this->plugin_name . '[store_country]',
				array(
					'type'        => 'select',
					'class'       => array( 'chzn-drop' ),
					'placeholder' => __( 'Select a Country' ),
					'options'     => $countries,
					'required'    => true,
				),
				isset( $options['store_country'] ) ? $options['store_country'] : WC()->countries->get_base_country()
			);
			?>
		</div>
	</div>
	<div class="box box-half" >
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-store-phone-label">
				<span> <?php esc_html_e( 'Phone Number', 'mailchimp-for-woocommerce' ); ?></span>
				<span class="required-field-mark">*</span>
		</label>
		<input required type="text" id="<?php echo esc_attr( $this->plugin_name ); ?>-store-phone-label" name="<?php echo esc_attr( $this->plugin_name ); ?>[store_phone]" value="<?php echo esc_html( ( isset( $options['store_phone'] ) ? $options['store_phone'] : '' ) ); ?>" />
	</div>
	<div class="box fieldset-header" >
		<h3 style="padding-top: 1em;"><?php esc_html_e( 'Locale Settings', 'mailchimp-for-woocommerce' ); ?></h3>
	</div>
	<div class="box" >
		<p>
			<?php
				echo wp_kses_post(sprintf(
				/* translators: %1$s - The Currency name and format (ex: USD | US Dollar) %2$s - Timezone name or offset (ex: America/New_York or UTC-4:00) %3$s and %5$s- <a> tag open %4$s - </a> tag close*/
					__( 'We\'ve detected that your WooCommerce store\'s currency is <b>%1$s</b> (%3$schange%4$s), and the WordPress timezone is <b>%2$s</b> (%5$schange%4$s).', 'mailchimp-for-woocommerce' ),
					esc_attr( isset( $current_currency_data ) ? $current_currency . ' | ' . $current_currency_data['name'] : $current_currency ),
					mailchimp_get_timezone( true ) ,
					'<a href="' . admin_url( 'admin.php?page=wc-settings#woocommerce_currency' ) . '" title="' . __( 'General Settings' ) . '">',
					'</a>',
					'<a href="' . admin_url( 'options-general.php#timezone_string' ) . '" title="' . __( 'WooCommerce Settings' ) . '">'
				));
				?>
		</p>
	</div>
	<div class="box box-half" >
		<label for="<?php echo esc_attr( $this->plugin_name ); ?>-store-locale-label">
			<span><?php esc_html_e( 'Locale', 'mailchimp-for-woocommerce' ); ?></span>
			<span class="required-field-mark">*</span>
			<p><?php esc_html_e( 'Please apply your locale settings. If you\'re unsure about these, use the defaults.', 'mailchimp-for-woocommerce' ); ?></p>
		</label>
	</div>
	<div class="box box-half" >
		<div class="mailchimp-select-wrapper">
			<select name="<?php echo esc_attr( $this->plugin_name ); ?>[store_locale]" required>
				<option disabled selected value=""><?php esc_html_e( "Select store's locale", 'mailchimp-for-woocommerce' ); ?></option>
				<?php
				$selected_locale = isset( $options['store_locale'] ) && ! empty( $options['store_locale'] ) ? $options['store_locale'] : get_locale();
				?>
				<?php foreach ( MailChimp_Api_Locales::all() as $locale_key => $local_value ) : ?>
					<option value="<?php echo esc_attr( $locale_key ) . '" ' . selected( $locale_key === $selected_locale, true, false ); ?>"> <?php esc_html_e( $local_value ); ?> </option>;
				<?php endforeach; ?>
			</select>
		</div>
	</div>
	<div class="box" >
	</div>
	<?php
		/** Only admins should see mailchimp_permission_cap radio buttons */
	if ( current_user_can( 'manage_options' ) ) :
		?>
		<div class="box fieldset-header" >
			<h3 style="padding-top: 1em;"><?php esc_html_e( 'Permission Settings', 'mailchimp-for-woocommerce' ); ?></h3>
		</div>
		<div class="optional-settings-content">
			<div class="box box-half margin-large">
				<label>
					<h4><?php esc_html_e( 'Plugin Permission Level', 'mailchimp-for-woocommerce' ); ?></h4>
					<p><?php esc_html_e( 'Select the minimum permission capability to manage Mailchimp for Woocommerce options', 'mailchimp-for-woocommerce' ); ?> </p>
				</label>
			</div>
			<div class="box box-half margin-large">
				<?php $checkbox_default_settings = ( array_key_exists( 'mailchimp_permission_cap', $options ) && ! is_null( $options['mailchimp_permission_cap'] ) ) ? $options['mailchimp_permission_cap'] : 'manage_options'; ?>
				<label class="radio-label">
					<input type="radio" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_permission_cap]" value="manage_options"<?php echo 'manage_options' === $checkbox_default_settings ? ' checked="checked" ' : ''; ?>>
					<?php esc_html_e( 'Administrators Only', 'mailchimp-for-woocommerce' ); ?>
					<br>
				</label>
				<label class="radio-label">
					<input type="radio" name="<?php echo esc_attr( $this->plugin_name ); ?>[mailchimp_permission_cap]" value="manage_woocommerce"<?php echo 'manage_woocommerce' === $checkbox_default_settings ? ' checked="checked" ' : ''; ?>>
					<?php esc_html_e( 'Shop Managers and Administrators', 'mailchimp-for-woocommerce' ); ?>
					<br/>
				</label>
			</div>
		</div>
	<?php endif; ?>
</fieldset>
store-sync.php                                                                                                                                                                                                                                                 12358         1711191352  plugins/mailchimp-for-woocommerce/admin/partials/tabs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <?php
/**
 * Store sync page
 *
 * @package    MailChimp_WooCommerce
 * @subpackage MailChimp_WooCommerce/admin
 */

?>
<?php
if ( ! isset( $handler ) ) {
	$handler = MailChimp_WooCommerce_Admin::instance();
}
$store_id = mailchimp_get_store_id();

$product_count     = mailchimp_get_product_count();
$order_count       = mailchimp_get_order_count();
$promo_rules_count = mailchimp_count_posts( 'shop_coupon' );

$mailchimp_total_products      = 0;
$mailchimp_total_orders        = 0;
$mailchimp_total_promo_rules   = 0;
$mailchimp_total_subscribers   = 0;
$mailchimp_total_unsubscribed  = 0;
$mailchimp_total_transactional = 0;

$store_syncing     = false;
$last_updated_time = get_option( 'mailchimp-woocommerce-resource-last-updated' );
$sync_started_at   = get_option( 'mailchimp-woocommerce-sync.started_at' );
if ( ! empty( $sync_started_at ) ) {
	$sync_started_at = mailchimp_date_local( $sync_started_at );
} else {
	$sync_started_at = new DateTime();
}

$sync_completed_at = get_option( 'mailchimp-woocommerce-sync.completed_at' );
if ( ! empty( $sync_completed_at ) ) {
	$sync_completed_at = mailchimp_date_local( $sync_completed_at );
} else {
	$sync_completed_at = false;
}

$account_name        = 'n/a';
$mailchimp_list_name = 'n/a';
if ( ! empty( $last_updated_time ) ) {
	$last_updated_time = mailchimp_date_local( $last_updated_time );
}

// if we have a transient set to start the sync on this page view, initiate it now that the values have been saved.
if ( (bool) get_site_transient( 'mailchimp_woocommerce_start_sync' ) ) {
	MailChimp_WooCommerce_Admin::connect()->startSync();
}
$mailchimp_api = mailchimp_get_api();
$store         = $mailchimp_api ? $mailchimp_api->getStoreIfAvailable( $store_id ) : null;

if ( $store ) {
	$store_syncing   = $store->isSyncing();
	$account_details = $handler->getAccountDetails();
	if ( $account_details ) {
		$account_name = $account_details['account_name'];
	}
	try {
		$promo_rules                 = $mailchimp_api->getPromoRules( $store_id, 1, 1, 1 );
		$mailchimp_total_promo_rules = $promo_rules['total_items'];
		if ( isset( $promo_rules_count['publish'] ) && $mailchimp_total_promo_rules > $promo_rules_count['publish'] ) {
			$mailchimp_total_promo_rules = $promo_rules_count['publish'];
		}
	} catch ( Exception $e ) {
		$mailchimp_total_promo_rules = 0; }
	try {
		$products                 = $mailchimp_api->products( $store_id, 1, 1 );
		$mailchimp_total_products = $products['total_items'];
		if ( $mailchimp_total_products > $product_count ) {
			$mailchimp_total_products = $product_count;
		}
	} catch ( Exception $e ) {
		$mailchimp_total_products = 0; }
	try {
		$mailchimp_total_orders = $mailchimp_api->getOrderCount($store_id);
		if ( $mailchimp_total_orders > $order_count ) {
			$mailchimp_total_orders = $order_count;
		}
	} catch ( Exception $e ) {
		$mailchimp_total_orders = 0; }
	try {
		$mailchimp_total_subscribers = $mailchimp_api->getSubscribedCount( $store->getListId() );
	} catch ( Exception $e ) {
		$mailchimp_total_subscribers = 0; }
	try {
		$mailchimp_total_transactional = $mailchimp_api->getTransactionalCount( $store->getListId() );
	} catch ( Exception $e ) {
		$mailchimp_total_transactional = 0; }
	try {
		$mailchimp_total_unsubscribed = $mailchimp_api->getUnsubscribedCount( $store->getListId() );
	} catch ( Exception $e ) {
		$mailchimp_total_unsubscribed = 0; }

	$mailchimp_list_name = $handler->getListName();
}
?>
<input type="hidden" name="mailchimp_active_settings_tab" value="store_sync"/>
<div class="sync-content-wrapper">
	<div class="box box-half">
		<div class="sync-stats-wrapper overview-stats-store">
			<div class="box">
				<strong><?php esc_html_e( 'Account Connected', 'mailchimp-for-woocommerce' ); ?>:</strong> <?php echo esc_html( $account_name ); ?>
			</div> 
			<div class="box">
				<strong><?php esc_html_e( 'Audience Connected', 'mailchimp-for-woocommerce' ); ?>:</strong> <?php echo esc_html( $mailchimp_list_name ); ?>
			</div> 
		</div>
	</div>
	<div class="box box-half">
		<div class="sync-stats-wrapper last-updated">
			<div class="box">
				<strong><?php esc_html_e( 'Sync Status:', 'mailchimp-for-woocommerce' ); ?></strong>
				<?php if ( $last_updated_time ) : ?>
					<?php if ( mailchimp_is_done_syncing() ) : ?>
						<?php esc_html_e( 'Completed', 'mailchimp-for-woocommerce' ); ?>
					<?php else : ?>
						<?php esc_html_e( 'Running', 'mailchimp-for-woocommerce' ); ?>
						<img class="sync-loader" src="<?php echo esc_attr( plugin_dir_url( __FILE__ ) . 'images/3dotpurple.gif' ); ?>"/>
					<?php endif; ?>        
				<?php elseif ( $sync_started_at && ! $sync_completed_at ) : ?>
					<?php esc_html_e( 'Initial sync in progress', 'mailchimp-for-woocommerce' ); ?>
					<img class="sync-loader" src="<?php echo esc_attr( plugin_dir_url( __FILE__ ) . 'images/3dotpurple.gif' ); ?>"/>
				<?php endif; ?>
			</div>    
			<div class="box">
				<strong><?php esc_html_e( 'Last Updated:', 'mailchimp-for-woocommerce' ); ?></strong>
				<i id="mailchimp_last_updated">
					<?php if ( $last_updated_time ) : ?>
						<?php echo esc_html( $last_updated_time->format( 'D, M j, Y g:i A' ) ); ?>
					<?php else : ?>
						<?php esc_html_e( 'Starting...', 'mailchimp-for-woocommerce' ); ?>
					<?php endif; ?>
				</i>
			</div>
		</div>
	</div>
</div>
<div class="sync-content-wrapper">
	<div class="box box-half">
		<div class="sync-stats-wrapper sync-stats-store">
			<div class="box sync-stats-card promo_rules" >
				<div class="sync-stats-card-content">
					<span class="card_label"><strong><?php esc_html_e( 'Coupons', 'mailchimp-for-woocommerce' ); ?></strong></span>
					<span class="card_count" id="mailchimp_promo_rules_count"><?php echo number_format( $mailchimp_total_promo_rules ); ?></span>
					<div class="progress-bar-wrapper">
						<span class="card_count_label mailchimp_promo_rules_count_partial"></span>
						<div class="progress-bar"></div>
					</div>
				</div>
			</div>
			<div class="box sync-stats-card products" >
				<div class="sync-stats-card-content">
					<span class="card_label"><strong><?php esc_html_e( 'Products', 'mailchimp-for-woocommerce' ); ?></strong></span>
					<span class="card_count" id="mailchimp_product_count"><?php echo number_format( $mailchimp_total_products ); ?></span>
					<div class="progress-bar-wrapper">
						<span class="card_count_label mailchimp_product_count_partial"></span>
						<div class="progress-bar"></div>
					</div>
				</div>
			</div>
			<div class="box sync-stats-card orders" >
				<div class="sync-stats-card-content">
					<span class="card_label"><strong><?php esc_html_e( 'Orders', 'mailchimp-for-woocommerce' ); ?></strong></span>
					<span class="card_count" id="mailchimp_order_count"><?php echo number_format( $mailchimp_total_orders ); ?></span>
					<div class="progress-bar-wrapper">
						<div class="progress-bar"></div>
						<span class="card_count_label mailchimp_order_count_partial"></span>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="box box-half">
		<div class="sync-stats-wrapper sync-stats-audience">
			<div class="box sync-stats-card subscribers" >
				<div class="sync-stats-card-content">
					<span class="card_label"><strong><?php esc_html_e( 'Subscribers', 'mailchimp-for-woocommerce' ); ?></strong></span>
					<span class="card_count" id="mailchimp_subscriber_count"><?php echo number_format( $mailchimp_total_subscribers ); ?></span>
					<img class="sync-loader" src="<?php echo esc_attr( plugin_dir_url( __FILE__ ) . 'images/3dotpurple.gif' ); ?>"/>
				</div>
			</div>
			<div class="box sync-stats-card transactional" >
				<div class="sync-stats-card-content">
					<span class="card_label"><strong><?php esc_html_e( 'Transactional', 'mailchimp-for-woocommerce' ); ?></strong></span>
					<span class="card_count" id="mailchimp_transactional_count"><?php echo number_format( $mailchimp_total_transactional ); ?></span>
					<img class="sync-loader" src="<?php echo esc_attr( plugin_dir_url( __FILE__ ) . 'images/3dotpurple.gif' ); ?>"/>
				</div>
			</div>
			<div class="box sync-stats-card unsubscribed" >
				<div class="sync-stats-card-content">
					<span class="card_label"><strong><?php esc_html_e( 'Unsubscribed', 'mailchimp-for-woocommerce' ); ?></strong></span>
					<span class="card_count" id="mailchimp_unsubscribed_count"><?php echo number_format( $mailchimp_total_unsubscribed ); ?></span>
					<img class="sync-loader" src="<?php echo esc_attr( plugin_dir_url( __FILE__ ) . 'images/3dotpurple.gif' ); ?>"/>
				</div>
			</div>
		</div>
	</div>
</div>
<?php $show_resync = $mailchimp_api && ( ! $store_syncing || isset( $_GET['resync'] ) && '1' === $_GET['resync'] ); ?>
<div class="sync-content-wrapper sync-more-wrapper">
	<div class="box box-half support-container">
		<div class="content ">
			<h3 style="padding-top: 1em;"><?php esc_html_e( 'More Information', 'mailchimp-for-woocommerce' ); ?></h3>
			<ul>
				<li>
				<?php
				echo sprintf(
					/* translators: %s - Plugin review URL. */                    wp_kses(
						__( 'Is this plugin helping your e-commerce business? <a href=%s target=_blank>Please leave us a ★★★★★ review!</a>.', 'mailchimp-for-woocommerce' ),
						array(
							'a' => array(
								'href'   => array(),
								'target' => '_blank',
							),
						)
					),
					esc_url( 'https://wordpress.org/support/plugin/mailchimp-for-woocommerce/reviews/' )
				);
				?>
				</li>
				<li>
				<?php
				echo sprintf(
					/* translators: Placeholders %1$s - plugin wiki CLI URL, %2$s - plugin wiki WP caching issues url */                    wp_kses(
						__( 'Have a larger store or having issues syncing? Consider using <a href=%1$s target=_blank>WP-CLI</a> or browse documentation around common <a href=%2$s target=_blank>caching problems</a>.', 'mailchimp-for-woocommerce' ),
						array(
							'a' => array(
								'href'   => array(),
								'target' => '_blank',
							),
						)
					),
					esc_url( 'https://github.com/mailchimp/mc-woocommerce/wiki/Advanced-Queue-Setup-In-CLI-mode' ),
					esc_url( 'https://github.com/mailchimp/mc-woocommerce/wiki/Using-Caches' )
				);
				?>
				</li>
				<li><?php echo esc_html__( 'Order and customer information will not sync if they contain an Amazon or generic email address.', 'mailchimp-for-woocommerce' ); ?></li>
				<li>
				<?php
				echo sprintf(
					/* translators: Placeholders %1$s - Mailchimp Support URL, %2$s - link element id, %3$s - popup element id  */                    wp_kses(
						__( 'Need help? Visit <a href=%1$s target=_blank>Mailchimp support</a>', 'mailchimp-for-woocommerce' ),
						array(
							'a' => array(
								'href'   => array(),
								'id'     => array(),
								'target' => '_blank',
							),
						)
					),
					esc_url( 'https://us1.admin.mailchimp.com/support?support_key=woo_forum' )
				);
				?>
				</li>
				<li>
				<?php
				echo sprintf(
					/* translators: %s - Mailchimp Privacy Policy URL. */                    wp_kses(
						__( 'By using this plugin, Mailchimp will process customer information in accordance with their <a href=%s target=_blank>Privacy Policy</a>.', 'mailchimp-for-woocommerce' ),
						array(
							'a' => array(
								'href'   => array(),
								'target' => '_blank',
							),
						)
					),
					esc_url( 'https://mailchimp.com/legal/privacy/' )
				);
				?>
				</li>
			</ul>
		</div>
	</div>
	<div class="box box-half resync-container">
		<div class="content ">
			<h3 style="padding-top: 1em;"><?php esc_html_e( 'Synchronization', 'mailchimp-for-woocommerce' ); ?></h3>
			<?php wp_nonce_field( '_resync-nonce-' . $store_id, '_resync-nonce' ); ?>
			<p id="resync_data_help_text">
				<?php esc_html_e( 'You can safely resync your audience at any time without losing any of your e-commerce data.', 'mailchimp-for-woocommerce' ); ?>
			</p>
			<?php if ( $show_resync ) : ?>
				<?php submit_button( __( 'Resync now', 'mailchimp-for-woocommerce' ), 'primary mc-woocommerce-resync-button' ); ?>
			<?php else : ?>
				<?php submit_button( __( 'Resync now', 'mailchimp-for-woocommerce' ), 'mc-woocommerce-resync-button', 'submit', true, array( 'disabled' => true ) ); ?>
				<p class="description"><?php esc_html_e( 'Sync is running. Please wait until it finishes.', 'mailchimp-for-woocommerce' ); ?></p>
			<?php endif; ?>
		</div>
	</div>
</div>
mailchimp-user-profile.php                                                                                                                                                                                                                                     3848          1711191352  plugins/mailchimp-for-woocommerce/admin/user-profile                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <?php $mailchimp_user_subscription_status = ( isset( $user ) && $user ) ? get_user_meta( $user->ID, 'mailchimp_woocommerce_is_subscribed', true ) : false; ?>
<h2>Mailchimp</h2>
<table class="form-table">
	<tr>
		<th><label for="mailchimp_woocommerce_is_subscribed"><?php esc_html_e( 'User Subscribed', 'mailchimp-for-woocommerce' ); ?></label></th>
		<td>
            <?php if ( $mailchimp_user_subscription_status === 'archived' ) : ?>
                <p class="woocommerce-form-row woocommerce-form-row--wide form-row form-row-wide">
                    <label style="opacity: 0.5" for="mailchimp_woocommerce_is_subscribed">
                        <input type="radio"
                               disabled
                               class="woocommerce-form__input woocommerce-form__input-radio input-radio"
                               name="mailchimp_woocommerce_is_subscribed_radio"
                               id="mailchimp_woocommerce_is_subscribed"
                            <?= $mailchimp_user_subscription_status === 'archived' ? ' checked="checked"' : '' ?>
                               value="archived" />
                        <b><?= translate( 'Archived', 'mailchimp-for-woocommerce' ) ?></b>
                    </label>
                </p>
            <?php else : ?>
            <p class="woocommerce-form-row woocommerce-form-row--wide form-row form-row-wide">
                <label for="mailchimp_woocommerce_is_subscribed">
                    <input type="radio"
                           class="woocommerce-form__input woocommerce-form__input-radio input-radio"
                           name="mailchimp_woocommerce_is_subscribed_radio"
                           id="mailchimp_woocommerce_is_subscribed"
                            <?= $mailchimp_user_subscription_status === '1' ? ' checked="checked"' : '' ?>
                           value="1" />
                    <?= __( 'Subscribe to our newsletter', 'mailchimp-for-woocommerce' ) ?>
                </label>
            </p>

            <p class="woocommerce-form-row woocommerce-form-row--wide form-row form-row-wide">
                <label for="mailchimp_woocommerce_is_unsubscribed">
                    <input type="radio"
                           class="woocommerce-form__input woocommerce-form__input-radio input-radio"
                           name="mailchimp_woocommerce_is_subscribed_radio"
                           id="mailchimp_woocommerce_is_unsubscribed"
                            <?= $mailchimp_user_subscription_status === 'unsubscribed' ? ' checked="checked"' : '' ?>
                           value="unsubscribed" />
                    <?= __( 'Unsubscribe from our newsletter', 'mailchimp-for-woocommerce' ) ?>
                </label>
            </p>

            <p class="woocommerce-form-row woocommerce-form-row--wide form-row form-row-wide">
                <label for="mailchimp_woocommerce_is_transactional">
                    <input type="radio"
                           class="woocommerce-form__input woocommerce-form__input-radio input-radio"
                           name="mailchimp_woocommerce_is_subscribed_radio"
                           id="mailchimp_woocommerce_is_transactional"
                           <?= $mailchimp_user_subscription_status === '0' ? ' checked="checked"' : '' ?>
                           value="0" />
                    <?= __( 'Receive Order Updates', 'mailchimp-for-woocommerce' ) ?>
                </label>
            </p>
            <?php endif; ?>
		</td>
	</tr>
</table>
<?php if ( isset( $gdpr_fields ) && ! empty( $gdpr_fields ) ) : ?>
     <div style="display: <?= $mailchimp_user_subscription_status === 'archived' ? 'none' : 'block' ?>">
        <?php echo wp_kses( $gdpr_fields, mailchimp_expanded_alowed_tags() ); ?>
     </div>
<?php endif; ?>

.eslintignore                                                                                                                                                                                                                                                  32            1711191352  plugins/mailchimp-for-woocommerce/blocks                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        !.eslintrc.js
build
node_modules.eslintrc.js                                                                                                                                                                                                                                                   471           1711191352  plugins/mailchimp-for-woocommerce/blocks                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        module.exports = {
	extends: [ 'plugin:@woocommerce/eslint-plugin/recommended' ],
	settings: {
		// List of modules that are externals in our webpack config.
		// This helps the `import/no-extraneous-dependencies` and
		//`import/no-unresolved` rules account for them.
		'import/core-modules': [
			'@woocommerce/blocks-checkout',
			'@woocommerce/settings',
			'@woocommerce/shared-hocs',
			'react',
		],
		'import/resolver': {
			node: {},
			webpack: {},
		},
	},
};
.gitignore                                                                                                                                                                                                                                                     356           1711191352  plugins/mailchimp-for-woocommerce/blocks                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        /nbproject/private/
node_modules
project.xml
project.properties
.DS_Store
Thumbs.db
.buildpath
.project
.settings*
.vscode
sftp-config.json
/deploy/
/wc-apidocs/
/languages/
screenshots/
.idea

# Ignore all log files except for .htaccess
/logs/*
!/logs/.htaccess

tests/e2e/config/local-*
.eslintcache

/vendor/

dist

woocommerce-mailchimp-newsletter.zip
attributes.js                                                                                                                                                                                                                                                  460           1711191352  plugins/mailchimp-for-woocommerce/blocks/assets/js/checkout-newsletter-subscription-block                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       /**
 * External dependencies
 */
import { getSetting } from '@woocommerce/settings';

const {
	optinDefaultText,
	gdprHeadline,
	gdprFields,
	gdprStatus,
} = getSetting( 'mailchimp-newsletter_data', '' );

export default {
	text: {
		type: 'string',
		default: optinDefaultText,
	},
	gdprHeadline: {
		type: 'string',
		default: gdprHeadline,
	},
	gdpr: {
		type: 'array',
		default: gdprFields
	},
	gdprStatus: {
		type: 'string',
		default: gdprStatus
	}
};
block.js                                                                                                                                                                                                                                                       1828          1711191352  plugins/mailchimp-for-woocommerce/blocks/assets/js/checkout-newsletter-subscription-block                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       /**
 * External dependencies
 */
import { useEffect, useState } from '@wordpress/element';
import { CheckboxControl } from '@woocommerce/blocks-checkout';
import {__} from "@wordpress/i18n";

const Block = ( { cart, extensions, text, gdprHeadline, gdprStatus, gdpr, checkoutExtensionData } ) => {

	let defaultGDPR = {};
	if (gdpr && gdpr.length) {
		gdpr.forEach((item) => {
			defaultGDPR[item.marketing_permission_id] = false;
		});
	}

	const status = gdprStatus === 'check';
	const [ checked, setChecked ] = useState( status );
	const [ gdprFields ] = useState({});
	const { setExtensionData } = checkoutExtensionData;
	const hideInput = gdprStatus === 'hide';

	useEffect( () => {
		setExtensionData( 'mailchimp-newsletter', 'optin', checked );
	}, [ checked, setExtensionData ] );

	return (
		<div className='wc-block-components-checkout-step__container'>
			<div style={{ display: gdprStatus === 'hide' ? 'none' : '' }} className='wc-block-components-checkout-step__content'>
				<CheckboxControl
					id="subscribe-to-newsletter"
					checked={ checked }
					onChange={ setChecked }
				>
					<span dangerouslySetInnerHTML={ {__html: text} }/>
				</CheckboxControl>
				{gdpr && gdpr.length ? __(gdprHeadline, 'mailchimp-for-woocommerce') : ''}
				{gdpr && gdpr.length ? gdpr.map((gdprItem) => {
					return (<CheckboxControl
						id={'gdpr_'+gdprItem.marketing_permission_id}
						checked={ gdprFields[gdprItem.marketing_permission_id] }
						onChange={ (e) => {
							gdprFields[gdprItem.marketing_permission_id] = !gdprFields[gdprItem.marketing_permission_id];
							setExtensionData( 'mailchimp-newsletter', 'gdprFields', gdprFields);
						}}
					>
						<span dangerouslySetInnerHTML={ {__html: gdprItem.text} }/>
					</CheckboxControl>);
				}) : ''}
			</div>
		</div>
	);
};

export default Block;
block.json                                                                                                                                                                                                                                                     623           1711191352  plugins/mailchimp-for-woocommerce/blocks/assets/js/checkout-newsletter-subscription-block                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       {
	"apiVersion": 2,
	"name": "woocommerce/mailchimp-newsletter-subscription",
	"version": "1.0.0",
	"title": "Mailchimp Newsletter!",
	"category": "woocommerce",
	"description": "Adds a newsletter subscription checkbox to the checkout.",
	"supports": {
		"html": true,
		"align": false,
		"multiple": false,
		"reusable": false
	},
	"parent": [
		"woocommerce/checkout-contact-information-block"
	],
	"attributes": {
		"lock": {
			"type": "object",
			"default": {
				"remove": true,
				"move": true
			}
		}
	},
	"textdomain": "mailchimp-woocommerce",
	"editorStyle": "file:../../../build/style-newsletter-block.css"
}
edit.js                                                                                                                                                                                                                                                        2562          1711191352  plugins/mailchimp-for-woocommerce/blocks/assets/js/checkout-newsletter-subscription-block                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       /**
 * External dependencies
 */
import { __ } from '@wordpress/i18n';
import {
	useBlockProps,
	RichText,
	InspectorControls,
} from '@wordpress/block-editor';
import { PanelBody, RadioControl } from '@wordpress/components';
import { CheckboxControl  } from '@woocommerce/blocks-checkout';


/**
 * Internal dependencies
 */
import './style.scss';

export const Edit = ( { attributes, setAttributes } ) => {
	const { text, gdprHeadline, gdpr, gdprStatus } = attributes;
	const blockProps = useBlockProps();
	const checked = gdprStatus === 'check';

	return (
		<div { ...blockProps }>
			<InspectorControls>
				<PanelBody title={ __( 'Block options', 'mailchimp-for-woocommerce' ) }>
					<p>{ __('Choose how you want the opt-in to your newsletter checkbox to render at checkout', 'mailchimp-for-woocommerce') }</p>
					<RadioControl
						selected={ gdprStatus }
						options={ [
							{ label: 'Visible, checked by default', value: 'check' },
							{ label: 'Visible, unchecked by default', value: 'uncheck' },
							{ label: 'Hidden, unchecked by default', value: 'hide' },
						] }
						onChange={ ( value ) => setAttributes( {gdprStatus: value } ) }
					/>
				</PanelBody>
			</InspectorControls>
			<div style={{display: gdprStatus === 'hide' ? 'none' : 'flex', lineHeight: '1.5em', alignItems: 'center'}}>
				<CheckboxControl
					id="newsletter-text"
					checked={ checked }
					disabled={ true }
					style={{marginTop: 0}}
				/>
				<RichText
					value={ text }
					help={__( 'Set the newsletter confirmation text.', 'mailchimp-for-woocommerce' )}
					onChange={ ( value ) => setAttributes( { text: value } ) }
				/>
			</div>
			{
				gdpr && gdpr.length && gdprStatus != 'hide' &&
				(
					<>
						<div style={{display: 'flex', marginTop: '2rem'}}>
							<RichText
								value={ gdprHeadline }
								help={__( 'Set the GDPR headline.', 'mailchimp-for-woocommerce' )}
								onChange={ ( value ) => setAttributes( { gdprHeadline: value } ) }
							/>
						</div>
						{gdpr.map((gdprItem, index) => {
							return (
								<CheckboxControl
									id={'gdpr_'+gdprItem.marketing_permission_id}
									checked={ gdpr[index].enabled }
									onChange={ () => {
										gdpr[index].enabled = !gdpr[index].enabled;
										setAttributes({gdpr: gdpr});
									}}
								>
									<span dangerouslySetInnerHTML={ {__html: gdprItem.text} }/>
								</CheckboxControl>
							)
						})}
					</>
				)
			}
		</div>
	);
}

// not sure
export const Save = () => {
	return <div { ...useBlockProps.save() } />;
};
frontend.js                                                                                                                                                                                                                                                    409           1711191352  plugins/mailchimp-for-woocommerce/blocks/assets/js/checkout-newsletter-subscription-block                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       /**
 * External dependencies
 */
import { registerCheckoutBlock } from '@woocommerce/blocks-checkout';
import { withFilteredAttributes } from '@woocommerce/shared-hocs';
/**
 * Internal dependencies
 */
import Block from './block';
import attributes from './attributes';
import metadata from './block.json';

registerCheckoutBlock( {
	metadata,
	component: withFilteredAttributes( attributes )( Block ),
} );
gdpr.js                                                                                                                                                                                                                                                        767           1711191352  plugins/mailchimp-for-woocommerce/blocks/assets/js/checkout-newsletter-subscription-block                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       import {Header} from "@wordpress/components/build/box-control/styles/box-control-styles";
import {__} from "@wordpress/i18n";

{gdpr.length &&
<div>
    <Header>
        {__(gdprHeadline, 'mailchimp-for-woocommerce')}
    </Header>
    {
        gdpr.forEach((gdprItem) => {
            <CheckboxControl
                id={'gdpr_'+gdprItem['marketing_permission_id']}
                checked={ gdprValues[gdprItem['marketing_permission_id']] }
                onChange={ () => {
                    gdprValues[gdprItem['marketing_permission_id']] = !gdprValues[gdprItem['marketing_permission_id']]
                }}
            >
                <span dangerouslySetInnerHTML={ {__html: gdprItem['text']} }/>
            </CheckboxControl>
        })
    }
</div>
}index.js                                                                                                                                                                                                                                                       7899          1711191352  plugins/mailchimp-for-woocommerce/blocks/assets/js/checkout-newsletter-subscription-block                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       /**
 * External dependencies
 */
import { SVG } from '@wordpress/components';
import { registerBlockType } from '@wordpress/blocks';

/**
 * Internal dependencies
 */
import { Edit, Save } from './edit';
import metadata from './block.json';
import attributes from './attributes';


registerBlockType( metadata, {
	icon: {
		src: (
			<SVG xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 46 49" fill="none">
				<path
					d="M34.5458 23.5193C34.8988 23.4778 35.2361 23.4759 35.5457 23.5193C35.7252 23.107 35.7568 22.397 35.5951 21.6239C35.3544 20.4741 35.029 19.7778 34.3584 19.8863C33.6859 19.9948 33.6622 20.8271 33.9028 21.9769C34.037 22.6238 34.2776 23.1761 34.5458 23.5193Z"
					fill="black"/>
				<path
					d="M28.7763 24.4284C29.2575 24.6394 29.5534 24.7795 29.6678 24.6572C29.7427 24.5803 29.719 24.4363 29.6046 24.2489C29.368 23.8624 28.8788 23.4679 28.3621 23.249C27.303 22.7934 26.0407 22.9453 25.0664 23.6454C24.745 23.8801 24.4393 24.2075 24.4826 24.4047C24.4965 24.4698 24.5458 24.5172 24.6582 24.5329C24.9225 24.5625 25.8494 24.0951 26.9164 24.03C27.6718 23.9827 28.295 24.2174 28.7763 24.4284Z"
					fill="black"/>
				<path
					d="M27.8105 24.9806C27.1852 25.0793 26.8381 25.2863 26.6172 25.4777C26.4279 25.6433 26.3115 25.8267 26.3115 25.9549C26.3115 26.0161 26.3391 26.0516 26.3589 26.0693C26.3865 26.095 26.422 26.1088 26.4614 26.1088C26.6034 26.1088 26.919 25.9826 26.919 25.9826C27.7907 25.6709 28.3647 25.7084 28.9346 25.7735C29.2502 25.809 29.3981 25.8287 29.4672 25.7202C29.4869 25.6887 29.5125 25.6216 29.4494 25.521C29.3054 25.2804 28.6723 24.8781 27.8105 24.9806Z"
					fill="black"/>
				<path
					d="M32.5975 27.0061C33.0235 27.2152 33.4909 27.1324 33.6428 26.8227C33.7946 26.5131 33.5737 26.093 33.1497 25.8839C32.7237 25.6749 32.2563 25.7577 32.1044 26.0673C31.9506 26.377 32.1734 26.7971 32.5975 27.0061Z"
					fill="black"/>
				<path
					d="M35.3306 24.6177C34.9854 24.6118 34.6995 24.9905 34.6916 25.4638C34.6837 25.9372 34.9578 26.3257 35.303 26.3317C35.6481 26.3376 35.9341 25.9589 35.942 25.4855C35.9499 25.0122 35.6757 24.6237 35.3306 24.6177Z"
					fill="black"/>
				<path
					d="M12.1324 33.1577C12.0456 33.0492 11.9056 33.0827 11.7695 33.1143C11.6749 33.136 11.5664 33.1616 11.448 33.1596C11.1936 33.1557 10.9786 33.0452 10.8583 32.8598C10.7006 32.6192 10.7104 32.2583 10.884 31.8461C10.9076 31.7909 10.9353 31.7297 10.9648 31.6607C11.241 31.0394 11.7064 30 11.1857 29.008C10.7932 28.2625 10.1542 27.797 9.38702 27.7004C8.64939 27.6077 7.89006 27.8798 7.40685 28.4143C6.64358 29.2565 6.52328 30.4044 6.6712 30.8087C6.72445 30.9566 6.80925 30.998 6.87237 31.0059C7.00254 31.0237 7.19385 30.929 7.31416 30.6055C7.32205 30.5819 7.33388 30.5464 7.34769 30.501C7.40094 30.3294 7.50152 30.0099 7.66522 29.7555C7.86245 29.4478 8.17012 29.2348 8.53105 29.1579C8.89789 29.079 9.2746 29.15 9.58819 29.3551C10.1227 29.7062 10.3298 30.361 10.101 30.9862C9.98264 31.3096 9.79133 31.9289 9.83275 32.4378C9.91756 33.4673 10.5507 33.8795 11.1206 33.9249C11.6729 33.9466 12.0594 33.6349 12.1581 33.4081C12.2133 33.274 12.164 33.1932 12.1324 33.1577Z"
					fill="black"/>
				<path
					d="M44.044 31.2761C44.0223 31.2012 43.8862 30.7002 43.6969 30.0967C43.5075 29.4932 43.3142 29.0672 43.3142 29.0672C44.0696 27.9351 44.0834 26.9233 43.9828 26.3514C43.8763 25.6414 43.5805 25.0359 42.9829 24.4107C42.3873 23.7854 41.1684 23.1445 39.4545 22.6632C39.2593 22.608 38.6123 22.4305 38.5551 22.4127C38.5512 22.3753 38.5078 20.2945 38.4684 19.3991C38.4408 18.7522 38.3836 17.7444 38.0719 16.7504C37.6992 15.4053 37.0483 14.2298 36.2377 13.4764C38.4763 11.157 39.8726 8.60091 39.8707 6.40774C39.8647 2.19102 34.6855 0.914962 28.3033 3.55781C28.2974 3.55978 26.9602 4.1278 26.9503 4.13174C26.9444 4.12582 24.5066 1.73346 24.4692 1.7019C17.1954 -4.64488 -5.55475 20.6436 1.71899 26.7853L3.30864 28.1323C2.89644 29.2013 2.73471 30.4241 2.86685 31.7396C3.03647 33.4299 3.90822 35.0511 5.32234 36.3015C6.66348 37.4908 8.42669 38.2422 10.1386 38.2402C12.9688 44.7626 19.4359 48.7643 27.0193 48.9891C35.153 49.2317 41.981 45.4134 44.8428 38.5578C45.0301 38.0765 45.825 35.909 45.825 33.9939C45.825 32.0729 44.7382 31.2761 44.044 31.2761ZM10.7638 36.41C10.5173 36.4514 10.2649 36.4691 10.0104 36.4632C7.55298 36.3981 4.90027 34.1852 4.63598 31.5621C4.34409 28.6629 5.82527 26.4322 8.44839 25.9017C8.76198 25.8386 9.14066 25.8011 9.54892 25.8228C11.0183 25.9037 13.1838 27.0318 13.6789 30.2328C14.1187 33.0689 13.4225 35.9564 10.7638 36.41ZM8.02041 24.1681C6.38736 24.4856 4.9476 25.4106 4.06797 26.6886C3.54137 26.2508 2.56115 25.4007 2.38956 25.0694C0.985306 22.4009 3.92202 17.2138 5.97516 14.285C11.0478 7.04676 18.9922 1.56581 22.6705 2.55984C23.2681 2.72945 25.2482 5.02518 25.2482 5.02518C25.2482 5.02518 21.5719 7.06451 18.1618 9.90853C13.5704 13.4468 10.0992 18.5885 8.02041 24.1681ZM33.8079 35.3252C33.8611 35.3035 33.8986 35.2424 33.8927 35.1812C33.8848 35.1063 33.8177 35.0531 33.7448 35.0609C33.7448 35.0609 29.8969 35.6309 26.26 34.2996C26.6564 33.0117 27.7096 33.4772 29.3012 33.6054C32.1709 33.777 34.7408 33.3569 36.642 32.8125C38.2889 32.3392 40.4505 31.4083 42.1309 30.0829C42.6969 31.3274 42.8981 32.6962 42.8981 32.6962C42.8981 32.6962 43.3359 32.6173 43.7028 32.8441C44.0499 33.0571 44.3024 33.5009 44.1288 34.6448C43.7758 36.7847 42.8665 38.5223 41.338 40.1198C40.4071 41.1217 39.277 41.9935 37.9852 42.6266C37.2988 42.9875 36.5671 43.2991 35.7959 43.5516C30.033 45.4331 24.1339 43.3642 22.2326 38.9207C22.0807 38.5874 21.9525 38.2363 21.852 37.8714C21.0414 34.9426 21.7297 31.43 23.8795 29.2171C23.8795 29.2171 23.8795 29.2171 23.8795 29.2151C24.0116 29.0751 24.1477 28.9094 24.1477 28.7004C24.1477 28.5248 24.0372 28.3414 23.9406 28.2112C23.1892 27.1206 20.5818 25.2607 21.1045 21.6613C21.4792 19.0757 23.7414 17.2553 25.8498 17.3637C26.0273 17.3736 26.2067 17.3834 26.3842 17.3953C27.2974 17.4485 28.0942 17.5669 28.8476 17.5984C30.1059 17.6537 31.238 17.4702 32.5792 16.3519C33.0308 15.9752 33.3937 15.6478 34.0071 15.5453C34.0722 15.5335 34.2319 15.4763 34.5534 15.492C34.8808 15.5098 35.1924 15.5985 35.4725 15.7859C36.5474 16.5018 36.6992 18.2335 36.7545 19.4997C36.786 20.2235 36.8728 21.9729 36.9044 22.4759C36.9734 23.6237 37.2751 23.7874 37.8846 23.9886C38.2278 24.101 38.5473 24.1858 39.0167 24.318C40.4387 24.7183 41.2828 25.1227 41.8153 25.6433C42.1329 25.9688 42.2808 26.3139 42.3261 26.6433C42.4938 27.8661 41.3755 29.3788 38.4171 30.7515C35.1826 32.2524 31.2577 32.6331 28.5459 32.3313C28.3388 32.3076 27.5992 32.2248 27.5952 32.2248C25.4257 31.9329 24.1891 34.7355 25.4908 36.6565C26.329 37.8951 28.6149 38.6998 30.9008 38.6998C36.1431 38.6998 40.1724 36.4613 41.6713 34.5284C41.7167 34.4712 41.7206 34.4633 41.7916 34.3568C41.8646 34.2464 41.8055 34.1852 41.7128 34.2464C40.488 35.0846 35.0484 38.4099 29.2322 37.4099C29.2322 37.4099 28.5261 37.2936 27.8792 37.0431C27.3664 36.8439 26.2935 36.3508 26.1634 35.2483C30.8514 36.6979 33.8079 35.3252 33.8079 35.3252ZM26.3704 34.4476C26.3704 34.4476 26.3724 34.4476 26.3704 34.4476C26.3724 34.4495 26.3724 34.4495 26.3724 34.4515C26.3724 34.4495 26.3724 34.4476 26.3704 34.4476ZM17.3887 14.2554C19.1914 12.1707 21.4121 10.3602 23.4002 9.34249C23.4692 9.30699 23.5422 9.38193 23.5047 9.44899C23.3469 9.73497 23.0432 10.3464 22.9466 10.8118C22.9308 10.8848 23.0097 10.9381 23.0708 10.8966C24.3074 10.0525 26.4612 9.14921 28.3486 9.03284C28.4295 9.02693 28.4689 9.13146 28.4039 9.18076C28.1159 9.40166 27.8023 9.70539 27.5735 10.0131C27.5341 10.0663 27.5716 10.1413 27.6366 10.1413C28.962 10.1511 30.8317 10.6146 32.0486 11.297C32.1315 11.3424 32.0723 11.5021 31.9796 11.4824C30.1375 11.0603 27.1199 10.7389 23.986 11.5041C21.1893 12.1865 19.0533 13.2397 17.4952 14.3738C17.4203 14.4329 17.3256 14.3304 17.3887 14.2554Z"
					fill="black"/>
			</SVG>
		),
		foreground: '#874FB9',
	},
	edit: Edit,
	save: Save,
	attributes: {
		...metadata.attributes,
		...attributes,
	},
} );style.scss                                                                                                                                                                                                                                                     322           1711191352  plugins/mailchimp-for-woocommerce/blocks/assets/js/checkout-newsletter-subscription-block                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       .wp-block-woocommerce-checkout-newsletter-subscription {
	margin: 20px 0;
	padding-top: 4px;
	padding-bottom: 4px;
	display: flex;
	align-items: flex-start;

	.block-editor-rich-text__editable {
		vertical-align: middle;
		line-height: 24px;
	}

	.wc-block-components-checkbox {
		margin-right: 16px;
		margin-top: 0;
	}
}newsletter-block-frontend.asset.php                                                                                                                                                                                                                            193           1711191352  plugins/mailchimp-for-woocommerce/blocks/build                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <?php return array('dependencies' => array('react', 'wc-blocks-checkout', 'wc-blocks-shared-hocs', 'wc-settings', 'wp-element', 'wp-i18n', 'wp-polyfill'), 'version' => '9928316618b9da0d4020');
newsletter-block-frontend.js                                                                                                                                                                                                                                   2120          1711191352  plugins/mailchimp-for-woocommerce/blocks/build                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  (()=>{"use strict";const e=window.wc.blocksCheckout,t=window.wc.wcBlocksSharedHocs,n=window.React,i=window.wp.element,o=window.wp.i18n,c=window.wc.wcSettings,{optinDefaultText:r,gdprHeadline:s,gdprFields:a,gdprStatus:l}=(0,c.getSetting)("mailchimp-newsletter_data",""),m={text:{type:"string",default:r},gdprHeadline:{type:"string",default:s},gdpr:{type:"array",default:a},gdprStatus:{type:"string",default:l}},d=JSON.parse('{"apiVersion":2,"name":"woocommerce/mailchimp-newsletter-subscription","version":"1.0.0","title":"Mailchimp Newsletter!","category":"woocommerce","description":"Adds a newsletter subscription checkbox to the checkout.","supports":{"html":true,"align":false,"multiple":false,"reusable":false},"parent":["woocommerce/checkout-contact-information-block"],"attributes":{"lock":{"type":"object","default":{"remove":true,"move":true}}},"textdomain":"mailchimp-woocommerce","editorStyle":"file:../../../build/style-newsletter-block.css"}');(0,e.registerCheckoutBlock)({metadata:d,component:(0,t.withFilteredAttributes)(m)((({cart:t,extensions:c,text:r,gdprHeadline:s,gdprStatus:a,gdpr:l,checkoutExtensionData:m})=>{let d={};l&&l.length&&l.forEach((e=>{d[e.marketing_permission_id]=!1}));const p="check"===a,[u,w]=(0,i.useState)(p),[h]=(0,i.useState)({}),{setExtensionData:g}=m;return(0,i.useEffect)((()=>{g("mailchimp-newsletter","optin",u)}),[u,g]),(0,n.createElement)("div",{className:"wc-block-components-checkout-step__container"},(0,n.createElement)("div",{style:{display:"hide"===a?"none":""},className:"wc-block-components-checkout-step__content"},(0,n.createElement)(e.CheckboxControl,{id:"subscribe-to-newsletter",checked:u,onChange:w},(0,n.createElement)("span",{dangerouslySetInnerHTML:{__html:r}})),l&&l.length?(0,o.__)(s,"mailchimp-for-woocommerce"):"",l&&l.length?l.map((t=>(0,n.createElement)(e.CheckboxControl,{id:"gdpr_"+t.marketing_permission_id,checked:h[t.marketing_permission_id],onChange:e=>{h[t.marketing_permission_id]=!h[t.marketing_permission_id],g("mailchimp-newsletter","gdprFields",h)}},(0,n.createElement)("span",{dangerouslySetInnerHTML:{__html:t.text}})))):""))}))})})();newsletter-block.asset.php                                                                                                                                                                                                                                     203           1711191352  plugins/mailchimp-for-woocommerce/blocks/build                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <?php return array('dependencies' => array('react', 'wc-blocks-checkout', 'wc-settings', 'wp-block-editor', 'wp-blocks', 'wp-components', 'wp-i18n', 'wp-polyfill'), 'version' => '8aad4d0233a59d33bfd0');
newsletter-block.js                                                                                                                                                                                                                                            11225         1711191352  plugins/mailchimp-for-woocommerce/blocks/build                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  (()=>{"use strict";var e,t={987:()=>{const e=window.React,t=window.wp.components,l=window.wp.blocks,C=window.wp.i18n,r=window.wp.blockEditor,o=window.wc.blocksCheckout,a=JSON.parse('{"apiVersion":2,"name":"woocommerce/mailchimp-newsletter-subscription","version":"1.0.0","title":"Mailchimp Newsletter!","category":"woocommerce","description":"Adds a newsletter subscription checkbox to the checkout.","supports":{"html":true,"align":false,"multiple":false,"reusable":false},"parent":["woocommerce/checkout-contact-information-block"],"attributes":{"lock":{"type":"object","default":{"remove":true,"move":true}}},"textdomain":"mailchimp-woocommerce","editorStyle":"file:../../../build/style-newsletter-block.css"}'),n=window.wc.wcSettings,{optinDefaultText:c,gdprHeadline:i,gdprFields:s,gdprStatus:d}=(0,n.getSetting)("mailchimp-newsletter_data",""),m={text:{type:"string",default:c},gdprHeadline:{type:"string",default:i},gdpr:{type:"array",default:s},gdprStatus:{type:"string",default:d}};(0,l.registerBlockType)(a,{icon:{src:(0,e.createElement)(t.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 46 49",fill:"none"},(0,e.createElement)("path",{d:"M34.5458 23.5193C34.8988 23.4778 35.2361 23.4759 35.5457 23.5193C35.7252 23.107 35.7568 22.397 35.5951 21.6239C35.3544 20.4741 35.029 19.7778 34.3584 19.8863C33.6859 19.9948 33.6622 20.8271 33.9028 21.9769C34.037 22.6238 34.2776 23.1761 34.5458 23.5193Z",fill:"black"}),(0,e.createElement)("path",{d:"M28.7763 24.4284C29.2575 24.6394 29.5534 24.7795 29.6678 24.6572C29.7427 24.5803 29.719 24.4363 29.6046 24.2489C29.368 23.8624 28.8788 23.4679 28.3621 23.249C27.303 22.7934 26.0407 22.9453 25.0664 23.6454C24.745 23.8801 24.4393 24.2075 24.4826 24.4047C24.4965 24.4698 24.5458 24.5172 24.6582 24.5329C24.9225 24.5625 25.8494 24.0951 26.9164 24.03C27.6718 23.9827 28.295 24.2174 28.7763 24.4284Z",fill:"black"}),(0,e.createElement)("path",{d:"M27.8105 24.9806C27.1852 25.0793 26.8381 25.2863 26.6172 25.4777C26.4279 25.6433 26.3115 25.8267 26.3115 25.9549C26.3115 26.0161 26.3391 26.0516 26.3589 26.0693C26.3865 26.095 26.422 26.1088 26.4614 26.1088C26.6034 26.1088 26.919 25.9826 26.919 25.9826C27.7907 25.6709 28.3647 25.7084 28.9346 25.7735C29.2502 25.809 29.3981 25.8287 29.4672 25.7202C29.4869 25.6887 29.5125 25.6216 29.4494 25.521C29.3054 25.2804 28.6723 24.8781 27.8105 24.9806Z",fill:"black"}),(0,e.createElement)("path",{d:"M32.5975 27.0061C33.0235 27.2152 33.4909 27.1324 33.6428 26.8227C33.7946 26.5131 33.5737 26.093 33.1497 25.8839C32.7237 25.6749 32.2563 25.7577 32.1044 26.0673C31.9506 26.377 32.1734 26.7971 32.5975 27.0061Z",fill:"black"}),(0,e.createElement)("path",{d:"M35.3306 24.6177C34.9854 24.6118 34.6995 24.9905 34.6916 25.4638C34.6837 25.9372 34.9578 26.3257 35.303 26.3317C35.6481 26.3376 35.9341 25.9589 35.942 25.4855C35.9499 25.0122 35.6757 24.6237 35.3306 24.6177Z",fill:"black"}),(0,e.createElement)("path",{d:"M12.1324 33.1577C12.0456 33.0492 11.9056 33.0827 11.7695 33.1143C11.6749 33.136 11.5664 33.1616 11.448 33.1596C11.1936 33.1557 10.9786 33.0452 10.8583 32.8598C10.7006 32.6192 10.7104 32.2583 10.884 31.8461C10.9076 31.7909 10.9353 31.7297 10.9648 31.6607C11.241 31.0394 11.7064 30 11.1857 29.008C10.7932 28.2625 10.1542 27.797 9.38702 27.7004C8.64939 27.6077 7.89006 27.8798 7.40685 28.4143C6.64358 29.2565 6.52328 30.4044 6.6712 30.8087C6.72445 30.9566 6.80925 30.998 6.87237 31.0059C7.00254 31.0237 7.19385 30.929 7.31416 30.6055C7.32205 30.5819 7.33388 30.5464 7.34769 30.501C7.40094 30.3294 7.50152 30.0099 7.66522 29.7555C7.86245 29.4478 8.17012 29.2348 8.53105 29.1579C8.89789 29.079 9.2746 29.15 9.58819 29.3551C10.1227 29.7062 10.3298 30.361 10.101 30.9862C9.98264 31.3096 9.79133 31.9289 9.83275 32.4378C9.91756 33.4673 10.5507 33.8795 11.1206 33.9249C11.6729 33.9466 12.0594 33.6349 12.1581 33.4081C12.2133 33.274 12.164 33.1932 12.1324 33.1577Z",fill:"black"}),(0,e.createElement)("path",{d:"M44.044 31.2761C44.0223 31.2012 43.8862 30.7002 43.6969 30.0967C43.5075 29.4932 43.3142 29.0672 43.3142 29.0672C44.0696 27.9351 44.0834 26.9233 43.9828 26.3514C43.8763 25.6414 43.5805 25.0359 42.9829 24.4107C42.3873 23.7854 41.1684 23.1445 39.4545 22.6632C39.2593 22.608 38.6123 22.4305 38.5551 22.4127C38.5512 22.3753 38.5078 20.2945 38.4684 19.3991C38.4408 18.7522 38.3836 17.7444 38.0719 16.7504C37.6992 15.4053 37.0483 14.2298 36.2377 13.4764C38.4763 11.157 39.8726 8.60091 39.8707 6.40774C39.8647 2.19102 34.6855 0.914962 28.3033 3.55781C28.2974 3.55978 26.9602 4.1278 26.9503 4.13174C26.9444 4.12582 24.5066 1.73346 24.4692 1.7019C17.1954 -4.64488 -5.55475 20.6436 1.71899 26.7853L3.30864 28.1323C2.89644 29.2013 2.73471 30.4241 2.86685 31.7396C3.03647 33.4299 3.90822 35.0511 5.32234 36.3015C6.66348 37.4908 8.42669 38.2422 10.1386 38.2402C12.9688 44.7626 19.4359 48.7643 27.0193 48.9891C35.153 49.2317 41.981 45.4134 44.8428 38.5578C45.0301 38.0765 45.825 35.909 45.825 33.9939C45.825 32.0729 44.7382 31.2761 44.044 31.2761ZM10.7638 36.41C10.5173 36.4514 10.2649 36.4691 10.0104 36.4632C7.55298 36.3981 4.90027 34.1852 4.63598 31.5621C4.34409 28.6629 5.82527 26.4322 8.44839 25.9017C8.76198 25.8386 9.14066 25.8011 9.54892 25.8228C11.0183 25.9037 13.1838 27.0318 13.6789 30.2328C14.1187 33.0689 13.4225 35.9564 10.7638 36.41ZM8.02041 24.1681C6.38736 24.4856 4.9476 25.4106 4.06797 26.6886C3.54137 26.2508 2.56115 25.4007 2.38956 25.0694C0.985306 22.4009 3.92202 17.2138 5.97516 14.285C11.0478 7.04676 18.9922 1.56581 22.6705 2.55984C23.2681 2.72945 25.2482 5.02518 25.2482 5.02518C25.2482 5.02518 21.5719 7.06451 18.1618 9.90853C13.5704 13.4468 10.0992 18.5885 8.02041 24.1681ZM33.8079 35.3252C33.8611 35.3035 33.8986 35.2424 33.8927 35.1812C33.8848 35.1063 33.8177 35.0531 33.7448 35.0609C33.7448 35.0609 29.8969 35.6309 26.26 34.2996C26.6564 33.0117 27.7096 33.4772 29.3012 33.6054C32.1709 33.777 34.7408 33.3569 36.642 32.8125C38.2889 32.3392 40.4505 31.4083 42.1309 30.0829C42.6969 31.3274 42.8981 32.6962 42.8981 32.6962C42.8981 32.6962 43.3359 32.6173 43.7028 32.8441C44.0499 33.0571 44.3024 33.5009 44.1288 34.6448C43.7758 36.7847 42.8665 38.5223 41.338 40.1198C40.4071 41.1217 39.277 41.9935 37.9852 42.6266C37.2988 42.9875 36.5671 43.2991 35.7959 43.5516C30.033 45.4331 24.1339 43.3642 22.2326 38.9207C22.0807 38.5874 21.9525 38.2363 21.852 37.8714C21.0414 34.9426 21.7297 31.43 23.8795 29.2171C23.8795 29.2171 23.8795 29.2171 23.8795 29.2151C24.0116 29.0751 24.1477 28.9094 24.1477 28.7004C24.1477 28.5248 24.0372 28.3414 23.9406 28.2112C23.1892 27.1206 20.5818 25.2607 21.1045 21.6613C21.4792 19.0757 23.7414 17.2553 25.8498 17.3637C26.0273 17.3736 26.2067 17.3834 26.3842 17.3953C27.2974 17.4485 28.0942 17.5669 28.8476 17.5984C30.1059 17.6537 31.238 17.4702 32.5792 16.3519C33.0308 15.9752 33.3937 15.6478 34.0071 15.5453C34.0722 15.5335 34.2319 15.4763 34.5534 15.492C34.8808 15.5098 35.1924 15.5985 35.4725 15.7859C36.5474 16.5018 36.6992 18.2335 36.7545 19.4997C36.786 20.2235 36.8728 21.9729 36.9044 22.4759C36.9734 23.6237 37.2751 23.7874 37.8846 23.9886C38.2278 24.101 38.5473 24.1858 39.0167 24.318C40.4387 24.7183 41.2828 25.1227 41.8153 25.6433C42.1329 25.9688 42.2808 26.3139 42.3261 26.6433C42.4938 27.8661 41.3755 29.3788 38.4171 30.7515C35.1826 32.2524 31.2577 32.6331 28.5459 32.3313C28.3388 32.3076 27.5992 32.2248 27.5952 32.2248C25.4257 31.9329 24.1891 34.7355 25.4908 36.6565C26.329 37.8951 28.6149 38.6998 30.9008 38.6998C36.1431 38.6998 40.1724 36.4613 41.6713 34.5284C41.7167 34.4712 41.7206 34.4633 41.7916 34.3568C41.8646 34.2464 41.8055 34.1852 41.7128 34.2464C40.488 35.0846 35.0484 38.4099 29.2322 37.4099C29.2322 37.4099 28.5261 37.2936 27.8792 37.0431C27.3664 36.8439 26.2935 36.3508 26.1634 35.2483C30.8514 36.6979 33.8079 35.3252 33.8079 35.3252ZM26.3704 34.4476C26.3704 34.4476 26.3724 34.4476 26.3704 34.4476C26.3724 34.4495 26.3724 34.4495 26.3724 34.4515C26.3724 34.4495 26.3724 34.4476 26.3704 34.4476ZM17.3887 14.2554C19.1914 12.1707 21.4121 10.3602 23.4002 9.34249C23.4692 9.30699 23.5422 9.38193 23.5047 9.44899C23.3469 9.73497 23.0432 10.3464 22.9466 10.8118C22.9308 10.8848 23.0097 10.9381 23.0708 10.8966C24.3074 10.0525 26.4612 9.14921 28.3486 9.03284C28.4295 9.02693 28.4689 9.13146 28.4039 9.18076C28.1159 9.40166 27.8023 9.70539 27.5735 10.0131C27.5341 10.0663 27.5716 10.1413 27.6366 10.1413C28.962 10.1511 30.8317 10.6146 32.0486 11.297C32.1315 11.3424 32.0723 11.5021 31.9796 11.4824C30.1375 11.0603 27.1199 10.7389 23.986 11.5041C21.1893 12.1865 19.0533 13.2397 17.4952 14.3738C17.4203 14.4329 17.3256 14.3304 17.3887 14.2554Z",fill:"black"})),foreground:"#874FB9"},edit:({attributes:l,setAttributes:a})=>{const{text:n,gdprHeadline:c,gdpr:i,gdprStatus:s}=l,d=(0,r.useBlockProps)(),m="check"===s;return(0,e.createElement)("div",{...d},(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(t.PanelBody,{title:(0,C.__)("Block options","mailchimp-for-woocommerce")},(0,e.createElement)("p",null,(0,C.__)("Choose how you want the opt-in to your newsletter checkbox to render at checkout","mailchimp-for-woocommerce")),(0,e.createElement)(t.RadioControl,{selected:s,options:[{label:"Visible, checked by default",value:"check"},{label:"Visible, unchecked by default",value:"uncheck"},{label:"Hidden, unchecked by default",value:"hide"}],onChange:e=>a({gdprStatus:e})}))),(0,e.createElement)("div",{style:{display:"hide"===s?"none":"flex",lineHeight:"1.5em",alignItems:"center"}},(0,e.createElement)(o.CheckboxControl,{id:"newsletter-text",checked:m,disabled:!0,style:{marginTop:0}}),(0,e.createElement)(r.RichText,{value:n,help:(0,C.__)("Set the newsletter confirmation text.","mailchimp-for-woocommerce"),onChange:e=>a({text:e})})),i&&i.length&&"hide"!=s&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{style:{display:"flex",marginTop:"2rem"}},(0,e.createElement)(r.RichText,{value:c,help:(0,C.__)("Set the GDPR headline.","mailchimp-for-woocommerce"),onChange:e=>a({gdprHeadline:e})})),i.map(((t,l)=>(0,e.createElement)(o.CheckboxControl,{id:"gdpr_"+t.marketing_permission_id,checked:i[l].enabled,onChange:()=>{i[l].enabled=!i[l].enabled,a({gdpr:i})}},(0,e.createElement)("span",{dangerouslySetInnerHTML:{__html:t.text}}))))))},save:()=>(0,e.createElement)("div",{...r.useBlockProps.save()}),attributes:{...a.attributes,...m}})}},l={};function C(e){var r=l[e];if(void 0!==r)return r.exports;var o=l[e]={exports:{}};return t[e](o,o.exports,C),o.exports}C.m=t,e=[],C.O=(t,l,r,o)=>{if(!l){var a=1/0;for(s=0;s<e.length;s++){for(var[l,r,o]=e[s],n=!0,c=0;c<l.length;c++)(!1&o||a>=o)&&Object.keys(C.O).every((e=>C.O[e](l[c])))?l.splice(c--,1):(n=!1,o<a&&(a=o));if(n){e.splice(s--,1);var i=r();void 0!==i&&(t=i)}}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[l,r,o]},C.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={457:0,411:0};C.O.j=t=>0===e[t];var t=(t,l)=>{var r,o,[a,n,c]=l,i=0;if(a.some((t=>0!==e[t]))){for(r in n)C.o(n,r)&&(C.m[r]=n[r]);if(c)var s=c(C)}for(t&&t(l);i<a.length;i++)o=a[i],C.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return C.O(s)},l=globalThis.webpackChunkwoocommerce_mailchimp_newsletter=globalThis.webpackChunkwoocommerce_mailchimp_newsletter||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var r=C.O(void 0,[411],(()=>C(987)));r=C.O(r)})();style-newsletter-block.css                                                                                                                                                                                                                                     385           1711191352  plugins/mailchimp-for-woocommerce/blocks/build                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  .wp-block-woocommerce-checkout-newsletter-subscription{align-items:flex-start;display:flex;margin:20px 0;padding-bottom:4px;padding-top:4px}.wp-block-woocommerce-checkout-newsletter-subscription .block-editor-rich-text__editable{line-height:24px;vertical-align:middle}.wp-block-woocommerce-checkout-newsletter-subscription .wc-block-components-checkbox{margin-right:16px;margin-top:0}
composer.json                                                                                                                                                                                                                                                  444           1711191352  plugins/mailchimp-for-woocommerce/blocks                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        {
  "name": "opr/mailchimp-newsletter",
  "description": "WooCommerce Newsletter Blocks Plugin ( Mailchimp for WooCommerce)",
  "homepage": "https://github.com/opr/mailchimp-newsletter",
  "type": "wordpress-plugin",
  "license": "GPL-2.0+",
  "require": {
    "composer/installers": "~1.7"
  },
  "require-dev": {
    "phpunit/phpunit": "5.7.19",
    "sirbrillig/spies": "^1.5"
  },
  "archive": {
    "exclude": [
      "!/build"
    ]
  }
}
composer.lock                                                                                                                                                                                                                                                  64219         1711191352  plugins/mailchimp-for-woocommerce/blocks                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        {
    "_readme": [
        "This file locks the dependencies of your project to a known state",
        "Read more about it at https://getcomposer.org/doc/01-basic-usage.md#installing-dependencies",
        "This file is @generated automatically"
    ],
    "content-hash": "b57f7d9fff58efcf93ae2b5722bfa630",
    "packages": [
        {
            "name": "composer/installers",
            "version": "v1.12.0",
            "source": {
                "type": "git",
                "url": "https://github.com/composer/installers.git",
                "reference": "d20a64ed3c94748397ff5973488761b22f6d3f19"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/composer/installers/zipball/d20a64ed3c94748397ff5973488761b22f6d3f19",
                "reference": "d20a64ed3c94748397ff5973488761b22f6d3f19",
                "shasum": ""
            },
            "require": {
                "composer-plugin-api": "^1.0 || ^2.0"
            },
            "replace": {
                "roundcube/plugin-installer": "*",
                "shama/baton": "*"
            },
            "require-dev": {
                "composer/composer": "1.6.* || ^2.0",
                "composer/semver": "^1 || ^3",
                "phpstan/phpstan": "^0.12.55",
                "phpstan/phpstan-phpunit": "^0.12.16",
                "symfony/phpunit-bridge": "^4.2 || ^5",
                "symfony/process": "^2.3"
            },
            "type": "composer-plugin",
            "extra": {
                "class": "Composer\\Installers\\Plugin",
                "branch-alias": {
                    "dev-main": "1.x-dev"
                }
            },
            "autoload": {
                "psr-4": {
                    "Composer\\Installers\\": "src/Composer/Installers"
                }
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "MIT"
            ],
            "authors": [
                {
                    "name": "Kyle Robinson Young",
                    "email": "kyle@dontkry.com",
                    "homepage": "https://github.com/shama"
                }
            ],
            "description": "A multi-framework Composer library installer",
            "homepage": "https://composer.github.io/installers/",
            "keywords": [
                "Craft",
                "Dolibarr",
                "Eliasis",
                "Hurad",
                "ImageCMS",
                "Kanboard",
                "Lan Management System",
                "MODX Evo",
                "MantisBT",
                "Mautic",
                "Maya",
                "OXID",
                "Plentymarkets",
                "Porto",
                "RadPHP",
                "SMF",
                "Starbug",
                "Thelia",
                "Whmcs",
                "WolfCMS",
                "agl",
                "aimeos",
                "annotatecms",
                "attogram",
                "bitrix",
                "cakephp",
                "chef",
                "cockpit",
                "codeigniter",
                "concrete5",
                "croogo",
                "dokuwiki",
                "drupal",
                "eZ Platform",
                "elgg",
                "expressionengine",
                "fuelphp",
                "grav",
                "installer",
                "itop",
                "joomla",
                "known",
                "kohana",
                "laravel",
                "lavalite",
                "lithium",
                "magento",
                "majima",
                "mako",
                "mediawiki",
                "miaoxing",
                "modulework",
                "modx",
                "moodle",
                "osclass",
                "pantheon",
                "phpbb",
                "piwik",
                "ppi",
                "processwire",
                "puppet",
                "pxcms",
                "reindex",
                "roundcube",
                "shopware",
                "silverstripe",
                "sydes",
                "sylius",
                "symfony",
                "tastyigniter",
                "typo3",
                "wordpress",
                "yawik",
                "zend",
                "zikula"
            ],
            "support": {
                "issues": "https://github.com/composer/installers/issues",
                "source": "https://github.com/composer/installers/tree/v1.12.0"
            },
            "funding": [
                {
                    "url": "https://packagist.com",
                    "type": "custom"
                },
                {
                    "url": "https://github.com/composer",
                    "type": "github"
                },
                {
                    "url": "https://tidelift.com/funding/github/packagist/composer/composer",
                    "type": "tidelift"
                }
            ],
            "time": "2021-09-13T08:19:44+00:00"
        }
    ],
    "packages-dev": [
        {
            "name": "doctrine/instantiator",
            "version": "1.4.1",
            "source": {
                "type": "git",
                "url": "https://github.com/doctrine/instantiator.git",
                "reference": "10dcfce151b967d20fde1b34ae6640712c3891bc"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/doctrine/instantiator/zipball/10dcfce151b967d20fde1b34ae6640712c3891bc",
                "reference": "10dcfce151b967d20fde1b34ae6640712c3891bc",
                "shasum": ""
            },
            "require": {
                "php": "^7.1 || ^8.0"
            },
            "require-dev": {
                "doctrine/coding-standard": "^9",
                "ext-pdo": "*",
                "ext-phar": "*",
                "phpbench/phpbench": "^0.16 || ^1",
                "phpstan/phpstan": "^1.4",
                "phpstan/phpstan-phpunit": "^1",
                "phpunit/phpunit": "^7.5 || ^8.5 || ^9.5",
                "vimeo/psalm": "^4.22"
            },
            "type": "library",
            "autoload": {
                "psr-4": {
                    "Doctrine\\Instantiator\\": "src/Doctrine/Instantiator/"
                }
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "MIT"
            ],
            "authors": [
                {
                    "name": "Marco Pivetta",
                    "email": "ocramius@gmail.com",
                    "homepage": "https://ocramius.github.io/"
                }
            ],
            "description": "A small, lightweight utility to instantiate objects in PHP without invoking their constructors",
            "homepage": "https://www.doctrine-project.org/projects/instantiator.html",
            "keywords": [
                "constructor",
                "instantiate"
            ],
            "support": {
                "issues": "https://github.com/doctrine/instantiator/issues",
                "source": "https://github.com/doctrine/instantiator/tree/1.4.1"
            },
            "funding": [
                {
                    "url": "https://www.doctrine-project.org/sponsorship.html",
                    "type": "custom"
                },
                {
                    "url": "https://www.patreon.com/phpdoctrine",
                    "type": "patreon"
                },
                {
                    "url": "https://tidelift.com/funding/github/packagist/doctrine%2Finstantiator",
                    "type": "tidelift"
                }
            ],
            "time": "2022-03-03T08:28:38+00:00"
        },
        {
            "name": "myclabs/deep-copy",
            "version": "1.11.0",
            "source": {
                "type": "git",
                "url": "https://github.com/myclabs/DeepCopy.git",
                "reference": "14daed4296fae74d9e3201d2c4925d1acb7aa614"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/myclabs/DeepCopy/zipball/14daed4296fae74d9e3201d2c4925d1acb7aa614",
                "reference": "14daed4296fae74d9e3201d2c4925d1acb7aa614",
                "shasum": ""
            },
            "require": {
                "php": "^7.1 || ^8.0"
            },
            "conflict": {
                "doctrine/collections": "<1.6.8",
                "doctrine/common": "<2.13.3 || >=3,<3.2.2"
            },
            "require-dev": {
                "doctrine/collections": "^1.6.8",
                "doctrine/common": "^2.13.3 || ^3.2.2",
                "phpunit/phpunit": "^7.5.20 || ^8.5.23 || ^9.5.13"
            },
            "type": "library",
            "autoload": {
                "files": [
                    "src/DeepCopy/deep_copy.php"
                ],
                "psr-4": {
                    "DeepCopy\\": "src/DeepCopy/"
                }
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "MIT"
            ],
            "description": "Create deep copies (clones) of your objects",
            "keywords": [
                "clone",
                "copy",
                "duplicate",
                "object",
                "object graph"
            ],
            "support": {
                "issues": "https://github.com/myclabs/DeepCopy/issues",
                "source": "https://github.com/myclabs/DeepCopy/tree/1.11.0"
            },
            "funding": [
                {
                    "url": "https://tidelift.com/funding/github/packagist/myclabs/deep-copy",
                    "type": "tidelift"
                }
            ],
            "time": "2022-03-03T13:19:32+00:00"
        },
        {
            "name": "phpdocumentor/reflection-common",
            "version": "2.2.0",
            "source": {
                "type": "git",
                "url": "https://github.com/phpDocumentor/ReflectionCommon.git",
                "reference": "1d01c49d4ed62f25aa84a747ad35d5a16924662b"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/phpDocumentor/ReflectionCommon/zipball/1d01c49d4ed62f25aa84a747ad35d5a16924662b",
                "reference": "1d01c49d4ed62f25aa84a747ad35d5a16924662b",
                "shasum": ""
            },
            "require": {
                "php": "^7.2 || ^8.0"
            },
            "type": "library",
            "extra": {
                "branch-alias": {
                    "dev-2.x": "2.x-dev"
                }
            },
            "autoload": {
                "psr-4": {
                    "phpDocumentor\\Reflection\\": "src/"
                }
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "MIT"
            ],
            "authors": [
                {
                    "name": "Jaap van Otterdijk",
                    "email": "opensource@ijaap.nl"
                }
            ],
            "description": "Common reflection classes used by phpdocumentor to reflect the code structure",
            "homepage": "http://www.phpdoc.org",
            "keywords": [
                "FQSEN",
                "phpDocumentor",
                "phpdoc",
                "reflection",
                "static analysis"
            ],
            "support": {
                "issues": "https://github.com/phpDocumentor/ReflectionCommon/issues",
                "source": "https://github.com/phpDocumentor/ReflectionCommon/tree/2.x"
            },
            "time": "2020-06-27T09:03:43+00:00"
        },
        {
            "name": "phpdocumentor/reflection-docblock",
            "version": "5.3.0",
            "source": {
                "type": "git",
                "url": "https://github.com/phpDocumentor/ReflectionDocBlock.git",
                "reference": "622548b623e81ca6d78b721c5e029f4ce664f170"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/phpDocumentor/ReflectionDocBlock/zipball/622548b623e81ca6d78b721c5e029f4ce664f170",
                "reference": "622548b623e81ca6d78b721c5e029f4ce664f170",
                "shasum": ""
            },
            "require": {
                "ext-filter": "*",
                "php": "^7.2 || ^8.0",
                "phpdocumentor/reflection-common": "^2.2",
                "phpdocumentor/type-resolver": "^1.3",
                "webmozart/assert": "^1.9.1"
            },
            "require-dev": {
                "mockery/mockery": "~1.3.2",
                "psalm/phar": "^4.8"
            },
            "type": "library",
            "extra": {
                "branch-alias": {
                    "dev-master": "5.x-dev"
                }
            },
            "autoload": {
                "psr-4": {
                    "phpDocumentor\\Reflection\\": "src"
                }
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "MIT"
            ],
            "authors": [
                {
                    "name": "Mike van Riel",
                    "email": "me@mikevanriel.com"
                },
                {
                    "name": "Jaap van Otterdijk",
                    "email": "account@ijaap.nl"
                }
            ],
            "description": "With this component, a library can provide support for annotations via DocBlocks or otherwise retrieve information that is embedded in a DocBlock.",
            "support": {
                "issues": "https://github.com/phpDocumentor/ReflectionDocBlock/issues",
                "source": "https://github.com/phpDocumentor/ReflectionDocBlock/tree/5.3.0"
            },
            "time": "2021-10-19T17:43:47+00:00"
        },
        {
            "name": "phpdocumentor/type-resolver",
            "version": "1.6.2",
            "source": {
                "type": "git",
                "url": "https://github.com/phpDocumentor/TypeResolver.git",
                "reference": "48f445a408c131e38cab1c235aa6d2bb7a0bb20d"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/phpDocumentor/TypeResolver/zipball/48f445a408c131e38cab1c235aa6d2bb7a0bb20d",
                "reference": "48f445a408c131e38cab1c235aa6d2bb7a0bb20d",
                "shasum": ""
            },
            "require": {
                "php": "^7.4 || ^8.0",
                "phpdocumentor/reflection-common": "^2.0"
            },
            "require-dev": {
                "ext-tokenizer": "*",
                "phpstan/extension-installer": "^1.1",
                "phpstan/phpstan": "^1.8",
                "phpstan/phpstan-phpunit": "^1.1",
                "phpunit/phpunit": "^9.5",
                "rector/rector": "^0.13.9",
                "vimeo/psalm": "^4.25"
            },
            "type": "library",
            "extra": {
                "branch-alias": {
                    "dev-1.x": "1.x-dev"
                }
            },
            "autoload": {
                "psr-4": {
                    "phpDocumentor\\Reflection\\": "src"
                }
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "MIT"
            ],
            "authors": [
                {
                    "name": "Mike van Riel",
                    "email": "me@mikevanriel.com"
                }
            ],
            "description": "A PSR-5 based resolver of Class names, Types and Structural Element Names",
            "support": {
                "issues": "https://github.com/phpDocumentor/TypeResolver/issues",
                "source": "https://github.com/phpDocumentor/TypeResolver/tree/1.6.2"
            },
            "time": "2022-10-14T12:47:21+00:00"
        },
        {
            "name": "phpspec/prophecy",
            "version": "v1.10.3",
            "source": {
                "type": "git",
                "url": "https://github.com/phpspec/prophecy.git",
                "reference": "451c3cd1418cf640de218914901e51b064abb093"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/phpspec/prophecy/zipball/451c3cd1418cf640de218914901e51b064abb093",
                "reference": "451c3cd1418cf640de218914901e51b064abb093",
                "shasum": ""
            },
            "require": {
                "doctrine/instantiator": "^1.0.2",
                "php": "^5.3|^7.0",
                "phpdocumentor/reflection-docblock": "^2.0|^3.0.2|^4.0|^5.0",
                "sebastian/comparator": "^1.2.3|^2.0|^3.0|^4.0",
                "sebastian/recursion-context": "^1.0|^2.0|^3.0|^4.0"
            },
            "require-dev": {
                "phpspec/phpspec": "^2.5 || ^3.2",
                "phpunit/phpunit": "^4.8.35 || ^5.7 || ^6.5 || ^7.1"
            },
            "type": "library",
            "extra": {
                "branch-alias": {
                    "dev-master": "1.10.x-dev"
                }
            },
            "autoload": {
                "psr-4": {
                    "Prophecy\\": "src/Prophecy"
                }
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "MIT"
            ],
            "authors": [
                {
                    "name": "Konstantin Kudryashov",
                    "email": "ever.zet@gmail.com",
                    "homepage": "http://everzet.com"
                },
                {
                    "name": "Marcello Duarte",
                    "email": "marcello.duarte@gmail.com"
                }
            ],
            "description": "Highly opinionated mocking framework for PHP 5.3+",
            "homepage": "https://github.com/phpspec/prophecy",
            "keywords": [
                "Double",
                "Dummy",
                "fake",
                "mock",
                "spy",
                "stub"
            ],
            "support": {
                "issues": "https://github.com/phpspec/prophecy/issues",
                "source": "https://github.com/phpspec/prophecy/tree/v1.10.3"
            },
            "time": "2020-03-05T15:02:03+00:00"
        },
        {
            "name": "phpunit/php-code-coverage",
            "version": "4.0.8",
            "source": {
                "type": "git",
                "url": "https://github.com/sebastianbergmann/php-code-coverage.git",
                "reference": "ef7b2f56815df854e66ceaee8ebe9393ae36a40d"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/sebastianbergmann/php-code-coverage/zipball/ef7b2f56815df854e66ceaee8ebe9393ae36a40d",
                "reference": "ef7b2f56815df854e66ceaee8ebe9393ae36a40d",
                "shasum": ""
            },
            "require": {
                "ext-dom": "*",
                "ext-xmlwriter": "*",
                "php": "^5.6 || ^7.0",
                "phpunit/php-file-iterator": "^1.3",
                "phpunit/php-text-template": "^1.2",
                "phpunit/php-token-stream": "^1.4.2 || ^2.0",
                "sebastian/code-unit-reverse-lookup": "^1.0",
                "sebastian/environment": "^1.3.2 || ^2.0",
                "sebastian/version": "^1.0 || ^2.0"
            },
            "require-dev": {
                "ext-xdebug": "^2.1.4",
                "phpunit/phpunit": "^5.7"
            },
            "suggest": {
                "ext-xdebug": "^2.5.1"
            },
            "type": "library",
            "extra": {
                "branch-alias": {
                    "dev-master": "4.0.x-dev"
                }
            },
            "autoload": {
                "classmap": [
                    "src/"
                ]
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "BSD-3-Clause"
            ],
            "authors": [
                {
                    "name": "Sebastian Bergmann",
                    "email": "sb@sebastian-bergmann.de",
                    "role": "lead"
                }
            ],
            "description": "Library that provides collection, processing, and rendering functionality for PHP code coverage information.",
            "homepage": "https://github.com/sebastianbergmann/php-code-coverage",
            "keywords": [
                "coverage",
                "testing",
                "xunit"
            ],
            "support": {
                "irc": "irc://irc.freenode.net/phpunit",
                "issues": "https://github.com/sebastianbergmann/php-code-coverage/issues",
                "source": "https://github.com/sebastianbergmann/php-code-coverage/tree/4.0"
            },
            "time": "2017-04-02T07:44:40+00:00"
        },
        {
            "name": "phpunit/php-file-iterator",
            "version": "1.4.5",
            "source": {
                "type": "git",
                "url": "https://github.com/sebastianbergmann/php-file-iterator.git",
                "reference": "730b01bc3e867237eaac355e06a36b85dd93a8b4"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/sebastianbergmann/php-file-iterator/zipball/730b01bc3e867237eaac355e06a36b85dd93a8b4",
                "reference": "730b01bc3e867237eaac355e06a36b85dd93a8b4",
                "shasum": ""
            },
            "require": {
                "php": ">=5.3.3"
            },
            "type": "library",
            "extra": {
                "branch-alias": {
                    "dev-master": "1.4.x-dev"
                }
            },
            "autoload": {
                "classmap": [
                    "src/"
                ]
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "BSD-3-Clause"
            ],
            "authors": [
                {
                    "name": "Sebastian Bergmann",
                    "email": "sb@sebastian-bergmann.de",
                    "role": "lead"
                }
            ],
            "description": "FilterIterator implementation that filters files based on a list of suffixes.",
            "homepage": "https://github.com/sebastianbergmann/php-file-iterator/",
            "keywords": [
                "filesystem",
                "iterator"
            ],
            "support": {
                "irc": "irc://irc.freenode.net/phpunit",
                "issues": "https://github.com/sebastianbergmann/php-file-iterator/issues",
                "source": "https://github.com/sebastianbergmann/php-file-iterator/tree/1.4.5"
            },
            "time": "2017-11-27T13:52:08+00:00"
        },
        {
            "name": "phpunit/php-text-template",
            "version": "1.2.1",
            "source": {
                "type": "git",
                "url": "https://github.com/sebastianbergmann/php-text-template.git",
                "reference": "31f8b717e51d9a2afca6c9f046f5d69fc27c8686"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/sebastianbergmann/php-text-template/zipball/31f8b717e51d9a2afca6c9f046f5d69fc27c8686",
                "reference": "31f8b717e51d9a2afca6c9f046f5d69fc27c8686",
                "shasum": ""
            },
            "require": {
                "php": ">=5.3.3"
            },
            "type": "library",
            "autoload": {
                "classmap": [
                    "src/"
                ]
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "BSD-3-Clause"
            ],
            "authors": [
                {
                    "name": "Sebastian Bergmann",
                    "email": "sebastian@phpunit.de",
                    "role": "lead"
                }
            ],
            "description": "Simple template engine.",
            "homepage": "https://github.com/sebastianbergmann/php-text-template/",
            "keywords": [
                "template"
            ],
            "support": {
                "issues": "https://github.com/sebastianbergmann/php-text-template/issues",
                "source": "https://github.com/sebastianbergmann/php-text-template/tree/1.2.1"
            },
            "time": "2015-06-21T13:50:34+00:00"
        },
        {
            "name": "phpunit/php-timer",
            "version": "1.0.9",
            "source": {
                "type": "git",
                "url": "https://github.com/sebastianbergmann/php-timer.git",
                "reference": "3dcf38ca72b158baf0bc245e9184d3fdffa9c46f"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/sebastianbergmann/php-timer/zipball/3dcf38ca72b158baf0bc245e9184d3fdffa9c46f",
                "reference": "3dcf38ca72b158baf0bc245e9184d3fdffa9c46f",
                "shasum": ""
            },
            "require": {
                "php": "^5.3.3 || ^7.0"
            },
            "require-dev": {
                "phpunit/phpunit": "^4.8.35 || ^5.7 || ^6.0"
            },
            "type": "library",
            "extra": {
                "branch-alias": {
                    "dev-master": "1.0-dev"
                }
            },
            "autoload": {
                "classmap": [
                    "src/"
                ]
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "BSD-3-Clause"
            ],
            "authors": [
                {
                    "name": "Sebastian Bergmann",
                    "email": "sb@sebastian-bergmann.de",
                    "role": "lead"
                }
            ],
            "description": "Utility class for timing",
            "homepage": "https://github.com/sebastianbergmann/php-timer/",
            "keywords": [
                "timer"
            ],
            "support": {
                "issues": "https://github.com/sebastianbergmann/php-timer/issues",
                "source": "https://github.com/sebastianbergmann/php-timer/tree/master"
            },
            "time": "2017-02-26T11:10:40+00:00"
        },
        {
            "name": "phpunit/php-token-stream",
            "version": "2.0.2",
            "source": {
                "type": "git",
                "url": "https://github.com/sebastianbergmann/php-token-stream.git",
                "reference": "791198a2c6254db10131eecfe8c06670700904db"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/sebastianbergmann/php-token-stream/zipball/791198a2c6254db10131eecfe8c06670700904db",
                "reference": "791198a2c6254db10131eecfe8c06670700904db",
                "shasum": ""
            },
            "require": {
                "ext-tokenizer": "*",
                "php": "^7.0"
            },
            "require-dev": {
                "phpunit/phpunit": "^6.2.4"
            },
            "type": "library",
            "extra": {
                "branch-alias": {
                    "dev-master": "2.0-dev"
                }
            },
            "autoload": {
                "classmap": [
                    "src/"
                ]
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "BSD-3-Clause"
            ],
            "authors": [
                {
                    "name": "Sebastian Bergmann",
                    "email": "sebastian@phpunit.de"
                }
            ],
            "description": "Wrapper around PHP's tokenizer extension.",
            "homepage": "https://github.com/sebastianbergmann/php-token-stream/",
            "keywords": [
                "tokenizer"
            ],
            "support": {
                "issues": "https://github.com/sebastianbergmann/php-token-stream/issues",
                "source": "https://github.com/sebastianbergmann/php-token-stream/tree/master"
            },
            "abandoned": true,
            "time": "2017-11-27T05:48:46+00:00"
        },
        {
            "name": "phpunit/phpunit",
            "version": "5.7.19",
            "source": {
                "type": "git",
                "url": "https://github.com/sebastianbergmann/phpunit.git",
                "reference": "69c4f49ff376af2692bad9cebd883d17ebaa98a1"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/sebastianbergmann/phpunit/zipball/69c4f49ff376af2692bad9cebd883d17ebaa98a1",
                "reference": "69c4f49ff376af2692bad9cebd883d17ebaa98a1",
                "shasum": ""
            },
            "require": {
                "ext-dom": "*",
                "ext-json": "*",
                "ext-libxml": "*",
                "ext-mbstring": "*",
                "ext-xml": "*",
                "myclabs/deep-copy": "~1.3",
                "php": "^5.6 || ^7.0",
                "phpspec/prophecy": "^1.6.2",
                "phpunit/php-code-coverage": "^4.0.4",
                "phpunit/php-file-iterator": "~1.4",
                "phpunit/php-text-template": "~1.2",
                "phpunit/php-timer": "^1.0.6",
                "phpunit/phpunit-mock-objects": "^3.2",
                "sebastian/comparator": "^1.2.4",
                "sebastian/diff": "~1.2",
                "sebastian/environment": "^1.3.4 || ^2.0",
                "sebastian/exporter": "~2.0",
                "sebastian/global-state": "^1.1",
                "sebastian/object-enumerator": "~2.0",
                "sebastian/resource-operations": "~1.0",
                "sebastian/version": "~1.0.3|~2.0",
                "symfony/yaml": "~2.1|~3.0"
            },
            "conflict": {
                "phpdocumentor/reflection-docblock": "3.0.2"
            },
            "require-dev": {
                "ext-pdo": "*"
            },
            "suggest": {
                "ext-xdebug": "*",
                "phpunit/php-invoker": "~1.1"
            },
            "bin": [
                "phpunit"
            ],
            "type": "library",
            "extra": {
                "branch-alias": {
                    "dev-master": "5.7.x-dev"
                }
            },
            "autoload": {
                "classmap": [
                    "src/"
                ]
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "BSD-3-Clause"
            ],
            "authors": [
                {
                    "name": "Sebastian Bergmann",
                    "email": "sebastian@phpunit.de",
                    "role": "lead"
                }
            ],
            "description": "The PHP Unit Testing framework.",
            "homepage": "https://phpunit.de/",
            "keywords": [
                "phpunit",
                "testing",
                "xunit"
            ],
            "support": {
                "issues": "https://github.com/sebastianbergmann/phpunit/issues",
                "source": "https://github.com/sebastianbergmann/phpunit/tree/5.7.19"
            },
            "time": "2017-04-03T02:22:27+00:00"
        },
        {
            "name": "phpunit/phpunit-mock-objects",
            "version": "3.4.4",
            "source": {
                "type": "git",
                "url": "https://github.com/sebastianbergmann/phpunit-mock-objects.git",
                "reference": "a23b761686d50a560cc56233b9ecf49597cc9118"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/sebastianbergmann/phpunit-mock-objects/zipball/a23b761686d50a560cc56233b9ecf49597cc9118",
                "reference": "a23b761686d50a560cc56233b9ecf49597cc9118",
                "shasum": ""
            },
            "require": {
                "doctrine/instantiator": "^1.0.2",
                "php": "^5.6 || ^7.0",
                "phpunit/php-text-template": "^1.2",
                "sebastian/exporter": "^1.2 || ^2.0"
            },
            "conflict": {
                "phpunit/phpunit": "<5.4.0"
            },
            "require-dev": {
                "phpunit/phpunit": "^5.4"
            },
            "suggest": {
                "ext-soap": "*"
            },
            "type": "library",
            "extra": {
                "branch-alias": {
                    "dev-master": "3.2.x-dev"
                }
            },
            "autoload": {
                "classmap": [
                    "src/"
                ]
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "BSD-3-Clause"
            ],
            "authors": [
                {
                    "name": "Sebastian Bergmann",
                    "email": "sb@sebastian-bergmann.de",
                    "role": "lead"
                }
            ],
            "description": "Mock Object library for PHPUnit",
            "homepage": "https://github.com/sebastianbergmann/phpunit-mock-objects/",
            "keywords": [
                "mock",
                "xunit"
            ],
            "support": {
                "irc": "irc://irc.freenode.net/phpunit",
                "issues": "https://github.com/sebastianbergmann/phpunit-mock-objects/issues",
                "source": "https://github.com/sebastianbergmann/phpunit-mock-objects/tree/3.4"
            },
            "abandoned": true,
            "time": "2017-06-30T09:13:00+00:00"
        },
        {
            "name": "sebastian/code-unit-reverse-lookup",
            "version": "1.0.2",
            "source": {
                "type": "git",
                "url": "https://github.com/sebastianbergmann/code-unit-reverse-lookup.git",
                "reference": "1de8cd5c010cb153fcd68b8d0f64606f523f7619"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/sebastianbergmann/code-unit-reverse-lookup/zipball/1de8cd5c010cb153fcd68b8d0f64606f523f7619",
                "reference": "1de8cd5c010cb153fcd68b8d0f64606f523f7619",
                "shasum": ""
            },
            "require": {
                "php": ">=5.6"
            },
            "require-dev": {
                "phpunit/phpunit": "^8.5"
            },
            "type": "library",
            "extra": {
                "branch-alias": {
                    "dev-master": "1.0.x-dev"
                }
            },
            "autoload": {
                "classmap": [
                    "src/"
                ]
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "BSD-3-Clause"
            ],
            "authors": [
                {
                    "name": "Sebastian Bergmann",
                    "email": "sebastian@phpunit.de"
                }
            ],
            "description": "Looks up which function or method a line of code belongs to",
            "homepage": "https://github.com/sebastianbergmann/code-unit-reverse-lookup/",
            "support": {
                "issues": "https://github.com/sebastianbergmann/code-unit-reverse-lookup/issues",
                "source": "https://github.com/sebastianbergmann/code-unit-reverse-lookup/tree/1.0.2"
            },
            "funding": [
                {
                    "url": "https://github.com/sebastianbergmann",
                    "type": "github"
                }
            ],
            "time": "2020-11-30T08:15:22+00:00"
        },
        {
            "name": "sebastian/comparator",
            "version": "1.2.4",
            "source": {
                "type": "git",
                "url": "https://github.com/sebastianbergmann/comparator.git",
                "reference": "2b7424b55f5047b47ac6e5ccb20b2aea4011d9be"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/sebastianbergmann/comparator/zipball/2b7424b55f5047b47ac6e5ccb20b2aea4011d9be",
                "reference": "2b7424b55f5047b47ac6e5ccb20b2aea4011d9be",
                "shasum": ""
            },
            "require": {
                "php": ">=5.3.3",
                "sebastian/diff": "~1.2",
                "sebastian/exporter": "~1.2 || ~2.0"
            },
            "require-dev": {
                "phpunit/phpunit": "~4.4"
            },
            "type": "library",
            "extra": {
                "branch-alias": {
                    "dev-master": "1.2.x-dev"
                }
            },
            "autoload": {
                "classmap": [
                    "src/"
                ]
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "BSD-3-Clause"
            ],
            "authors": [
                {
                    "name": "Jeff Welch",
                    "email": "whatthejeff@gmail.com"
                },
                {
                    "name": "Volker Dusch",
                    "email": "github@wallbash.com"
                },
                {
                    "name": "Bernhard Schussek",
                    "email": "bschussek@2bepublished.at"
                },
                {
                    "name": "Sebastian Bergmann",
                    "email": "sebastian@phpunit.de"
                }
            ],
            "description": "Provides the functionality to compare PHP values for equality",
            "homepage": "http://www.github.com/sebastianbergmann/comparator",
            "keywords": [
                "comparator",
                "compare",
                "equality"
            ],
            "support": {
                "issues": "https://github.com/sebastianbergmann/comparator/issues",
                "source": "https://github.com/sebastianbergmann/comparator/tree/1.2"
            },
            "time": "2017-01-29T09:50:25+00:00"
        },
        {
            "name": "sebastian/diff",
            "version": "1.4.3",
            "source": {
                "type": "git",
                "url": "https://github.com/sebastianbergmann/diff.git",
                "reference": "7f066a26a962dbe58ddea9f72a4e82874a3975a4"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/sebastianbergmann/diff/zipball/7f066a26a962dbe58ddea9f72a4e82874a3975a4",
                "reference": "7f066a26a962dbe58ddea9f72a4e82874a3975a4",
                "shasum": ""
            },
            "require": {
                "php": "^5.3.3 || ^7.0"
            },
            "require-dev": {
                "phpunit/phpunit": "^4.8.35 || ^5.7 || ^6.0"
            },
            "type": "library",
            "extra": {
                "branch-alias": {
                    "dev-master": "1.4-dev"
                }
            },
            "autoload": {
                "classmap": [
                    "src/"
                ]
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "BSD-3-Clause"
            ],
            "authors": [
                {
                    "name": "Kore Nordmann",
                    "email": "mail@kore-nordmann.de"
                },
                {
                    "name": "Sebastian Bergmann",
                    "email": "sebastian@phpunit.de"
                }
            ],
            "description": "Diff implementation",
            "homepage": "https://github.com/sebastianbergmann/diff",
            "keywords": [
                "diff"
            ],
            "support": {
                "issues": "https://github.com/sebastianbergmann/diff/issues",
                "source": "https://github.com/sebastianbergmann/diff/tree/1.4"
            },
            "time": "2017-05-22T07:24:03+00:00"
        },
        {
            "name": "sebastian/environment",
            "version": "2.0.0",
            "source": {
                "type": "git",
                "url": "https://github.com/sebastianbergmann/environment.git",
                "reference": "5795ffe5dc5b02460c3e34222fee8cbe245d8fac"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/sebastianbergmann/environment/zipball/5795ffe5dc5b02460c3e34222fee8cbe245d8fac",
                "reference": "5795ffe5dc5b02460c3e34222fee8cbe245d8fac",
                "shasum": ""
            },
            "require": {
                "php": "^5.6 || ^7.0"
            },
            "require-dev": {
                "phpunit/phpunit": "^5.0"
            },
            "type": "library",
            "extra": {
                "branch-alias": {
                    "dev-master": "2.0.x-dev"
                }
            },
            "autoload": {
                "classmap": [
                    "src/"
                ]
            },
            "notification-url": "https://packagist.org/downloads/",
            "license": [
                "BSD-3-Clause"
            ],
            "authors": [
                {
                    "name": "Sebastian Bergmann",
                    "email": "sebastian@phpunit.de"
                }
            ],
            "description": "Provides functionality to handle HHVM/PHP environments",
            "homepage": "http://www.github.com/sebastianbergmann/environment",
            "keywords": [
                "Xdebug",
                "environment",
                "hhvm"
            ],
            "support": {
                "issues": "https://github.com/sebastianbergmann/environment/issues",
                "source": "https://github.com/sebastianbergmann/environment/tree/master"
            },
            "time": "2016-11-26T07:53:53+00:00"
        },
        {
            "name": "sebastian/exporter",
            "version": "2.0.0",
            "source": {
                "type": "git",
                "url": "https://github.com/sebastianbergmann/exporter.git",
                "reference": "ce474bdd1a34744d7ac5d6aad3a46d48d9bac4c4"
            },
            "dist": {
                "type": "zip",
                "url": "https://api.github.com/repos/sebastianbergmann/exporter/zipball/ce474bdd1a34744d7ac5d6aad3a46d48d9bac4c4",
                "reference": "ce474bdd1a34744d7ac5d6aad3a46d48d9bac4c4",
                "shasum": ""
            },
            "require": {
                "php": ">=5.3.3",
                "sebastian/recursion-context": "~2.0"
            },
            "require-dev": {
                "ext-mbstring": "*",
                "phpunit/phpunit": "~4.4"
            },
            "type": "library",
            "extra": {
                "branch-alias": {
                    "dev-master": "2.0.x-dev"
                }
            },
            "autoload": {
                "classmap": [
                    "src/"
                ]
            },
            "notification-url": "https://packagist.org/downloa